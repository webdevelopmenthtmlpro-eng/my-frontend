function jf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $g={exports:{}},Dc={};var mb;function y1(){if(mb)return Dc;mb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,u){var d=null;if(u!==void 0&&(d=""+u),a.key!==void 0&&(d=""+a.key),"key"in a){u={};for(var g in a)g!=="key"&&(u[g]=a[g])}else u=a;return a=u.ref,{$$typeof:n,type:s,key:d,ref:a!==void 0?a:null,props:u}}return Dc.Fragment=e,Dc.jsx=t,Dc.jsxs=t,Dc}var vb;function _1(){return vb||(vb=1,$g.exports=y1()),$g.exports}var x=_1(),Yg={exports:{}},lt={};var yb;function b1(){if(yb)return lt;yb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.iterator;function O(N){return N===null||typeof N!="object"?null:(N=I&&N[I]||N["@@iterator"],typeof N=="function"?N:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,B={};function te(N,F,K){this.props=N,this.context=F,this.refs=B,this.updater=K||D}te.prototype.isReactComponent={},te.prototype.setState=function(N,F){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,F,"setState")},te.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function X(){}X.prototype=te.prototype;function le(N,F,K){this.props=N,this.context=F,this.refs=B,this.updater=K||D}var oe=le.prototype=new X;oe.constructor=le,H(oe,te.prototype),oe.isPureReactComponent=!0;var ae=Array.isArray;function re(){}var V={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function M(N,F,K){var se=K.ref;return{$$typeof:n,type:N,key:F,ref:se!==void 0?se:null,props:K}}function q(N,F){return M(N.type,F,N.props)}function G(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Z(N){var F={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(K){return F[K]})}var U=/\/+/g;function Pe(N,F){return typeof N=="object"&&N!==null&&N.key!=null?Z(""+N.key):F.toString(36)}function ke(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(re,re):(N.status="pending",N.then(function(F){N.status==="pending"&&(N.status="fulfilled",N.value=F)},function(F){N.status==="pending"&&(N.status="rejected",N.reason=F)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ie(N,F,K,se,$){var ce=typeof N;(ce==="undefined"||ce==="boolean")&&(N=null);var we=!1;if(N===null)we=!0;else switch(ce){case"bigint":case"string":case"number":we=!0;break;case"object":switch(N.$$typeof){case n:case e:we=!0;break;case E:return we=N._init,ie(we(N._payload),F,K,se,$)}}if(we)return $=$(N),we=se===""?"."+Pe(N,0):se,ae($)?(K="",we!=null&&(K=we.replace(U,"$&/")+"/"),ie($,F,K,"",function(Ie){return Ie})):$!=null&&(G($)&&($=q($,K+($.key==null||N&&N.key===$.key?"":(""+$.key).replace(U,"$&/")+"/")+we)),F.push($)),1;we=0;var Re=se===""?".":se+":";if(ae(N))for(var je=0;je<N.length;je++)se=N[je],ce=Re+Pe(se,je),we+=ie(se,F,K,ce,$);else if(je=O(N),typeof je=="function")for(N=je.call(N),je=0;!(se=N.next()).done;)se=se.value,ce=Re+Pe(se,je++),we+=ie(se,F,K,ce,$);else if(ce==="object"){if(typeof N.then=="function")return ie(ke(N),F,K,se,$);throw F=String(N),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return we}function J(N,F,K){if(N==null)return N;var se=[],$=0;return ie(N,se,"","",function(ce){return F.call(K,ce,$++)}),se}function ee(N){if(N._status===-1){var F=N._result;F=F(),F.then(function(K){(N._status===0||N._status===-1)&&(N._status=1,N._result=K)},function(K){(N._status===0||N._status===-1)&&(N._status=2,N._result=K)}),N._status===-1&&(N._status=0,N._result=F)}if(N._status===1)return N._result.default;throw N._result}var de=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Q={map:J,forEach:function(N,F,K){J(N,function(){F.apply(this,arguments)},K)},count:function(N){var F=0;return J(N,function(){F++}),F},toArray:function(N){return J(N,function(F){return F})||[]},only:function(N){if(!G(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return lt.Activity=S,lt.Children=Q,lt.Component=te,lt.Fragment=t,lt.Profiler=a,lt.PureComponent=le,lt.StrictMode=s,lt.Suspense=v,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,lt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return V.H.useMemoCache(N)}},lt.cache=function(N){return function(){return N.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(N,F,K){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=H({},N.props),$=N.key;if(F!=null)for(ce in F.key!==void 0&&($=""+F.key),F)!z.call(F,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&F.ref===void 0||(se[ce]=F[ce]);var ce=arguments.length-2;if(ce===1)se.children=K;else if(1<ce){for(var we=Array(ce),Re=0;Re<ce;Re++)we[Re]=arguments[Re+2];se.children=we}return M(N.type,$,se)},lt.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},lt.createElement=function(N,F,K){var se,$={},ce=null;if(F!=null)for(se in F.key!==void 0&&(ce=""+F.key),F)z.call(F,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&($[se]=F[se]);var we=arguments.length-2;if(we===1)$.children=K;else if(1<we){for(var Re=Array(we),je=0;je<we;je++)Re[je]=arguments[je+2];$.children=Re}if(N&&N.defaultProps)for(se in we=N.defaultProps,we)$[se]===void 0&&($[se]=we[se]);return M(N,ce,$)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(N){return{$$typeof:g,render:N}},lt.isValidElement=G,lt.lazy=function(N){return{$$typeof:E,_payload:{_status:-1,_result:N},_init:ee}},lt.memo=function(N,F){return{$$typeof:_,type:N,compare:F===void 0?null:F}},lt.startTransition=function(N){var F=V.T,K={};V.T=K;try{var se=N(),$=V.S;$!==null&&$(K,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(re,de)}catch(ce){de(ce)}finally{F!==null&&K.types!==null&&(F.types=K.types),V.T=F}},lt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},lt.use=function(N){return V.H.use(N)},lt.useActionState=function(N,F,K){return V.H.useActionState(N,F,K)},lt.useCallback=function(N,F){return V.H.useCallback(N,F)},lt.useContext=function(N){return V.H.useContext(N)},lt.useDebugValue=function(){},lt.useDeferredValue=function(N,F){return V.H.useDeferredValue(N,F)},lt.useEffect=function(N,F){return V.H.useEffect(N,F)},lt.useEffectEvent=function(N){return V.H.useEffectEvent(N)},lt.useId=function(){return V.H.useId()},lt.useImperativeHandle=function(N,F,K){return V.H.useImperativeHandle(N,F,K)},lt.useInsertionEffect=function(N,F){return V.H.useInsertionEffect(N,F)},lt.useLayoutEffect=function(N,F){return V.H.useLayoutEffect(N,F)},lt.useMemo=function(N,F){return V.H.useMemo(N,F)},lt.useOptimistic=function(N,F){return V.H.useOptimistic(N,F)},lt.useReducer=function(N,F,K){return V.H.useReducer(N,F,K)},lt.useRef=function(N){return V.H.useRef(N)},lt.useState=function(N){return V.H.useState(N)},lt.useSyncExternalStore=function(N,F,K){return V.H.useSyncExternalStore(N,F,K)},lt.useTransition=function(){return V.H.useTransition()},lt.version="19.2.0",lt}var _b;function hv(){return _b||(_b=1,Yg.exports=b1()),Yg.exports}var w=hv();const dv=jf(w);var Qg={exports:{}},Nc={},Xg={exports:{}},Jg={};var bb;function w1(){return bb||(bb=1,(function(n){function e(ie,J){var ee=ie.length;ie.push(J);e:for(;0<ee;){var de=ee-1>>>1,Q=ie[de];if(0<a(Q,J))ie[de]=J,ie[ee]=Q,ee=de;else break e}}function t(ie){return ie.length===0?null:ie[0]}function s(ie){if(ie.length===0)return null;var J=ie[0],ee=ie.pop();if(ee!==J){ie[0]=ee;e:for(var de=0,Q=ie.length,N=Q>>>1;de<N;){var F=2*(de+1)-1,K=ie[F],se=F+1,$=ie[se];if(0>a(K,ee))se<Q&&0>a($,K)?(ie[de]=$,ie[se]=ee,de=se):(ie[de]=K,ie[F]=ee,de=F);else if(se<Q&&0>a($,ee))ie[de]=$,ie[se]=ee,de=se;else break e}}return J}function a(ie,J){var ee=ie.sortIndex-J.sortIndex;return ee!==0?ee:ie.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();n.unstable_now=function(){return d.now()-g}}var v=[],_=[],E=1,S=null,I=3,O=!1,D=!1,H=!1,B=!1,te=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function oe(ie){for(var J=t(_);J!==null;){if(J.callback===null)s(_);else if(J.startTime<=ie)s(_),J.sortIndex=J.expirationTime,e(v,J);else break;J=t(_)}}function ae(ie){if(H=!1,oe(ie),!D)if(t(v)!==null)D=!0,re||(re=!0,Z());else{var J=t(_);J!==null&&ke(ae,J.startTime-ie)}}var re=!1,V=-1,z=5,M=-1;function q(){return B?!0:!(n.unstable_now()-M<z)}function G(){if(B=!1,re){var ie=n.unstable_now();M=ie;var J=!0;try{e:{D=!1,H&&(H=!1,X(V),V=-1),O=!0;var ee=I;try{t:{for(oe(ie),S=t(v);S!==null&&!(S.expirationTime>ie&&q());){var de=S.callback;if(typeof de=="function"){S.callback=null,I=S.priorityLevel;var Q=de(S.expirationTime<=ie);if(ie=n.unstable_now(),typeof Q=="function"){S.callback=Q,oe(ie),J=!0;break t}S===t(v)&&s(v),oe(ie)}else s(v);S=t(v)}if(S!==null)J=!0;else{var N=t(_);N!==null&&ke(ae,N.startTime-ie),J=!1}}break e}finally{S=null,I=ee,O=!1}J=void 0}}finally{J?Z():re=!1}}}var Z;if(typeof le=="function")Z=function(){le(G)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Pe=U.port2;U.port1.onmessage=G,Z=function(){Pe.postMessage(null)}}else Z=function(){te(G,0)};function ke(ie,J){V=te(function(){ie(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_next=function(ie){switch(I){case 1:case 2:case 3:var J=3;break;default:J=I}var ee=I;I=J;try{return ie()}finally{I=ee}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(ie,J){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ee=I;I=ie;try{return J()}finally{I=ee}},n.unstable_scheduleCallback=function(ie,J,ee){var de=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?de+ee:de):ee=de,ie){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ee+Q,ie={id:E++,callback:J,priorityLevel:ie,startTime:ee,expirationTime:Q,sortIndex:-1},ee>de?(ie.sortIndex=ee,e(_,ie),t(v)===null&&ie===t(_)&&(H?(X(V),V=-1):H=!0,ke(ae,ee-de))):(ie.sortIndex=Q,e(v,ie),D||O||(D=!0,re||(re=!0,Z()))),ie},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(ie){var J=I;return function(){var ee=I;I=J;try{return ie.apply(this,arguments)}finally{I=ee}}}})(Jg)),Jg}var wb;function E1(){return wb||(wb=1,Xg.exports=w1()),Xg.exports}var em={exports:{}},bi={};var Eb;function T1(){if(Eb)return bi;Eb=1;var n=hv();function e(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(v,_,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:S==null?null:""+S,children:v,containerInfo:_,implementation:E}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return bi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bi.createPortal=function(v,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(v,_,null,E)},bi.flushSync=function(v){var _=d.T,E=s.p;try{if(d.T=null,s.p=2,v)return v()}finally{d.T=_,s.p=E,s.d.f()}},bi.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(v,_))},bi.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},bi.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var E=_.as,S=g(E,_.crossOrigin),I=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?s.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:I,fetchPriority:O}):E==="script"&&s.d.X(v,{crossOrigin:S,integrity:I,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},bi.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=g(_.as,_.crossOrigin);s.d.M(v,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(v)},bi.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,S=g(E,_.crossOrigin);s.d.L(v,E,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},bi.preloadModule=function(v,_){if(typeof v=="string")if(_){var E=g(_.as,_.crossOrigin);s.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(v)},bi.requestFormReset=function(v){s.d.r(v)},bi.unstable_batchedUpdates=function(v,_){return v(_)},bi.useFormState=function(v,_,E){return d.H.useFormState(v,_,E)},bi.useFormStatus=function(){return d.H.useHostTransitionStatus()},bi.version="19.2.0",bi}var Tb;function OT(){if(Tb)return em.exports;Tb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),em.exports=T1(),em.exports}var Sb;function S1(){if(Sb)return Nc;Sb=1;var n=E1(),e=hv(),t=OT();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function d(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function g(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function v(i){if(u(i)!==i)throw Error(s(188))}function _(i){var r=i.alternate;if(!r){if(r=u(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,h=r;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return v(m),i;if(y===h)return v(m),r;y=y.sibling}throw Error(s(188))}if(l.return!==h.return)l=m,h=y;else{for(var A=!1,P=m.child;P;){if(P===l){A=!0,l=m,h=y;break}if(P===h){A=!0,h=m,l=y;break}P=P.sibling}if(!A){for(P=y.child;P;){if(P===l){A=!0,l=y,h=m;break}if(P===h){A=!0,h=y,l=m;break}P=P.sibling}if(!A)throw Error(s(189))}}if(l.alternate!==h)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function E(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=E(i),r!==null)return r;i=i.sibling}return null}var S=Object.assign,I=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),le=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=G&&i[G]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function Pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case H:return"Fragment";case te:return"Profiler";case B:return"StrictMode";case ae:return"Suspense";case re:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case D:return"Portal";case le:return i.displayName||"Context";case X:return(i._context.displayName||"Context")+".Consumer";case oe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case V:return r=i.displayName||null,r!==null?r:Pe(i.type)||"Memo";case z:r=i._payload,i=i._init;try{return Pe(i(r))}catch{}}return null}var ke=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},de=[],Q=-1;function N(i){return{current:i}}function F(i){0>Q||(i.current=de[Q],de[Q]=null,Q--)}function K(i,r){Q++,de[Q]=i.current,i.current=r}var se=N(null),$=N(null),ce=N(null),we=N(null);function Re(i,r){switch(K(ce,r),K($,i),K(se,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?j0(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=j0(r),i=U0(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}F(se),K(se,i)}function je(){F(se),F($),F(ce)}function Ie(i){i.memoizedState!==null&&K(we,i);var r=se.current,l=U0(r,i.type);r!==l&&(K($,i),K(se,l))}function Me(i){$.current===i&&(F(se),F($)),we.current===i&&(F(we),Rc._currentValue=ee)}var Xe,Je;function it(i){if(Xe===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Xe=r&&r[1]||"",Je=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+i+Je}var et=!1;function En(i,r){if(!i||et)return"";et=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(be){var ye=be}Reflect.construct(i,[],Ae)}else{try{Ae.call()}catch(be){ye=be}i.call(Ae.prototype)}}else{try{throw Error()}catch(be){ye=be}(Ae=i())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(be){if(be&&ye&&typeof be.stack=="string")return[be.stack,ye.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),A=y[0],P=y[1];if(A&&P){var Y=A.split(`
`),me=P.split(`
`);for(m=h=0;h<Y.length&&!Y[h].includes("DetermineComponentFrameRoot");)h++;for(;m<me.length&&!me[m].includes("DetermineComponentFrameRoot");)m++;if(h===Y.length||m===me.length)for(h=Y.length-1,m=me.length-1;1<=h&&0<=m&&Y[h]!==me[m];)m--;for(;1<=h&&0<=m;h--,m--)if(Y[h]!==me[m]){if(h!==1||m!==1)do if(h--,m--,0>m||Y[h]!==me[m]){var Te=`
`+Y[h].replace(" at new "," at ");return i.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",i.displayName)),Te}while(1<=h&&0<=m);break}}}finally{et=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?it(l):""}function Ni(i,r){switch(i.tag){case 26:case 27:case 5:return it(i.type);case 16:return it("Lazy");case 13:return i.child!==r&&r!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return En(i.type,!1);case 11:return En(i.type.render,!1);case 1:return En(i.type,!0);case 31:return it("Activity");default:return""}}function zi(i){try{var r="",l=null;do r+=Ni(i,l),l=i,i=i.return;while(i);return r}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var di=Object.prototype.hasOwnProperty,fe=n.unstable_scheduleCallback,ze=n.unstable_cancelCallback,$e=n.unstable_shouldYield,an=n.unstable_requestPaint,kt=n.unstable_now,$t=n.unstable_getCurrentPriorityLevel,ot=n.unstable_ImmediatePriority,mt=n.unstable_UserBlockingPriority,Ln=n.unstable_NormalPriority,bs=n.unstable_LowPriority,rs=n.unstable_IdlePriority,xi=n.log,Ci=n.unstable_setDisableYieldValue,fi=null,cn=null;function In(i){if(typeof xi=="function"&&Ci(i),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(fi,i)}catch{}}var Rn=Math.clz32?Math.clz32:Vs,Vi=Math.log,ur=Math.LN2;function Vs(i){return i>>>=0,i===0?32:31-(Vi(i)/ur|0)|0}var os=256,pi=262144,ji=4194304;function Zn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ti(i,r,l){var h=i.pendingLanes;if(h===0)return 0;var m=0,y=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var P=h&134217727;return P!==0?(h=P&~y,h!==0?m=Zn(h):(A&=P,A!==0?m=Zn(A):l||(l=P&~i,l!==0&&(m=Zn(l))))):(P=h&~y,P!==0?m=Zn(P):A!==0?m=Zn(A):l||(l=h&~i,l!==0&&(m=Zn(l)))),m===0?0:r!==0&&r!==m&&(r&y)===0&&(y=m&-m,l=r&-r,y>=l||y===32&&(l&4194048)!==0)?r:m}function Ai(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function js(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ws(){var i=ji;return ji<<=1,(ji&62914560)===0&&(ji=4194304),i}function Ui(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function Bi(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function tn(i,r,l,h,m,y){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var P=i.entanglements,Y=i.expirationTimes,me=i.hiddenUpdates;for(l=A&~l;0<l;){var Te=31-Rn(l),Ae=1<<Te;P[Te]=0,Y[Te]=-1;var ye=me[Te];if(ye!==null)for(me[Te]=null,Te=0;Te<ye.length;Te++){var be=ye[Te];be!==null&&(be.lane&=-536870913)}l&=~Ae}h!==0&&tt(i,h,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(A&~r))}function tt(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var h=31-Rn(r);i.entangledLanes|=r,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function cr(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var h=31-Rn(l),m=1<<h;m&r|i[h]&r&&(i[h]|=r),l&=~m}}function hr(i,r){var l=r&-r;return l=(l&42)!==0?1:gi(l),(l&(i.suspendedLanes|r))!==0?0:l}function gi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Fe(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Es(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:ub(i.type))}function Na(i,r){var l=J.p;try{return J.p=i,r()}finally{J.p=l}}var as=Math.random().toString(36).slice(2),nn="__reactFiber$"+as,Tn="__reactProps$"+as,ls="__reactContainer$"+as,ki="__reactEvents$"+as,us="__reactListeners$"+as,zl="__reactHandles$"+as,za="__reactResources$"+as,Us="__reactMarker$"+as;function Gr(i){delete i[nn],delete i[Tn],delete i[ki],delete i[us],delete i[zl]}function Ts(i){var r=i[nn];if(r)return r;for(var l=i.parentNode;l;){if(r=l[ls]||l[nn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=W0(i);i!==null;){if(l=i[nn])return l;i=W0(i)}return r}i=l,l=i.parentNode}return null}function Bs(i){if(i=i[nn]||i[ls]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Ss(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function cs(i){var r=i[za];return r||(r=i[za]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function hn(i){i[Us]=!0}var ko=new Set,dr={};function ni(i,r){Fi(i,r),Fi(i+"Capture",r)}function Fi(i,r){for(dr[i]=r,i=0;i<r.length;i++)ko.add(r[i])}var Zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lo={},Io={};function fr(i){return di.call(Io,i)?!0:di.call(Lo,i)?!1:Zr.test(i)?Io[i]=!0:(Lo[i]=!0,!1)}function ht(i,r,l){if(fr(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Mt(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function ii(i,r,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+h)}}function vn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fs(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Va(i,r,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,y=h.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return m.call(this)},set:function(A){l=""+A,y.call(this,A)}}),Object.defineProperty(i,r,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function st(i){if(!i._valueTracker){var r=Fs(i)?"checked":"value";i._valueTracker=Va(i,r,""+i[r])}}function Yt(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),h="";return i&&(h=Fs(i)?i.checked?"true":"false":i.value),i=h,i!==l?(r.setValue(i),!0):!1}function pr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Hi=/[\n"\\]/g;function Lt(i){return i.replace(Hi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function gr(i,r,l,h,m,y,A,P){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+vn(r)):i.value!==""+vn(r)&&(i.value=""+vn(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?qi(i,A,vn(r)):l!=null?qi(i,A,vn(l)):h!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+vn(P):i.removeAttribute("name")}function xs(i,r,l,h,m,y,A,P){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),r!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||r!=null)){st(i);return}l=l!=null?""+vn(l):"",r=r!=null?""+vn(r):l,P||r===i.value||(i.value=r),i.defaultValue=r}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=P?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),st(i)}function qi(i,r,l){r==="number"&&pr(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Ye(i,r,l,h){if(i=i.options,r){r={};for(var m=0;m<l.length;m++)r["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=r.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&h&&(i[l].defaultSelected=!0)}else{for(l=""+vn(l),r=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}r!==null||i[m].disabled||(r=i[m])}r!==null&&(r.selected=!0)}}function Li(i,r,l){if(r!=null&&(r=""+vn(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+vn(l):""}function Gi(i,r,l,h){if(r==null){if(h!=null){if(l!=null)throw Error(s(92));if(ke(h)){if(1<h.length)throw Error(s(93));h=h[0]}l=h}l==null&&(l=""),r=l}l=vn(r),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),st(i)}function Wn(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var ja=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hs(i,r,l){var h=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":h?i.setProperty(r,l):typeof l!="number"||l===0||ja.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function Ro(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var m in r)h=r[m],r.hasOwnProperty(m)&&l[m]!==h&&Hs(i,m,h)}else for(var y in r)r.hasOwnProperty(y)&&Hs(i,y,r[y])}function Wr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ua=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zi(i){return Ua.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function dn(){}var Kr=null;function mr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var qs=null,Ze=null;function Ii(i){var r=Bs(i);if(r&&(i=r.stateNode)){var l=i[Tn]||null;e:switch(i=r.stateNode,r.type){case"input":if(gr(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Lt(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var h=l[r];if(h!==i&&h.form===i.form){var m=h[Tn]||null;if(!m)throw Error(s(90));gr(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<l.length;r++)h=l[r],h.form===i.form&&Yt(h)}break e;case"textarea":Li(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Ye(i,!!l.multiple,r,!1)}}}var Ot=!1;function Ba(i,r,l){if(Ot)return i(r,l);Ot=!0;try{var h=i(r);return h}finally{if(Ot=!1,(qs!==null||Ze!==null)&&(fd(),qs&&(r=qs,i=Ze,Ze=qs=null,Ii(r),i)))for(r=0;r<i.length;r++)Ii(i[r])}}function Kn(i,r){var l=i.stateNode;if(l===null)return null;var h=l[Tn]||null;if(h===null)return null;l=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(Ri)try{var $n={};Object.defineProperty($n,"passive",{get:function(){$r=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{$r=!1}var si=null,Cs=null,Gt=null;function mi(){if(Gt)return Gt;var i,r=Cs,l=r.length,h,m="value"in si?si.value:si.textContent,y=m.length;for(i=0;i<l&&r[i]===m[i];i++);var A=l-i;for(h=1;h<=A&&r[l-h]===m[y-h];h++);return Gt=m.slice(i,1<h?1-h:void 0)}function vr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Gs(){return!0}function Qt(){return!1}function Bn(i){function r(l,h,m,y,A){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(l=i[P],this[P]=l?l(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Gs:Qt,this.isPropagationStopped=Qt,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),r}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yr=Bn(hs),Zs=S({},hs,{view:0,detail:0}),vt=Bn(Zs),yr,Yn,Sn,_r=S({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Sn&&(Sn&&i.type==="mousemove"?(yr=i.screenX-Sn.screenX,Yn=i.screenY-Sn.screenY):Yn=yr=0,Sn=i),yr)},movementY:function(i){return"movementY"in i?i.movementY:Yn}}),Vl=Bn(_r),Ws=S({},_r,{dataTransfer:0}),jl=Bn(Ws),Oo=S({},Zs,{relatedTarget:0}),br=Bn(Oo),Ul=S({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),wr=Bn(Ul),Xu=S({},hs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Mi=Bn(Xu),Qr=S({},hs,{data:0}),Po=Bn(Qr),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Do={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},No={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zo(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=No[i])?!!r[i]:!1}function Er(){return zo}var Fa=S({},Zs,{key:function(i){if(i.key){var r=ds[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=vr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Do[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(i){return i.type==="keypress"?vr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?vr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ha=Bn(Fa),Ks=S({},_r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qa=Bn(Ks),Vo=S({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er}),Bl=Bn(Vo),Ga=S({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xr=Bn(Ga),Mn=S({},_r,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),As=Bn(Mn),Fl=S({},hs,{newState:0,oldState:0}),Wi=Bn(Fl),f=[9,13,27,32],T=Ri&&"CompositionEvent"in window,k=null;Ri&&"documentMode"in document&&(k=document.documentMode);var j=Ri&&"TextEvent"in window&&!k,pe=Ri&&(!T||k&&8<k&&11>=k),_e=" ",De=!1;function Pt(i,r){switch(i){case"keyup":return f.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fn(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var dt=!1;function Bt(i,r){switch(i){case"compositionend":return fn(r);case"keypress":return r.which!==32?null:(De=!0,_e);case"textInput":return i=r.data,i===_e&&De?null:i;default:return null}}function sn(i,r){if(dt)return i==="compositionend"||!T&&Pt(i,r)?(i=mi(),Gt=Cs=si=null,dt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return pe&&r.locale!=="ko"?null:r.data;default:return null}}var Tr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ln(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Tr[i.type]:r==="textarea"}function Jr(i,r,l,h){qs?Ze?Ze.push(h):Ze=[h]:qs=h,r=bd(r,"onChange"),0<r.length&&(l=new Yr("onChange","change",null,l,h),i.push({event:l,listeners:r}))}var vi=null,Za=null;function Wa(i){O0(i,0)}function Ka(i){var r=Ss(i);if(Yt(r))return i}function $a(i,r){if(i==="change")return r}var Rh=!1;if(Ri){var ks;if(Ri){var jo="oninput"in document;if(!jo){var Mh=document.createElement("div");Mh.setAttribute("oninput","return;"),jo=typeof Mh.oninput=="function"}ks=jo}else ks=!1;Rh=ks&&(!document.documentMode||9<document.documentMode)}function Hl(){vi&&(vi.detachEvent("onpropertychange",Oh),Za=vi=null)}function Oh(i){if(i.propertyName==="value"&&Ka(Za)){var r=[];Jr(r,Za,i,mr(i)),Ba(Wa,r)}}function $s(i,r,l){i==="focusin"?(Hl(),vi=r,Za=l,vi.attachEvent("onpropertychange",Oh)):i==="focusout"&&Hl()}function pp(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ka(Za)}function Uo(i,r){if(i==="click")return Ka(r)}function gp(i,r){if(i==="input"||i==="change")return Ka(r)}function Ys(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Qn=typeof Object.is=="function"?Object.is:Ys;function Bo(i,r){if(Qn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),h=Object.keys(r);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!di.call(r,m)||!Qn(i[m],r[m]))return!1}return!0}function ql(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ya(i,r){var l=ql(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=r&&h>=r)return{node:l,offset:r-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ql(l)}}function Gl(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Gl(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Qa(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=pr(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=pr(i.document)}return r}function Sr(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var Zl=Ri&&"documentMode"in document&&11>=document.documentMode,xr=null,Wl=null,Xa=null,Fo=!1;function Ph(i,r,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Fo||xr==null||xr!==pr(h)||(h=xr,"selectionStart"in h&&Sr(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Xa&&Bo(Xa,h)||(Xa=h,h=bd(Wl,"onSelect"),0<h.length&&(r=new Yr("onSelect","select",null,r,l),i.push({event:r,listeners:h}),r.target=xr)))}function Cr(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var Ho={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionrun:Cr("Transition","TransitionRun"),transitionstart:Cr("Transition","TransitionStart"),transitioncancel:Cr("Transition","TransitionCancel"),transitionend:Cr("Transition","TransitionEnd")},Kl={},Dh={};Ri&&(Dh=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Xn(i){if(Kl[i])return Kl[i];if(!Ho[i])return i;var r=Ho[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in Dh)return Kl[i]=r[l];return i}var Ja=Xn("animationend"),Nh=Xn("animationiteration"),el=Xn("animationstart"),mp=Xn("transitionrun"),zh=Xn("transitionstart"),vp=Xn("transitioncancel"),qo=Xn("transitionend"),Vh=new Map,Ar="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ar.push("scrollEnd");function Ki(i,r){Vh.set(i,r),ni(r,[i])}var tl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},$i=[],yi=0,$l=0;function nl(){for(var i=yi,r=$l=yi=0;r<i;){var l=$i[r];$i[r++]=null;var h=$i[r];$i[r++]=null;var m=$i[r];$i[r++]=null;var y=$i[r];if($i[r++]=null,h!==null&&m!==null){var A=h.pending;A===null?m.next=m:(m.next=A.next,A.next=m),h.pending=m}y!==0&&Go(l,m,y)}}function kr(i,r,l,h){$i[yi++]=i,$i[yi++]=r,$i[yi++]=l,$i[yi++]=h,$l|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Ju(i,r,l,h){return kr(i,r,l,h),il(i)}function Ls(i,r){return kr(i,null,null,r),il(i)}function Go(i,r,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var m=!1,y=i.return;y!==null;)y.childLanes|=l,h=y.alternate,h!==null&&(h.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&r!==null&&(m=31-Rn(l),i=y.hiddenUpdates,h=i[m],h===null?i[m]=[r]:h.push(r),r.lane=l|536870912),y):null}function il(i){if(50<Sc)throw Sc=0,_g=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var eo={};function yp(i,r,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(i,r,l,h){return new yp(i,r,l,h)}function Yl(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Is(i,r){var l=i.alternate;return l===null?(l=_i(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function ec(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function sl(i,r,l,h,m,y){var A=0;if(h=i,typeof i=="function")Yl(i)&&(A=1);else if(typeof i=="string")A=o1(i,l,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=_i(31,l,r,m),i.elementType=M,i.lanes=y,i;case H:return to(l.children,m,y,r);case B:A=8,m|=24;break;case te:return i=_i(12,l,r,m|2),i.elementType=te,i.lanes=y,i;case ae:return i=_i(13,l,r,m),i.elementType=ae,i.lanes=y,i;case re:return i=_i(19,l,r,m),i.elementType=re,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case le:A=10;break e;case X:A=9;break e;case oe:A=11;break e;case V:A=14;break e;case z:A=16,h=null;break e}A=29,l=Error(s(130,i===null?"null":typeof i,"")),h=null}return r=_i(A,l,r,m),r.elementType=i,r.type=h,r.lanes=y,r}function to(i,r,l,h){return i=_i(7,i,h,r),i.lanes=l,i}function Ql(i,r,l){return i=_i(6,i,null,r),i.lanes=l,i}function tc(i){var r=_i(18,null,null,0);return r.stateNode=i,r}function nc(i,r,l){return r=_i(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var o=new WeakMap;function c(i,r){if(typeof i=="object"&&i!==null){var l=o.get(i);return l!==void 0?l:(r={value:i,source:r,stack:zi(r)},o.set(i,r),r)}return{value:i,source:r,stack:zi(r)}}var p=[],b=0,C=null,R=0,W=[],he=0,ve=null,Ce=1,Ne="";function qe(i,r){p[b++]=R,p[b++]=C,C=i,R=r}function ft(i,r,l){W[he++]=Ce,W[he++]=Ne,W[he++]=ve,ve=i;var h=Ce;i=Ne;var m=32-Rn(h)-1;h&=~(1<<m),l+=1;var y=32-Rn(r)+m;if(30<y){var A=m-m%5;y=(h&(1<<A)-1).toString(32),h>>=A,m-=A,Ce=1<<32-Rn(r)+m|l<<m|h,Ne=y+i}else Ce=1<<y|l<<m|h,Ne=i}function Fn(i){i.return!==null&&(qe(i,1),ft(i,1,0))}function yn(i){for(;i===C;)C=p[--b],p[b]=null,R=p[--b],p[b]=null;for(;i===ve;)ve=W[--he],W[he]=null,Ne=W[--he],W[he]=null,Ce=W[--he],W[he]=null}function Oi(i,r){W[he++]=Ce,W[he++]=Ne,W[he++]=ve,Ce=r.id,Ne=r.overflow,ve=i}var Dt=null,Nt=null,bt=!1,Lr=null,Yi=!1,Xl=Error(s(519));function Ir(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rl(c(r,i)),Xl}function ic(i){var r=i.stateNode,l=i.type,h=i.memoizedProps;switch(r[nn]=i,r[Tn]=h,l){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(l=0;l<Cc.length;l++)Et(Cc[l],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":Et("invalid",r),xs(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Et("invalid",r);break;case"textarea":Et("invalid",r),Gi(r,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||h.suppressHydrationWarning===!0||z0(r.textContent,l)?(h.popover!=null&&(Et("beforetoggle",r),Et("toggle",r)),h.onScroll!=null&&Et("scroll",r),h.onScrollEnd!=null&&Et("scrollend",r),h.onClick!=null&&(r.onclick=dn),r=!0):r=!1,r||Ir(i,!0)}function pn(i){for(Dt=i.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:Yi=!1;return;case 27:case 3:Yi=!0;return;default:Dt=Dt.return}}function Qs(i){if(i!==Dt)return!1;if(!bt)return pn(i),bt=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Pg(i.type,i.memoizedProps)),l=!l),l&&Nt&&Ir(i),pn(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Nt=Z0(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Nt=Z0(i)}else r===27?(r=Nt,ra(i.type)?(i=jg,jg=null,Nt=i):Nt=r):Nt=Dt?Ms(i.stateNode.nextSibling):null;return!0}function no(){Nt=Dt=null,bt=!1}function sc(){var i=Lr;return i!==null&&(es===null?es=i:es.push.apply(es,i),Lr=null),i}function rl(i){Lr===null?Lr=[i]:Lr.push(i)}var ol=N(null),Rr=null,Xs=null;function Zo(i,r,l){K(ol,r._currentValue),r._currentValue=l}function io(i){i._currentValue=ol.current,F(ol)}function _p(i,r,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),i===l)break;i=i.return}}function bp(i,r,l,h){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var A=m.child;y=y.firstContext;e:for(;y!==null;){var P=y;y=m;for(var Y=0;Y<r.length;Y++)if(P.context===r[Y]){y.lanes|=l,P=y.alternate,P!==null&&(P.lanes|=l),_p(y.return,l,i),h||(A=null);break e}y=P.next}}else if(m.tag===18){if(A=m.return,A===null)throw Error(s(341));A.lanes|=l,y=A.alternate,y!==null&&(y.lanes|=l),_p(A,l,i),A=null}else A=m.child;if(A!==null)A.return=m;else for(A=m;A!==null;){if(A===i){A=null;break}if(m=A.sibling,m!==null){m.return=A.return,A=m;break}A=A.return}m=A}}function Jl(i,r,l,h){i=null;for(var m=r,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var A=m.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var P=m.type;Qn(m.pendingProps.value,A.value)||(i!==null?i.push(P):i=[P])}}else if(m===we.current){if(A=m.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Rc):i=[Rc])}m=m.return}i!==null&&bp(r,i,l,h),r.flags|=262144}function jh(i){for(i=i.firstContext;i!==null;){if(!Qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function al(i){Rr=i,Xs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ri(i){return Ey(Rr,i)}function Uh(i,r){return Rr===null&&al(i),Ey(i,r)}function Ey(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Xs===null){if(i===null)throw Error(s(308));Xs=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Xs=Xs.next=r;return l}var nA=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},iA=n.unstable_scheduleCallback,sA=n.unstable_NormalPriority,On={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wp(){return{controller:new nA,data:new Map,refCount:0}}function rc(i){i.refCount--,i.refCount===0&&iA(sA,function(){i.controller.abort()})}var oc=null,Ep=0,eu=0,tu=null;function rA(i,r){if(oc===null){var l=oc=[];Ep=0,eu=xg(),tu={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Ep++,r.then(Ty,Ty),r}function Ty(){if(--Ep===0&&oc!==null){tu!==null&&(tu.status="fulfilled");var i=oc;oc=null,eu=0,tu=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function oA(i,r){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){h.status="fulfilled",h.value=r;for(var m=0;m<l.length;m++)(0,l[m])(r)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var Sy=ie.S;ie.S=function(i,r){a0=kt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&rA(i,r),Sy!==null&&Sy(i,r)};var ll=N(null);function Tp(){var i=ll.current;return i!==null?i:Xt.pooledCache}function Bh(i,r){r===null?K(ll,ll.current):K(ll,r.pool)}function xy(){var i=Tp();return i===null?null:{parent:On._currentValue,pool:i}}var nu=Error(s(460)),Sp=Error(s(474)),Fh=Error(s(542)),Hh={then:function(){}};function Cy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ay(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(dn,dn),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Ly(i),i;default:if(typeof r.status=="string")r.then(dn,dn);else{if(i=Xt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(h){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=h}},function(h){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Ly(i),i}throw cl=r,nu}}function ul(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(cl=l,nu):l}}var cl=null;function ky(){if(cl===null)throw Error(s(459));var i=cl;return cl=null,i}function Ly(i){if(i===nu||i===Fh)throw Error(s(483))}var iu=null,ac=0;function qh(i){var r=ac;return ac+=1,iu===null&&(iu=[]),Ay(iu,i,r)}function lc(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Gh(i,r){throw r.$$typeof===I?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Iy(i){function r(ue,ne){if(i){var ge=ue.deletions;ge===null?(ue.deletions=[ne],ue.flags|=16):ge.push(ne)}}function l(ue,ne){if(!i)return null;for(;ne!==null;)r(ue,ne),ne=ne.sibling;return null}function h(ue){for(var ne=new Map;ue!==null;)ue.key!==null?ne.set(ue.key,ue):ne.set(ue.index,ue),ue=ue.sibling;return ne}function m(ue,ne){return ue=Is(ue,ne),ue.index=0,ue.sibling=null,ue}function y(ue,ne,ge){return ue.index=ge,i?(ge=ue.alternate,ge!==null?(ge=ge.index,ge<ne?(ue.flags|=67108866,ne):ge):(ue.flags|=67108866,ne)):(ue.flags|=1048576,ne)}function A(ue){return i&&ue.alternate===null&&(ue.flags|=67108866),ue}function P(ue,ne,ge,Se){return ne===null||ne.tag!==6?(ne=Ql(ge,ue.mode,Se),ne.return=ue,ne):(ne=m(ne,ge),ne.return=ue,ne)}function Y(ue,ne,ge,Se){var We=ge.type;return We===H?Te(ue,ne,ge.props.children,Se,ge.key):ne!==null&&(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===z&&ul(We)===ne.type)?(ne=m(ne,ge.props),lc(ne,ge),ne.return=ue,ne):(ne=sl(ge.type,ge.key,ge.props,null,ue.mode,Se),lc(ne,ge),ne.return=ue,ne)}function me(ue,ne,ge,Se){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ge.containerInfo||ne.stateNode.implementation!==ge.implementation?(ne=nc(ge,ue.mode,Se),ne.return=ue,ne):(ne=m(ne,ge.children||[]),ne.return=ue,ne)}function Te(ue,ne,ge,Se,We){return ne===null||ne.tag!==7?(ne=to(ge,ue.mode,Se,We),ne.return=ue,ne):(ne=m(ne,ge),ne.return=ue,ne)}function Ae(ue,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Ql(""+ne,ue.mode,ge),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:return ge=sl(ne.type,ne.key,ne.props,null,ue.mode,ge),lc(ge,ne),ge.return=ue,ge;case D:return ne=nc(ne,ue.mode,ge),ne.return=ue,ne;case z:return ne=ul(ne),Ae(ue,ne,ge)}if(ke(ne)||Z(ne))return ne=to(ne,ue.mode,ge,null),ne.return=ue,ne;if(typeof ne.then=="function")return Ae(ue,qh(ne),ge);if(ne.$$typeof===le)return Ae(ue,Uh(ue,ne),ge);Gh(ue,ne)}return null}function ye(ue,ne,ge,Se){var We=ne!==null?ne.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return We!==null?null:P(ue,ne,""+ge,Se);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case O:return ge.key===We?Y(ue,ne,ge,Se):null;case D:return ge.key===We?me(ue,ne,ge,Se):null;case z:return ge=ul(ge),ye(ue,ne,ge,Se)}if(ke(ge)||Z(ge))return We!==null?null:Te(ue,ne,ge,Se,null);if(typeof ge.then=="function")return ye(ue,ne,qh(ge),Se);if(ge.$$typeof===le)return ye(ue,ne,Uh(ue,ge),Se);Gh(ue,ge)}return null}function be(ue,ne,ge,Se,We){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ue=ue.get(ge)||null,P(ne,ue,""+Se,We);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case O:return ue=ue.get(Se.key===null?ge:Se.key)||null,Y(ne,ue,Se,We);case D:return ue=ue.get(Se.key===null?ge:Se.key)||null,me(ne,ue,Se,We);case z:return Se=ul(Se),be(ue,ne,ge,Se,We)}if(ke(Se)||Z(Se))return ue=ue.get(ge)||null,Te(ne,ue,Se,We,null);if(typeof Se.then=="function")return be(ue,ne,ge,qh(Se),We);if(Se.$$typeof===le)return be(ue,ne,ge,Uh(ne,Se),We);Gh(ne,Se)}return null}function Be(ue,ne,ge,Se){for(var We=null,zt=null,He=ne,pt=ne=0,xt=null;He!==null&&pt<ge.length;pt++){He.index>pt?(xt=He,He=null):xt=He.sibling;var Vt=ye(ue,He,ge[pt],Se);if(Vt===null){He===null&&(He=xt);break}i&&He&&Vt.alternate===null&&r(ue,He),ne=y(Vt,ne,pt),zt===null?We=Vt:zt.sibling=Vt,zt=Vt,He=xt}if(pt===ge.length)return l(ue,He),bt&&qe(ue,pt),We;if(He===null){for(;pt<ge.length;pt++)He=Ae(ue,ge[pt],Se),He!==null&&(ne=y(He,ne,pt),zt===null?We=He:zt.sibling=He,zt=He);return bt&&qe(ue,pt),We}for(He=h(He);pt<ge.length;pt++)xt=be(He,ue,pt,ge[pt],Se),xt!==null&&(i&&xt.alternate!==null&&He.delete(xt.key===null?pt:xt.key),ne=y(xt,ne,pt),zt===null?We=xt:zt.sibling=xt,zt=xt);return i&&He.forEach(function(ca){return r(ue,ca)}),bt&&qe(ue,pt),We}function Qe(ue,ne,ge,Se){if(ge==null)throw Error(s(151));for(var We=null,zt=null,He=ne,pt=ne=0,xt=null,Vt=ge.next();He!==null&&!Vt.done;pt++,Vt=ge.next()){He.index>pt?(xt=He,He=null):xt=He.sibling;var ca=ye(ue,He,Vt.value,Se);if(ca===null){He===null&&(He=xt);break}i&&He&&ca.alternate===null&&r(ue,He),ne=y(ca,ne,pt),zt===null?We=ca:zt.sibling=ca,zt=ca,He=xt}if(Vt.done)return l(ue,He),bt&&qe(ue,pt),We;if(He===null){for(;!Vt.done;pt++,Vt=ge.next())Vt=Ae(ue,Vt.value,Se),Vt!==null&&(ne=y(Vt,ne,pt),zt===null?We=Vt:zt.sibling=Vt,zt=Vt);return bt&&qe(ue,pt),We}for(He=h(He);!Vt.done;pt++,Vt=ge.next())Vt=be(He,ue,pt,Vt.value,Se),Vt!==null&&(i&&Vt.alternate!==null&&He.delete(Vt.key===null?pt:Vt.key),ne=y(Vt,ne,pt),zt===null?We=Vt:zt.sibling=Vt,zt=Vt);return i&&He.forEach(function(v1){return r(ue,v1)}),bt&&qe(ue,pt),We}function Kt(ue,ne,ge,Se){if(typeof ge=="object"&&ge!==null&&ge.type===H&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case O:e:{for(var We=ge.key;ne!==null;){if(ne.key===We){if(We=ge.type,We===H){if(ne.tag===7){l(ue,ne.sibling),Se=m(ne,ge.props.children),Se.return=ue,ue=Se;break e}}else if(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===z&&ul(We)===ne.type){l(ue,ne.sibling),Se=m(ne,ge.props),lc(Se,ge),Se.return=ue,ue=Se;break e}l(ue,ne);break}else r(ue,ne);ne=ne.sibling}ge.type===H?(Se=to(ge.props.children,ue.mode,Se,ge.key),Se.return=ue,ue=Se):(Se=sl(ge.type,ge.key,ge.props,null,ue.mode,Se),lc(Se,ge),Se.return=ue,ue=Se)}return A(ue);case D:e:{for(We=ge.key;ne!==null;){if(ne.key===We)if(ne.tag===4&&ne.stateNode.containerInfo===ge.containerInfo&&ne.stateNode.implementation===ge.implementation){l(ue,ne.sibling),Se=m(ne,ge.children||[]),Se.return=ue,ue=Se;break e}else{l(ue,ne);break}else r(ue,ne);ne=ne.sibling}Se=nc(ge,ue.mode,Se),Se.return=ue,ue=Se}return A(ue);case z:return ge=ul(ge),Kt(ue,ne,ge,Se)}if(ke(ge))return Be(ue,ne,ge,Se);if(Z(ge)){if(We=Z(ge),typeof We!="function")throw Error(s(150));return ge=We.call(ge),Qe(ue,ne,ge,Se)}if(typeof ge.then=="function")return Kt(ue,ne,qh(ge),Se);if(ge.$$typeof===le)return Kt(ue,ne,Uh(ue,ge),Se);Gh(ue,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ne!==null&&ne.tag===6?(l(ue,ne.sibling),Se=m(ne,ge),Se.return=ue,ue=Se):(l(ue,ne),Se=Ql(ge,ue.mode,Se),Se.return=ue,ue=Se),A(ue)):l(ue,ne)}return function(ue,ne,ge,Se){try{ac=0;var We=Kt(ue,ne,ge,Se);return iu=null,We}catch(He){if(He===nu||He===Fh)throw He;var zt=_i(29,He,null,ue.mode);return zt.lanes=Se,zt.return=ue,zt}finally{}}}var hl=Iy(!0),Ry=Iy(!1),Wo=!1;function xp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cp(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ko(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function $o(i,r,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Ut&2)!==0){var m=h.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),h.pending=r,r=il(i),Go(i,null,l),r}return kr(i,h,r,l),il(i)}function uc(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,cr(i,l)}}function Ap(i,r){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?m=y=A:y=y.next=A,l=l.next}while(l!==null);y===null?m=y=r:y=y.next=r}else m=y=r;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var kp=!1;function cc(){if(kp){var i=tu;if(i!==null)throw i}}function hc(i,r,l,h){kp=!1;var m=i.updateQueue;Wo=!1;var y=m.firstBaseUpdate,A=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var Y=P,me=Y.next;Y.next=null,A===null?y=me:A.next=me,A=Y;var Te=i.alternate;Te!==null&&(Te=Te.updateQueue,P=Te.lastBaseUpdate,P!==A&&(P===null?Te.firstBaseUpdate=me:P.next=me,Te.lastBaseUpdate=Y))}if(y!==null){var Ae=m.baseState;A=0,Te=me=Y=null,P=y;do{var ye=P.lane&-536870913,be=ye!==P.lane;if(be?(St&ye)===ye:(h&ye)===ye){ye!==0&&ye===eu&&(kp=!0),Te!==null&&(Te=Te.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Be=i,Qe=P;ye=r;var Kt=l;switch(Qe.tag){case 1:if(Be=Qe.payload,typeof Be=="function"){Ae=Be.call(Kt,Ae,ye);break e}Ae=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Qe.payload,ye=typeof Be=="function"?Be.call(Kt,Ae,ye):Be,ye==null)break e;Ae=S({},Ae,ye);break e;case 2:Wo=!0}}ye=P.callback,ye!==null&&(i.flags|=64,be&&(i.flags|=8192),be=m.callbacks,be===null?m.callbacks=[ye]:be.push(ye))}else be={lane:ye,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Te===null?(me=Te=be,Y=Ae):Te=Te.next=be,A|=ye;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;be=P,P=be.next,be.next=null,m.lastBaseUpdate=be,m.shared.pending=null}}while(!0);Te===null&&(Y=Ae),m.baseState=Y,m.firstBaseUpdate=me,m.lastBaseUpdate=Te,y===null&&(m.shared.lanes=0),ea|=A,i.lanes=A,i.memoizedState=Ae}}function My(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Oy(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)My(l[i],r)}var su=N(null),Zh=N(0);function Py(i,r){i=fo,K(Zh,i),K(su,r),fo=i|r.baseLanes}function Lp(){K(Zh,fo),K(su,su.current)}function Ip(){fo=Zh.current,F(su),F(Zh)}var fs=N(null),Rs=null;function Yo(i){var r=i.alternate;K(xn,xn.current&1),K(fs,i),Rs===null&&(r===null||su.current!==null||r.memoizedState!==null)&&(Rs=i)}function Rp(i){K(xn,xn.current),K(fs,i),Rs===null&&(Rs=i)}function Dy(i){i.tag===22?(K(xn,xn.current),K(fs,i),Rs===null&&(Rs=i)):Qo()}function Qo(){K(xn,xn.current),K(fs,fs.current)}function ps(i){F(fs),Rs===i&&(Rs=null),F(xn)}var xn=N(0);function Wh(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||zg(l)||Vg(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var so=0,ct=null,Zt=null,Pn=null,Kh=!1,ru=!1,dl=!1,$h=0,dc=0,ou=null,aA=0;function _n(){throw Error(s(321))}function Mp(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!Qn(i[l],r[l]))return!1;return!0}function Op(i,r,l,h,m,y){return so=y,ct=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ie.H=i===null||i.memoizedState===null?y_:Kp,dl=!1,y=l(h,m),dl=!1,ru&&(y=zy(r,l,h,m)),Ny(i),y}function Ny(i){ie.H=gc;var r=Zt!==null&&Zt.next!==null;if(so=0,Pn=Zt=ct=null,Kh=!1,dc=0,ou=null,r)throw Error(s(300));i===null||Dn||(i=i.dependencies,i!==null&&jh(i)&&(Dn=!0))}function zy(i,r,l,h){ct=i;var m=0;do{if(ru&&(ou=null),dc=0,ru=!1,25<=m)throw Error(s(301));if(m+=1,Pn=Zt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ie.H=__,y=r(l,h)}while(ru);return y}function lA(){var i=ie.H,r=i.useState()[0];return r=typeof r.then=="function"?fc(r):r,i=i.useState()[0],(Zt!==null?Zt.memoizedState:null)!==i&&(ct.flags|=1024),r}function Pp(){var i=$h!==0;return $h=0,i}function Dp(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function Np(i){if(Kh){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Kh=!1}so=0,Pn=Zt=ct=null,ru=!1,dc=$h=0,ou=null}function Pi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?ct.memoizedState=Pn=i:Pn=Pn.next=i,Pn}function Cn(){if(Zt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Zt.next;var r=Pn===null?ct.memoizedState:Pn.next;if(r!==null)Pn=r,Zt=i;else{if(i===null)throw ct.alternate===null?Error(s(467)):Error(s(310));Zt=i,i={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Pn===null?ct.memoizedState=Pn=i:Pn=Pn.next=i}return Pn}function Yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fc(i){var r=dc;return dc+=1,ou===null&&(ou=[]),i=Ay(ou,i,r),r=ct,(Pn===null?r.memoizedState:Pn.next)===null&&(r=r.alternate,ie.H=r===null||r.memoizedState===null?y_:Kp),i}function Qh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return fc(i);if(i.$$typeof===le)return ri(i)}throw Error(s(438,String(i)))}function zp(i){var r=null,l=ct.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Yh(),ct.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),h=0;h<i;h++)l[h]=q;return r.index++,l}function ro(i,r){return typeof r=="function"?r(i):r}function Xh(i){var r=Cn();return Vp(r,Zt,i)}function Vp(i,r,l){var h=i.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=l;var m=i.baseQueue,y=h.pending;if(y!==null){if(m!==null){var A=m.next;m.next=y.next,y.next=A}r.baseQueue=m=y,h.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{r=m.next;var P=A=null,Y=null,me=r,Te=!1;do{var Ae=me.lane&-536870913;if(Ae!==me.lane?(St&Ae)===Ae:(so&Ae)===Ae){var ye=me.revertLane;if(ye===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Ae===eu&&(Te=!0);else if((so&ye)===ye){me=me.next,ye===eu&&(Te=!0);continue}else Ae={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},Y===null?(P=Y=Ae,A=y):Y=Y.next=Ae,ct.lanes|=ye,ea|=ye;Ae=me.action,dl&&l(y,Ae),y=me.hasEagerState?me.eagerState:l(y,Ae)}else ye={lane:Ae,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},Y===null?(P=Y=ye,A=y):Y=Y.next=ye,ct.lanes|=Ae,ea|=Ae;me=me.next}while(me!==null&&me!==r);if(Y===null?A=y:Y.next=P,!Qn(y,i.memoizedState)&&(Dn=!0,Te&&(l=tu,l!==null)))throw l;i.memoizedState=y,i.baseState=A,i.baseQueue=Y,h.lastRenderedState=y}return m===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function jp(i){var r=Cn(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var h=l.dispatch,m=l.pending,y=r.memoizedState;if(m!==null){l.pending=null;var A=m=m.next;do y=i(y,A.action),A=A.next;while(A!==m);Qn(y,r.memoizedState)||(Dn=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),l.lastRenderedState=y}return[y,h]}function Vy(i,r,l){var h=ct,m=Cn(),y=bt;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=r();var A=!Qn((Zt||m).memoizedState,l);if(A&&(m.memoizedState=l,Dn=!0),m=m.queue,Fp(By.bind(null,h,m,i),[i]),m.getSnapshot!==r||A||Pn!==null&&Pn.memoizedState.tag&1){if(h.flags|=2048,au(9,{destroy:void 0},Uy.bind(null,h,m,l,r),null),Xt===null)throw Error(s(349));y||(so&127)!==0||jy(h,r,l)}return l}function jy(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=ct.updateQueue,r===null?(r=Yh(),ct.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Uy(i,r,l,h){r.value=l,r.getSnapshot=h,Fy(r)&&Hy(i)}function By(i,r,l){return l(function(){Fy(r)&&Hy(i)})}function Fy(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!Qn(i,l)}catch{return!0}}function Hy(i){var r=Ls(i,2);r!==null&&ts(r,i,2)}function Up(i){var r=Pi();if(typeof i=="function"){var l=i;if(i=l(),dl){In(!0);try{l()}finally{In(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:i},r}function qy(i,r,l,h){return i.baseState=l,Vp(i,Zt,typeof h=="function"?h:ro)}function uA(i,r,l,h,m){if(td(i))throw Error(s(485));if(i=r.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){y.listeners.push(A)}};ie.T!==null?l(!0):y.isTransition=!1,h(y),l=r.pending,l===null?(y.next=r.pending=y,Gy(r,y)):(y.next=l.next,r.pending=l.next=y)}}function Gy(i,r){var l=r.action,h=r.payload,m=i.state;if(r.isTransition){var y=ie.T,A={};ie.T=A;try{var P=l(m,h),Y=ie.S;Y!==null&&Y(A,P),Zy(i,r,P)}catch(me){Bp(i,r,me)}finally{y!==null&&A.types!==null&&(y.types=A.types),ie.T=y}}else try{y=l(m,h),Zy(i,r,y)}catch(me){Bp(i,r,me)}}function Zy(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Wy(i,r,h)},function(h){return Bp(i,r,h)}):Wy(i,r,l)}function Wy(i,r,l){r.status="fulfilled",r.value=l,Ky(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Gy(i,l)))}function Bp(i,r,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=l,Ky(r),r=r.next;while(r!==h)}i.action=null}function Ky(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function $y(i,r){return r}function Yy(i,r){if(bt){var l=Xt.formState;if(l!==null){e:{var h=ct;if(bt){if(Nt){t:{for(var m=Nt,y=Yi;m.nodeType!==8;){if(!y){m=null;break t}if(m=Ms(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Nt=Ms(m.nextSibling),h=m.data==="F!";break e}}Ir(h)}h=!1}h&&(r=l[0])}}return l=Pi(),l.memoizedState=l.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$y,lastRenderedState:r},l.queue=h,l=g_.bind(null,ct,h),h.dispatch=l,h=Up(!1),y=Wp.bind(null,ct,!1,h.queue),h=Pi(),m={state:r,dispatch:null,action:i,pending:null},h.queue=m,l=uA.bind(null,ct,m,y,l),m.dispatch=l,h.memoizedState=i,[r,l,!1]}function Qy(i){var r=Cn();return Xy(r,Zt,i)}function Xy(i,r,l){if(r=Vp(i,r,$y)[0],i=Xh(ro)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=fc(r)}catch(A){throw A===nu?Fh:A}else h=r;r=Cn();var m=r.queue,y=m.dispatch;return l!==r.memoizedState&&(ct.flags|=2048,au(9,{destroy:void 0},cA.bind(null,m,l),null)),[h,y,i]}function cA(i,r){i.action=r}function Jy(i){var r=Cn(),l=Zt;if(l!==null)return Xy(r,l,i);Cn(),r=r.memoizedState,l=Cn();var h=l.queue.dispatch;return l.memoizedState=i,[r,h,!1]}function au(i,r,l,h){return i={tag:i,create:l,deps:h,inst:r,next:null},r=ct.updateQueue,r===null&&(r=Yh(),ct.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,r.lastEffect=i),i}function e_(){return Cn().memoizedState}function Jh(i,r,l,h){var m=Pi();ct.flags|=i,m.memoizedState=au(1|r,{destroy:void 0},l,h===void 0?null:h)}function ed(i,r,l,h){var m=Cn();h=h===void 0?null:h;var y=m.memoizedState.inst;Zt!==null&&h!==null&&Mp(h,Zt.memoizedState.deps)?m.memoizedState=au(r,y,l,h):(ct.flags|=i,m.memoizedState=au(1|r,y,l,h))}function t_(i,r){Jh(8390656,8,i,r)}function Fp(i,r){ed(2048,8,i,r)}function hA(i){ct.flags|=4;var r=ct.updateQueue;if(r===null)r=Yh(),ct.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function n_(i){var r=Cn().memoizedState;return hA({ref:r,nextImpl:i}),function(){if((Ut&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function i_(i,r){return ed(4,2,i,r)}function s_(i,r){return ed(4,4,i,r)}function r_(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function o_(i,r,l){l=l!=null?l.concat([i]):null,ed(4,4,r_.bind(null,r,i),l)}function Hp(){}function a_(i,r){var l=Cn();r=r===void 0?null:r;var h=l.memoizedState;return r!==null&&Mp(r,h[1])?h[0]:(l.memoizedState=[i,r],i)}function l_(i,r){var l=Cn();r=r===void 0?null:r;var h=l.memoizedState;if(r!==null&&Mp(r,h[1]))return h[0];if(h=i(),dl){In(!0);try{i()}finally{In(!1)}}return l.memoizedState=[h,r],h}function qp(i,r,l){return l===void 0||(so&1073741824)!==0&&(St&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=u0(),ct.lanes|=i,ea|=i,l)}function u_(i,r,l,h){return Qn(l,r)?l:su.current!==null?(i=qp(i,l,h),Qn(i,r)||(Dn=!0),i):(so&42)===0||(so&1073741824)!==0&&(St&261930)===0?(Dn=!0,i.memoizedState=l):(i=u0(),ct.lanes|=i,ea|=i,r)}function c_(i,r,l,h,m){var y=J.p;J.p=y!==0&&8>y?y:8;var A=ie.T,P={};ie.T=P,Wp(i,!1,r,l);try{var Y=m(),me=ie.S;if(me!==null&&me(P,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var Te=oA(Y,h);pc(i,r,Te,vs(i))}else pc(i,r,h,vs(i))}catch(Ae){pc(i,r,{then:function(){},status:"rejected",reason:Ae},vs())}finally{J.p=y,A!==null&&P.types!==null&&(A.types=P.types),ie.T=A}}function dA(){}function Gp(i,r,l,h){if(i.tag!==5)throw Error(s(476));var m=h_(i).queue;c_(i,m,r,ee,l===null?dA:function(){return d_(i),l(h)})}function h_(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:ee},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function d_(i){var r=h_(i);r.next===null&&(r=i.alternate.memoizedState),pc(i,r.next.queue,{},vs())}function Zp(){return ri(Rc)}function f_(){return Cn().memoizedState}function p_(){return Cn().memoizedState}function fA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=vs();i=Ko(l);var h=$o(r,i,l);h!==null&&(ts(h,r,l),uc(h,r,l)),r={cache:wp()},i.payload=r;return}r=r.return}}function pA(i,r,l){var h=vs();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},td(i)?m_(r,l):(l=Ju(i,r,l,h),l!==null&&(ts(l,i,h),v_(l,r,h)))}function g_(i,r,l){var h=vs();pc(i,r,l,h)}function pc(i,r,l,h){var m={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(td(i))m_(r,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var A=r.lastRenderedState,P=y(A,l);if(m.hasEagerState=!0,m.eagerState=P,Qn(P,A))return kr(i,r,m,0),Xt===null&&nl(),!1}catch{}finally{}if(l=Ju(i,r,m,h),l!==null)return ts(l,i,h),v_(l,r,h),!0}return!1}function Wp(i,r,l,h){if(h={lane:2,revertLane:xg(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},td(i)){if(r)throw Error(s(479))}else r=Ju(i,l,h,2),r!==null&&ts(r,i,2)}function td(i){var r=i.alternate;return i===ct||r!==null&&r===ct}function m_(i,r){ru=Kh=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function v_(i,r,l){if((l&4194048)!==0){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,cr(i,l)}}var gc={readContext:ri,use:Qh,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};gc.useEffectEvent=_n;var y_={readContext:ri,use:Qh,useCallback:function(i,r){return Pi().memoizedState=[i,r===void 0?null:r],i},useContext:ri,useEffect:t_,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,Jh(4194308,4,r_.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Jh(4194308,4,i,r)},useInsertionEffect:function(i,r){Jh(4,2,i,r)},useMemo:function(i,r){var l=Pi();r=r===void 0?null:r;var h=i();if(dl){In(!0);try{i()}finally{In(!1)}}return l.memoizedState=[h,r],h},useReducer:function(i,r,l){var h=Pi();if(l!==void 0){var m=l(r);if(dl){In(!0);try{l(r)}finally{In(!1)}}}else m=r;return h.memoizedState=h.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},h.queue=i,i=i.dispatch=pA.bind(null,ct,i),[h.memoizedState,i]},useRef:function(i){var r=Pi();return i={current:i},r.memoizedState=i},useState:function(i){i=Up(i);var r=i.queue,l=g_.bind(null,ct,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:Hp,useDeferredValue:function(i,r){var l=Pi();return qp(l,i,r)},useTransition:function(){var i=Up(!1);return i=c_.bind(null,ct,i.queue,!0,!1),Pi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var h=ct,m=Pi();if(bt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),Xt===null)throw Error(s(349));(St&127)!==0||jy(h,r,l)}m.memoizedState=l;var y={value:l,getSnapshot:r};return m.queue=y,t_(By.bind(null,h,y,i),[i]),h.flags|=2048,au(9,{destroy:void 0},Uy.bind(null,h,y,l,r),null),l},useId:function(){var i=Pi(),r=Xt.identifierPrefix;if(bt){var l=Ne,h=Ce;l=(h&~(1<<32-Rn(h)-1)).toString(32)+l,r="_"+r+"R_"+l,l=$h++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=aA++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Zp,useFormState:Yy,useActionState:Yy,useOptimistic:function(i){var r=Pi();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Wp.bind(null,ct,!0,l),l.dispatch=r,[i,r]},useMemoCache:zp,useCacheRefresh:function(){return Pi().memoizedState=fA.bind(null,ct)},useEffectEvent:function(i){var r=Pi(),l={impl:i};return r.memoizedState=l,function(){if((Ut&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Kp={readContext:ri,use:Qh,useCallback:a_,useContext:ri,useEffect:Fp,useImperativeHandle:o_,useInsertionEffect:i_,useLayoutEffect:s_,useMemo:l_,useReducer:Xh,useRef:e_,useState:function(){return Xh(ro)},useDebugValue:Hp,useDeferredValue:function(i,r){var l=Cn();return u_(l,Zt.memoizedState,i,r)},useTransition:function(){var i=Xh(ro)[0],r=Cn().memoizedState;return[typeof i=="boolean"?i:fc(i),r]},useSyncExternalStore:Vy,useId:f_,useHostTransitionStatus:Zp,useFormState:Qy,useActionState:Qy,useOptimistic:function(i,r){var l=Cn();return qy(l,Zt,i,r)},useMemoCache:zp,useCacheRefresh:p_};Kp.useEffectEvent=n_;var __={readContext:ri,use:Qh,useCallback:a_,useContext:ri,useEffect:Fp,useImperativeHandle:o_,useInsertionEffect:i_,useLayoutEffect:s_,useMemo:l_,useReducer:jp,useRef:e_,useState:function(){return jp(ro)},useDebugValue:Hp,useDeferredValue:function(i,r){var l=Cn();return Zt===null?qp(l,i,r):u_(l,Zt.memoizedState,i,r)},useTransition:function(){var i=jp(ro)[0],r=Cn().memoizedState;return[typeof i=="boolean"?i:fc(i),r]},useSyncExternalStore:Vy,useId:f_,useHostTransitionStatus:Zp,useFormState:Jy,useActionState:Jy,useOptimistic:function(i,r){var l=Cn();return Zt!==null?qy(l,Zt,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:zp,useCacheRefresh:p_};__.useEffectEvent=n_;function $p(i,r,l,h){r=i.memoizedState,l=l(h,r),l=l==null?r:S({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Yp={enqueueSetState:function(i,r,l){i=i._reactInternals;var h=vs(),m=Ko(h);m.payload=r,l!=null&&(m.callback=l),r=$o(i,m,h),r!==null&&(ts(r,i,h),uc(r,i,h))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var h=vs(),m=Ko(h);m.tag=1,m.payload=r,l!=null&&(m.callback=l),r=$o(i,m,h),r!==null&&(ts(r,i,h),uc(r,i,h))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=vs(),h=Ko(l);h.tag=2,r!=null&&(h.callback=r),r=$o(i,h,l),r!==null&&(ts(r,i,l),uc(r,i,l))}};function b_(i,r,l,h,m,y,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,A):r.prototype&&r.prototype.isPureReactComponent?!Bo(l,h)||!Bo(m,y):!0}function w_(i,r,l,h){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,h),r.state!==i&&Yp.enqueueReplaceState(r,r.state,null)}function fl(i,r){var l=r;if("ref"in r){l={};for(var h in r)h!=="ref"&&(l[h]=r[h])}if(i=i.defaultProps){l===r&&(l=S({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}function E_(i){tl(i)}function T_(i){console.error(i)}function S_(i){tl(i)}function nd(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function x_(i,r,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Qp(i,r,l){return l=Ko(l),l.tag=3,l.payload={element:null},l.callback=function(){nd(i,r)},l}function C_(i){return i=Ko(i),i.tag=3,i}function A_(i,r,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;i.payload=function(){return m(y)},i.callback=function(){x_(r,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){x_(r,l,h),typeof m!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var P=h.stack;this.componentDidCatch(h.value,{componentStack:P!==null?P:""})})}function gA(i,r,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=l.alternate,r!==null&&Jl(r,l,m,!0),l=fs.current,l!==null){switch(l.tag){case 31:case 13:return Rs===null?pd():l.alternate===null&&bn===0&&(bn=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===Hh?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([h]):r.add(h),Eg(i,h,m)),!1;case 22:return l.flags|=65536,h===Hh?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([h]):l.add(h)),Eg(i,h,m)),!1}throw Error(s(435,l.tag))}return Eg(i,h,m),pd(),!1}if(bt)return r=fs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,h!==Xl&&(i=Error(s(422),{cause:h}),rl(c(i,l)))):(h!==Xl&&(r=Error(s(423),{cause:h}),rl(c(r,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,h=c(h,l),m=Qp(i.stateNode,h,m),Ap(i,m),bn!==4&&(bn=2)),!1;var y=Error(s(520),{cause:h});if(y=c(y,l),Tc===null?Tc=[y]:Tc.push(y),bn!==4&&(bn=2),r===null)return!0;h=c(h,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=Qp(l.stateNode,h,i),Ap(l,i),!1;case 1:if(r=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ta===null||!ta.has(y))))return l.flags|=65536,m&=-m,l.lanes|=m,m=C_(m),A_(m,i,l,h),Ap(l,m),!1}l=l.return}while(l!==null);return!1}var Xp=Error(s(461)),Dn=!1;function oi(i,r,l,h){r.child=i===null?Ry(r,null,l,h):hl(r,i.child,l,h)}function k_(i,r,l,h,m){l=l.render;var y=r.ref;if("ref"in h){var A={};for(var P in h)P!=="ref"&&(A[P]=h[P])}else A=h;return al(r),h=Op(i,r,l,A,y,m),P=Pp(),i!==null&&!Dn?(Dp(i,r,m),oo(i,r,m)):(bt&&P&&Fn(r),r.flags|=1,oi(i,r,h,m),r.child)}function L_(i,r,l,h,m){if(i===null){var y=l.type;return typeof y=="function"&&!Yl(y)&&y.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=y,I_(i,r,y,h,m)):(i=sl(l.type,null,h,r,r.mode,m),i.ref=r.ref,i.return=r,r.child=i)}if(y=i.child,!og(i,m)){var A=y.memoizedProps;if(l=l.compare,l=l!==null?l:Bo,l(A,h)&&i.ref===r.ref)return oo(i,r,m)}return r.flags|=1,i=Is(y,h),i.ref=r.ref,i.return=r,r.child=i}function I_(i,r,l,h,m){if(i!==null){var y=i.memoizedProps;if(Bo(y,h)&&i.ref===r.ref)if(Dn=!1,r.pendingProps=h=y,og(i,m))(i.flags&131072)!==0&&(Dn=!0);else return r.lanes=i.lanes,oo(i,r,m)}return Jp(i,r,l,h,m)}function R_(i,r,l,h){var m=h.children,y=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((r.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(h=r.child=i.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~y}else h=0,r.child=null;return M_(i,r,y,l,h)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bh(r,y!==null?y.cachePool:null),y!==null?Py(r,y):Lp(),Dy(r);else return h=r.lanes=536870912,M_(i,r,y!==null?y.baseLanes|l:l,l,h)}else y!==null?(Bh(r,y.cachePool),Py(r,y),Qo(),r.memoizedState=null):(i!==null&&Bh(r,null),Lp(),Qo());return oi(i,r,m,l),r.child}function mc(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function M_(i,r,l,h,m){var y=Tp();return y=y===null?null:{parent:On._currentValue,pool:y},r.memoizedState={baseLanes:l,cachePool:y},i!==null&&Bh(r,null),Lp(),Dy(r),i!==null&&Jl(i,r,h,!0),r.childLanes=m,null}function id(i,r){return r=rd({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function O_(i,r,l){return hl(r,i.child,null,l),i=id(r,r.pendingProps),i.flags|=2,ps(r),r.memoizedState=null,i}function mA(i,r,l){var h=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(bt){if(h.mode==="hidden")return i=id(r,h),r.lanes=536870912,mc(null,i);if(Rp(r),(i=Nt)?(i=G0(i,Yi),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ve!==null?{id:Ce,overflow:Ne}:null,retryLane:536870912,hydrationErrors:null},l=tc(i),l.return=r,r.child=l,Dt=r,Nt=null)):i=null,i===null)throw Ir(r);return r.lanes=536870912,null}return id(r,h)}var y=i.memoizedState;if(y!==null){var A=y.dehydrated;if(Rp(r),m)if(r.flags&256)r.flags&=-257,r=O_(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Dn||Jl(i,r,l,!1),m=(l&i.childLanes)!==0,Dn||m){if(h=Xt,h!==null&&(A=hr(h,l),A!==0&&A!==y.retryLane))throw y.retryLane=A,Ls(i,A),ts(h,i,A),Xp;pd(),r=O_(i,r,l)}else i=y.treeContext,Nt=Ms(A.nextSibling),Dt=r,bt=!0,Lr=null,Yi=!1,i!==null&&Oi(r,i),r=id(r,h),r.flags|=4096;return r}return i=Is(i.child,{mode:h.mode,children:h.children}),i.ref=r.ref,r.child=i,i.return=r,i}function sd(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function Jp(i,r,l,h,m){return al(r),l=Op(i,r,l,h,void 0,m),h=Pp(),i!==null&&!Dn?(Dp(i,r,m),oo(i,r,m)):(bt&&h&&Fn(r),r.flags|=1,oi(i,r,l,m),r.child)}function P_(i,r,l,h,m,y){return al(r),r.updateQueue=null,l=zy(r,h,l,m),Ny(i),h=Pp(),i!==null&&!Dn?(Dp(i,r,y),oo(i,r,y)):(bt&&h&&Fn(r),r.flags|=1,oi(i,r,l,y),r.child)}function D_(i,r,l,h,m){if(al(r),r.stateNode===null){var y=eo,A=l.contextType;typeof A=="object"&&A!==null&&(y=ri(A)),y=new l(h,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Yp,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=h,y.state=r.memoizedState,y.refs={},xp(r),A=l.contextType,y.context=typeof A=="object"&&A!==null?ri(A):eo,y.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&($p(r,l,A,h),y.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(A=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),A!==y.state&&Yp.enqueueReplaceState(y,y.state,null),hc(r,h,y,m),cc(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(i===null){y=r.stateNode;var P=r.memoizedProps,Y=fl(l,P);y.props=Y;var me=y.context,Te=l.contextType;A=eo,typeof Te=="object"&&Te!==null&&(A=ri(Te));var Ae=l.getDerivedStateFromProps;Te=typeof Ae=="function"||typeof y.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,Te||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(P||me!==A)&&w_(r,y,h,A),Wo=!1;var ye=r.memoizedState;y.state=ye,hc(r,h,y,m),cc(),me=r.memoizedState,P||ye!==me||Wo?(typeof Ae=="function"&&($p(r,l,Ae,h),me=r.memoizedState),(Y=Wo||b_(r,l,Y,h,ye,me,A))?(Te||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=me),y.props=h,y.state=me,y.context=A,h=Y):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{y=r.stateNode,Cp(i,r),A=r.memoizedProps,Te=fl(l,A),y.props=Te,Ae=r.pendingProps,ye=y.context,me=l.contextType,Y=eo,typeof me=="object"&&me!==null&&(Y=ri(me)),P=l.getDerivedStateFromProps,(me=typeof P=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A!==Ae||ye!==Y)&&w_(r,y,h,Y),Wo=!1,ye=r.memoizedState,y.state=ye,hc(r,h,y,m),cc();var be=r.memoizedState;A!==Ae||ye!==be||Wo||i!==null&&i.dependencies!==null&&jh(i.dependencies)?(typeof P=="function"&&($p(r,l,P,h),be=r.memoizedState),(Te=Wo||b_(r,l,Te,h,ye,be,Y)||i!==null&&i.dependencies!==null&&jh(i.dependencies))?(me||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,be,Y),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,be,Y)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||A===i.memoizedProps&&ye===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ye===i.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=be),y.props=h,y.state=be,y.context=Y,h=Te):(typeof y.componentDidUpdate!="function"||A===i.memoizedProps&&ye===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ye===i.memoizedState||(r.flags|=1024),h=!1)}return y=h,sd(i,r),h=(r.flags&128)!==0,y||h?(y=r.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,i!==null&&h?(r.child=hl(r,i.child,null,m),r.child=hl(r,null,l,m)):oi(i,r,l,m),r.memoizedState=y.state,i=r.child):i=oo(i,r,m),i}function N_(i,r,l,h){return no(),r.flags|=256,oi(i,r,l,h),r.child}var eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tg(i){return{baseLanes:i,cachePool:xy()}}function ng(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=ms),i}function z_(i,r,l){var h=r.pendingProps,m=!1,y=(r.flags&128)!==0,A;if((A=y)||(A=i!==null&&i.memoizedState===null?!1:(xn.current&2)!==0),A&&(m=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(bt){if(m?Yo(r):Qo(),(i=Nt)?(i=G0(i,Yi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ve!==null?{id:Ce,overflow:Ne}:null,retryLane:536870912,hydrationErrors:null},l=tc(i),l.return=r,r.child=l,Dt=r,Nt=null)):i=null,i===null)throw Ir(r);return Vg(i)?r.lanes=32:r.lanes=536870912,null}var P=h.children;return h=h.fallback,m?(Qo(),m=r.mode,P=rd({mode:"hidden",children:P},m),h=to(h,m,l,null),P.return=r,h.return=r,P.sibling=h,r.child=P,h=r.child,h.memoizedState=tg(l),h.childLanes=ng(i,A,l),r.memoizedState=eg,mc(null,h)):(Yo(r),ig(r,P))}var Y=i.memoizedState;if(Y!==null&&(P=Y.dehydrated,P!==null)){if(y)r.flags&256?(Yo(r),r.flags&=-257,r=sg(i,r,l)):r.memoizedState!==null?(Qo(),r.child=i.child,r.flags|=128,r=null):(Qo(),P=h.fallback,m=r.mode,h=rd({mode:"visible",children:h.children},m),P=to(P,m,l,null),P.flags|=2,h.return=r,P.return=r,h.sibling=P,r.child=h,hl(r,i.child,null,l),h=r.child,h.memoizedState=tg(l),h.childLanes=ng(i,A,l),r.memoizedState=eg,r=mc(null,h));else if(Yo(r),Vg(P)){if(A=P.nextSibling&&P.nextSibling.dataset,A)var me=A.dgst;A=me,h=Error(s(419)),h.stack="",h.digest=A,rl({value:h,source:null,stack:null}),r=sg(i,r,l)}else if(Dn||Jl(i,r,l,!1),A=(l&i.childLanes)!==0,Dn||A){if(A=Xt,A!==null&&(h=hr(A,l),h!==0&&h!==Y.retryLane))throw Y.retryLane=h,Ls(i,h),ts(A,i,h),Xp;zg(P)||pd(),r=sg(i,r,l)}else zg(P)?(r.flags|=192,r.child=i.child,r=null):(i=Y.treeContext,Nt=Ms(P.nextSibling),Dt=r,bt=!0,Lr=null,Yi=!1,i!==null&&Oi(r,i),r=ig(r,h.children),r.flags|=4096);return r}return m?(Qo(),P=h.fallback,m=r.mode,Y=i.child,me=Y.sibling,h=Is(Y,{mode:"hidden",children:h.children}),h.subtreeFlags=Y.subtreeFlags&65011712,me!==null?P=Is(me,P):(P=to(P,m,l,null),P.flags|=2),P.return=r,h.return=r,h.sibling=P,r.child=h,mc(null,h),h=r.child,P=i.child.memoizedState,P===null?P=tg(l):(m=P.cachePool,m!==null?(Y=On._currentValue,m=m.parent!==Y?{parent:Y,pool:Y}:m):m=xy(),P={baseLanes:P.baseLanes|l,cachePool:m}),h.memoizedState=P,h.childLanes=ng(i,A,l),r.memoizedState=eg,mc(i.child,h)):(Yo(r),l=i.child,i=l.sibling,l=Is(l,{mode:"visible",children:h.children}),l.return=r,l.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=l,r.memoizedState=null,l)}function ig(i,r){return r=rd({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function rd(i,r){return i=_i(22,i,null,r),i.lanes=0,i}function sg(i,r,l){return hl(r,i.child,null,l),i=ig(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function V_(i,r,l){i.lanes|=r;var h=i.alternate;h!==null&&(h.lanes|=r),_p(i.return,r,l)}function rg(i,r,l,h,m,y){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m,treeForkCount:y}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=m,A.treeForkCount=y)}function j_(i,r,l){var h=r.pendingProps,m=h.revealOrder,y=h.tail;h=h.children;var A=xn.current,P=(A&2)!==0;if(P?(A=A&1|2,r.flags|=128):A&=1,K(xn,A),oi(i,r,h,l),h=bt?R:0,!P&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&V_(i,l,r);else if(i.tag===19)V_(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(l=r.child,m=null;l!==null;)i=l.alternate,i!==null&&Wh(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=r.child,r.child=null):(m=l.sibling,l.sibling=null),rg(r,!1,m,l,y,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=r.child,r.child=null;m!==null;){if(i=m.alternate,i!==null&&Wh(i)===null){r.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}rg(r,!0,l,null,y,h);break;case"together":rg(r,!1,null,null,void 0,h);break;default:r.memoizedState=null}return r.child}function oo(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),ea|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(Jl(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=Is(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=Is(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function og(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&jh(i)))}function vA(i,r,l){switch(r.tag){case 3:Re(r,r.stateNode.containerInfo),Zo(r,On,i.memoizedState.cache),no();break;case 27:case 5:Ie(r);break;case 4:Re(r,r.stateNode.containerInfo);break;case 10:Zo(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Rp(r),null;break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Yo(r),r.flags|=128,null):(l&r.child.childLanes)!==0?z_(i,r,l):(Yo(r),i=oo(i,r,l),i!==null?i.sibling:null);Yo(r);break;case 19:var m=(i.flags&128)!==0;if(h=(l&r.childLanes)!==0,h||(Jl(i,r,l,!1),h=(l&r.childLanes)!==0),m){if(h)return j_(i,r,l);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),K(xn,xn.current),h)break;return null;case 22:return r.lanes=0,R_(i,r,l,r.pendingProps);case 24:Zo(r,On,i.memoizedState.cache)}return oo(i,r,l)}function U_(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)Dn=!0;else{if(!og(i,l)&&(r.flags&128)===0)return Dn=!1,vA(i,r,l);Dn=(i.flags&131072)!==0}else Dn=!1,bt&&(r.flags&1048576)!==0&&ft(r,R,r.index);switch(r.lanes=0,r.tag){case 16:e:{var h=r.pendingProps;if(i=ul(r.elementType),r.type=i,typeof i=="function")Yl(i)?(h=fl(i,h),r.tag=1,r=D_(null,r,i,h,l)):(r.tag=0,r=Jp(null,r,i,h,l));else{if(i!=null){var m=i.$$typeof;if(m===oe){r.tag=11,r=k_(null,r,i,h,l);break e}else if(m===V){r.tag=14,r=L_(null,r,i,h,l);break e}}throw r=Pe(i)||i,Error(s(306,r,""))}}return r;case 0:return Jp(i,r,r.type,r.pendingProps,l);case 1:return h=r.type,m=fl(h,r.pendingProps),D_(i,r,h,m,l);case 3:e:{if(Re(r,r.stateNode.containerInfo),i===null)throw Error(s(387));h=r.pendingProps;var y=r.memoizedState;m=y.element,Cp(i,r),hc(r,h,null,l);var A=r.memoizedState;if(h=A.cache,Zo(r,On,h),h!==y.cache&&bp(r,[On],l,!0),cc(),h=A.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=N_(i,r,h,l);break e}else if(h!==m){m=c(Error(s(424)),r),rl(m),r=N_(i,r,h,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Nt=Ms(i.firstChild),Dt=r,bt=!0,Lr=null,Yi=!0,l=Ry(r,null,h,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(no(),h===m){r=oo(i,r,l);break e}oi(i,r,h,l)}r=r.child}return r;case 26:return sd(i,r),i===null?(l=Q0(r.type,null,r.pendingProps,null))?r.memoizedState=l:bt||(l=r.type,i=r.pendingProps,h=wd(ce.current).createElement(l),h[nn]=r,h[Tn]=i,ai(h,l,i),hn(h),r.stateNode=h):r.memoizedState=Q0(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Ie(r),i===null&&bt&&(h=r.stateNode=K0(r.type,r.pendingProps,ce.current),Dt=r,Yi=!0,m=Nt,ra(r.type)?(jg=m,Nt=Ms(h.firstChild)):Nt=m),oi(i,r,r.pendingProps.children,l),sd(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&bt&&((m=h=Nt)&&(h=WA(h,r.type,r.pendingProps,Yi),h!==null?(r.stateNode=h,Dt=r,Nt=Ms(h.firstChild),Yi=!1,m=!0):m=!1),m||Ir(r)),Ie(r),m=r.type,y=r.pendingProps,A=i!==null?i.memoizedProps:null,h=y.children,Pg(m,y)?h=null:A!==null&&Pg(m,A)&&(r.flags|=32),r.memoizedState!==null&&(m=Op(i,r,lA,null,null,l),Rc._currentValue=m),sd(i,r),oi(i,r,h,l),r.child;case 6:return i===null&&bt&&((i=l=Nt)&&(l=KA(l,r.pendingProps,Yi),l!==null?(r.stateNode=l,Dt=r,Nt=null,i=!0):i=!1),i||Ir(r)),null;case 13:return z_(i,r,l);case 4:return Re(r,r.stateNode.containerInfo),h=r.pendingProps,i===null?r.child=hl(r,null,h,l):oi(i,r,h,l),r.child;case 11:return k_(i,r,r.type,r.pendingProps,l);case 7:return oi(i,r,r.pendingProps,l),r.child;case 8:return oi(i,r,r.pendingProps.children,l),r.child;case 12:return oi(i,r,r.pendingProps.children,l),r.child;case 10:return h=r.pendingProps,Zo(r,r.type,h.value),oi(i,r,h.children,l),r.child;case 9:return m=r.type._context,h=r.pendingProps.children,al(r),m=ri(m),h=h(m),r.flags|=1,oi(i,r,h,l),r.child;case 14:return L_(i,r,r.type,r.pendingProps,l);case 15:return I_(i,r,r.type,r.pendingProps,l);case 19:return j_(i,r,l);case 31:return mA(i,r,l);case 22:return R_(i,r,l,r.pendingProps);case 24:return al(r),h=ri(On),i===null?(m=Tp(),m===null&&(m=Xt,y=wp(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=l),m=y),r.memoizedState={parent:h,cache:m},xp(r),Zo(r,On,m)):((i.lanes&l)!==0&&(Cp(i,r),hc(r,null,null,l),cc()),m=i.memoizedState,y=r.memoizedState,m.parent!==h?(m={parent:h,cache:h},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Zo(r,On,h)):(h=y.cache,Zo(r,On,h),h!==m.cache&&bp(r,[On],l,!0))),oi(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ao(i){i.flags|=4}function ag(i,r,l,h,m){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(f0())i.flags|=8192;else throw cl=Hh,Sp}else i.flags&=-16777217}function B_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!nb(r))if(f0())i.flags|=8192;else throw cl=Hh,Sp}function od(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?ws():536870912,i.lanes|=r,hu|=r)}function vc(i,r){if(!bt)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function rn(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(r)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=l,r}function yA(i,r,l){var h=r.pendingProps;switch(yn(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(r),null;case 1:return rn(r),null;case 3:return l=r.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),io(On),je(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Qs(r)?ao(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,sc())),rn(r),null;case 26:var m=r.type,y=r.memoizedState;return i===null?(ao(r),y!==null?(rn(r),B_(r,y)):(rn(r),ag(r,m,null,h,l))):y?y!==i.memoizedState?(ao(r),rn(r),B_(r,y)):(rn(r),r.flags&=-16777217):(i=i.memoizedProps,i!==h&&ao(r),rn(r),ag(r,m,i,h,l)),null;case 27:if(Me(r),l=ce.current,m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==h&&ao(r);else{if(!h){if(r.stateNode===null)throw Error(s(166));return rn(r),null}i=se.current,Qs(r)?ic(r):(i=K0(m,h,l),r.stateNode=i,ao(r))}return rn(r),null;case 5:if(Me(r),m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==h&&ao(r);else{if(!h){if(r.stateNode===null)throw Error(s(166));return rn(r),null}if(y=se.current,Qs(r))ic(r);else{var A=wd(ce.current);switch(y){case 1:y=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=A.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?A.createElement(m,{is:h.is}):A.createElement(m)}}y[nn]=r,y[Tn]=h;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=y;e:switch(ai(y,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ao(r)}}return rn(r),ag(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==h&&ao(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(s(166));if(i=ce.current,Qs(r)){if(i=r.stateNode,l=r.memoizedProps,h=null,m=Dt,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}i[nn]=r,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||z0(i.nodeValue,l)),i||Ir(r,!0)}else i=wd(i).createTextNode(h),i[nn]=r,r.stateNode=i}return rn(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(h=Qs(r),l!==null){if(i===null){if(!h)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[nn]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;rn(r),i=!1}else l=sc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(ps(r),r):(ps(r),null);if((r.flags&128)!==0)throw Error(s(558))}return rn(r),null;case 13:if(h=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Qs(r),h!==null&&h.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[nn]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;rn(r),m=!1}else m=sc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(ps(r),r):(ps(r),null)}return ps(r),(r.flags&128)!==0?(r.lanes=l,r):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=r.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),od(r,r.updateQueue),rn(r),null);case 4:return je(),i===null&&Lg(r.stateNode.containerInfo),rn(r),null;case 10:return io(r.type),rn(r),null;case 19:if(F(xn),h=r.memoizedState,h===null)return rn(r),null;if(m=(r.flags&128)!==0,y=h.rendering,y===null)if(m)vc(h,!1);else{if(bn!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(y=Wh(i),y!==null){for(r.flags|=128,vc(h,!1),i=y.updateQueue,r.updateQueue=i,od(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)ec(l,i),l=l.sibling;return K(xn,xn.current&1|2),bt&&qe(r,h.treeForkCount),r.child}i=i.sibling}h.tail!==null&&kt()>hd&&(r.flags|=128,m=!0,vc(h,!1),r.lanes=4194304)}else{if(!m)if(i=Wh(y),i!==null){if(r.flags|=128,m=!0,i=i.updateQueue,r.updateQueue=i,od(r,i),vc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!bt)return rn(r),null}else 2*kt()-h.renderingStartTime>hd&&l!==536870912&&(r.flags|=128,m=!0,vc(h,!1),r.lanes=4194304);h.isBackwards?(y.sibling=r.child,r.child=y):(i=h.last,i!==null?i.sibling=y:r.child=y,h.last=y)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=kt(),i.sibling=null,l=xn.current,K(xn,m?l&1|2:l&1),bt&&qe(r,h.treeForkCount),i):(rn(r),null);case 22:case 23:return ps(r),Ip(),h=r.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(l&536870912)!==0&&(r.flags&128)===0&&(rn(r),r.subtreeFlags&6&&(r.flags|=8192)):rn(r),l=r.updateQueue,l!==null&&od(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==l&&(r.flags|=2048),i!==null&&F(ll),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),io(On),rn(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function _A(i,r){switch(yn(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return io(On),je(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Me(r),null;case 31:if(r.memoizedState!==null){if(ps(r),r.alternate===null)throw Error(s(340));no()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(ps(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));no()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return F(xn),null;case 4:return je(),null;case 10:return io(r.type),null;case 22:case 23:return ps(r),Ip(),i!==null&&F(ll),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return io(On),null;case 25:return null;default:return null}}function F_(i,r){switch(yn(r),r.tag){case 3:io(On),je();break;case 26:case 27:case 5:Me(r);break;case 4:je();break;case 31:r.memoizedState!==null&&ps(r);break;case 13:ps(r);break;case 19:F(xn);break;case 10:io(r.type);break;case 22:case 23:ps(r),Ip(),i!==null&&F(ll);break;case 24:io(On)}}function yc(i,r){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&i)===i){h=void 0;var y=l.create,A=l.inst;h=y(),A.destroy=h}l=l.next}while(l!==m)}}catch(P){qt(r,r.return,P)}}function Xo(i,r,l){try{var h=r.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&i)===i){var A=h.inst,P=A.destroy;if(P!==void 0){A.destroy=void 0,m=r;var Y=l,me=P;try{me()}catch(Te){qt(m,Y,Te)}}}h=h.next}while(h!==y)}}catch(Te){qt(r,r.return,Te)}}function H_(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{Oy(r,l)}catch(h){qt(i,i.return,h)}}}function q_(i,r,l){l.props=fl(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){qt(i,r,h)}}function _c(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(m){qt(i,r,m)}}function Mr(i,r){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){qt(i,r,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){qt(i,r,m)}else l.current=null}function G_(i){var r=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){qt(i,i.return,m)}}function lg(i,r,l){try{var h=i.stateNode;BA(h,i.type,l,r),h[Tn]=r}catch(m){qt(i,i.return,m)}}function Z_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ra(i.type)||i.tag===4}function ug(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Z_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ra(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function cg(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=dn));else if(h!==4&&(h===27&&ra(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(cg(i,r,l),i=i.sibling;i!==null;)cg(i,r,l),i=i.sibling}function ad(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(h!==4&&(h===27&&ra(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(ad(i,r,l),i=i.sibling;i!==null;)ad(i,r,l),i=i.sibling}function W_(i){var r=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);ai(r,h,l),r[nn]=i,r[Tn]=l}catch(y){qt(i,i.return,y)}}var lo=!1,Nn=!1,hg=!1,K_=typeof WeakSet=="function"?WeakSet:Set,Jn=null;function bA(i,r){if(i=i.containerInfo,Mg=kd,i=Qa(i),Sr(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var A=0,P=-1,Y=-1,me=0,Te=0,Ae=i,ye=null;t:for(;;){for(var be;Ae!==l||m!==0&&Ae.nodeType!==3||(P=A+m),Ae!==y||h!==0&&Ae.nodeType!==3||(Y=A+h),Ae.nodeType===3&&(A+=Ae.nodeValue.length),(be=Ae.firstChild)!==null;)ye=Ae,Ae=be;for(;;){if(Ae===i)break t;if(ye===l&&++me===m&&(P=A),ye===y&&++Te===h&&(Y=A),(be=Ae.nextSibling)!==null)break;Ae=ye,ye=Ae.parentNode}Ae=be}l=P===-1||Y===-1?null:{start:P,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(Og={focusedElem:i,selectionRange:l},kd=!1,Jn=r;Jn!==null;)if(r=Jn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Jn=i;else for(;Jn!==null;){switch(r=Jn,y=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)m=i[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=r,m=y.memoizedProps,y=y.memoizedState,h=l.stateNode;try{var Be=fl(l.type,m);i=h.getSnapshotBeforeUpdate(Be,y),h.__reactInternalSnapshotBeforeUpdate=i}catch(Qe){qt(l,l.return,Qe)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)Ng(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ng(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Jn=i;break}Jn=r.return}}function $_(i,r,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:co(i,l),h&4&&yc(5,l);break;case 1:if(co(i,l),h&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(A){qt(l,l.return,A)}else{var m=fl(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(m,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){qt(l,l.return,A)}}h&64&&H_(l),h&512&&_c(l,l.return);break;case 3:if(co(i,l),h&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Oy(i,r)}catch(A){qt(l,l.return,A)}}break;case 27:r===null&&h&4&&W_(l);case 26:case 5:co(i,l),r===null&&h&4&&G_(l),h&512&&_c(l,l.return);break;case 12:co(i,l);break;case 31:co(i,l),h&4&&X_(i,l);break;case 13:co(i,l),h&4&&J_(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=LA.bind(null,l),$A(i,l))));break;case 22:if(h=l.memoizedState!==null||lo,!h){r=r!==null&&r.memoizedState!==null||Nn,m=lo;var y=Nn;lo=h,(Nn=r)&&!y?ho(i,l,(l.subtreeFlags&8772)!==0):co(i,l),lo=m,Nn=y}break;case 30:break;default:co(i,l)}}function Y_(i){var r=i.alternate;r!==null&&(i.alternate=null,Y_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Gr(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var un=null,Qi=!1;function uo(i,r,l){for(l=l.child;l!==null;)Q_(i,r,l),l=l.sibling}function Q_(i,r,l){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(fi,l)}catch{}switch(l.tag){case 26:Nn||Mr(l,r),uo(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Nn||Mr(l,r);var h=un,m=Qi;ra(l.type)&&(un=l.stateNode,Qi=!1),uo(i,r,l),kc(l.stateNode),un=h,Qi=m;break;case 5:Nn||Mr(l,r);case 6:if(h=un,m=Qi,un=null,uo(i,r,l),un=h,Qi=m,un!==null)if(Qi)try{(un.nodeType===9?un.body:un.nodeName==="HTML"?un.ownerDocument.body:un).removeChild(l.stateNode)}catch(y){qt(l,r,y)}else try{un.removeChild(l.stateNode)}catch(y){qt(l,r,y)}break;case 18:un!==null&&(Qi?(i=un,H0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),_u(i)):H0(un,l.stateNode));break;case 4:h=un,m=Qi,un=l.stateNode.containerInfo,Qi=!0,uo(i,r,l),un=h,Qi=m;break;case 0:case 11:case 14:case 15:Xo(2,l,r),Nn||Xo(4,l,r),uo(i,r,l);break;case 1:Nn||(Mr(l,r),h=l.stateNode,typeof h.componentWillUnmount=="function"&&q_(l,r,h)),uo(i,r,l);break;case 21:uo(i,r,l);break;case 22:Nn=(h=Nn)||l.memoizedState!==null,uo(i,r,l),Nn=h;break;default:uo(i,r,l)}}function X_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{_u(i)}catch(l){qt(r,r.return,l)}}}function J_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{_u(i)}catch(l){qt(r,r.return,l)}}function wA(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new K_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new K_),r;default:throw Error(s(435,i.tag))}}function ld(i,r){var l=wA(i);r.forEach(function(h){if(!l.has(h)){l.add(h);var m=IA.bind(null,i,h);h.then(m,m)}})}function Xi(i,r){var l=r.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],y=i,A=r,P=A;e:for(;P!==null;){switch(P.tag){case 27:if(ra(P.type)){un=P.stateNode,Qi=!1;break e}break;case 5:un=P.stateNode,Qi=!1;break e;case 3:case 4:un=P.stateNode.containerInfo,Qi=!0;break e}P=P.return}if(un===null)throw Error(s(160));Q_(y,A,m),un=null,Qi=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)e0(r,i),r=r.sibling}var Js=null;function e0(i,r){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Xi(r,i),Ji(i),h&4&&(Xo(3,i,i.return),yc(3,i),Xo(5,i,i.return));break;case 1:Xi(r,i),Ji(i),h&512&&(Nn||l===null||Mr(l,l.return)),h&64&&lo&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=Js;if(Xi(r,i),Ji(i),h&512&&(Nn||l===null||Mr(l,l.return)),h&4){var y=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Us]||y[nn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),ai(y,h,l),y[nn]=i,hn(y),h=y;break e;case"link":var A=eb("link","href",m).get(h+(l.href||""));if(A){for(var P=0;P<A.length;P++)if(y=A[P],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(P,1);break t}}y=m.createElement(h),ai(y,h,l),m.head.appendChild(y);break;case"meta":if(A=eb("meta","content",m).get(h+(l.content||""))){for(P=0;P<A.length;P++)if(y=A[P],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(P,1);break t}}y=m.createElement(h),ai(y,h,l),m.head.appendChild(y);break;default:throw Error(s(468,h))}y[nn]=i,hn(y),h=y}i.stateNode=h}else tb(m,i.type,i.stateNode);else i.stateNode=J0(m,h,i.memoizedProps);else y!==h?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,h===null?tb(m,i.type,i.stateNode):J0(m,h,i.memoizedProps)):h===null&&i.stateNode!==null&&lg(i,i.memoizedProps,l.memoizedProps)}break;case 27:Xi(r,i),Ji(i),h&512&&(Nn||l===null||Mr(l,l.return)),l!==null&&h&4&&lg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Xi(r,i),Ji(i),h&512&&(Nn||l===null||Mr(l,l.return)),i.flags&32){m=i.stateNode;try{Wn(m,"")}catch(Be){qt(i,i.return,Be)}}h&4&&i.stateNode!=null&&(m=i.memoizedProps,lg(i,m,l!==null?l.memoizedProps:m)),h&1024&&(hg=!0);break;case 6:if(Xi(r,i),Ji(i),h&4){if(i.stateNode===null)throw Error(s(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Be){qt(i,i.return,Be)}}break;case 3:if(Sd=null,m=Js,Js=Ed(r.containerInfo),Xi(r,i),Js=m,Ji(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{_u(r.containerInfo)}catch(Be){qt(i,i.return,Be)}hg&&(hg=!1,t0(i));break;case 4:h=Js,Js=Ed(i.stateNode.containerInfo),Xi(r,i),Ji(i),Js=h;break;case 12:Xi(r,i),Ji(i);break;case 31:Xi(r,i),Ji(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,ld(i,h)));break;case 13:Xi(r,i),Ji(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(cd=kt()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,ld(i,h)));break;case 22:m=i.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,me=lo,Te=Nn;if(lo=me||m,Nn=Te||Y,Xi(r,i),Nn=Te,lo=me,Ji(i),h&8192)e:for(r=i.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(l===null||Y||lo||Nn||pl(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){Y=l=r;try{if(y=Y.stateNode,m)A=y.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{P=Y.stateNode;var Ae=Y.memoizedProps.style,ye=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;P.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(Be){qt(Y,Y.return,Be)}}}else if(r.tag===6){if(l===null){Y=r;try{Y.stateNode.nodeValue=m?"":Y.memoizedProps}catch(Be){qt(Y,Y.return,Be)}}}else if(r.tag===18){if(l===null){Y=r;try{var be=Y.stateNode;m?q0(be,!0):q0(Y.stateNode,!1)}catch(Be){qt(Y,Y.return,Be)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,ld(i,l))));break;case 19:Xi(r,i),Ji(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,ld(i,h)));break;case 30:break;case 21:break;default:Xi(r,i),Ji(i)}}function Ji(i){var r=i.flags;if(r&2){try{for(var l,h=i.return;h!==null;){if(Z_(h)){l=h;break}h=h.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var m=l.stateNode,y=ug(i);ad(i,y,m);break;case 5:var A=l.stateNode;l.flags&32&&(Wn(A,""),l.flags&=-33);var P=ug(i);ad(i,P,A);break;case 3:case 4:var Y=l.stateNode.containerInfo,me=ug(i);cg(i,me,Y);break;default:throw Error(s(161))}}catch(Te){qt(i,i.return,Te)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function t0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;t0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function co(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)$_(i,r.alternate,r),r=r.sibling}function pl(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Xo(4,r,r.return),pl(r);break;case 1:Mr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&q_(r,r.return,l),pl(r);break;case 27:kc(r.stateNode);case 26:case 5:Mr(r,r.return),pl(r);break;case 22:r.memoizedState===null&&pl(r);break;case 30:pl(r);break;default:pl(r)}i=i.sibling}}function ho(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,m=i,y=r,A=y.flags;switch(y.tag){case 0:case 11:case 15:ho(m,y,l),yc(4,y);break;case 1:if(ho(m,y,l),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(me){qt(h,h.return,me)}if(h=y,m=h.updateQueue,m!==null){var P=h.stateNode;try{var Y=m.shared.hiddenCallbacks;if(Y!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Y.length;m++)My(Y[m],P)}catch(me){qt(h,h.return,me)}}l&&A&64&&H_(y),_c(y,y.return);break;case 27:W_(y);case 26:case 5:ho(m,y,l),l&&h===null&&A&4&&G_(y),_c(y,y.return);break;case 12:ho(m,y,l);break;case 31:ho(m,y,l),l&&A&4&&X_(m,y);break;case 13:ho(m,y,l),l&&A&4&&J_(m,y);break;case 22:y.memoizedState===null&&ho(m,y,l),_c(y,y.return);break;case 30:break;default:ho(m,y,l)}r=r.sibling}}function dg(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&rc(l))}function fg(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&rc(i))}function er(i,r,l,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)n0(i,r,l,h),r=r.sibling}function n0(i,r,l,h){var m=r.flags;switch(r.tag){case 0:case 11:case 15:er(i,r,l,h),m&2048&&yc(9,r);break;case 1:er(i,r,l,h);break;case 3:er(i,r,l,h),m&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&rc(i)));break;case 12:if(m&2048){er(i,r,l,h),i=r.stateNode;try{var y=r.memoizedProps,A=y.id,P=y.onPostCommit;typeof P=="function"&&P(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){qt(r,r.return,Y)}}else er(i,r,l,h);break;case 31:er(i,r,l,h);break;case 13:er(i,r,l,h);break;case 23:break;case 22:y=r.stateNode,A=r.alternate,r.memoizedState!==null?y._visibility&2?er(i,r,l,h):bc(i,r):y._visibility&2?er(i,r,l,h):(y._visibility|=2,lu(i,r,l,h,(r.subtreeFlags&10256)!==0||!1)),m&2048&&dg(A,r);break;case 24:er(i,r,l,h),m&2048&&fg(r.alternate,r);break;default:er(i,r,l,h)}}function lu(i,r,l,h,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var y=i,A=r,P=l,Y=h,me=A.flags;switch(A.tag){case 0:case 11:case 15:lu(y,A,P,Y,m),yc(8,A);break;case 23:break;case 22:var Te=A.stateNode;A.memoizedState!==null?Te._visibility&2?lu(y,A,P,Y,m):bc(y,A):(Te._visibility|=2,lu(y,A,P,Y,m)),m&&me&2048&&dg(A.alternate,A);break;case 24:lu(y,A,P,Y,m),m&&me&2048&&fg(A.alternate,A);break;default:lu(y,A,P,Y,m)}r=r.sibling}}function bc(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,h=r,m=h.flags;switch(h.tag){case 22:bc(l,h),m&2048&&dg(h.alternate,h);break;case 24:bc(l,h),m&2048&&fg(h.alternate,h);break;default:bc(l,h)}r=r.sibling}}var wc=8192;function uu(i,r,l){if(i.subtreeFlags&wc)for(i=i.child;i!==null;)i0(i,r,l),i=i.sibling}function i0(i,r,l){switch(i.tag){case 26:uu(i,r,l),i.flags&wc&&i.memoizedState!==null&&a1(l,Js,i.memoizedState,i.memoizedProps);break;case 5:uu(i,r,l);break;case 3:case 4:var h=Js;Js=Ed(i.stateNode.containerInfo),uu(i,r,l),Js=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=wc,wc=16777216,uu(i,r,l),wc=h):uu(i,r,l));break;default:uu(i,r,l)}}function s0(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Ec(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];Jn=h,o0(h,i)}s0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)r0(i),i=i.sibling}function r0(i){switch(i.tag){case 0:case 11:case 15:Ec(i),i.flags&2048&&Xo(9,i,i.return);break;case 3:Ec(i);break;case 12:Ec(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,ud(i)):Ec(i);break;default:Ec(i)}}function ud(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];Jn=h,o0(h,i)}s0(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Xo(8,r,r.return),ud(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,ud(r));break;default:ud(r)}i=i.sibling}}function o0(i,r){for(;Jn!==null;){var l=Jn;switch(l.tag){case 0:case 11:case 15:Xo(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:rc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Jn=h;else e:for(l=i;Jn!==null;){h=Jn;var m=h.sibling,y=h.return;if(Y_(h),h===l){Jn=null;break e}if(m!==null){m.return=y,Jn=m;break e}Jn=y}}}var EA={getCacheForType:function(i){var r=ri(On),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return ri(On).controller.signal}},TA=typeof WeakMap=="function"?WeakMap:Map,Ut=0,Xt=null,wt=null,St=0,Ht=0,gs=null,Jo=!1,cu=!1,pg=!1,fo=0,bn=0,ea=0,gl=0,gg=0,ms=0,hu=0,Tc=null,es=null,mg=!1,cd=0,a0=0,hd=1/0,dd=null,ta=null,Hn=0,na=null,du=null,po=0,vg=0,yg=null,l0=null,Sc=0,_g=null;function vs(){return(Ut&2)!==0&&St!==0?St&-St:ie.T!==null?xg():Es()}function u0(){if(ms===0)if((St&536870912)===0||bt){var i=pi;pi<<=1,(pi&3932160)===0&&(pi=262144),ms=i}else ms=536870912;return i=fs.current,i!==null&&(i.flags|=32),ms}function ts(i,r,l){(i===Xt&&(Ht===2||Ht===9)||i.cancelPendingCommit!==null)&&(fu(i,0),ia(i,St,ms,!1)),Bi(i,l),((Ut&2)===0||i!==Xt)&&(i===Xt&&((Ut&2)===0&&(gl|=l),bn===4&&ia(i,St,ms,!1)),Or(i))}function c0(i,r,l){if((Ut&6)!==0)throw Error(s(327));var h=!l&&(r&127)===0&&(r&i.expiredLanes)===0||Ai(i,r),m=h?CA(i,r):wg(i,r,!0),y=h;do{if(m===0){cu&&!h&&ia(i,r,0,!1);break}else{if(l=i.current.alternate,y&&!SA(l)){m=wg(i,r,!1),y=!1;continue}if(m===2){if(y=r,i.errorRecoveryDisabledLanes&y)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var P=i;m=Tc;var Y=P.current.memoizedState.isDehydrated;if(Y&&(fu(P,A).flags|=256),A=wg(P,A,!1),A!==2){if(pg&&!Y){P.errorRecoveryDisabledLanes|=y,gl|=y,m=4;break e}y=es,es=m,y!==null&&(es===null?es=y:es.push.apply(es,y))}m=A}if(y=!1,m!==2)continue}}if(m===1){fu(i,0),ia(i,r,0,!0);break}e:{switch(h=i,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ia(h,r,ms,!Jo);break e;case 2:es=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(m=cd+300-kt(),10<m)){if(ia(h,r,ms,!Jo),ti(h,0,!0)!==0)break e;po=r,h.timeoutHandle=B0(h0.bind(null,h,l,es,dd,mg,r,ms,gl,hu,Jo,y,"Throttled",-0,0),m);break e}h0(h,l,es,dd,mg,r,ms,gl,hu,Jo,y,null,-0,0)}}break}while(!0);Or(i)}function h0(i,r,l,h,m,y,A,P,Y,me,Te,Ae,ye,be){if(i.timeoutHandle=-1,Ae=r.subtreeFlags,Ae&8192||(Ae&16785408)===16785408){Ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dn},i0(r,y,Ae);var Be=(y&62914560)===y?cd-kt():(y&4194048)===y?a0-kt():0;if(Be=l1(Ae,Be),Be!==null){po=y,i.cancelPendingCommit=Be(_0.bind(null,i,r,y,l,h,m,A,P,Y,Te,Ae,null,ye,be)),ia(i,y,A,!me);return}}_0(i,r,y,l,h,m,A,P,Y)}function SA(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],y=m.getSnapshot;m=m.value;try{if(!Qn(y(),m))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ia(i,r,l,h){r&=~gg,r&=~gl,i.suspendedLanes|=r,i.pingedLanes&=~r,h&&(i.warmLanes|=r),h=i.expirationTimes;for(var m=r;0<m;){var y=31-Rn(m),A=1<<y;h[y]=-1,m&=~A}l!==0&&tt(i,l,r)}function fd(){return(Ut&6)===0?(xc(0),!1):!0}function bg(){if(wt!==null){if(Ht===0)var i=wt.return;else i=wt,Xs=Rr=null,Np(i),iu=null,ac=0,i=wt;for(;i!==null;)F_(i.alternate,i),i=i.return;wt=null}}function fu(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,qA(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),po=0,bg(),Xt=i,wt=l=Is(i.current,null),St=r,Ht=0,gs=null,Jo=!1,cu=Ai(i,r),pg=!1,hu=ms=gg=gl=ea=bn=0,es=Tc=null,mg=!1,(r&8)!==0&&(r|=r&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=r;0<h;){var m=31-Rn(h),y=1<<m;r|=i[m],h&=~y}return fo=r,nl(),l}function d0(i,r){ct=null,ie.H=gc,r===nu||r===Fh?(r=ky(),Ht=3):r===Sp?(r=ky(),Ht=4):Ht=r===Xp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,gs=r,wt===null&&(bn=1,nd(i,c(r,i.current)))}function f0(){var i=fs.current;return i===null?!0:(St&4194048)===St?Rs===null:(St&62914560)===St||(St&536870912)!==0?i===Rs:!1}function p0(){var i=ie.H;return ie.H=gc,i===null?gc:i}function g0(){var i=ie.A;return ie.A=EA,i}function pd(){bn=4,Jo||(St&4194048)!==St&&fs.current!==null||(cu=!0),(ea&134217727)===0&&(gl&134217727)===0||Xt===null||ia(Xt,St,ms,!1)}function wg(i,r,l){var h=Ut;Ut|=2;var m=p0(),y=g0();(Xt!==i||St!==r)&&(dd=null,fu(i,r)),r=!1;var A=bn;e:do try{if(Ht!==0&&wt!==null){var P=wt,Y=gs;switch(Ht){case 8:bg(),A=6;break e;case 3:case 2:case 9:case 6:fs.current===null&&(r=!0);var me=Ht;if(Ht=0,gs=null,pu(i,P,Y,me),l&&cu){A=0;break e}break;default:me=Ht,Ht=0,gs=null,pu(i,P,Y,me)}}xA(),A=bn;break}catch(Te){d0(i,Te)}while(!0);return r&&i.shellSuspendCounter++,Xs=Rr=null,Ut=h,ie.H=m,ie.A=y,wt===null&&(Xt=null,St=0,nl()),A}function xA(){for(;wt!==null;)m0(wt)}function CA(i,r){var l=Ut;Ut|=2;var h=p0(),m=g0();Xt!==i||St!==r?(dd=null,hd=kt()+500,fu(i,r)):cu=Ai(i,r);e:do try{if(Ht!==0&&wt!==null){r=wt;var y=gs;t:switch(Ht){case 1:Ht=0,gs=null,pu(i,r,y,1);break;case 2:case 9:if(Cy(y)){Ht=0,gs=null,v0(r);break}r=function(){Ht!==2&&Ht!==9||Xt!==i||(Ht=7),Or(i)},y.then(r,r);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:Cy(y)?(Ht=0,gs=null,v0(r)):(Ht=0,gs=null,pu(i,r,y,7));break;case 5:var A=null;switch(wt.tag){case 26:A=wt.memoizedState;case 5:case 27:var P=wt;if(A?nb(A):P.stateNode.complete){Ht=0,gs=null;var Y=P.sibling;if(Y!==null)wt=Y;else{var me=P.return;me!==null?(wt=me,gd(me)):wt=null}break t}}Ht=0,gs=null,pu(i,r,y,5);break;case 6:Ht=0,gs=null,pu(i,r,y,6);break;case 8:bg(),bn=6;break e;default:throw Error(s(462))}}AA();break}catch(Te){d0(i,Te)}while(!0);return Xs=Rr=null,ie.H=h,ie.A=m,Ut=l,wt!==null?0:(Xt=null,St=0,nl(),bn)}function AA(){for(;wt!==null&&!$e();)m0(wt)}function m0(i){var r=U_(i.alternate,i,fo);i.memoizedProps=i.pendingProps,r===null?gd(i):wt=r}function v0(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=P_(l,r,r.pendingProps,r.type,void 0,St);break;case 11:r=P_(l,r,r.pendingProps,r.type.render,r.ref,St);break;case 5:Np(r);default:F_(l,r),r=wt=ec(r,fo),r=U_(l,r,fo)}i.memoizedProps=i.pendingProps,r===null?gd(i):wt=r}function pu(i,r,l,h){Xs=Rr=null,Np(r),iu=null,ac=0;var m=r.return;try{if(gA(i,m,r,l,St)){bn=1,nd(i,c(l,i.current)),wt=null;return}}catch(y){if(m!==null)throw wt=m,y;bn=1,nd(i,c(l,i.current)),wt=null;return}r.flags&32768?(bt||h===1?i=!0:cu||(St&536870912)!==0?i=!1:(Jo=i=!0,(h===2||h===9||h===3||h===6)&&(h=fs.current,h!==null&&h.tag===13&&(h.flags|=16384))),y0(r,i)):gd(r)}function gd(i){var r=i;do{if((r.flags&32768)!==0){y0(r,Jo);return}i=r.return;var l=yA(r.alternate,r,fo);if(l!==null){wt=l;return}if(r=r.sibling,r!==null){wt=r;return}wt=r=i}while(r!==null);bn===0&&(bn=5)}function y0(i,r){do{var l=_A(i.alternate,i);if(l!==null){l.flags&=32767,wt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){wt=i;return}wt=i=l}while(i!==null);bn=6,wt=null}function _0(i,r,l,h,m,y,A,P,Y){i.cancelPendingCommit=null;do md();while(Hn!==0);if((Ut&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(y=r.lanes|r.childLanes,y|=$l,tn(i,l,y,A,P,Y),i===Xt&&(wt=Xt=null,St=0),du=r,na=i,po=l,vg=y,yg=m,l0=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,RA(Ln,function(){return S0(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=ie.T,ie.T=null,m=J.p,J.p=2,A=Ut,Ut|=4;try{bA(i,r,l)}finally{Ut=A,J.p=m,ie.T=h}}Hn=1,b0(),w0(),E0()}}function b0(){if(Hn===1){Hn=0;var i=na,r=du,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=ie.T,ie.T=null;var h=J.p;J.p=2;var m=Ut;Ut|=4;try{e0(r,i);var y=Og,A=Qa(i.containerInfo),P=y.focusedElem,Y=y.selectionRange;if(A!==P&&P&&P.ownerDocument&&Gl(P.ownerDocument.documentElement,P)){if(Y!==null&&Sr(P)){var me=Y.start,Te=Y.end;if(Te===void 0&&(Te=me),"selectionStart"in P)P.selectionStart=me,P.selectionEnd=Math.min(Te,P.value.length);else{var Ae=P.ownerDocument||document,ye=Ae&&Ae.defaultView||window;if(ye.getSelection){var be=ye.getSelection(),Be=P.textContent.length,Qe=Math.min(Y.start,Be),Kt=Y.end===void 0?Qe:Math.min(Y.end,Be);!be.extend&&Qe>Kt&&(A=Kt,Kt=Qe,Qe=A);var ue=Ya(P,Qe),ne=Ya(P,Kt);if(ue&&ne&&(be.rangeCount!==1||be.anchorNode!==ue.node||be.anchorOffset!==ue.offset||be.focusNode!==ne.node||be.focusOffset!==ne.offset)){var ge=Ae.createRange();ge.setStart(ue.node,ue.offset),be.removeAllRanges(),Qe>Kt?(be.addRange(ge),be.extend(ne.node,ne.offset)):(ge.setEnd(ne.node,ne.offset),be.addRange(ge))}}}}for(Ae=[],be=P;be=be.parentNode;)be.nodeType===1&&Ae.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<Ae.length;P++){var Se=Ae[P];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}kd=!!Mg,Og=Mg=null}finally{Ut=m,J.p=h,ie.T=l}}i.current=r,Hn=2}}function w0(){if(Hn===2){Hn=0;var i=na,r=du,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=ie.T,ie.T=null;var h=J.p;J.p=2;var m=Ut;Ut|=4;try{$_(i,r.alternate,r)}finally{Ut=m,J.p=h,ie.T=l}}Hn=3}}function E0(){if(Hn===4||Hn===3){Hn=0,an();var i=na,r=du,l=po,h=l0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Hn=5:(Hn=0,du=na=null,T0(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(ta=null),Fe(l),r=r.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(fi,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=ie.T,m=J.p,J.p=2,ie.T=null;try{for(var y=i.onRecoverableError,A=0;A<h.length;A++){var P=h[A];y(P.value,{componentStack:P.stack})}}finally{ie.T=r,J.p=m}}(po&3)!==0&&md(),Or(i),m=i.pendingLanes,(l&261930)!==0&&(m&42)!==0?i===_g?Sc++:(Sc=0,_g=i):Sc=0,xc(0)}}function T0(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,rc(r)))}function md(){return b0(),w0(),E0(),S0()}function S0(){if(Hn!==5)return!1;var i=na,r=vg;vg=0;var l=Fe(po),h=ie.T,m=J.p;try{J.p=32>l?32:l,ie.T=null,l=yg,yg=null;var y=na,A=po;if(Hn=0,du=na=null,po=0,(Ut&6)!==0)throw Error(s(331));var P=Ut;if(Ut|=4,r0(y.current),n0(y,y.current,A,l),Ut=P,xc(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(fi,y)}catch{}return!0}finally{J.p=m,ie.T=h,T0(i,r)}}function x0(i,r,l){r=c(l,r),r=Qp(i.stateNode,r,2),i=$o(i,r,2),i!==null&&(Bi(i,2),Or(i))}function qt(i,r,l){if(i.tag===3)x0(i,i,l);else for(;r!==null;){if(r.tag===3){x0(r,i,l);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ta===null||!ta.has(h))){i=c(l,i),l=C_(2),h=$o(r,l,2),h!==null&&(A_(l,h,r,i),Bi(h,2),Or(h));break}}r=r.return}}function Eg(i,r,l){var h=i.pingCache;if(h===null){h=i.pingCache=new TA;var m=new Set;h.set(r,m)}else m=h.get(r),m===void 0&&(m=new Set,h.set(r,m));m.has(l)||(pg=!0,m.add(l),i=kA.bind(null,i,r,l),r.then(i,i))}function kA(i,r,l){var h=i.pingCache;h!==null&&h.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Xt===i&&(St&l)===l&&(bn===4||bn===3&&(St&62914560)===St&&300>kt()-cd?(Ut&2)===0&&fu(i,0):gg|=l,hu===St&&(hu=0)),Or(i)}function C0(i,r){r===0&&(r=ws()),i=Ls(i,r),i!==null&&(Bi(i,r),Or(i))}function LA(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),C0(i,l)}function IA(i,r){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(r),C0(i,l)}function RA(i,r){return fe(i,r)}var vd=null,gu=null,Tg=!1,yd=!1,Sg=!1,sa=0;function Or(i){i!==gu&&i.next===null&&(gu===null?vd=gu=i:gu=gu.next=i),yd=!0,Tg||(Tg=!0,OA())}function xc(i,r){if(!Sg&&yd){Sg=!0;do for(var l=!1,h=vd;h!==null;){if(i!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var A=h.suspendedLanes,P=h.pingedLanes;y=(1<<31-Rn(42|i)+1)-1,y&=m&~(A&~P),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,I0(h,y))}else y=St,y=ti(h,h===Xt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||Ai(h,y)||(l=!0,I0(h,y));h=h.next}while(l);Sg=!1}}function MA(){A0()}function A0(){yd=Tg=!1;var i=0;sa!==0&&HA()&&(i=sa);for(var r=kt(),l=null,h=vd;h!==null;){var m=h.next,y=k0(h,r);y===0?(h.next=null,l===null?vd=m:l.next=m,m===null&&(gu=l)):(l=h,(i!==0||(y&3)!==0)&&(yd=!0)),h=m}Hn!==0&&Hn!==5||xc(i),sa!==0&&(sa=0)}function k0(i,r){for(var l=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var A=31-Rn(y),P=1<<A,Y=m[A];Y===-1?((P&l)===0||(P&h)!==0)&&(m[A]=js(P,r)):Y<=r&&(i.expiredLanes|=P),y&=~P}if(r=Xt,l=St,l=ti(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===r&&(Ht===2||Ht===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ze(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Ai(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(h!==null&&ze(h),Fe(l)){case 2:case 8:l=mt;break;case 32:l=Ln;break;case 268435456:l=rs;break;default:l=Ln}return h=L0.bind(null,i),l=fe(l,h),i.callbackPriority=r,i.callbackNode=l,r}return h!==null&&h!==null&&ze(h),i.callbackPriority=2,i.callbackNode=null,2}function L0(i,r){if(Hn!==0&&Hn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(md()&&i.callbackNode!==l)return null;var h=St;return h=ti(i,i===Xt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(c0(i,h,r),k0(i,kt()),i.callbackNode!=null&&i.callbackNode===l?L0.bind(null,i):null)}function I0(i,r){if(md())return null;c0(i,r,!0)}function OA(){GA(function(){(Ut&6)!==0?fe(ot,MA):A0()})}function xg(){if(sa===0){var i=eu;i===0&&(i=os,os<<=1,(os&261888)===0&&(os=256)),sa=i}return sa}function R0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Zi(""+i)}function M0(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function PA(i,r,l,h,m){if(r==="submit"&&l&&l.stateNode===m){var y=R0((m[Tn]||null).action),A=h.submitter;A&&(r=(r=A[Tn]||null)?R0(r.formAction):A.getAttribute("formAction"),r!==null&&(y=r,A=null));var P=new Yr("action","action",null,h,m);i.push({event:P,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(sa!==0){var Y=A?M0(m,A):new FormData(m);Gp(l,{pending:!0,data:Y,method:m.method,action:y},null,Y)}}else typeof y=="function"&&(P.preventDefault(),Y=A?M0(m,A):new FormData(m),Gp(l,{pending:!0,data:Y,method:m.method,action:y},y,Y))},currentTarget:m}]})}}for(var Cg=0;Cg<Ar.length;Cg++){var Ag=Ar[Cg],DA=Ag.toLowerCase(),NA=Ag[0].toUpperCase()+Ag.slice(1);Ki(DA,"on"+NA)}Ki(Ja,"onAnimationEnd"),Ki(Nh,"onAnimationIteration"),Ki(el,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(mp,"onTransitionRun"),Ki(zh,"onTransitionStart"),Ki(vp,"onTransitionCancel"),Ki(qo,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function O0(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],m=h.event;h=h.listeners;e:{var y=void 0;if(r)for(var A=h.length-1;0<=A;A--){var P=h[A],Y=P.instance,me=P.currentTarget;if(P=P.listener,Y!==y&&m.isPropagationStopped())break e;y=P,m.currentTarget=me;try{y(m)}catch(Te){tl(Te)}m.currentTarget=null,y=Y}else for(A=0;A<h.length;A++){if(P=h[A],Y=P.instance,me=P.currentTarget,P=P.listener,Y!==y&&m.isPropagationStopped())break e;y=P,m.currentTarget=me;try{y(m)}catch(Te){tl(Te)}m.currentTarget=null,y=Y}}}}function Et(i,r){var l=r[ki];l===void 0&&(l=r[ki]=new Set);var h=i+"__bubble";l.has(h)||(P0(r,i,2,!1),l.add(h))}function kg(i,r,l){var h=0;r&&(h|=4),P0(l,i,h,r)}var _d="_reactListening"+Math.random().toString(36).slice(2);function Lg(i){if(!i[_d]){i[_d]=!0,ko.forEach(function(l){l!=="selectionchange"&&(zA.has(l)||kg(l,!1,i),kg(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[_d]||(r[_d]=!0,kg("selectionchange",!1,r))}}function P0(i,r,l,h){switch(ub(r)){case 2:var m=h1;break;case 8:m=d1;break;default:m=qg}l=m.bind(null,r,l,i),m=void 0,!$r||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(r,l,{capture:!0,passive:m}):i.addEventListener(r,l,!0):m!==void 0?i.addEventListener(r,l,{passive:m}):i.addEventListener(r,l,!1)}function Ig(i,r,l,h,m){var y=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var P=h.stateNode.containerInfo;if(P===m)break;if(A===4)for(A=h.return;A!==null;){var Y=A.tag;if((Y===3||Y===4)&&A.stateNode.containerInfo===m)return;A=A.return}for(;P!==null;){if(A=Ts(P),A===null)return;if(Y=A.tag,Y===5||Y===6||Y===26||Y===27){h=y=A;continue e}P=P.parentNode}}h=h.return}Ba(function(){var me=y,Te=mr(l),Ae=[];e:{var ye=Vh.get(i);if(ye!==void 0){var be=Yr,Be=i;switch(i){case"keypress":if(vr(l)===0)break e;case"keydown":case"keyup":be=Ha;break;case"focusin":Be="focus",be=br;break;case"focusout":Be="blur",be=br;break;case"beforeblur":case"afterblur":be=br;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=jl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=Bl;break;case Ja:case Nh:case el:be=wr;break;case qo:be=Xr;break;case"scroll":case"scrollend":be=vt;break;case"wheel":be=As;break;case"copy":case"cut":case"paste":be=Mi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=qa;break;case"toggle":case"beforetoggle":be=Wi}var Qe=(r&4)!==0,Kt=!Qe&&(i==="scroll"||i==="scrollend"),ue=Qe?ye!==null?ye+"Capture":null:ye;Qe=[];for(var ne=me,ge;ne!==null;){var Se=ne;if(ge=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ge===null||ue===null||(Se=Kn(ne,ue),Se!=null&&Qe.push(Ac(ne,Se,ge))),Kt)break;ne=ne.return}0<Qe.length&&(ye=new be(ye,Be,null,l,Te),Ae.push({event:ye,listeners:Qe}))}}if((r&7)===0){e:{if(ye=i==="mouseover"||i==="pointerover",be=i==="mouseout"||i==="pointerout",ye&&l!==Kr&&(Be=l.relatedTarget||l.fromElement)&&(Ts(Be)||Be[ls]))break e;if((be||ye)&&(ye=Te.window===Te?Te:(ye=Te.ownerDocument)?ye.defaultView||ye.parentWindow:window,be?(Be=l.relatedTarget||l.toElement,be=me,Be=Be?Ts(Be):null,Be!==null&&(Kt=u(Be),Qe=Be.tag,Be!==Kt||Qe!==5&&Qe!==27&&Qe!==6)&&(Be=null)):(be=null,Be=me),be!==Be)){if(Qe=Vl,Se="onMouseLeave",ue="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(Qe=qa,Se="onPointerLeave",ue="onPointerEnter",ne="pointer"),Kt=be==null?ye:Ss(be),ge=Be==null?ye:Ss(Be),ye=new Qe(Se,ne+"leave",be,l,Te),ye.target=Kt,ye.relatedTarget=ge,Se=null,Ts(Te)===me&&(Qe=new Qe(ue,ne+"enter",Be,l,Te),Qe.target=ge,Qe.relatedTarget=Kt,Se=Qe),Kt=Se,be&&Be)t:{for(Qe=VA,ue=be,ne=Be,ge=0,Se=ue;Se;Se=Qe(Se))ge++;Se=0;for(var We=ne;We;We=Qe(We))Se++;for(;0<ge-Se;)ue=Qe(ue),ge--;for(;0<Se-ge;)ne=Qe(ne),Se--;for(;ge--;){if(ue===ne||ne!==null&&ue===ne.alternate){Qe=ue;break t}ue=Qe(ue),ne=Qe(ne)}Qe=null}else Qe=null;be!==null&&D0(Ae,ye,be,Qe,!1),Be!==null&&Kt!==null&&D0(Ae,Kt,Be,Qe,!0)}}e:{if(ye=me?Ss(me):window,be=ye.nodeName&&ye.nodeName.toLowerCase(),be==="select"||be==="input"&&ye.type==="file")var zt=$a;else if(ln(ye))if(Rh)zt=gp;else{zt=pp;var He=$s}else be=ye.nodeName,!be||be.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?me&&Wr(me.elementType)&&(zt=$a):zt=Uo;if(zt&&(zt=zt(i,me))){Jr(Ae,zt,l,Te);break e}He&&He(i,ye,me),i==="focusout"&&me&&ye.type==="number"&&me.memoizedProps.value!=null&&qi(ye,"number",ye.value)}switch(He=me?Ss(me):window,i){case"focusin":(ln(He)||He.contentEditable==="true")&&(xr=He,Wl=me,Xa=null);break;case"focusout":Xa=Wl=xr=null;break;case"mousedown":Fo=!0;break;case"contextmenu":case"mouseup":case"dragend":Fo=!1,Ph(Ae,l,Te);break;case"selectionchange":if(Zl)break;case"keydown":case"keyup":Ph(Ae,l,Te)}var pt;if(T)e:{switch(i){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else dt?Pt(i,l)&&(xt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(xt="onCompositionStart");xt&&(pe&&l.locale!=="ko"&&(dt||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&dt&&(pt=mi()):(si=Te,Cs="value"in si?si.value:si.textContent,dt=!0)),He=bd(me,xt),0<He.length&&(xt=new Po(xt,i,null,l,Te),Ae.push({event:xt,listeners:He}),pt?xt.data=pt:(pt=fn(l),pt!==null&&(xt.data=pt)))),(pt=j?Bt(i,l):sn(i,l))&&(xt=bd(me,"onBeforeInput"),0<xt.length&&(He=new Po("onBeforeInput","beforeinput",null,l,Te),Ae.push({event:He,listeners:xt}),He.data=pt)),PA(Ae,i,me,l,Te)}O0(Ae,r)})}function Ac(i,r,l){return{instance:i,listener:r,currentTarget:l}}function bd(i,r){for(var l=r+"Capture",h=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Kn(i,l),m!=null&&h.unshift(Ac(i,m,y)),m=Kn(i,r),m!=null&&h.push(Ac(i,m,y))),i.tag===3)return h;i=i.return}return[]}function VA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function D0(i,r,l,h,m){for(var y=r._reactName,A=[];l!==null&&l!==h;){var P=l,Y=P.alternate,me=P.stateNode;if(P=P.tag,Y!==null&&Y===h)break;P!==5&&P!==26&&P!==27||me===null||(Y=me,m?(me=Kn(l,y),me!=null&&A.unshift(Ac(l,me,Y))):m||(me=Kn(l,y),me!=null&&A.push(Ac(l,me,Y)))),l=l.return}A.length!==0&&i.push({event:r,listeners:A})}var jA=/\r\n?/g,UA=/\u0000|\uFFFD/g;function N0(i){return(typeof i=="string"?i:""+i).replace(jA,`
`).replace(UA,"")}function z0(i,r){return r=N0(r),N0(i)===r}function Wt(i,r,l,h,m,y){switch(l){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Wn(i,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Wn(i,""+h);break;case"className":Mt(i,"class",h);break;case"tabIndex":Mt(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Mt(i,l,h);break;case"style":Ro(i,h,y);break;case"data":if(r!=="object"){Mt(i,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Zi(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(r!=="input"&&Wt(i,r,"name",m.name,m,null),Wt(i,r,"formEncType",m.formEncType,m,null),Wt(i,r,"formMethod",m.formMethod,m,null),Wt(i,r,"formTarget",m.formTarget,m,null)):(Wt(i,r,"encType",m.encType,m,null),Wt(i,r,"method",m.method,m,null),Wt(i,r,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Zi(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=dn);break;case"onScroll":h!=null&&Et("scroll",i);break;case"onScrollEnd":h!=null&&Et("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Zi(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Et("beforetoggle",i),Et("toggle",i),ht(i,"popover",h);break;case"xlinkActuate":ii(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ii(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ii(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ii(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ii(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ii(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ii(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ii(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ii(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ht(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Mo.get(l)||l,ht(i,l,h))}}function Rg(i,r,l,h,m,y){switch(l){case"style":Ro(i,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Wn(i,h):(typeof h=="number"||typeof h=="bigint")&&Wn(i,""+h);break;case"onScroll":h!=null&&Et("scroll",i);break;case"onScrollEnd":h!=null&&Et("scrollend",i);break;case"onClick":h!=null&&(i.onclick=dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),r=l.slice(2,m?l.length-7:void 0),y=i[Tn]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(r,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,h,m);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):ht(i,l,h)}}}function ai(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",i),Et("load",i);var h=!1,m=!1,y;for(y in l)if(l.hasOwnProperty(y)){var A=l[y];if(A!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Wt(i,r,y,A,l,null)}}m&&Wt(i,r,"srcSet",l.srcSet,l,null),h&&Wt(i,r,"src",l.src,l,null);return;case"input":Et("invalid",i);var P=y=A=m=null,Y=null,me=null;for(h in l)if(l.hasOwnProperty(h)){var Te=l[h];if(Te!=null)switch(h){case"name":m=Te;break;case"type":A=Te;break;case"checked":Y=Te;break;case"defaultChecked":me=Te;break;case"value":y=Te;break;case"defaultValue":P=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(s(137,r));break;default:Wt(i,r,h,Te,l,null)}}xs(i,y,P,Y,me,A,m,!1);return;case"select":Et("invalid",i),h=A=y=null;for(m in l)if(l.hasOwnProperty(m)&&(P=l[m],P!=null))switch(m){case"value":y=P;break;case"defaultValue":A=P;break;case"multiple":h=P;default:Wt(i,r,m,P,l,null)}r=y,l=A,i.multiple=!!h,r!=null?Ye(i,!!h,r,!1):l!=null&&Ye(i,!!h,l,!0);return;case"textarea":Et("invalid",i),y=m=h=null;for(A in l)if(l.hasOwnProperty(A)&&(P=l[A],P!=null))switch(A){case"value":h=P;break;case"defaultValue":m=P;break;case"children":y=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:Wt(i,r,A,P,l,null)}Gi(i,h,m,y);return;case"option":for(Y in l)if(l.hasOwnProperty(Y)&&(h=l[Y],h!=null))switch(Y){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Wt(i,r,Y,h,l,null)}return;case"dialog":Et("beforetoggle",i),Et("toggle",i),Et("cancel",i),Et("close",i);break;case"iframe":case"object":Et("load",i);break;case"video":case"audio":for(h=0;h<Cc.length;h++)Et(Cc[h],i);break;case"image":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"embed":case"source":case"link":Et("error",i),Et("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in l)if(l.hasOwnProperty(me)&&(h=l[me],h!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Wt(i,r,me,h,l,null)}return;default:if(Wr(r)){for(Te in l)l.hasOwnProperty(Te)&&(h=l[Te],h!==void 0&&Rg(i,r,Te,h,l,void 0));return}}for(P in l)l.hasOwnProperty(P)&&(h=l[P],h!=null&&Wt(i,r,P,h,l,null))}function BA(i,r,l,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,A=null,P=null,Y=null,me=null,Te=null;for(be in l){var Ae=l[be];if(l.hasOwnProperty(be)&&Ae!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":Y=Ae;default:h.hasOwnProperty(be)||Wt(i,r,be,null,h,Ae)}}for(var ye in h){var be=h[ye];if(Ae=l[ye],h.hasOwnProperty(ye)&&(be!=null||Ae!=null))switch(ye){case"type":y=be;break;case"name":m=be;break;case"checked":me=be;break;case"defaultChecked":Te=be;break;case"value":A=be;break;case"defaultValue":P=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(137,r));break;default:be!==Ae&&Wt(i,r,ye,be,h,Ae)}}gr(i,A,P,Y,me,Te,y,m);return;case"select":be=A=P=ye=null;for(y in l)if(Y=l[y],l.hasOwnProperty(y)&&Y!=null)switch(y){case"value":break;case"multiple":be=Y;default:h.hasOwnProperty(y)||Wt(i,r,y,null,h,Y)}for(m in h)if(y=h[m],Y=l[m],h.hasOwnProperty(m)&&(y!=null||Y!=null))switch(m){case"value":ye=y;break;case"defaultValue":P=y;break;case"multiple":A=y;default:y!==Y&&Wt(i,r,m,y,h,Y)}r=P,l=A,h=be,ye!=null?Ye(i,!!l,ye,!1):!!h!=!!l&&(r!=null?Ye(i,!!l,r,!0):Ye(i,!!l,l?[]:"",!1));return;case"textarea":be=ye=null;for(P in l)if(m=l[P],l.hasOwnProperty(P)&&m!=null&&!h.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Wt(i,r,P,null,h,m)}for(A in h)if(m=h[A],y=l[A],h.hasOwnProperty(A)&&(m!=null||y!=null))switch(A){case"value":ye=m;break;case"defaultValue":be=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&Wt(i,r,A,m,h,y)}Li(i,ye,be);return;case"option":for(var Be in l)if(ye=l[Be],l.hasOwnProperty(Be)&&ye!=null&&!h.hasOwnProperty(Be))switch(Be){case"selected":i.selected=!1;break;default:Wt(i,r,Be,null,h,ye)}for(Y in h)if(ye=h[Y],be=l[Y],h.hasOwnProperty(Y)&&ye!==be&&(ye!=null||be!=null))switch(Y){case"selected":i.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Wt(i,r,Y,ye,h,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in l)ye=l[Qe],l.hasOwnProperty(Qe)&&ye!=null&&!h.hasOwnProperty(Qe)&&Wt(i,r,Qe,null,h,ye);for(me in h)if(ye=h[me],be=l[me],h.hasOwnProperty(me)&&ye!==be&&(ye!=null||be!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(s(137,r));break;default:Wt(i,r,me,ye,h,be)}return;default:if(Wr(r)){for(var Kt in l)ye=l[Kt],l.hasOwnProperty(Kt)&&ye!==void 0&&!h.hasOwnProperty(Kt)&&Rg(i,r,Kt,void 0,h,ye);for(Te in h)ye=h[Te],be=l[Te],!h.hasOwnProperty(Te)||ye===be||ye===void 0&&be===void 0||Rg(i,r,Te,ye,h,be);return}}for(var ue in l)ye=l[ue],l.hasOwnProperty(ue)&&ye!=null&&!h.hasOwnProperty(ue)&&Wt(i,r,ue,null,h,ye);for(Ae in h)ye=h[Ae],be=l[Ae],!h.hasOwnProperty(Ae)||ye===be||ye==null&&be==null||Wt(i,r,Ae,ye,h,be)}function V0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var m=l[h],y=m.transferSize,A=m.initiatorType,P=m.duration;if(y&&P&&V0(A)){for(A=0,P=m.responseEnd,h+=1;h<l.length;h++){var Y=l[h],me=Y.startTime;if(me>P)break;var Te=Y.transferSize,Ae=Y.initiatorType;Te&&V0(Ae)&&(Y=Y.responseEnd,A+=Te*(Y<P?1:(P-me)/(Y-me)))}if(--h,r+=8*(y+A)/(m.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Mg=null,Og=null;function wd(i){return i.nodeType===9?i:i.ownerDocument}function j0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U0(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Pg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Dg=null;function HA(){var i=window.event;return i&&i.type==="popstate"?i===Dg?!1:(Dg=i,!0):(Dg=null,!1)}var B0=typeof setTimeout=="function"?setTimeout:void 0,qA=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,GA=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(i){return F0.resolve(null).then(i).catch(ZA)}:B0;function ZA(i){setTimeout(function(){throw i})}function ra(i){return i==="head"}function H0(i,r){var l=r,h=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(m),_u(r);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")kc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,kc(l);for(var y=l.firstChild;y;){var A=y.nextSibling,P=y.nodeName;y[Us]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=A}}else l==="body"&&kc(i.ownerDocument.body);l=m}while(l);_u(r)}function q0(i,r){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function Ng(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ng(l),Gr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function WA(i,r,l,h){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Us])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Ms(i.nextSibling),i===null)break}return null}function KA(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Ms(i.nextSibling),i===null))return null;return i}function G0(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Ms(i.nextSibling),i===null))return null;return i}function zg(i){return i.data==="$?"||i.data==="$~"}function Vg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function $A(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var h=function(){r(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Ms(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var jg=null;function Z0(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return Ms(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function W0(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function K0(i,r,l){switch(r=wd(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function kc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Gr(i)}var Os=new Map,$0=new Set;function Ed(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var go=J.d;J.d={f:YA,r:QA,D:XA,C:JA,L:e1,m:t1,X:i1,S:n1,M:s1};function YA(){var i=go.f(),r=fd();return i||r}function QA(i){var r=Bs(i);r!==null&&r.tag===5&&r.type==="form"?d_(r):go.r(i)}var mu=typeof document>"u"?null:document;function Y0(i,r,l){var h=mu;if(h&&typeof r=="string"&&r){var m=Lt(r);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),$0.has(m)||($0.add(m),i={rel:i,crossOrigin:l,href:r},h.querySelector(m)===null&&(r=h.createElement("link"),ai(r,"link",i),hn(r),h.head.appendChild(r)))}}function XA(i){go.D(i),Y0("dns-prefetch",i,null)}function JA(i,r){go.C(i,r),Y0("preconnect",i,r)}function e1(i,r,l){go.L(i,r,l);var h=mu;if(h&&i&&r){var m='link[rel="preload"][as="'+Lt(r)+'"]';r==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Lt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Lt(l.imageSizes)+'"]')):m+='[href="'+Lt(i)+'"]';var y=m;switch(r){case"style":y=vu(i);break;case"script":y=yu(i)}Os.has(y)||(i=S({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),Os.set(y,i),h.querySelector(m)!==null||r==="style"&&h.querySelector(Lc(y))||r==="script"&&h.querySelector(Ic(y))||(r=h.createElement("link"),ai(r,"link",i),hn(r),h.head.appendChild(r)))}}function t1(i,r){go.m(i,r);var l=mu;if(l&&i){var h=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Lt(h)+'"][href="'+Lt(i)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=yu(i)}if(!Os.has(y)&&(i=S({rel:"modulepreload",href:i},r),Os.set(y,i),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ic(y)))return}h=l.createElement("link"),ai(h,"link",i),hn(h),l.head.appendChild(h)}}}function n1(i,r,l){go.S(i,r,l);var h=mu;if(h&&i){var m=cs(h).hoistableStyles,y=vu(i);r=r||"default";var A=m.get(y);if(!A){var P={loading:0,preload:null};if(A=h.querySelector(Lc(y)))P.loading=5;else{i=S({rel:"stylesheet",href:i,"data-precedence":r},l),(l=Os.get(y))&&Ug(i,l);var Y=A=h.createElement("link");hn(Y),ai(Y,"link",i),Y._p=new Promise(function(me,Te){Y.onload=me,Y.onerror=Te}),Y.addEventListener("load",function(){P.loading|=1}),Y.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Td(A,r,h)}A={type:"stylesheet",instance:A,count:1,state:P},m.set(y,A)}}}function i1(i,r){go.X(i,r);var l=mu;if(l&&i){var h=cs(l).hoistableScripts,m=yu(i),y=h.get(m);y||(y=l.querySelector(Ic(m)),y||(i=S({src:i,async:!0},r),(r=Os.get(m))&&Bg(i,r),y=l.createElement("script"),hn(y),ai(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function s1(i,r){go.M(i,r);var l=mu;if(l&&i){var h=cs(l).hoistableScripts,m=yu(i),y=h.get(m);y||(y=l.querySelector(Ic(m)),y||(i=S({src:i,async:!0,type:"module"},r),(r=Os.get(m))&&Bg(i,r),y=l.createElement("script"),hn(y),ai(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function Q0(i,r,l,h){var m=(m=ce.current)?Ed(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=vu(l.href),l=cs(m).hoistableStyles,h=l.get(r),h||(h={type:"style",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=vu(l.href);var y=cs(m).hoistableStyles,A=y.get(i);if(A||(m=m.ownerDocument||m,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,A),(y=m.querySelector(Lc(i)))&&!y._p&&(A.instance=y,A.state.loading=5),Os.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Os.set(i,l),y||r1(m,i,l,A.state))),r&&h===null)throw Error(s(528,""));return A}if(r&&h!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yu(l),l=cs(m).hoistableScripts,h=l.get(r),h||(h={type:"script",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function vu(i){return'href="'+Lt(i)+'"'}function Lc(i){return'link[rel="stylesheet"]['+i+"]"}function X0(i){return S({},i,{"data-precedence":i.precedence,precedence:null})}function r1(i,r,l,h){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=i.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),ai(r,"link",l),hn(r),i.head.appendChild(r))}function yu(i){return'[src="'+Lt(i)+'"]'}function Ic(i){return"script[async]"+i}function J0(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var h=i.querySelector('style[data-href~="'+Lt(l.href)+'"]');if(h)return r.instance=h,hn(h),h;var m=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),hn(h),ai(h,"style",m),Td(h,l.precedence,i),r.instance=h;case"stylesheet":m=vu(l.href);var y=i.querySelector(Lc(m));if(y)return r.state.loading|=4,r.instance=y,hn(y),y;h=X0(l),(m=Os.get(m))&&Ug(h,m),y=(i.ownerDocument||i).createElement("link"),hn(y);var A=y;return A._p=new Promise(function(P,Y){A.onload=P,A.onerror=Y}),ai(y,"link",h),r.state.loading|=4,Td(y,l.precedence,i),r.instance=y;case"script":return y=yu(l.src),(m=i.querySelector(Ic(y)))?(r.instance=m,hn(m),m):(h=l,(m=Os.get(y))&&(h=S({},l),Bg(h,m)),i=i.ownerDocument||i,m=i.createElement("script"),hn(m),ai(m,"link",h),i.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Td(h,l.precedence,i));return r.instance}function Td(i,r,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,A=0;A<h.length;A++){var P=h[A];if(P.dataset.precedence===r)y=P;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function Ug(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Bg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Sd=null;function eb(i,r,l){if(Sd===null){var h=new Map,m=Sd=new Map;m.set(l,h)}else m=Sd,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var y=l[m];if(!(y[Us]||y[nn]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var A=y.getAttribute(r)||"";A=i+A;var P=h.get(A);P?P.push(y):h.set(A,[y])}}return h}function tb(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function o1(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function nb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function a1(i,r,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=vu(h.href),y=r.querySelector(Lc(m));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=xd.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=y,hn(y);return}y=r.ownerDocument||r,h=X0(h),(m=Os.get(m))&&Ug(h,m),y=y.createElement("link"),hn(y);var A=y;A._p=new Promise(function(P,Y){A.onload=P,A.onerror=Y}),ai(y,"link",h),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=xd.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var Fg=0;function l1(i,r){return i.stylesheets&&i.count===0&&Ad(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&Ad(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+r);0<i.imgBytes&&Fg===0&&(Fg=62500*FA());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ad(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Fg?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ad(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Cd=null;function Ad(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Cd=new Map,r.forEach(u1,i),Cd=null,xd.call(i))}function u1(i,r){if(!(r.state.loading&4)){var l=Cd.get(i);if(l)var h=l.get(null);else{l=new Map,Cd.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var A=m[y];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}m=r.instance,A=m.getAttribute("data-precedence"),y=l.get(A)||h,y===h&&l.set(null,m),l.set(A,m),this.count++,h=xd.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),r.state.loading|=4}}var Rc={$$typeof:le,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function c1(i,r,l,h,m,y,A,P,Y){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function ib(i,r,l,h,m,y,A,P,Y,me,Te,Ae){return i=new c1(i,r,l,A,Y,me,Te,Ae,P),r=1,y===!0&&(r|=24),y=_i(3,null,null,r),i.current=y,y.stateNode=i,r=wp(),r.refCount++,i.pooledCache=r,r.refCount++,y.memoizedState={element:h,isDehydrated:l,cache:r},xp(y),i}function sb(i){return i?(i=eo,i):eo}function rb(i,r,l,h,m,y){m=sb(m),h.context===null?h.context=m:h.pendingContext=m,h=Ko(r),h.payload={element:l},y=y===void 0?null:y,y!==null&&(h.callback=y),l=$o(i,h,r),l!==null&&(ts(l,i,r),uc(l,i,r))}function ob(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function Hg(i,r){ob(i,r),(i=i.alternate)&&ob(i,r)}function ab(i){if(i.tag===13||i.tag===31){var r=Ls(i,67108864);r!==null&&ts(r,i,67108864),Hg(i,67108864)}}function lb(i){if(i.tag===13||i.tag===31){var r=vs();r=gi(r);var l=Ls(i,r);l!==null&&ts(l,i,r),Hg(i,r)}}var kd=!0;function h1(i,r,l,h){var m=ie.T;ie.T=null;var y=J.p;try{J.p=2,qg(i,r,l,h)}finally{J.p=y,ie.T=m}}function d1(i,r,l,h){var m=ie.T;ie.T=null;var y=J.p;try{J.p=8,qg(i,r,l,h)}finally{J.p=y,ie.T=m}}function qg(i,r,l,h){if(kd){var m=Gg(h);if(m===null)Ig(i,r,h,Ld,l),cb(i,h);else if(p1(m,i,r,l,h))h.stopPropagation();else if(cb(i,h),r&4&&-1<f1.indexOf(i)){for(;m!==null;){var y=Bs(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var A=Zn(y.pendingLanes);if(A!==0){var P=y;for(P.pendingLanes|=2,P.entangledLanes|=2;A;){var Y=1<<31-Rn(A);P.entanglements[1]|=Y,A&=~Y}Or(y),(Ut&6)===0&&(hd=kt()+500,xc(0))}}break;case 31:case 13:P=Ls(y,2),P!==null&&ts(P,y,2),fd(),Hg(y,2)}if(y=Gg(h),y===null&&Ig(i,r,h,Ld,l),y===m)break;m=y}m!==null&&h.stopPropagation()}else Ig(i,r,h,null,l)}}function Gg(i){return i=mr(i),Zg(i)}var Ld=null;function Zg(i){if(Ld=null,i=Ts(i),i!==null){var r=u(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=d(r),i!==null)return i;i=null}else if(l===31){if(i=g(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Ld=i,null}function ub(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case ot:return 2;case mt:return 8;case Ln:case bs:return 32;case rs:return 268435456;default:return 32}default:return 32}}var Wg=!1,oa=null,aa=null,la=null,Mc=new Map,Oc=new Map,ua=[],f1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cb(i,r){switch(i){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Mc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(r.pointerId)}}function Pc(i,r,l,h,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:r,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},r!==null&&(r=Bs(r),r!==null&&ab(r)),i):(i.eventSystemFlags|=h,r=i.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),i)}function p1(i,r,l,h,m){switch(r){case"focusin":return oa=Pc(oa,i,r,l,h,m),!0;case"dragenter":return aa=Pc(aa,i,r,l,h,m),!0;case"mouseover":return la=Pc(la,i,r,l,h,m),!0;case"pointerover":var y=m.pointerId;return Mc.set(y,Pc(Mc.get(y)||null,i,r,l,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Oc.set(y,Pc(Oc.get(y)||null,i,r,l,h,m)),!0}return!1}function hb(i){var r=Ts(i.target);if(r!==null){var l=u(r);if(l!==null){if(r=l.tag,r===13){if(r=d(l),r!==null){i.blockedOn=r,Na(i.priority,function(){lb(l)});return}}else if(r===31){if(r=g(l),r!==null){i.blockedOn=r,Na(i.priority,function(){lb(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Id(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=Gg(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Kr=h,l.target.dispatchEvent(h),Kr=null}else return r=Bs(l),r!==null&&ab(r),i.blockedOn=l,!1;r.shift()}return!0}function db(i,r,l){Id(i)&&l.delete(r)}function g1(){Wg=!1,oa!==null&&Id(oa)&&(oa=null),aa!==null&&Id(aa)&&(aa=null),la!==null&&Id(la)&&(la=null),Mc.forEach(db),Oc.forEach(db)}function Rd(i,r){i.blockedOn===r&&(i.blockedOn=null,Wg||(Wg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,g1)))}var Md=null;function fb(i){Md!==i&&(Md=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Md===i&&(Md=null);for(var r=0;r<i.length;r+=3){var l=i[r],h=i[r+1],m=i[r+2];if(typeof h!="function"){if(Zg(h||l)===null)continue;break}var y=Bs(l);y!==null&&(i.splice(r,3),r-=3,Gp(y,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function _u(i){function r(Y){return Rd(Y,i)}oa!==null&&Rd(oa,i),aa!==null&&Rd(aa,i),la!==null&&Rd(la,i),Mc.forEach(r),Oc.forEach(r);for(var l=0;l<ua.length;l++){var h=ua[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<ua.length&&(l=ua[0],l.blockedOn===null);)hb(l),l.blockedOn===null&&ua.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],y=l[h+1],A=m[Tn]||null;if(typeof y=="function")A||fb(l);else if(A){var P=null;if(y&&y.hasAttribute("formAction")){if(m=y,A=y[Tn]||null)P=A.formAction;else if(Zg(m)!==null)continue}else P=A.action;typeof P=="function"?l[h+1]=P:(l.splice(h,3),h-=3),fb(l)}}}function pb(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(A){return m=A})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function Kg(i){this._internalRoot=i}Od.prototype.render=Kg.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,h=vs();rb(l,h,i,r,null,null)},Od.prototype.unmount=Kg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;rb(i.current,2,null,i,null,null),fd(),r[ls]=null}};function Od(i){this._internalRoot=i}Od.prototype.unstable_scheduleHydration=function(i){if(i){var r=Es();i={blockedOn:null,target:i,priority:r};for(var l=0;l<ua.length&&r!==0&&r<ua[l].priority;l++);ua.splice(l,0,i),l===0&&hb(i)}};var gb=e.version;if(gb!=="19.2.0")throw Error(s(527,gb,"19.2.0"));J.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=_(r),i=i!==null?E(i):null,i=i===null?null:i.stateNode,i};var m1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{fi=Pd.inject(m1),cn=Pd}catch{}}return Nc.createRoot=function(i,r){if(!a(i))throw Error(s(299));var l=!1,h="",m=E_,y=T_,A=S_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=ib(i,1,!1,null,null,l,h,null,m,y,A,pb),i[ls]=r.current,Lg(i),new Kg(r)},Nc.hydrateRoot=function(i,r,l){if(!a(i))throw Error(s(299));var h=!1,m="",y=E_,A=T_,P=S_,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError),l.formState!==void 0&&(Y=l.formState)),r=ib(i,1,!0,r,l??null,h,m,Y,y,A,P,pb),r.context=sb(null),l=r.current,h=vs(),h=gi(h),m=Ko(h),m.callback=null,$o(l,m,h),l=h,r.current.lanes=l,Bi(r,l),Or(r),i[ls]=r.current,Lg(i),new Od(r)},Nc.version="19.2.0",Nc}var xb;function x1(){if(xb)return Qg.exports;xb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qg.exports=S1(),Qg.exports}var C1=x1();const A1=jf(C1);var Cb="popstate";function k1(n={}){function e(a,u){let{pathname:d="/",search:g="",hash:v=""}=Rl(a.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),km("",{pathname:d,search:g,hash:v},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(a,u){let d=a.document.querySelector("base"),g="";if(d&&d.getAttribute("href")){let v=a.location.href,_=v.indexOf("#");g=_===-1?v:v.slice(0,_)}return g+"#"+(typeof u=="string"?u:sh(u))}function s(a,u){zs(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return I1(e,t,s,n)}function gn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zs(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function L1(){return Math.random().toString(36).substring(2,10)}function Ab(n,e){return{usr:n.state,key:n.key,idx:e}}function km(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Rl(e):e,state:t,key:e&&e.key||s||L1()}}function sh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Rl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function I1(n,e,t,s={}){let{window:a=document.defaultView,v5Compat:u=!1}=s,d=a.history,g="POP",v=null,_=E();_==null&&(_=0,d.replaceState({...d.state,idx:_},""));function E(){return(d.state||{idx:null}).idx}function S(){g="POP";let B=E(),te=B==null?null:B-_;_=B,v&&v({action:g,location:H.location,delta:te})}function I(B,te){g="PUSH";let X=km(H.location,B,te);t&&t(X,B),_=E()+1;let le=Ab(X,_),oe=H.createHref(X);try{d.pushState(le,"",oe)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;a.location.assign(oe)}u&&v&&v({action:g,location:H.location,delta:1})}function O(B,te){g="REPLACE";let X=km(H.location,B,te);t&&t(X,B),_=E();let le=Ab(X,_),oe=H.createHref(X);d.replaceState(le,"",oe),u&&v&&v({action:g,location:H.location,delta:0})}function D(B){return R1(B)}let H={get action(){return g},get location(){return n(a,d)},listen(B){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(Cb,S),v=B,()=>{a.removeEventListener(Cb,S),v=null}},createHref(B){return e(a,B)},createURL:D,encodeLocation(B){let te=D(B);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:I,replace:O,go(B){return d.go(B)}};return H}function R1(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gn(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:sh(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function PT(n,e,t="/"){return M1(n,e,t,!1)}function M1(n,e,t,s){let a=typeof e=="string"?Rl(e):e,u=bo(a.pathname||"/",t);if(u==null)return null;let d=DT(n);O1(d);let g=null;for(let v=0;g==null&&v<d.length;++v){let _=q1(u);g=F1(d[v],_,s)}return g}function DT(n,e=[],t=[],s="",a=!1){let u=(d,g,v=a,_)=>{let E={relativePath:_===void 0?d.path||"":_,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&v)return;gn(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let S=_o([s,E.relativePath]),I=t.concat(E);d.children&&d.children.length>0&&(gn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),DT(d.children,e,I,S,v)),!(d.path==null&&!d.index)&&e.push({path:S,score:U1(S,d.index),routesMeta:I})};return n.forEach((d,g)=>{if(d.path===""||!d.path?.includes("?"))u(d,g);else for(let v of NT(d.path))u(d,g,!0,v)}),e}function NT(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return a?[u,""]:[u];let d=NT(s.join("/")),g=[];return g.push(...d.map(v=>v===""?u:[u,v].join("/"))),a&&g.push(...d),g.map(v=>n.startsWith("/")&&v===""?"/":v)}function O1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:B1(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var P1=/^:[\w-]+$/,D1=3,N1=2,z1=1,V1=10,j1=-2,kb=n=>n==="*";function U1(n,e){let t=n.split("/"),s=t.length;return t.some(kb)&&(s+=j1),e&&(s+=N1),t.filter(a=>!kb(a)).reduce((a,u)=>a+(P1.test(u)?D1:u===""?z1:V1),s)}function B1(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function F1(n,e,t=!1){let{routesMeta:s}=n,a={},u="/",d=[];for(let g=0;g<s.length;++g){let v=s[g],_=g===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",S=uf({path:v.relativePath,caseSensitive:v.caseSensitive,end:_},E),I=v.route;if(!S&&_&&t&&!s[s.length-1].route.index&&(S=uf({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},E)),!S)return null;Object.assign(a,S.params),d.push({params:a,pathname:_o([u,S.pathname]),pathnameBase:$1(_o([u,S.pathnameBase])),route:I}),S.pathnameBase!=="/"&&(u=_o([u,S.pathnameBase]))}return d}function uf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=H1(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let u=a[0],d=u.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:s.reduce((_,{paramName:E,isOptional:S},I)=>{if(E==="*"){let D=g[I]||"";d=u.slice(0,u.length-D.length).replace(/(.)\/+$/,"$1")}const O=g[I];return S&&!O?_[E]=void 0:_[E]=(O||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:d,pattern:n}}function H1(n,e=!1,t=!0){zs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,v)=>(s.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function q1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function bo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var G1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z1=n=>G1.test(n);function W1(n,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?Rl(n):n,u;if(t)if(Z1(t))u=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),zs(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${t}`)}t.startsWith("/")?u=Lb(t.substring(1),"/"):u=Lb(t,e)}else u=e;return{pathname:u,search:Y1(s),hash:Q1(a)}}function Lb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function tm(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function K1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function zT(n){let e=K1(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function VT(n,e,t,s=!1){let a;typeof n=="string"?a=Rl(n):(a={...n},gn(!a.pathname||!a.pathname.includes("?"),tm("?","pathname","search",a)),gn(!a.pathname||!a.pathname.includes("#"),tm("#","pathname","hash",a)),gn(!a.search||!a.search.includes("#"),tm("#","search","hash",a)));let u=n===""||a.pathname==="",d=u?"/":a.pathname,g;if(d==null)g=t;else{let S=e.length-1;if(!s&&d.startsWith("..")){let I=d.split("/");for(;I[0]==="..";)I.shift(),S-=1;a.pathname=I.join("/")}g=S>=0?e[S]:"/"}let v=W1(a,g),_=d&&d!=="/"&&d.endsWith("/"),E=(u||d===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(_||E)&&(v.pathname+="/"),v}var _o=n=>n.join("/").replace(/\/\/+/g,"/"),$1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Y1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Q1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function X1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jT=["POST","PUT","PATCH","DELETE"];new Set(jT);var J1=["GET",...jT];new Set(J1);var Bu=w.createContext(null);Bu.displayName="DataRouter";var Uf=w.createContext(null);Uf.displayName="DataRouterState";w.createContext(!1);var UT=w.createContext({isTransitioning:!1});UT.displayName="ViewTransition";var ek=w.createContext(new Map);ek.displayName="Fetchers";var tk=w.createContext(null);tk.displayName="Await";var qr=w.createContext(null);qr.displayName="Navigation";var vh=w.createContext(null);vh.displayName="Location";var Co=w.createContext({outlet:null,matches:[],isDataRoute:!1});Co.displayName="Route";var fv=w.createContext(null);fv.displayName="RouteError";function nk(n,{relative:e}={}){gn(yh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=w.useContext(qr),{hash:a,pathname:u,search:d}=_h(n,{relative:e}),g=u;return t!=="/"&&(g=u==="/"?t:_o([t,u])),s.createHref({pathname:g,search:d,hash:a})}function yh(){return w.useContext(vh)!=null}function Ml(){return gn(yh(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(vh).location}var BT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FT(n){w.useContext(qr).static||w.useLayoutEffect(n)}function Bf(){let{isDataRoute:n}=w.useContext(Co);return n?gk():ik()}function ik(){gn(yh(),"useNavigate() may be used only in the context of a <Router> component.");let n=w.useContext(Bu),{basename:e,navigator:t}=w.useContext(qr),{matches:s}=w.useContext(Co),{pathname:a}=Ml(),u=JSON.stringify(zT(s)),d=w.useRef(!1);return FT(()=>{d.current=!0}),w.useCallback((v,_={})=>{if(zs(d.current,BT),!d.current)return;if(typeof v=="number"){t.go(v);return}let E=VT(v,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:_o([e,E.pathname])),(_.replace?t.replace:t.push)(E,_.state,_)},[e,t,u,a,n])}w.createContext(null);function _h(n,{relative:e}={}){let{matches:t}=w.useContext(Co),{pathname:s}=Ml(),a=JSON.stringify(zT(t));return w.useMemo(()=>VT(n,JSON.parse(a),s,e==="path"),[n,a,s,e])}function sk(n,e){return HT(n,e)}function HT(n,e,t,s,a){gn(yh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(qr),{matches:d}=w.useContext(Co),g=d[d.length-1],v=g?g.params:{},_=g?g.pathname:"/",E=g?g.pathnameBase:"/",S=g&&g.route;{let X=S&&S.path||"";qT(_,!S||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let I=Ml(),O;if(e){let X=typeof e=="string"?Rl(e):e;gn(E==="/"||X.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${X.pathname}" was given in the \`location\` prop.`),O=X}else O=I;let D=O.pathname||"/",H=D;if(E!=="/"){let X=E.replace(/^\//,"").split("/");H="/"+D.replace(/^\//,"").split("/").slice(X.length).join("/")}let B=PT(n,{pathname:H});zs(S||B!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),zs(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=uk(B&&B.map(X=>Object.assign({},X,{params:Object.assign({},v,X.params),pathname:_o([E,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?E:_o([E,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),d,t,s,a);return e&&te?w.createElement(vh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},te):te}function rk(){let n=pk(),e=X1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:a},t):null,d)}var ok=w.createElement(rk,null),ak=class extends w.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?w.createElement(Co.Provider,{value:this.props.routeContext},w.createElement(fv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lk({routeContext:n,match:e,children:t}){let s=w.useContext(Bu);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Co.Provider,{value:n},t)}function uk(n,e=[],t=null,s=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=t?.errors;if(d!=null){let E=u.findIndex(S=>S.route.id&&d?.[S.route.id]!==void 0);gn(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let g=!1,v=-1;if(t)for(let E=0;E<u.length;E++){let S=u[E];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(v=E),S.route.id){let{loaderData:I,errors:O}=t,D=S.route.loader&&!I.hasOwnProperty(S.route.id)&&(!O||O[S.route.id]===void 0);if(S.route.lazy||D){g=!0,v>=0?u=u.slice(0,v+1):u=[u[0]];break}}}let _=t&&s?(E,S)=>{s(E,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:S})}:void 0;return u.reduceRight((E,S,I)=>{let O,D=!1,H=null,B=null;t&&(O=d&&S.route.id?d[S.route.id]:void 0,H=S.route.errorElement||ok,g&&(v<0&&I===0?(qT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,B=null):v===I&&(D=!0,B=S.route.hydrateFallbackElement||null)));let te=e.concat(u.slice(0,I+1)),X=()=>{let le;return O?le=H:D?le=B:S.route.Component?le=w.createElement(S.route.Component,null):S.route.element?le=S.route.element:le=E,w.createElement(lk,{match:S,routeContext:{outlet:E,matches:te,isDataRoute:t!=null},children:le})};return t&&(S.route.ErrorBoundary||S.route.errorElement||I===0)?w.createElement(ak,{location:t.location,revalidation:t.revalidation,component:H,error:O,children:X(),routeContext:{outlet:null,matches:te,isDataRoute:!0},onError:_}):X()},null)}function pv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ck(n){let e=w.useContext(Bu);return gn(e,pv(n)),e}function hk(n){let e=w.useContext(Uf);return gn(e,pv(n)),e}function dk(n){let e=w.useContext(Co);return gn(e,pv(n)),e}function gv(n){let e=dk(n),t=e.matches[e.matches.length-1];return gn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function fk(){return gv("useRouteId")}function pk(){let n=w.useContext(fv),e=hk("useRouteError"),t=gv("useRouteError");return n!==void 0?n:e.errors?.[t]}function gk(){let{router:n}=ck("useNavigate"),e=gv("useNavigate"),t=w.useRef(!1);return FT(()=>{t.current=!0}),w.useCallback(async(a,u={})=>{zs(t.current,BT),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...u}))},[n,e])}var Ib={};function qT(n,e,t){!e&&!Ib[n]&&(Ib[n]=!0,zs(!1,t))}w.memo(mk);function mk({routes:n,future:e,state:t,unstable_onError:s}){return HT(n,void 0,t,s,e)}function tr(n){gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vk({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:u=!1}){gn(!yh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:d,navigator:a,static:u,future:{}}),[d,a,u]);typeof t=="string"&&(t=Rl(t));let{pathname:v="/",search:_="",hash:E="",state:S=null,key:I="default"}=t,O=w.useMemo(()=>{let D=bo(v,d);return D==null?null:{location:{pathname:D,search:_,hash:E,state:S,key:I},navigationType:s}},[d,v,_,E,S,I,s]);return zs(O!=null,`<Router basename="${d}"> is not able to match the URL "${v}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:w.createElement(qr.Provider,{value:g},w.createElement(vh.Provider,{children:e,value:O}))}function yk({children:n,location:e}){return sk(Lm(n),e)}function Lm(n,e=[]){let t=[];return w.Children.forEach(n,(s,a)=>{if(!w.isValidElement(s))return;let u=[...e,a];if(s.type===w.Fragment){t.push.apply(t,Lm(s.props.children,u));return}gn(s.type===tr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Lm(s.props.children,u)),t.push(d)}),t}var Zd="get",Wd="application/x-www-form-urlencoded";function Ff(n){return n!=null&&typeof n.tagName=="string"}function _k(n){return Ff(n)&&n.tagName.toLowerCase()==="button"}function bk(n){return Ff(n)&&n.tagName.toLowerCase()==="form"}function wk(n){return Ff(n)&&n.tagName.toLowerCase()==="input"}function Ek(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Tk(n,e){return n.button===0&&(!e||e==="_self")&&!Ek(n)}var Dd=null;function Sk(){if(Dd===null)try{new FormData(document.createElement("form"),0),Dd=!1}catch{Dd=!0}return Dd}var xk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nm(n){return n!=null&&!xk.has(n)?(zs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wd}"`),null):n}function Ck(n,e){let t,s,a,u,d;if(bk(n)){let g=n.getAttribute("action");s=g?bo(g,e):null,t=n.getAttribute("method")||Zd,a=nm(n.getAttribute("enctype"))||Wd,u=new FormData(n)}else if(_k(n)||wk(n)&&(n.type==="submit"||n.type==="image")){let g=n.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=n.getAttribute("formaction")||g.getAttribute("action");if(s=v?bo(v,e):null,t=n.getAttribute("formmethod")||g.getAttribute("method")||Zd,a=nm(n.getAttribute("formenctype"))||nm(g.getAttribute("enctype"))||Wd,u=new FormData(g,n),!Sk()){let{name:_,type:E,value:S}=n;if(E==="image"){let I=_?`${_}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else _&&u.append(_,S)}}else{if(Ff(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zd,s=null,a=Wd,d=n}return u&&a==="text/plain"&&(d=u,u=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ak(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&bo(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function kk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Lk(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Ik(n,e,t){let s=await Promise.all(n.map(async a=>{let u=e.routes[a.route.id];if(u){let d=await kk(u,t);return d.links?d.links():[]}return[]}));return Pk(s.flat(1).filter(Lk).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Rb(n,e,t,s,a,u){let d=(v,_)=>t[_]?v.route.id!==t[_].route.id:!0,g=(v,_)=>t[_].pathname!==v.pathname||t[_].route.path?.endsWith("*")&&t[_].params["*"]!==v.params["*"];return u==="assets"?e.filter((v,_)=>d(v,_)||g(v,_)):u==="data"?e.filter((v,_)=>{let E=s.routes[v.route.id];if(!E||!E.hasLoader)return!1;if(d(v,_)||g(v,_))return!0;if(v.route.shouldRevalidate){let S=v.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Rk(n,e,{includeHydrateFallback:t}={}){return Mk(n.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function Mk(n){return[...new Set(n)]}function Ok(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function Pk(n,e){let t=new Set;return new Set(e),n.reduce((s,a)=>{let u=JSON.stringify(Ok(a));return t.has(u)||(t.add(u),s.push({key:u,link:a})),s},[])}function GT(){let n=w.useContext(Bu);return mv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Dk(){let n=w.useContext(Uf);return mv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var vv=w.createContext(void 0);vv.displayName="FrameworkContext";function ZT(){let n=w.useContext(vv);return mv(n,"You must render this element inside a <HydratedRouter> element"),n}function Nk(n,e){let t=w.useContext(vv),[s,a]=w.useState(!1),[u,d]=w.useState(!1),{onFocus:g,onBlur:v,onMouseEnter:_,onMouseLeave:E,onTouchStart:S}=e,I=w.useRef(null);w.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let H=te=>{te.forEach(X=>{d(X.isIntersecting)})},B=new IntersectionObserver(H,{threshold:.5});return I.current&&B.observe(I.current),()=>{B.disconnect()}}},[n]),w.useEffect(()=>{if(s){let H=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(H)}}},[s]);let O=()=>{a(!0)},D=()=>{a(!1),d(!1)};return t?n!=="intent"?[u,I,{}]:[u,I,{onFocus:zc(g,O),onBlur:zc(v,D),onMouseEnter:zc(_,O),onMouseLeave:zc(E,D),onTouchStart:zc(S,O)}]:[!1,I,{}]}function zc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function zk({page:n,...e}){let{router:t}=GT(),s=w.useMemo(()=>PT(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?w.createElement(jk,{page:n,matches:s,...e}):null}function Vk(n){let{manifest:e,routeModules:t}=ZT(),[s,a]=w.useState([]);return w.useEffect(()=>{let u=!1;return Ik(n,e,t).then(d=>{u||a(d)}),()=>{u=!0}},[n,e,t]),s}function jk({page:n,matches:e,...t}){let s=Ml(),{manifest:a,routeModules:u}=ZT(),{basename:d}=GT(),{loaderData:g,matches:v}=Dk(),_=w.useMemo(()=>Rb(n,e,v,a,s,"data"),[n,e,v,a,s]),E=w.useMemo(()=>Rb(n,e,v,a,s,"assets"),[n,e,v,a,s]),S=w.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let D=new Set,H=!1;if(e.forEach(te=>{let X=a.routes[te.route.id];!X||!X.hasLoader||(!_.some(le=>le.route.id===te.route.id)&&te.route.id in g&&u[te.route.id]?.shouldRevalidate||X.hasClientLoader?H=!0:D.add(te.route.id))}),D.size===0)return[];let B=Ak(n,d,"data");return H&&D.size>0&&B.searchParams.set("_routes",e.filter(te=>D.has(te.route.id)).map(te=>te.route.id).join(",")),[B.pathname+B.search]},[d,g,s,a,_,e,n,u]),I=w.useMemo(()=>Rk(E,a),[E,a]),O=Vk(E);return w.createElement(w.Fragment,null,S.map(D=>w.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),I.map(D=>w.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),O.map(({key:D,link:H})=>w.createElement("link",{key:D,nonce:t.nonce,...H})))}function Uk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var WT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WT&&(window.__reactRouterVersion="7.9.6")}catch{}function Bk({basename:n,children:e,window:t}){let s=w.useRef();s.current==null&&(s.current=k1({window:t,v5Compat:!0}));let a=s.current,[u,d]=w.useState({action:a.action,location:a.location}),g=w.useCallback(v=>{w.startTransition(()=>d(v))},[d]);return w.useLayoutEffect(()=>a.listen(g),[a,g]),w.createElement(vk,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:a})}var KT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$T=w.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:u,replace:d,state:g,target:v,to:_,preventScrollReset:E,viewTransition:S,...I},O){let{basename:D}=w.useContext(qr),H=typeof _=="string"&&KT.test(_),B,te=!1;if(typeof _=="string"&&H&&(B=_,WT))try{let M=new URL(window.location.href),q=_.startsWith("//")?new URL(M.protocol+_):new URL(_),G=bo(q.pathname,D);q.origin===M.origin&&G!=null?_=G+q.search+q.hash:te=!0}catch{zs(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=nk(_,{relative:a}),[le,oe,ae]=Nk(s,I),re=Gk(_,{replace:d,state:g,target:v,preventScrollReset:E,relative:a,viewTransition:S});function V(M){e&&e(M),M.defaultPrevented||re(M)}let z=w.createElement("a",{...I,...ae,href:B||X,onClick:te||u?e:V,ref:Uk(O,oe),target:v,"data-discover":!H&&t==="render"?"true":void 0});return le&&!H?w.createElement(w.Fragment,null,z,w.createElement(zk,{page:X})):z});$T.displayName="Link";var Fk=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:u,to:d,viewTransition:g,children:v,..._},E){let S=_h(d,{relative:_.relative}),I=Ml(),O=w.useContext(Uf),{navigator:D,basename:H}=w.useContext(qr),B=O!=null&&Yk(S)&&g===!0,te=D.encodeLocation?D.encodeLocation(S).pathname:S.pathname,X=I.pathname,le=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(X=X.toLowerCase(),le=le?le.toLowerCase():null,te=te.toLowerCase()),le&&H&&(le=bo(le,H)||le);const oe=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let ae=X===te||!a&&X.startsWith(te)&&X.charAt(oe)==="/",re=le!=null&&(le===te||!a&&le.startsWith(te)&&le.charAt(te.length)==="/"),V={isActive:ae,isPending:re,isTransitioning:B},z=ae?e:void 0,M;typeof s=="function"?M=s(V):M=[s,ae?"active":null,re?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let q=typeof u=="function"?u(V):u;return w.createElement($T,{..._,"aria-current":z,className:M,ref:E,style:q,to:d,viewTransition:g},typeof v=="function"?v(V):v)});Fk.displayName="NavLink";var Hk=w.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:u,method:d=Zd,action:g,onSubmit:v,relative:_,preventScrollReset:E,viewTransition:S,...I},O)=>{let D=Kk(),H=$k(g,{relative:_}),B=d.toLowerCase()==="get"?"get":"post",te=typeof g=="string"&&KT.test(g),X=le=>{if(v&&v(le),le.defaultPrevented)return;le.preventDefault();let oe=le.nativeEvent.submitter,ae=oe?.getAttribute("formmethod")||d;D(oe||le.currentTarget,{fetcherKey:e,method:ae,navigate:t,replace:a,state:u,relative:_,preventScrollReset:E,viewTransition:S})};return w.createElement("form",{ref:O,method:B,action:H,onSubmit:s?v:X,...I,"data-discover":!te&&n==="render"?"true":void 0})});Hk.displayName="Form";function qk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YT(n){let e=w.useContext(Bu);return gn(e,qk(n)),e}function Gk(n,{target:e,replace:t,state:s,preventScrollReset:a,relative:u,viewTransition:d}={}){let g=Bf(),v=Ml(),_=_h(n,{relative:u});return w.useCallback(E=>{if(Tk(E,e)){E.preventDefault();let S=t!==void 0?t:sh(v)===sh(_);g(n,{replace:S,state:s,preventScrollReset:a,relative:u,viewTransition:d})}},[v,g,_,t,s,e,n,a,u,d])}var Zk=0,Wk=()=>`__${String(++Zk)}__`;function Kk(){let{router:n}=YT("useSubmit"),{basename:e}=w.useContext(qr),t=fk();return w.useCallback(async(s,a={})=>{let{action:u,method:d,encType:g,formData:v,body:_}=Ck(s,e);if(a.navigate===!1){let E=a.fetcherKey||Wk();await n.fetch(E,t,a.action||u,{preventScrollReset:a.preventScrollReset,formData:v,body:_,formMethod:a.method||d,formEncType:a.encType||g,flushSync:a.flushSync})}else await n.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:v,body:_,formMethod:a.method||d,formEncType:a.encType||g,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function $k(n,{relative:e}={}){let{basename:t}=w.useContext(qr),s=w.useContext(Co);gn(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),u={..._h(n||".",{relative:e})},d=Ml();if(n==null){u.search=d.search;let g=new URLSearchParams(u.search),v=g.getAll("index");if(v.some(E=>E==="")){g.delete("index"),v.filter(S=>S).forEach(S=>g.append("index",S));let E=g.toString();u.search=E?`?${E}`:""}}return(!n||n===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:_o([t,u.pathname])),sh(u)}function Yk(n,{relative:e}={}){let t=w.useContext(UT);gn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=YT("useViewTransitionState"),a=_h(n,{relative:e});if(!t.isTransitioning)return!1;let u=bo(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=bo(t.nextLocation.pathname,s)||t.nextLocation.pathname;return uf(a.pathname,d)!=null||uf(a.pathname,u)!=null}var Ol=OT();const Qk=jf(Ol);function im(){return null}const Xk=()=>{};var Mb={};const QT=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Jk=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const u=n[t++];e[s++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=n[t++],d=n[t++],g=n[t++],v=((a&7)<<18|(u&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(v>>10)),e[s++]=String.fromCharCode(56320+(v&1023))}else{const u=n[t++],d=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(u&63)<<6|d&63)}}return e.join("")},XT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const u=n[a],d=a+1<n.length,g=d?n[a+1]:0,v=a+2<n.length,_=v?n[a+2]:0,E=u>>2,S=(u&3)<<4|g>>4;let I=(g&15)<<2|_>>6,O=_&63;v||(O=64,d||(I=64)),s.push(t[E],t[S],t[I],t[O])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Jk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const u=t[n.charAt(a++)],g=a<n.length?t[n.charAt(a)]:0;++a;const _=a<n.length?t[n.charAt(a)]:64;++a;const S=a<n.length?t[n.charAt(a)]:64;if(++a,u==null||g==null||_==null||S==null)throw new eL;const I=u<<2|g>>4;if(s.push(I),_!==64){const O=g<<4&240|_>>2;if(s.push(O),S!==64){const D=_<<6&192|S;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tL=function(n){const e=QT(n);return XT.encodeByteArray(e,!0)},cf=function(n){return tL(n).replace(/\./g,"")},JT=function(n){try{return XT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iL=()=>nL().__FIREBASE_DEFAULTS__,sL=()=>{if(typeof process>"u"||typeof Mb>"u")return;const n=Mb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&JT(n[1]);return e&&JSON.parse(e)},Hf=()=>{try{return Xk()||iL()||sL()||rL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eS=n=>{var e,t;return(t=(e=Hf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},oL=n=>{const e=eS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},tS=()=>{var n;return(n=Hf())===null||n===void 0?void 0:n.config},nS=n=>{var e;return(e=Hf())===null||e===void 0?void 0:e[`_${n}`]};class aL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Fu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iS(n){return(await fetch(n,{credentials:"include"})).ok}function lL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cf(JSON.stringify(t)),cf(JSON.stringify(d)),""].join(".")}const Yc={};function uL(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yc))Yc[e]?n.emulator.push(e):n.prod.push(e);return n}function cL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ob=!1;function sS(n,e){if(typeof window>"u"||typeof document>"u"||!Fu(window.location.host)||Yc[n]===e||Yc[n]||Ob)return;Yc[n]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=uL().prod.length>0;function d(){const I=document.getElementById(s);I&&I.remove()}function g(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function v(I,O){I.setAttribute("width","24"),I.setAttribute("id",O),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function _(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Ob=!0,d()},I}function E(I,O){I.setAttribute("id",O),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function S(){const I=cL(s),O=t("text"),D=document.getElementById(O)||document.createElement("span"),H=t("learnmore"),B=document.getElementById(H)||document.createElement("a"),te=t("preprendIcon"),X=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const le=I.element;g(le),E(B,H);const oe=_();v(X,te),le.append(X,D,B,oe),document.body.appendChild(le)}u?(D.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function Si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Si())}function dL(){var n;const e=(n=Hf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mL(){const n=Si();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vL(){return!dL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yL(){try{return typeof indexedDB=="object"}catch{return!1}}function _L(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}const bL="FirebaseError";class Ao extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=bL,Object.setPrototypeOf(this,Ao.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bh.prototype.create)}}class bh{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,u=this.errors[e],d=u?wL(u,s):"Error",g=`${this.serviceName}: ${d} (${a}).`;return new Ao(a,g,s)}}function wL(n,e){return n.replace(EL,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const EL=/\{\$([^}]+)}/g;function TL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xl(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const u=n[a],d=e[a];if(Pb(u)&&Pb(d)){if(!xl(u,d))return!1}else if(u!==d)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function Pb(n){return n!==null&&typeof n=="object"}function wh(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function SL(n,e){const t=new xL(n,e);return t.subscribe.bind(t)}class xL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");CL(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=sm),a.error===void 0&&(a.error=sm),a.complete===void 0&&(a.complete=sm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sm(){}function ci(n){return n&&n._delegate?n._delegate:n}class Cl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yl="[DEFAULT]";class AL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new aL;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LL(e))try{this.getOrInitializeService({instanceIdentifier:yl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:a});s.resolve(u)}catch{}}}}clearInstance(e=yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yl){return this.instances.has(e)}getOptions(e=yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&d.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(a,u);const d=this.instances.get(a);return d&&e(d,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:kL(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yl){return this.component?this.component.multipleInstances?e:yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kL(n){return n===yl?void 0:n}function LL(n){return n.instantiationMode==="EAGER"}class IL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new AL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ct;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ct||(Ct={}));const RL={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},ML=Ct.INFO,OL={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},PL=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=OL[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yv{constructor(e){this.name=e,this._logLevel=ML,this._logHandler=PL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const DL=(n,e)=>e.some(t=>n instanceof t);let Db,Nb;function NL(){return Db||(Db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zL(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rS=new WeakMap,Im=new WeakMap,oS=new WeakMap,rm=new WeakMap,_v=new WeakMap;function VL(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",u),n.removeEventListener("error",d)},u=()=>{t(ba(n.result)),a()},d=()=>{s(n.error),a()};n.addEventListener("success",u),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&rS.set(t,n)}).catch(()=>{}),_v.set(e,n),e}function jL(n){if(Im.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",d),n.removeEventListener("abort",d)},u=()=>{t(),a()},d=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",u),n.addEventListener("error",d),n.addEventListener("abort",d)});Im.set(n,e)}let Rm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Im.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ba(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UL(n){Rm=n(Rm)}function BL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(om(this),e,...t);return oS.set(s,e.sort?e.sort():[e]),ba(s)}:zL().includes(n)?function(...e){return n.apply(om(this),e),ba(rS.get(this))}:function(...e){return ba(n.apply(om(this),e))}}function FL(n){return typeof n=="function"?BL(n):(n instanceof IDBTransaction&&jL(n),DL(n,NL())?new Proxy(n,Rm):n)}function ba(n){if(n instanceof IDBRequest)return VL(n);if(rm.has(n))return rm.get(n);const e=FL(n);return e!==n&&(rm.set(n,e),_v.set(e,n)),e}const om=n=>_v.get(n);function HL(n,e,{blocked:t,upgrade:s,blocking:a,terminated:u}={}){const d=indexedDB.open(n,e),g=ba(d);return s&&d.addEventListener("upgradeneeded",v=>{s(ba(d.result),v.oldVersion,v.newVersion,ba(d.transaction),v)}),t&&d.addEventListener("blocked",v=>t(v.oldVersion,v.newVersion,v)),g.then(v=>{u&&v.addEventListener("close",()=>u()),a&&v.addEventListener("versionchange",_=>a(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const qL=["get","getKey","getAll","getAllKeys","count"],GL=["put","add","delete","clear"],am=new Map;function zb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(am.get(e))return am.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=GL.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||qL.includes(t)))return;const u=async function(d,...g){const v=this.transaction(d,a?"readwrite":"readonly");let _=v.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[t](...g),a&&v.done]))[0]};return am.set(e,u),u}UL(n=>({...n,get:(e,t,s)=>zb(e,t)||n.get(e,t,s),has:(e,t)=>!!zb(e,t)||n.has(e,t)}));class ZL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WL(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function WL(n){const e=n.getComponent();return e?.type==="VERSION"}const Mm="@firebase/app",Vb="0.13.2";const wo=new yv("@firebase/app"),KL="@firebase/app-compat",$L="@firebase/analytics-compat",YL="@firebase/analytics",QL="@firebase/app-check-compat",XL="@firebase/app-check",JL="@firebase/auth",eI="@firebase/auth-compat",tI="@firebase/database",nI="@firebase/data-connect",iI="@firebase/database-compat",sI="@firebase/functions",rI="@firebase/functions-compat",oI="@firebase/installations",aI="@firebase/installations-compat",lI="@firebase/messaging",uI="@firebase/messaging-compat",cI="@firebase/performance",hI="@firebase/performance-compat",dI="@firebase/remote-config",fI="@firebase/remote-config-compat",pI="@firebase/storage",gI="@firebase/storage-compat",mI="@firebase/firestore",vI="@firebase/ai",yI="@firebase/firestore-compat",_I="firebase",bI="11.10.0";const Om="[DEFAULT]",wI={[Mm]:"fire-core",[KL]:"fire-core-compat",[YL]:"fire-analytics",[$L]:"fire-analytics-compat",[XL]:"fire-app-check",[QL]:"fire-app-check-compat",[JL]:"fire-auth",[eI]:"fire-auth-compat",[tI]:"fire-rtdb",[nI]:"fire-data-connect",[iI]:"fire-rtdb-compat",[sI]:"fire-fn",[rI]:"fire-fn-compat",[oI]:"fire-iid",[aI]:"fire-iid-compat",[lI]:"fire-fcm",[uI]:"fire-fcm-compat",[cI]:"fire-perf",[hI]:"fire-perf-compat",[dI]:"fire-rc",[fI]:"fire-rc-compat",[pI]:"fire-gcs",[gI]:"fire-gcs-compat",[mI]:"fire-fst",[yI]:"fire-fst-compat",[vI]:"fire-vertex","fire-js":"fire-js",[_I]:"fire-js-all"};const hf=new Map,EI=new Map,Pm=new Map;function jb(n,e){try{n.container.addComponent(e)}catch(t){wo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pu(n){const e=n.name;if(Pm.has(e))return wo.debug(`There were multiple attempts to register component ${e}.`),!1;Pm.set(e,n);for(const t of hf.values())jb(t,n);for(const t of EI.values())jb(t,n);return!0}function bv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dr(n){return n==null?!1:n.settings!==void 0}const TI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wa=new bh("app","Firebase",TI);class SI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Cl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wa.create("app-deleted",{appName:this._name})}}const Hu=bI;function aS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Om,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw wa.create("bad-app-name",{appName:String(a)});if(t||(t=tS()),!t)throw wa.create("no-options");const u=hf.get(a);if(u){if(xl(t,u.options)&&xl(s,u.config))return u;throw wa.create("duplicate-app",{appName:a})}const d=new IL(a);for(const v of Pm.values())d.addComponent(v);const g=new SI(t,s,d);return hf.set(a,g),g}function lS(n=Om){const e=hf.get(n);if(!e&&n===Om&&tS())return aS();if(!e)throw wa.create("no-app",{appName:n});return e}function Ea(n,e,t){var s;let a=(s=wI[n])!==null&&s!==void 0?s:n;t&&(a+=`-${t}`);const u=a.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const g=[`Unable to register library "${a}" with version "${e}":`];u&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wo.warn(g.join(" "));return}Pu(new Cl(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const xI="firebase-heartbeat-database",CI=1,rh="firebase-heartbeat-store";let lm=null;function uS(){return lm||(lm=HL(xI,CI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rh)}catch(t){console.warn(t)}}}}).catch(n=>{throw wa.create("idb-open",{originalErrorMessage:n.message})})),lm}async function AI(n){try{const t=(await uS()).transaction(rh),s=await t.objectStore(rh).get(cS(n));return await t.done,s}catch(e){if(e instanceof Ao)wo.warn(e.message);else{const t=wa.create("idb-get",{originalErrorMessage:e?.message});wo.warn(t.message)}}}async function Ub(n,e){try{const s=(await uS()).transaction(rh,"readwrite");await s.objectStore(rh).put(e,cS(n)),await s.done}catch(t){if(t instanceof Ao)wo.warn(t.message);else{const s=wa.create("idb-set",{originalErrorMessage:t?.message});wo.warn(s.message)}}}function cS(n){return`${n.name}!${n.options.appId}`}const kI=1024,LI=30;class II{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new MI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Bb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats.length>LI){const d=OI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){wo.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bb(),{heartbeatsToSend:s,unsentEntries:a}=RI(this._heartbeatsCache.heartbeats),u=cf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return wo.warn(t),""}}}function Bb(){return new Date().toISOString().substring(0,10)}function RI(n,e=kI){const t=[];let s=n.slice();for(const a of n){const u=t.find(d=>d.agent===a.agent);if(u){if(u.dates.push(a.date),Fb(t)>e){u.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Fb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class MI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yL()?_L().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Ub(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Ub(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Fb(n){return cf(JSON.stringify({version:2,heartbeats:n})).length}function OI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}function PI(n){Pu(new Cl("platform-logger",e=>new ZL(e),"PRIVATE")),Pu(new Cl("heartbeat",e=>new II(e),"PRIVATE")),Ea(Mm,Vb,n),Ea(Mm,Vb,"esm2017"),Ea("fire-js","")}PI("");var DI="firebase",NI="11.10.0";Ea(DI,NI,"app");function wv(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function hS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zI=hS,dS=new bh("auth","Firebase",hS());const df=new yv("@firebase/auth");function VI(n,...e){df.logLevel<=Ct.WARN&&df.warn(`Auth (${Hu}): ${n}`,...e)}function Kd(n,...e){df.logLevel<=Ct.ERROR&&df.error(`Auth (${Hu}): ${n}`,...e)}function Eo(n,...e){throw Ev(n,...e)}function Nr(n,...e){return Ev(n,...e)}function fS(n,e,t){const s=Object.assign(Object.assign({},zI()),{[e]:t});return new bh("auth","Firebase",s).create(e,{appName:n.name})}function El(n){return fS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ev(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return dS.create(n,...e)}function rt(n,e,...t){if(!n)throw Ev(e,...t)}function vo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Kd(e),new Error(e)}function To(n,e){n||vo(e)}function Dm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function jI(){return Hb()==="http:"||Hb()==="https:"}function Hb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function UI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jI()||pL()||"connection"in navigator)?navigator.onLine:!0}function BI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Eh{constructor(e,t){this.shortDelay=e,this.longDelay=t,To(t>e,"Short delay should be less than long delay!"),this.isMobile=hL()||gL()}get(){return UI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tv(n,e){To(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class pS{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const FI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const HI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qI=new Eh(3e4,6e4);function Sv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function qu(n,e,t,s,a={}){return gS(n,a,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const g=wh(Object.assign({key:n.config.apiKey},d)).slice(1),v=await n._getAdditionalHeaders();v["Content-Type"]="application/json",n.languageCode&&(v["X-Firebase-Locale"]=n.languageCode);const _=Object.assign({method:e,headers:v},u);return fL()||(_.referrerPolicy="no-referrer"),n.emulatorConfig&&Fu(n.emulatorConfig.host)&&(_.credentials="include"),pS.fetch()(await mS(n,n.config.apiHost,t,g),_)})}async function gS(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},FI),e);try{const a=new ZI(n),u=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Nd(n,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const g=u.ok?d.errorMessage:d.error.message,[v,_]=g.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nd(n,"credential-already-in-use",d);if(v==="EMAIL_EXISTS")throw Nd(n,"email-already-in-use",d);if(v==="USER_DISABLED")throw Nd(n,"user-disabled",d);const E=s[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw fS(n,E,_);Eo(n,E)}}catch(a){if(a instanceof Ao)throw a;Eo(n,"network-request-failed",{message:String(a)})}}async function GI(n,e,t,s,a={}){const u=await qu(n,e,t,s,a);return"mfaPendingCredential"in u&&Eo(n,"multi-factor-auth-required",{_serverResponse:u}),u}async function mS(n,e,t,s){const a=`${e}${t}?${s}`,u=n,d=u.config.emulator?Tv(n.config,a):`${n.config.apiScheme}://${a}`;return HI.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class ZI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Nr(this.auth,"network-request-failed")),qI.get())})}}function Nd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Nr(n,e,s);return a.customData._tokenResponse=t,a}async function WI(n,e){return qu(n,"POST","/v1/accounts:delete",e)}async function ff(n,e){return qu(n,"POST","/v1/accounts:lookup",e)}function Qc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KI(n,e=!1){const t=ci(n),s=await t.getIdToken(e),a=xv(s);rt(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,d=u?.sign_in_provider;return{claims:a,token:s,authTime:Qc(um(a.auth_time)),issuedAtTime:Qc(um(a.iat)),expirationTime:Qc(um(a.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function um(n){return Number(n)*1e3}function xv(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Kd("JWT malformed, contained fewer than 3 sections"),null;try{const a=JT(t);return a?JSON.parse(a):(Kd("Failed to decode base64 JWT payload"),null)}catch(a){return Kd("Caught error parsing JWT payload as JSON",a?.toString()),null}}function qb(n){const e=xv(n);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function oh(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ao&&$I(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function $I({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class YI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Nm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qc(this.lastLoginAt),this.creationTime=Qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pf(n){var e;const t=n.auth,s=await n.getIdToken(),a=await oh(n,ff(t,{idToken:s}));rt(a?.users.length,t,"internal-error");const u=a.users[0];n._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?vS(u.providerUserInfo):[],g=XI(n.providerData,d),v=n.isAnonymous,_=!(n.email&&u.passwordHash)&&!g?.length,E=v?_:!1,S={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new Nm(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(n,S)}async function QI(n){const e=ci(n);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XI(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function vS(n){return n.map(e=>{var{providerId:t}=e,s=wv(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}async function JI(n,e){const t=await gS(n,{},async()=>{const s=wh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=n.config,d=await mS(n,a,"/v1/token",`key=${u}`),g=await n._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:g,body:s};return n.emulatorConfig&&Fu(n.emulatorConfig.host)&&(v.credentials="include"),pS.fetch()(d,v)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eR(n,e){return qu(n,"POST","/v2/accounts:revokeToken",Sv(n,e))}class Au{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){rt(e.length!==0,"internal-error");const t=qb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:u}=await JI(e,t);this.updateTokensAndExpiration(s,a,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:u}=t,d=new Au;return s&&(rt(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),a&&(rt(typeof a=="string","internal-error",{appName:e}),d.accessToken=a),u&&(rt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Au,this.toJSON())}_performRefresh(){return vo("not implemented")}}function ha(n,e){rt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rr{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,u=wv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Nm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await oh(this,this.stsTokenManager.getToken(this.auth,e));return rt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KI(this,e)}reload(){return QI(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await pf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(El(this.auth));const e=await this.getIdToken();return await oh(this,WI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,u,d,g,v,_,E;const S=(s=t.displayName)!==null&&s!==void 0?s:void 0,I=(a=t.email)!==null&&a!==void 0?a:void 0,O=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,D=(d=t.photoURL)!==null&&d!==void 0?d:void 0,H=(g=t.tenantId)!==null&&g!==void 0?g:void 0,B=(v=t._redirectEventId)!==null&&v!==void 0?v:void 0,te=(_=t.createdAt)!==null&&_!==void 0?_:void 0,X=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:le,emailVerified:oe,isAnonymous:ae,providerData:re,stsTokenManager:V}=t;rt(le&&V,e,"internal-error");const z=Au.fromJSON(this.name,V);rt(typeof le=="string",e,"internal-error"),ha(S,e.name),ha(I,e.name),rt(typeof oe=="boolean",e,"internal-error"),rt(typeof ae=="boolean",e,"internal-error"),ha(O,e.name),ha(D,e.name),ha(H,e.name),ha(B,e.name),ha(te,e.name),ha(X,e.name);const M=new rr({uid:le,auth:e,email:I,emailVerified:oe,displayName:S,isAnonymous:ae,photoURL:D,phoneNumber:O,tenantId:H,stsTokenManager:z,createdAt:te,lastLoginAt:X});return re&&Array.isArray(re)&&(M.providerData=re.map(q=>Object.assign({},q))),B&&(M._redirectEventId=B),M}static async _fromIdTokenResponse(e,t,s=!1){const a=new Au;a.updateFromServerResponse(t);const u=new rr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await pf(u),u}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];rt(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?vS(a.providerUserInfo):[],d=!(a.email&&a.passwordHash)&&!u?.length,g=new Au;g.updateFromIdToken(s);const v=new rr({uid:a.localId,auth:e,stsTokenManager:g,isAnonymous:d}),_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Nm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!u?.length};return Object.assign(v,_),v}}const Gb=new Map;function yo(n){To(n instanceof Function,"Expected a class definition");let e=Gb.get(n);return e?(To(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Gb.set(n,e),e)}class yS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yS.type="NONE";const Zb=yS;function $d(n,e,t){return`firebase:${n}:${e}:${t}`}class ku{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:u}=this.auth;this.fullUserKey=$d(this.userKey,a.apiKey,u),this.fullPersistenceKey=$d("persistence",a.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ff(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ku(yo(Zb),e,s);const a=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=a[0]||yo(Zb);const d=$d(s,e.config.apiKey,e.name);let g=null;for(const _ of t)try{const E=await _._get(d);if(E){let S;if(typeof E=="string"){const I=await ff(e,{idToken:E}).catch(()=>{});if(!I)break;S=await rr._fromGetAccountInfoResponse(e,I,E)}else S=rr._fromJSON(e,E);_!==u&&(g=S),u=_;break}}catch{}const v=a.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!v.length?new ku(u,e,s):(u=v[0],g&&await u._set(d,g.toJSON()),await Promise.all(t.map(async _=>{if(_!==u)try{await _._remove(d)}catch{}})),new ku(u,e,s))}}function Wb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ES(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_S(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SS(e))return"Blackberry";if(xS(e))return"Webos";if(bS(e))return"Safari";if((e.includes("chrome/")||wS(e))&&!e.includes("edge/"))return"Chrome";if(TS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function _S(n=Si()){return/firefox\//i.test(n)}function bS(n=Si()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wS(n=Si()){return/crios\//i.test(n)}function ES(n=Si()){return/iemobile/i.test(n)}function TS(n=Si()){return/android/i.test(n)}function SS(n=Si()){return/blackberry/i.test(n)}function xS(n=Si()){return/webos/i.test(n)}function Cv(n=Si()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tR(n=Si()){var e;return Cv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nR(){return mL()&&document.documentMode===10}function CS(n=Si()){return Cv(n)||TS(n)||xS(n)||SS(n)||/windows phone/i.test(n)||ES(n)}function AS(n,e=[]){let t;switch(n){case"Browser":t=Wb(Si());break;case"Worker":t=`${Wb(Si())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hu}/${s}`}class iR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((d,g)=>{try{const v=e(u);d(v)}catch(v){g(v)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function sR(n,e={}){return qu(n,"GET","/v2/passwordPolicy",Sv(n,e))}const rR=6;class oR{constructor(e){var t,s,a,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:rR,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,u,d,g;const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,v),this.validatePasswordCharacterOptions(e,v),v.isValid&&(v.isValid=(t=v.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),v.isValid&&(v.isValid=(s=v.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),v.isValid&&(v.isValid=(a=v.containsLowercaseLetter)!==null&&a!==void 0?a:!0),v.isValid&&(v.isValid=(u=v.containsUppercaseLetter)!==null&&u!==void 0?u:!0),v.isValid&&(v.isValid=(d=v.containsNumericCharacter)!==null&&d!==void 0?d:!0),v.isValid&&(v.isValid=(g=v.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),v}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class aR{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kb(this),this.idTokenSubscription=new Kb(this),this.beforeStateQueue=new iR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yo(t)),this._initializationPromise=this.queue(async()=>{var s,a,u;if(!this._deleted&&(this.persistenceManager=await ku.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ff(this,{idToken:e}),s=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Dr(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,g=a?._redirectEventId,v=await this.tryRedirectSignIn(e);(!d||d===g)&&v?.user&&(a=v.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(El(this));const t=e?ci(e):null;return t&&rt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(El(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(El(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sR(this),t=new oR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bh("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await eR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yo(e)||this._popupRedirectResolver;rt(t,this,"argument-error"),this.redirectPersistenceManager=await ku.create(this,[yo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(g,this,"internal-error"),g.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const v=e.addObserver(t,s,a);return()=>{d=!0,v()}}else{const v=e.addObserver(t);return()=>{d=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&VI(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Av(n){return ci(n)}class Kb{constructor(e){this.auth=e,this.observer=null,this.addObserver=SL(t=>this.observer=t)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lR(n){kv=n}function uR(n){return kv.loadJS(n)}function cR(){return kv.gapiScript}function hR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function dR(n,e){const t=bv(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),u=t.getOptions();if(xl(u,e??{}))return a;Eo(a,"already-initialized")}return t.initialize({options:e})}function fR(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(yo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function pR(n,e,t){const s=Av(n);rt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,u=kS(e),{host:d,port:g}=gR(e),v=g===null?"":`:${g}`,_={url:`${u}//${d}${v}/`},E=Object.freeze({host:d,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){rt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),rt(xl(_,s.config.emulator)&&xl(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Fu(d)?(iS(`${u}//${d}${v}`),sS("Auth",!0)):mR()}function kS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gR(n){const e=kS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const u=a[1];return{host:u,port:$b(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:$b(d)}}}function $b(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function mR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class LS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vo("not implemented")}_getIdTokenResponse(e){return vo("not implemented")}_linkToIdToken(e,t){return vo("not implemented")}_getReauthenticationResolver(e){return vo("not implemented")}}async function Lu(n,e){return GI(n,"POST","/v1/accounts:signInWithIdp",Sv(n,e))}const vR="http://localhost";class Al extends LS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Al(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Eo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,u=wv(t,["providerId","signInMethod"]);if(!s||!a)return null;const d=new Al(s,a);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Lu(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Lu(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lu(e,t)}buildRequest(){const e={requestUri:vR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wh(t)}return e}}class IS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Th extends IS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pa extends Th{constructor(){super("facebook.com")}static credential(e){return Al._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pa.credential(e.oauthAccessToken)}catch{return null}}}pa.FACEBOOK_SIGN_IN_METHOD="facebook.com";pa.PROVIDER_ID="facebook.com";class ga extends Th{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Al._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ga.credentialFromTaggedObject(e)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ga.credential(t,s)}catch{return null}}}ga.GOOGLE_SIGN_IN_METHOD="google.com";ga.PROVIDER_ID="google.com";class ma extends Th{constructor(){super("github.com")}static credential(e){return Al._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ma.credential(e.oauthAccessToken)}catch{return null}}}ma.GITHUB_SIGN_IN_METHOD="github.com";ma.PROVIDER_ID="github.com";class va extends Th{constructor(){super("twitter.com")}static credential(e,t){return Al._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return va.credential(t,s)}catch{return null}}}va.TWITTER_SIGN_IN_METHOD="twitter.com";va.PROVIDER_ID="twitter.com";class Du{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const u=await rr._fromIdTokenResponse(e,s,a),d=Yb(s);return new Du({user:u,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Yb(s);return new Du({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Yb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class gf extends Ao{constructor(e,t,s,a){var u;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new gf(e,t,s,a)}}function RS(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(n,u,e,s):u})}async function yR(n,e,t=!1){const s=await oh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Du._forOperation(n,"link",s)}async function _R(n,e,t=!1){const{auth:s}=n;if(Dr(s.app))return Promise.reject(El(s));const a="reauthenticate";try{const u=await oh(n,RS(s,a,e,n),t);rt(u.idToken,s,"internal-error");const d=xv(u.idToken);rt(d,s,"internal-error");const{sub:g}=d;return rt(n.uid===g,s,"user-mismatch"),Du._forOperation(n,a,u)}catch(u){throw u?.code==="auth/user-not-found"&&Eo(s,"user-mismatch"),u}}async function bR(n,e,t=!1){if(Dr(n.app))return Promise.reject(El(n));const s="signIn",a=await RS(n,s,e),u=await Du._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(u.user),u}function wR(n,e,t,s){return ci(n).onIdTokenChanged(e,t,s)}function ER(n,e,t){return ci(n).beforeAuthStateChanged(e,t)}function TR(n){return ci(n).signOut()}const mf="__sak";class MS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const SR=1e3,xR=10;class OS extends MS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,g,v)=>{this.notifyListeners(d,v)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);nR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,xR):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},SR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OS.type="LOCAL";const CR=OS;class PS extends MS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}PS.type="SESSION";const DS=PS;function AR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new qf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:u}=t.data,d=this.handlersMap[a];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const g=Array.from(d).map(async _=>_(t.origin,u)),v=await AR(g);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:v})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];function Lv(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}class kR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,d;return new Promise((g,v)=>{const _=Lv("",20);a.port1.start();const E=setTimeout(()=>{v(new Error("unsupported_event"))},s);d={messageChannel:a,onMessage(S){const I=S;if(I.data.eventId===_)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(I.data.response);break;default:clearTimeout(E),clearTimeout(u),v(new Error("invalid_response"));break}}},this.handlers.add(d),a.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[a.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function zr(){return window}function LR(n){zr().location.href=n}function NS(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function IR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RR(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function MR(){return NS()?self:null}const zS="firebaseLocalStorageDb",OR=1,vf="firebaseLocalStorage",VS="fbase_key";class Sh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gf(n,e){return n.transaction([vf],e?"readwrite":"readonly").objectStore(vf)}function PR(){const n=indexedDB.deleteDatabase(zS);return new Sh(n).toPromise()}function zm(){const n=indexedDB.open(zS,OR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(vf,{keyPath:VS})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(vf)?e(s):(s.close(),await PR(),e(await zm()))})})}async function Qb(n,e,t){const s=Gf(n,!0).put({[VS]:e,value:t});return new Sh(s).toPromise()}async function DR(n,e){const t=Gf(n,!1).get(e),s=await new Sh(t).toPromise();return s===void 0?null:s.value}function Xb(n,e){const t=Gf(n,!0).delete(e);return new Sh(t).toPromise()}const NR=800,zR=3;class jS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>zR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(MR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await IR(),!this.activeServiceWorker)return;this.sender=new kR(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zm();return await Qb(e,mf,"1"),await Xb(e,mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Qb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>DR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const u=Gf(a,!1).getAll();return new Sh(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:u}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jS.type="LOCAL";const VR=jS;new Eh(3e4,6e4);function jR(n,e){return e?yo(e):(rt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Iv extends LS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UR(n){return bR(n.auth,new Iv(n),n.bypassAuthState)}function BR(n){const{auth:e,user:t}=n;return rt(t,e,"internal-error"),_R(t,new Iv(n),n.bypassAuthState)}async function FR(n){const{auth:e,user:t}=n;return rt(t,e,"internal-error"),yR(t,new Iv(n),n.bypassAuthState)}class US{constructor(e,t,s,a,u=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:u,error:d,type:g}=e;if(d){this.reject(d);return}const v={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(v))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UR;case"linkViaPopup":case"linkViaRedirect":return FR;case"reauthViaPopup":case"reauthViaRedirect":return BR;default:Eo(this.auth,"internal-error")}}resolve(e){To(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){To(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const HR=new Eh(2e3,1e4);class Su extends US{constructor(e,t,s,a,u){super(e,t,a,u),this.provider=s,this.authWindow=null,this.pollId=null,Su.currentPopupAction&&Su.currentPopupAction.cancel(),Su.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rt(e,this.auth,"internal-error"),e}async onExecution(){To(this.filter.length===1,"Popup operations only handle one event");const e=Lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Su.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HR.get())};e()}}Su.currentPopupAction=null;const qR="pendingRedirect",Yd=new Map;class GR extends US{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Yd.get(this.auth._key());if(!e){try{const s=await ZR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Yd.set(this.auth._key(),e)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZR(n,e){const t=$R(e),s=KR(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function WR(n,e){Yd.set(n._key(),e)}function KR(n){return yo(n._redirectPersistence)}function $R(n){return $d(qR,n.config.apiKey,n.name)}async function YR(n,e,t=!1){if(Dr(n.app))return Promise.reject(El(n));const s=Av(n),a=jR(s,e),d=await new GR(s,a,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const QR=600*1e3;class XR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!BS(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Nr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jb(e))}saveEventToCache(e){this.cachedEventUids.add(Jb(e)),this.lastProcessedEventTime=Date.now()}}function Jb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function JR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BS(n);default:return!1}}async function eM(n,e={}){return qu(n,"GET","/v1/projects",e)}const tM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nM=/^https?/;async function iM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eM(n);for(const t of e)try{if(sM(t))return}catch{}Eo(n,"unauthorized-domain")}function sM(n){const e=Dm(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!nM.test(t))return!1;if(tM.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}const rM=new Eh(3e4,6e4);function ew(){const n=zr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oM(n){return new Promise((e,t)=>{var s,a,u;function d(){ew(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ew(),t(Nr(n,"network-request-failed"))},timeout:rM.get()})}if(!((a=(s=zr().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((u=zr().gapi)===null||u===void 0)&&u.load)d();else{const g=hR("iframefcb");return zr()[g]=()=>{gapi.load?d():t(Nr(n,"network-request-failed"))},uR(`${cR()}?onload=${g}`).catch(v=>t(v))}}).catch(e=>{throw Qd=null,e})}let Qd=null;function aM(n){return Qd=Qd||oM(n),Qd}const lM=new Eh(5e3,15e3),uM="__/auth/iframe",cM="emulator/auth/iframe",hM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fM(n){const e=n.config;rt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tv(e,cM):`https://${n.config.authDomain}/${uM}`,s={apiKey:e.apiKey,appName:n.name,v:Hu},a=dM.get(n.config.apiHost);a&&(s.eid=a);const u=n._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${wh(s).slice(1)}`}async function pM(n){const e=await aM(n),t=zr().gapi;return rt(t,n,"internal-error"),e.open({where:document.body,url:fM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hM,dontclear:!0},s=>new Promise(async(a,u)=>{await s.restyle({setHideOnLeave:!1});const d=Nr(n,"network-request-failed"),g=zr().setTimeout(()=>{u(d)},lM.get());function v(){zr().clearTimeout(g),a(s)}s.ping(v).then(v,()=>{u(d)})}))}const gM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mM=500,vM=600,yM="_blank",_M="http://localhost";class tw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bM(n,e,t,s=mM,a=vM){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const v=Object.assign(Object.assign({},gM),{width:s.toString(),height:a.toString(),top:u,left:d}),_=Si().toLowerCase();t&&(g=wS(_)?yM:t),_S(_)&&(e=e||_M,v.scrollbars="yes");const E=Object.entries(v).reduce((I,[O,D])=>`${I}${O}=${D},`,"");if(tR(_)&&g!=="_self")return wM(e||"",g),new tw(null);const S=window.open(e||"",g,E);rt(S,n,"popup-blocked");try{S.focus()}catch{}return new tw(S)}function wM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const EM="__/auth/handler",TM="emulator/auth/handler",SM=encodeURIComponent("fac");async function nw(n,e,t,s,a,u){rt(n.config.authDomain,n,"auth-domain-config-required"),rt(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Hu,eventId:a};if(e instanceof IS){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",TL(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))d[E]=S}if(e instanceof Th){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(d.scopes=E.join(","))}n.tenantId&&(d.tid=n.tenantId);const g=d;for(const E of Object.keys(g))g[E]===void 0&&delete g[E];const v=await n._getAppCheckToken(),_=v?`#${SM}=${encodeURIComponent(v)}`:"";return`${xM(n)}?${wh(g).slice(1)}${_}`}function xM({config:n}){return n.emulator?Tv(n,TM):`https://${n.authDomain}/${EM}`}const cm="webStorageSupport";class CM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DS,this._completeRedirectFn=YR,this._overrideRedirectResult=WR}async _openPopup(e,t,s,a){var u;To((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await nw(e,t,s,Dm(),a);return bM(e,d,Lv())}async _openRedirect(e,t,s,a){await this._originValidation(e);const u=await nw(e,t,s,Dm(),a);return LR(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:u}=this.eventManagers[t];return a?Promise.resolve(a):(To(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await pM(e),s=new XR(e);return t.register("authEvent",a=>(rt(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cm,{type:cm},a=>{var u;const d=(u=a?.[0])===null||u===void 0?void 0:u[cm];d!==void 0&&t(!!d),Eo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CS()||bS()||Cv()}}const AM=CM;var iw="@firebase/auth",sw="1.10.8";class kM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function LM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IM(n){Pu(new Cl("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;rt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const v={apiKey:d,authDomain:g,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AS(n)},_=new aR(s,a,u,v);return fR(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Pu(new Cl("auth-internal",e=>{const t=Av(e.getProvider("auth").getImmediate());return(s=>new kM(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ea(iw,sw,LM(n)),Ea(iw,sw,"esm2017")}const RM=300,MM=nS("authIdTokenMaxAge")||RM;let rw=null;const OM=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>MM)return;const a=t?.token;rw!==a&&(rw=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function PM(n=lS()){const e=bv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dR(n,{popupRedirectResolver:AM,persistence:[VR,CR,DS]}),s=nS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=OM(u.toString());ER(t,d,()=>d(t.currentUser)),wR(t,g=>d(g))}}const a=eS("auth");return a&&pR(t,`http://${a}`),t}function DM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}lR({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const u=Nr("internal-error");u.customData=a,t(u)},s.type="text/javascript",s.charset="UTF-8",DM().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IM("Browser");var ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ta,FS;(function(){var n;function e(V,z){function M(){}M.prototype=z.prototype,V.D=z.prototype,V.prototype=new M,V.prototype.constructor=V,V.C=function(q,G,Z){for(var U=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)U[Pe-2]=arguments[Pe];return z.prototype[G].apply(q,U)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,z,M){M||(M=0);var q=Array(16);if(typeof z=="string")for(var G=0;16>G;++G)q[G]=z.charCodeAt(M++)|z.charCodeAt(M++)<<8|z.charCodeAt(M++)<<16|z.charCodeAt(M++)<<24;else for(G=0;16>G;++G)q[G]=z[M++]|z[M++]<<8|z[M++]<<16|z[M++]<<24;z=V.g[0],M=V.g[1],G=V.g[2];var Z=V.g[3],U=z+(Z^M&(G^Z))+q[0]+3614090360&4294967295;z=M+(U<<7&4294967295|U>>>25),U=Z+(G^z&(M^G))+q[1]+3905402710&4294967295,Z=z+(U<<12&4294967295|U>>>20),U=G+(M^Z&(z^M))+q[2]+606105819&4294967295,G=Z+(U<<17&4294967295|U>>>15),U=M+(z^G&(Z^z))+q[3]+3250441966&4294967295,M=G+(U<<22&4294967295|U>>>10),U=z+(Z^M&(G^Z))+q[4]+4118548399&4294967295,z=M+(U<<7&4294967295|U>>>25),U=Z+(G^z&(M^G))+q[5]+1200080426&4294967295,Z=z+(U<<12&4294967295|U>>>20),U=G+(M^Z&(z^M))+q[6]+2821735955&4294967295,G=Z+(U<<17&4294967295|U>>>15),U=M+(z^G&(Z^z))+q[7]+4249261313&4294967295,M=G+(U<<22&4294967295|U>>>10),U=z+(Z^M&(G^Z))+q[8]+1770035416&4294967295,z=M+(U<<7&4294967295|U>>>25),U=Z+(G^z&(M^G))+q[9]+2336552879&4294967295,Z=z+(U<<12&4294967295|U>>>20),U=G+(M^Z&(z^M))+q[10]+4294925233&4294967295,G=Z+(U<<17&4294967295|U>>>15),U=M+(z^G&(Z^z))+q[11]+2304563134&4294967295,M=G+(U<<22&4294967295|U>>>10),U=z+(Z^M&(G^Z))+q[12]+1804603682&4294967295,z=M+(U<<7&4294967295|U>>>25),U=Z+(G^z&(M^G))+q[13]+4254626195&4294967295,Z=z+(U<<12&4294967295|U>>>20),U=G+(M^Z&(z^M))+q[14]+2792965006&4294967295,G=Z+(U<<17&4294967295|U>>>15),U=M+(z^G&(Z^z))+q[15]+1236535329&4294967295,M=G+(U<<22&4294967295|U>>>10),U=z+(G^Z&(M^G))+q[1]+4129170786&4294967295,z=M+(U<<5&4294967295|U>>>27),U=Z+(M^G&(z^M))+q[6]+3225465664&4294967295,Z=z+(U<<9&4294967295|U>>>23),U=G+(z^M&(Z^z))+q[11]+643717713&4294967295,G=Z+(U<<14&4294967295|U>>>18),U=M+(Z^z&(G^Z))+q[0]+3921069994&4294967295,M=G+(U<<20&4294967295|U>>>12),U=z+(G^Z&(M^G))+q[5]+3593408605&4294967295,z=M+(U<<5&4294967295|U>>>27),U=Z+(M^G&(z^M))+q[10]+38016083&4294967295,Z=z+(U<<9&4294967295|U>>>23),U=G+(z^M&(Z^z))+q[15]+3634488961&4294967295,G=Z+(U<<14&4294967295|U>>>18),U=M+(Z^z&(G^Z))+q[4]+3889429448&4294967295,M=G+(U<<20&4294967295|U>>>12),U=z+(G^Z&(M^G))+q[9]+568446438&4294967295,z=M+(U<<5&4294967295|U>>>27),U=Z+(M^G&(z^M))+q[14]+3275163606&4294967295,Z=z+(U<<9&4294967295|U>>>23),U=G+(z^M&(Z^z))+q[3]+4107603335&4294967295,G=Z+(U<<14&4294967295|U>>>18),U=M+(Z^z&(G^Z))+q[8]+1163531501&4294967295,M=G+(U<<20&4294967295|U>>>12),U=z+(G^Z&(M^G))+q[13]+2850285829&4294967295,z=M+(U<<5&4294967295|U>>>27),U=Z+(M^G&(z^M))+q[2]+4243563512&4294967295,Z=z+(U<<9&4294967295|U>>>23),U=G+(z^M&(Z^z))+q[7]+1735328473&4294967295,G=Z+(U<<14&4294967295|U>>>18),U=M+(Z^z&(G^Z))+q[12]+2368359562&4294967295,M=G+(U<<20&4294967295|U>>>12),U=z+(M^G^Z)+q[5]+4294588738&4294967295,z=M+(U<<4&4294967295|U>>>28),U=Z+(z^M^G)+q[8]+2272392833&4294967295,Z=z+(U<<11&4294967295|U>>>21),U=G+(Z^z^M)+q[11]+1839030562&4294967295,G=Z+(U<<16&4294967295|U>>>16),U=M+(G^Z^z)+q[14]+4259657740&4294967295,M=G+(U<<23&4294967295|U>>>9),U=z+(M^G^Z)+q[1]+2763975236&4294967295,z=M+(U<<4&4294967295|U>>>28),U=Z+(z^M^G)+q[4]+1272893353&4294967295,Z=z+(U<<11&4294967295|U>>>21),U=G+(Z^z^M)+q[7]+4139469664&4294967295,G=Z+(U<<16&4294967295|U>>>16),U=M+(G^Z^z)+q[10]+3200236656&4294967295,M=G+(U<<23&4294967295|U>>>9),U=z+(M^G^Z)+q[13]+681279174&4294967295,z=M+(U<<4&4294967295|U>>>28),U=Z+(z^M^G)+q[0]+3936430074&4294967295,Z=z+(U<<11&4294967295|U>>>21),U=G+(Z^z^M)+q[3]+3572445317&4294967295,G=Z+(U<<16&4294967295|U>>>16),U=M+(G^Z^z)+q[6]+76029189&4294967295,M=G+(U<<23&4294967295|U>>>9),U=z+(M^G^Z)+q[9]+3654602809&4294967295,z=M+(U<<4&4294967295|U>>>28),U=Z+(z^M^G)+q[12]+3873151461&4294967295,Z=z+(U<<11&4294967295|U>>>21),U=G+(Z^z^M)+q[15]+530742520&4294967295,G=Z+(U<<16&4294967295|U>>>16),U=M+(G^Z^z)+q[2]+3299628645&4294967295,M=G+(U<<23&4294967295|U>>>9),U=z+(G^(M|~Z))+q[0]+4096336452&4294967295,z=M+(U<<6&4294967295|U>>>26),U=Z+(M^(z|~G))+q[7]+1126891415&4294967295,Z=z+(U<<10&4294967295|U>>>22),U=G+(z^(Z|~M))+q[14]+2878612391&4294967295,G=Z+(U<<15&4294967295|U>>>17),U=M+(Z^(G|~z))+q[5]+4237533241&4294967295,M=G+(U<<21&4294967295|U>>>11),U=z+(G^(M|~Z))+q[12]+1700485571&4294967295,z=M+(U<<6&4294967295|U>>>26),U=Z+(M^(z|~G))+q[3]+2399980690&4294967295,Z=z+(U<<10&4294967295|U>>>22),U=G+(z^(Z|~M))+q[10]+4293915773&4294967295,G=Z+(U<<15&4294967295|U>>>17),U=M+(Z^(G|~z))+q[1]+2240044497&4294967295,M=G+(U<<21&4294967295|U>>>11),U=z+(G^(M|~Z))+q[8]+1873313359&4294967295,z=M+(U<<6&4294967295|U>>>26),U=Z+(M^(z|~G))+q[15]+4264355552&4294967295,Z=z+(U<<10&4294967295|U>>>22),U=G+(z^(Z|~M))+q[6]+2734768916&4294967295,G=Z+(U<<15&4294967295|U>>>17),U=M+(Z^(G|~z))+q[13]+1309151649&4294967295,M=G+(U<<21&4294967295|U>>>11),U=z+(G^(M|~Z))+q[4]+4149444226&4294967295,z=M+(U<<6&4294967295|U>>>26),U=Z+(M^(z|~G))+q[11]+3174756917&4294967295,Z=z+(U<<10&4294967295|U>>>22),U=G+(z^(Z|~M))+q[2]+718787259&4294967295,G=Z+(U<<15&4294967295|U>>>17),U=M+(Z^(G|~z))+q[9]+3951481745&4294967295,V.g[0]=V.g[0]+z&4294967295,V.g[1]=V.g[1]+(G+(U<<21&4294967295|U>>>11))&4294967295,V.g[2]=V.g[2]+G&4294967295,V.g[3]=V.g[3]+Z&4294967295}s.prototype.u=function(V,z){z===void 0&&(z=V.length);for(var M=z-this.blockSize,q=this.B,G=this.h,Z=0;Z<z;){if(G==0)for(;Z<=M;)a(this,V,Z),Z+=this.blockSize;if(typeof V=="string"){for(;Z<z;)if(q[G++]=V.charCodeAt(Z++),G==this.blockSize){a(this,q),G=0;break}}else for(;Z<z;)if(q[G++]=V[Z++],G==this.blockSize){a(this,q),G=0;break}}this.h=G,this.o+=z},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var z=1;z<V.length-8;++z)V[z]=0;var M=8*this.o;for(z=V.length-8;z<V.length;++z)V[z]=M&255,M/=256;for(this.u(V),V=Array(16),z=M=0;4>z;++z)for(var q=0;32>q;q+=8)V[M++]=this.g[z]>>>q&255;return V};function u(V,z){var M=g;return Object.prototype.hasOwnProperty.call(M,V)?M[V]:M[V]=z(V)}function d(V,z){this.h=z;for(var M=[],q=!0,G=V.length-1;0<=G;G--){var Z=V[G]|0;q&&Z==z||(M[G]=Z,q=!1)}this.g=M}var g={};function v(V){return-128<=V&&128>V?u(V,function(z){return new d([z|0],0>z?-1:0)}):new d([V|0],0>V?-1:0)}function _(V){if(isNaN(V)||!isFinite(V))return S;if(0>V)return B(_(-V));for(var z=[],M=1,q=0;V>=M;q++)z[q]=V/M|0,M*=4294967296;return new d(z,0)}function E(V,z){if(V.length==0)throw Error("number format error: empty string");if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(V.charAt(0)=="-")return B(E(V.substring(1),z));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=_(Math.pow(z,8)),q=S,G=0;G<V.length;G+=8){var Z=Math.min(8,V.length-G),U=parseInt(V.substring(G,G+Z),z);8>Z?(Z=_(Math.pow(z,Z)),q=q.j(Z).add(_(U))):(q=q.j(M),q=q.add(_(U)))}return q}var S=v(0),I=v(1),O=v(16777216);n=d.prototype,n.m=function(){if(H(this))return-B(this).m();for(var V=0,z=1,M=0;M<this.g.length;M++){var q=this.i(M);V+=(0<=q?q:4294967296+q)*z,z*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(D(this))return"0";if(H(this))return"-"+B(this).toString(V);for(var z=_(Math.pow(V,6)),M=this,q="";;){var G=oe(M,z).g;M=te(M,G.j(z));var Z=((0<M.g.length?M.g[0]:M.h)>>>0).toString(V);if(M=G,D(M))return Z+q;for(;6>Z.length;)Z="0"+Z;q=Z+q}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function D(V){if(V.h!=0)return!1;for(var z=0;z<V.g.length;z++)if(V.g[z]!=0)return!1;return!0}function H(V){return V.h==-1}n.l=function(V){return V=te(this,V),H(V)?-1:D(V)?0:1};function B(V){for(var z=V.g.length,M=[],q=0;q<z;q++)M[q]=~V.g[q];return new d(M,~V.h).add(I)}n.abs=function(){return H(this)?B(this):this},n.add=function(V){for(var z=Math.max(this.g.length,V.g.length),M=[],q=0,G=0;G<=z;G++){var Z=q+(this.i(G)&65535)+(V.i(G)&65535),U=(Z>>>16)+(this.i(G)>>>16)+(V.i(G)>>>16);q=U>>>16,Z&=65535,U&=65535,M[G]=U<<16|Z}return new d(M,M[M.length-1]&-2147483648?-1:0)};function te(V,z){return V.add(B(z))}n.j=function(V){if(D(this)||D(V))return S;if(H(this))return H(V)?B(this).j(B(V)):B(B(this).j(V));if(H(V))return B(this.j(B(V)));if(0>this.l(O)&&0>V.l(O))return _(this.m()*V.m());for(var z=this.g.length+V.g.length,M=[],q=0;q<2*z;q++)M[q]=0;for(q=0;q<this.g.length;q++)for(var G=0;G<V.g.length;G++){var Z=this.i(q)>>>16,U=this.i(q)&65535,Pe=V.i(G)>>>16,ke=V.i(G)&65535;M[2*q+2*G]+=U*ke,X(M,2*q+2*G),M[2*q+2*G+1]+=Z*ke,X(M,2*q+2*G+1),M[2*q+2*G+1]+=U*Pe,X(M,2*q+2*G+1),M[2*q+2*G+2]+=Z*Pe,X(M,2*q+2*G+2)}for(q=0;q<z;q++)M[q]=M[2*q+1]<<16|M[2*q];for(q=z;q<2*z;q++)M[q]=0;return new d(M,0)};function X(V,z){for(;(V[z]&65535)!=V[z];)V[z+1]+=V[z]>>>16,V[z]&=65535,z++}function le(V,z){this.g=V,this.h=z}function oe(V,z){if(D(z))throw Error("division by zero");if(D(V))return new le(S,S);if(H(V))return z=oe(B(V),z),new le(B(z.g),B(z.h));if(H(z))return z=oe(V,B(z)),new le(B(z.g),z.h);if(30<V.g.length){if(H(V)||H(z))throw Error("slowDivide_ only works with positive integers.");for(var M=I,q=z;0>=q.l(V);)M=ae(M),q=ae(q);var G=re(M,1),Z=re(q,1);for(q=re(q,2),M=re(M,2);!D(q);){var U=Z.add(q);0>=U.l(V)&&(G=G.add(M),Z=U),q=re(q,1),M=re(M,1)}return z=te(V,G.j(z)),new le(G,z)}for(G=S;0<=V.l(z);){for(M=Math.max(1,Math.floor(V.m()/z.m())),q=Math.ceil(Math.log(M)/Math.LN2),q=48>=q?1:Math.pow(2,q-48),Z=_(M),U=Z.j(z);H(U)||0<U.l(V);)M-=q,Z=_(M),U=Z.j(z);D(Z)&&(Z=I),G=G.add(Z),V=te(V,U)}return new le(G,V)}n.A=function(V){return oe(this,V).h},n.and=function(V){for(var z=Math.max(this.g.length,V.g.length),M=[],q=0;q<z;q++)M[q]=this.i(q)&V.i(q);return new d(M,this.h&V.h)},n.or=function(V){for(var z=Math.max(this.g.length,V.g.length),M=[],q=0;q<z;q++)M[q]=this.i(q)|V.i(q);return new d(M,this.h|V.h)},n.xor=function(V){for(var z=Math.max(this.g.length,V.g.length),M=[],q=0;q<z;q++)M[q]=this.i(q)^V.i(q);return new d(M,this.h^V.h)};function ae(V){for(var z=V.g.length+1,M=[],q=0;q<z;q++)M[q]=V.i(q)<<1|V.i(q-1)>>>31;return new d(M,V.h)}function re(V,z){var M=z>>5;z%=32;for(var q=V.g.length-M,G=[],Z=0;Z<q;Z++)G[Z]=0<z?V.i(Z+M)>>>z|V.i(Z+M+1)<<32-z:V.i(Z+M);return new d(G,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,FS=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=E,Ta=d}).apply(typeof ow<"u"?ow:typeof self<"u"?self:typeof window<"u"?window:{});var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var HS,Fc,qS,Xd,Vm,GS,ZS,WS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,T,k){return f==Array.prototype||f==Object.prototype||(f[T]=k.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof zd=="object"&&zd];for(var T=0;T<f.length;++T){var k=f[T];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var s=t(this);function a(f,T){if(T)e:{var k=s;f=f.split(".");for(var j=0;j<f.length-1;j++){var pe=f[j];if(!(pe in k))break e;k=k[pe]}f=f[f.length-1],j=k[f],T=T(j),T!=j&&T!=null&&e(k,f,{configurable:!0,writable:!0,value:T})}}function u(f,T){f instanceof String&&(f+="");var k=0,j=!1,pe={next:function(){if(!j&&k<f.length){var _e=k++;return{value:T(_e,f[_e]),done:!1}}return j=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}a("Array.prototype.values",function(f){return f||function(){return u(this,function(T,k){return k})}});var d=d||{},g=this||self;function v(f){var T=typeof f;return T=T!="object"?T:f?Array.isArray(f)?"array":T:"null",T=="array"||T=="object"&&typeof f.length=="number"}function _(f){var T=typeof f;return T=="object"&&f!=null||T=="function"}function E(f,T,k){return f.call.apply(f.bind,arguments)}function S(f,T,k){if(!f)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,j),f.apply(T,pe)}}return function(){return f.apply(T,arguments)}}function I(f,T,k){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,I.apply(null,arguments)}function O(f,T){var k=Array.prototype.slice.call(arguments,1);return function(){var j=k.slice();return j.push.apply(j,arguments),f.apply(this,j)}}function D(f,T){function k(){}k.prototype=T.prototype,f.aa=T.prototype,f.prototype=new k,f.prototype.constructor=f,f.Qb=function(j,pe,_e){for(var De=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)De[Pt-2]=arguments[Pt];return T.prototype[pe].apply(j,De)}}function H(f){const T=f.length;if(0<T){const k=Array(T);for(let j=0;j<T;j++)k[j]=f[j];return k}return[]}function B(f,T){for(let k=1;k<arguments.length;k++){const j=arguments[k];if(v(j)){const pe=f.length||0,_e=j.length||0;f.length=pe+_e;for(let De=0;De<_e;De++)f[pe+De]=j[De]}else f.push(j)}}class te{constructor(T,k){this.i=T,this.j=k,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function X(f){return/^[\s\xa0]*$/.test(f)}function le(){var f=g.navigator;return f&&(f=f.userAgent)?f:""}function oe(f){return oe[" "](f),f}oe[" "]=function(){};var ae=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function re(f,T,k){for(const j in f)T.call(k,f[j],j,f)}function V(f,T){for(const k in f)T.call(void 0,f[k],k,f)}function z(f){const T={};for(const k in f)T[k]=f[k];return T}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(f,T){let k,j;for(let pe=1;pe<arguments.length;pe++){j=arguments[pe];for(k in j)f[k]=j[k];for(let _e=0;_e<M.length;_e++)k=M[_e],Object.prototype.hasOwnProperty.call(j,k)&&(f[k]=j[k])}}function G(f){var T=1;f=f.split(":");const k=[];for(;0<T&&f.length;)k.push(f.shift()),T--;return f.length&&k.push(f.join(":")),k}function Z(f){g.setTimeout(()=>{throw f},0)}function U(){var f=de;let T=null;return f.g&&(T=f.g,f.g=f.g.next,f.g||(f.h=null),T.next=null),T}class Pe{constructor(){this.h=this.g=null}add(T,k){const j=ke.get();j.set(T,k),this.h?this.h.next=j:this.g=j,this.h=j}}var ke=new te(()=>new ie,f=>f.reset());class ie{constructor(){this.next=this.g=this.h=null}set(T,k){this.h=T,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ee=!1,de=new Pe,Q=()=>{const f=g.Promise.resolve(void 0);J=()=>{f.then(N)}};var N=()=>{for(var f;f=U();){try{f.h.call(f.g)}catch(k){Z(k)}var T=ke;T.j(f),100>T.h&&(T.h++,f.next=T.g,T.g=f)}ee=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(f,T){this.type=f,this.g=this.target=T,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var f=!1,T=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const k=()=>{};g.addEventListener("test",k,T),g.removeEventListener("test",k,T)}catch{}return f})();function $(f,T){if(K.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var k=this.type=f.type,j=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=T,T=f.relatedTarget){if(ae){e:{try{oe(T.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(T=null)}}else k=="mouseover"?T=f.fromElement:k=="mouseout"&&(T=f.toElement);this.relatedTarget=T,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ce[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&$.aa.h.call(this)}}D($,K);var ce={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Re=0;function je(f,T,k,j,pe){this.listener=f,this.proxy=null,this.src=T,this.type=k,this.capture=!!j,this.ha=pe,this.key=++Re,this.da=this.fa=!1}function Ie(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Me(f){this.src=f,this.g={},this.h=0}Me.prototype.add=function(f,T,k,j,pe){var _e=f.toString();f=this.g[_e],f||(f=this.g[_e]=[],this.h++);var De=Je(f,T,j,pe);return-1<De?(T=f[De],k||(T.fa=!1)):(T=new je(T,this.src,_e,!!j,pe),T.fa=k,f.push(T)),T};function Xe(f,T){var k=T.type;if(k in f.g){var j=f.g[k],pe=Array.prototype.indexOf.call(j,T,void 0),_e;(_e=0<=pe)&&Array.prototype.splice.call(j,pe,1),_e&&(Ie(T),f.g[k].length==0&&(delete f.g[k],f.h--))}}function Je(f,T,k,j){for(var pe=0;pe<f.length;++pe){var _e=f[pe];if(!_e.da&&_e.listener==T&&_e.capture==!!k&&_e.ha==j)return pe}return-1}var it="closure_lm_"+(1e6*Math.random()|0),et={};function En(f,T,k,j,pe){if(Array.isArray(T)){for(var _e=0;_e<T.length;_e++)En(f,T[_e],k,j,pe);return null}return k=$t(k),f&&f[we]?f.K(T,k,_(j)?!!j.capture:!1,pe):Ni(f,T,k,!1,j,pe)}function Ni(f,T,k,j,pe,_e){if(!T)throw Error("Invalid event type");var De=_(pe)?!!pe.capture:!!pe,Pt=an(f);if(Pt||(f[it]=Pt=new Me(f)),k=Pt.add(T,k,j,De,_e),k.proxy)return k;if(j=zi(),k.proxy=j,j.src=f,j.listener=k,f.addEventListener)se||(pe=De),pe===void 0&&(pe=!1),f.addEventListener(T.toString(),j,pe);else if(f.attachEvent)f.attachEvent(ze(T.toString()),j);else if(f.addListener&&f.removeListener)f.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return k}function zi(){function f(k){return T.call(f.src,f.listener,k)}const T=$e;return f}function di(f,T,k,j,pe){if(Array.isArray(T))for(var _e=0;_e<T.length;_e++)di(f,T[_e],k,j,pe);else j=_(j)?!!j.capture:!!j,k=$t(k),f&&f[we]?(f=f.i,T=String(T).toString(),T in f.g&&(_e=f.g[T],k=Je(_e,k,j,pe),-1<k&&(Ie(_e[k]),Array.prototype.splice.call(_e,k,1),_e.length==0&&(delete f.g[T],f.h--)))):f&&(f=an(f))&&(T=f.g[T.toString()],f=-1,T&&(f=Je(T,k,j,pe)),(k=-1<f?T[f]:null)&&fe(k))}function fe(f){if(typeof f!="number"&&f&&!f.da){var T=f.src;if(T&&T[we])Xe(T.i,f);else{var k=f.type,j=f.proxy;T.removeEventListener?T.removeEventListener(k,j,f.capture):T.detachEvent?T.detachEvent(ze(k),j):T.addListener&&T.removeListener&&T.removeListener(j),(k=an(T))?(Xe(k,f),k.h==0&&(k.src=null,T[it]=null)):Ie(f)}}}function ze(f){return f in et?et[f]:et[f]="on"+f}function $e(f,T){if(f.da)f=!0;else{T=new $(T,this);var k=f.listener,j=f.ha||f.src;f.fa&&fe(f),f=k.call(j,T)}return f}function an(f){return f=f[it],f instanceof Me?f:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function $t(f){return typeof f=="function"?f:(f[kt]||(f[kt]=function(T){return f.handleEvent(T)}),f[kt])}function ot(){F.call(this),this.i=new Me(this),this.M=this,this.F=null}D(ot,F),ot.prototype[we]=!0,ot.prototype.removeEventListener=function(f,T,k,j){di(this,f,T,k,j)};function mt(f,T){var k,j=f.F;if(j)for(k=[];j;j=j.F)k.push(j);if(f=f.M,j=T.type||T,typeof T=="string")T=new K(T,f);else if(T instanceof K)T.target=T.target||f;else{var pe=T;T=new K(j,f),q(T,pe)}if(pe=!0,k)for(var _e=k.length-1;0<=_e;_e--){var De=T.g=k[_e];pe=Ln(De,j,!0,T)&&pe}if(De=T.g=f,pe=Ln(De,j,!0,T)&&pe,pe=Ln(De,j,!1,T)&&pe,k)for(_e=0;_e<k.length;_e++)De=T.g=k[_e],pe=Ln(De,j,!1,T)&&pe}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var f=this.i,T;for(T in f.g){for(var k=f.g[T],j=0;j<k.length;j++)Ie(k[j]);delete f.g[T],f.h--}}this.F=null},ot.prototype.K=function(f,T,k,j){return this.i.add(String(f),T,!1,k,j)},ot.prototype.L=function(f,T,k,j){return this.i.add(String(f),T,!0,k,j)};function Ln(f,T,k,j){if(T=f.i.g[String(T)],!T)return!0;T=T.concat();for(var pe=!0,_e=0;_e<T.length;++_e){var De=T[_e];if(De&&!De.da&&De.capture==k){var Pt=De.listener,fn=De.ha||De.src;De.fa&&Xe(f.i,De),pe=Pt.call(fn,j)!==!1&&pe}}return pe&&!j.defaultPrevented}function bs(f,T,k){if(typeof f=="function")k&&(f=I(f,k));else if(f&&typeof f.handleEvent=="function")f=I(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:g.setTimeout(f,T||0)}function rs(f){f.g=bs(()=>{f.g=null,f.i&&(f.i=!1,rs(f))},f.l);const T=f.h;f.h=null,f.m.apply(null,T)}class xi extends F{constructor(T,k){super(),this.m=T,this.l=k,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:rs(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(f){F.call(this),this.h=f,this.g={}}D(Ci,F);var fi=[];function cn(f){re(f.g,function(T,k){this.g.hasOwnProperty(k)&&fe(T)},f),f.g={}}Ci.prototype.N=function(){Ci.aa.N.call(this),cn(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=g.JSON.stringify,Rn=g.JSON.parse,Vi=class{stringify(f){return g.JSON.stringify(f,void 0)}parse(f){return g.JSON.parse(f,void 0)}};function ur(){}ur.prototype.h=null;function Vs(f){return f.h||(f.h=f.i())}function os(){}var pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ji(){K.call(this,"d")}D(ji,K);function Zn(){K.call(this,"c")}D(Zn,K);var ti={},Ai=null;function js(){return Ai=Ai||new ot}ti.La="serverreachability";function ws(f){K.call(this,ti.La,f)}D(ws,K);function Ui(f){const T=js();mt(T,new ws(T))}ti.STAT_EVENT="statevent";function Bi(f,T){K.call(this,ti.STAT_EVENT,f),this.stat=T}D(Bi,K);function tn(f){const T=js();mt(T,new Bi(T,f))}ti.Ma="timingevent";function tt(f,T){K.call(this,ti.Ma,f),this.size=T}D(tt,K);function cr(f,T){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){f()},T)}function hr(){this.g=!0}hr.prototype.xa=function(){this.g=!1};function gi(f,T,k,j,pe,_e){f.info(function(){if(f.g)if(_e)for(var De="",Pt=_e.split("&"),fn=0;fn<Pt.length;fn++){var dt=Pt[fn].split("=");if(1<dt.length){var Bt=dt[0];dt=dt[1];var sn=Bt.split("_");De=2<=sn.length&&sn[1]=="type"?De+(Bt+"="+dt+"&"):De+(Bt+"=redacted&")}}else De=null;else De=_e;return"XMLHTTP REQ ("+j+") [attempt "+pe+"]: "+T+`
`+k+`
`+De})}function Fe(f,T,k,j,pe,_e,De){f.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+pe+"]: "+T+`
`+k+`
`+_e+" "+De})}function Es(f,T,k,j){f.info(function(){return"XMLHTTP TEXT ("+T+"): "+as(f,k)+(j?" "+j:"")})}function Na(f,T){f.info(function(){return"TIMEOUT: "+T})}hr.prototype.info=function(){};function as(f,T){if(!f.g)return T;if(!T)return null;try{var k=JSON.parse(T);if(k){for(f=0;f<k.length;f++)if(Array.isArray(k[f])){var j=k[f];if(!(2>j.length)){var pe=j[1];if(Array.isArray(pe)&&!(1>pe.length)){var _e=pe[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(var De=1;De<pe.length;De++)pe[De]=""}}}}return In(k)}catch{return T}}var nn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ls;function ki(){}D(ki,ur),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},ls=new ki;function us(f,T,k,j){this.j=f,this.i=T,this.l=k,this.R=j||1,this.U=new Ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zl}function zl(){this.i=null,this.g="",this.h=!1}var za={},Us={};function Gr(f,T,k){f.L=1,f.v=Li(Lt(T)),f.m=k,f.P=!0,Ts(f,null)}function Ts(f,T){f.F=Date.now(),cs(f),f.A=Lt(f.v);var k=f.A,j=f.R;Array.isArray(j)||(j=[String(j)]),qs(k.i,"t",j),f.C=0,k=f.j.J,f.h=new zl,f.g=Bl(f.j,k?T:null,!f.m),0<f.O&&(f.M=new xi(I(f.Y,f,f.g),f.O)),T=f.U,k=f.g,j=f.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(fi[0]=pe.toString()),pe=fi);for(var _e=0;_e<pe.length;_e++){var De=En(k,pe[_e],j||T.handleEvent,!1,T.h||T);if(!De)break;T.g[De.key]=De}T=f.H?z(f.H):{},f.m?(f.u||(f.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,T)):(f.u="GET",f.g.ea(f.A,f.u,null,T)),Ui(),gi(f.i,f.u,f.A,f.l,f.R,f.m)}us.prototype.ca=function(f){f=f.target;const T=this.M;T&&Sn(f)==3?T.j():this.Y(f)},us.prototype.Y=function(f){try{if(f==this.g)e:{const sn=Sn(this.g);var T=this.g.Ba();const Tr=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||_r(this.g)))){this.J||sn!=4||T==7||(T==8||0>=Tr?Ui(3):Ui(2)),ko(this);var k=this.g.Z();this.X=k;t:if(Bs(this)){var j=_r(this.g);f="";var pe=j.length,_e=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),dr(this);var De="";break t}this.h.i=new g.TextDecoder}for(T=0;T<pe;T++)this.h.h=!0,f+=this.h.i.decode(j[T],{stream:!(_e&&T==pe-1)});j.length=0,this.h.g+=f,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=k==200,Fe(this.i,this.u,this.A,this.l,this.R,sn,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Pt,fn=this.g;if((Pt=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Pt)){var dt=Pt;break t}}dt=null}if(k=dt)Es(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,k);else{this.o=!1,this.s=3,tn(12),ni(this),dr(this);break e}}if(this.P){k=!0;let ln;for(;!this.J&&this.C<De.length;)if(ln=Ss(this,De),ln==Us){sn==4&&(this.s=4,tn(14),k=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==za){this.s=4,tn(15),Es(this.i,this.l,De,"[Invalid Chunk]"),k=!1;break}else Es(this.i,this.l,ln,null),Fi(this,ln);if(Bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||De.length!=0||this.h.h||(this.s=1,tn(16),k=!1),this.o=this.o&&k,!k)Es(this.i,this.l,De,"[Invalid Chunked Response]"),ni(this),dr(this);else if(0<De.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),No(Bt),Bt.M=!0,tn(11))}}else Es(this.i,this.l,De,null),Fi(this,De);sn==4&&ni(this),this.o&&!this.J&&(sn==4?Fa(this.j,this):(this.o=!1,cs(this)))}else Vl(this.g),k==400&&0<De.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),ni(this),dr(this)}}}catch{}finally{}};function Bs(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Ss(f,T){var k=f.C,j=T.indexOf(`
`,k);return j==-1?Us:(k=Number(T.substring(k,j)),isNaN(k)?za:(j+=1,j+k>T.length?Us:(T=T.slice(j,j+k),f.C=j+k,T)))}us.prototype.cancel=function(){this.J=!0,ni(this)};function cs(f){f.S=Date.now()+f.I,hn(f,f.I)}function hn(f,T){if(f.B!=null)throw Error("WatchDog timer not null");f.B=cr(I(f.ba,f),T)}function ko(f){f.B&&(g.clearTimeout(f.B),f.B=null)}us.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Na(this.i,this.A),this.L!=2&&(Ui(),tn(17)),ni(this),this.s=2,dr(this)):hn(this,this.S-f)};function dr(f){f.j.G==0||f.J||Fa(f.j,f)}function ni(f){ko(f);var T=f.M;T&&typeof T.ma=="function"&&T.ma(),f.M=null,cn(f.U),f.g&&(T=f.g,f.g=null,T.abort(),T.ma())}function Fi(f,T){try{var k=f.j;if(k.G!=0&&(k.g==f||ht(k.h,f))){if(!f.K&&ht(k.h,f)&&k.G==3){try{var j=k.Da.g.parse(T)}catch{j=null}if(Array.isArray(j)&&j.length==3){var pe=j;if(pe[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<f.F)Er(k),br(k);else break e;Do(k),tn(18)}}else k.za=pe[1],0<k.za-k.T&&37500>pe[2]&&k.F&&k.v==0&&!k.C&&(k.C=cr(I(k.Za,k),6e3));if(1>=fr(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else Ks(k,11)}else if((f.K||k.g==f)&&Er(k),!X(T))for(pe=k.Da.g.parse(T),T=0;T<pe.length;T++){let dt=pe[T];if(k.T=dt[0],dt=dt[1],k.G==2)if(dt[0]=="c"){k.K=dt[1],k.ia=dt[2];const Bt=dt[3];Bt!=null&&(k.la=Bt,k.j.info("VER="+k.la));const sn=dt[4];sn!=null&&(k.Aa=sn,k.j.info("SVER="+k.Aa));const Tr=dt[5];Tr!=null&&typeof Tr=="number"&&0<Tr&&(j=1.5*Tr,k.L=j,k.j.info("backChannelRequestTimeoutMs_="+j)),j=k;const ln=f.g;if(ln){const Jr=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var _e=j.h;_e.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(Mt(_e,_e.h),_e.h=null))}if(j.D){const vi=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;vi&&(j.ya=vi,Ye(j.I,j.D,vi))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-f.F,k.j.info("Handshake RTT: "+k.R+"ms")),j=k;var De=f;if(j.qa=Vo(j,j.J?j.ia:null,j.W),De.K){ii(j.h,De);var Pt=De,fn=j.L;fn&&(Pt.I=fn),Pt.B&&(ko(Pt),cs(Pt)),j.g=De}else ds(j);0<k.i.length&&wr(k)}else dt[0]!="stop"&&dt[0]!="close"||Ks(k,7);else k.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?Ks(k,7):Oo(k):dt[0]!="noop"&&k.l&&k.l.ta(dt),k.v=0)}}Ui(4)}catch{}}var Zr=class{constructor(f,T){this.g=f,this.map=T}};function Lo(f){this.l=f||10,g.PerformanceNavigationTiming?(f=g.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Io(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function fr(f){return f.h?1:f.g?f.g.size:0}function ht(f,T){return f.h?f.h==T:f.g?f.g.has(T):!1}function Mt(f,T){f.g?f.g.add(T):f.h=T}function ii(f,T){f.h&&f.h==T?f.h=null:f.g&&f.g.has(T)&&f.g.delete(T)}Lo.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function vn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let T=f.i;for(const k of f.g.values())T=T.concat(k.D);return T}return H(f.i)}function Fs(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(v(f)){for(var T=[],k=f.length,j=0;j<k;j++)T.push(f[j]);return T}T=[],k=0;for(j in f)T[k++]=f[j];return T}function Va(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(v(f)||typeof f=="string"){var T=[];f=f.length;for(var k=0;k<f;k++)T.push(k);return T}T=[],k=0;for(const j in f)T[k++]=j;return T}}}function st(f,T){if(f.forEach&&typeof f.forEach=="function")f.forEach(T,void 0);else if(v(f)||typeof f=="string")Array.prototype.forEach.call(f,T,void 0);else for(var k=Va(f),j=Fs(f),pe=j.length,_e=0;_e<pe;_e++)T.call(void 0,j[_e],k&&k[_e],f)}var Yt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pr(f,T){if(f){f=f.split("&");for(var k=0;k<f.length;k++){var j=f[k].indexOf("="),pe=null;if(0<=j){var _e=f[k].substring(0,j);pe=f[k].substring(j+1)}else _e=f[k];T(_e,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function Hi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Hi){this.h=f.h,gr(this,f.j),this.o=f.o,this.g=f.g,xs(this,f.s),this.l=f.l;var T=f.i,k=new Zi;k.i=T.i,T.g&&(k.g=new Map(T.g),k.h=T.h),qi(this,k),this.m=f.m}else f&&(T=String(f).match(Yt))?(this.h=!1,gr(this,T[1]||"",!0),this.o=Gi(T[2]||""),this.g=Gi(T[3]||"",!0),xs(this,T[4]),this.l=Gi(T[5]||"",!0),qi(this,T[6]||"",!0),this.m=Gi(T[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}Hi.prototype.toString=function(){var f=[],T=this.j;T&&f.push(Wn(T,Hs,!0),":");var k=this.g;return(k||T=="file")&&(f.push("//"),(T=this.o)&&f.push(Wn(T,Hs,!0),"@"),f.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&f.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&f.push("/"),f.push(Wn(k,k.charAt(0)=="/"?Wr:Ro,!0))),(k=this.i.toString())&&f.push("?",k),(k=this.m)&&f.push("#",Wn(k,Ua)),f.join("")};function Lt(f){return new Hi(f)}function gr(f,T,k){f.j=k?Gi(T,!0):T,f.j&&(f.j=f.j.replace(/:$/,""))}function xs(f,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);f.s=T}else f.s=null}function qi(f,T,k){T instanceof Zi?(f.i=T,Ii(f.i,f.h)):(k||(T=Wn(T,Mo)),f.i=new Zi(T,f.h))}function Ye(f,T,k){f.i.set(T,k)}function Li(f){return Ye(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Gi(f,T){return f?T?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Wn(f,T,k){return typeof f=="string"?(f=encodeURI(f).replace(T,ja),k&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ja(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Hs=/[#\/\?@]/g,Ro=/[#\?:]/g,Wr=/[#\?]/g,Mo=/[#\?@]/g,Ua=/#/g;function Zi(f,T){this.h=this.g=null,this.i=f||null,this.j=!!T}function dn(f){f.g||(f.g=new Map,f.h=0,f.i&&pr(f.i,function(T,k){f.add(decodeURIComponent(T.replace(/\+/g," ")),k)}))}n=Zi.prototype,n.add=function(f,T){dn(this),this.i=null,f=Ze(this,f);var k=this.g.get(f);return k||this.g.set(f,k=[]),k.push(T),this.h+=1,this};function Kr(f,T){dn(f),T=Ze(f,T),f.g.has(T)&&(f.i=null,f.h-=f.g.get(T).length,f.g.delete(T))}function mr(f,T){return dn(f),T=Ze(f,T),f.g.has(T)}n.forEach=function(f,T){dn(this),this.g.forEach(function(k,j){k.forEach(function(pe){f.call(T,pe,j,this)},this)},this)},n.na=function(){dn(this);const f=Array.from(this.g.values()),T=Array.from(this.g.keys()),k=[];for(let j=0;j<T.length;j++){const pe=f[j];for(let _e=0;_e<pe.length;_e++)k.push(T[j])}return k},n.V=function(f){dn(this);let T=[];if(typeof f=="string")mr(this,f)&&(T=T.concat(this.g.get(Ze(this,f))));else{f=Array.from(this.g.values());for(let k=0;k<f.length;k++)T=T.concat(f[k])}return T},n.set=function(f,T){return dn(this),this.i=null,f=Ze(this,f),mr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[T]),this.h+=1,this},n.get=function(f,T){return f?(f=this.V(f),0<f.length?String(f[0]):T):T};function qs(f,T,k){Kr(f,T),0<k.length&&(f.i=null,f.g.set(Ze(f,T),H(k)),f.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],T=Array.from(this.g.keys());for(var k=0;k<T.length;k++){var j=T[k];const _e=encodeURIComponent(String(j)),De=this.V(j);for(j=0;j<De.length;j++){var pe=_e;De[j]!==""&&(pe+="="+encodeURIComponent(String(De[j]))),f.push(pe)}}return this.i=f.join("&")};function Ze(f,T){return T=String(T),f.j&&(T=T.toLowerCase()),T}function Ii(f,T){T&&!f.j&&(dn(f),f.i=null,f.g.forEach(function(k,j){var pe=j.toLowerCase();j!=pe&&(Kr(this,j),qs(this,pe,k))},f)),f.j=T}function Ot(f,T){const k=new hr;if(g.Image){const j=new Image;j.onload=O(Kn,k,"TestLoadImage: loaded",!0,T,j),j.onerror=O(Kn,k,"TestLoadImage: error",!1,T,j),j.onabort=O(Kn,k,"TestLoadImage: abort",!1,T,j),j.ontimeout=O(Kn,k,"TestLoadImage: timeout",!1,T,j),g.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=f}else T(!1)}function Ba(f,T){const k=new hr,j=new AbortController,pe=setTimeout(()=>{j.abort(),Kn(k,"TestPingServer: timeout",!1,T)},1e4);fetch(f,{signal:j.signal}).then(_e=>{clearTimeout(pe),_e.ok?Kn(k,"TestPingServer: ok",!0,T):Kn(k,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(pe),Kn(k,"TestPingServer: error",!1,T)})}function Kn(f,T,k,j,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),j(k)}catch{}}function Ri(){this.g=new Vi}function $r(f,T,k){const j=k||"";try{st(f,function(pe,_e){let De=pe;_(pe)&&(De=In(pe)),T.push(j+_e+"="+encodeURIComponent(De))})}catch(pe){throw T.push(j+"type="+encodeURIComponent("_badmap")),pe}}function $n(f){this.l=f.Ub||null,this.j=f.eb||!1}D($n,ur),$n.prototype.g=function(){return new si(this.l,this.j)},$n.prototype.i=(function(f){return function(){return f}})({});function si(f,T){ot.call(this),this.D=f,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(si,ot),n=si.prototype,n.open=function(f,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=T,this.readyState=1,mi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(T.body=f),(this.D||g).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gt(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cs(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cs(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var T=f.value?f.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!f.done}))&&(this.response=this.responseText+=T)}f.done?Gt(this):mi(this),this.readyState==3&&Cs(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Gt(this))},n.Qa=function(f){this.g&&(this.response=f,Gt(this))},n.ga=function(){this.g&&Gt(this)};function Gt(f){f.readyState=4,f.l=null,f.j=null,f.v=null,mi(f)}n.setRequestHeader=function(f,T){this.u.append(f,T)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],T=this.h.entries();for(var k=T.next();!k.done;)k=k.value,f.push(k[0]+": "+k[1]),k=T.next();return f.join(`\r
`)};function mi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function vr(f){let T="";return re(f,function(k,j){T+=j,T+=":",T+=k,T+=`\r
`}),T}function Gs(f,T,k){e:{for(j in k){var j=!1;break e}j=!0}j||(k=vr(k),typeof f=="string"?k!=null&&encodeURIComponent(String(k)):Ye(f,T,k))}function Qt(f){ot.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Qt,ot);var Bn=/^https?$/i,hs=["POST","PUT"];n=Qt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,T,k,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);T=T?T.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ls.g(),this.v=this.o?Vs(this.o):Vs(ls),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(T,String(f),!0),this.B=!1}catch(_e){Yr(this,_e);return}if(f=k||"",k=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var pe in j)k.set(pe,j[pe]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const _e of j.keys())k.set(_e,j.get(_e));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(k.keys()).find(_e=>_e.toLowerCase()=="content-type"),pe=g.FormData&&f instanceof g.FormData,!(0<=Array.prototype.indexOf.call(hs,T,void 0))||j||pe||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,De]of k)this.g.setRequestHeader(_e,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yn(this),this.u=!0,this.g.send(f),this.u=!1}catch(_e){Yr(this,_e)}};function Yr(f,T){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=T,f.m=5,Zs(f),yr(f)}function Zs(f){f.A||(f.A=!0,mt(f,"complete"),mt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,mt(this,"complete"),mt(this,"abort"),yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yr(this,!0)),Qt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vt(this):this.bb())},n.bb=function(){vt(this)};function vt(f){if(f.h&&typeof d<"u"&&(!f.v[1]||Sn(f)!=4||f.Z()!=2)){if(f.u&&Sn(f)==4)bs(f.Ea,0,f);else if(mt(f,"readystatechange"),Sn(f)==4){f.h=!1;try{const De=f.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var k;if(!(k=T)){var j;if(j=De===0){var pe=String(f.D).match(Yt)[1]||null;!pe&&g.self&&g.self.location&&(pe=g.self.location.protocol.slice(0,-1)),j=!Bn.test(pe?pe.toLowerCase():"")}k=j}if(k)mt(f,"complete"),mt(f,"success");else{f.m=6;try{var _e=2<Sn(f)?f.g.statusText:""}catch{_e=""}f.l=_e+" ["+f.Z()+"]",Zs(f)}}finally{yr(f)}}}}function yr(f,T){if(f.g){Yn(f);const k=f.g,j=f.v[0]?()=>{}:null;f.g=null,f.v=null,T||mt(f,"ready");try{k.onreadystatechange=j}catch{}}}function Yn(f){f.I&&(g.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Sn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var T=this.g.responseText;return f&&T.indexOf(f)==0&&(T=T.substring(f.length)),Rn(T)}};function _r(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Vl(f){const T={};f=(f.g&&2<=Sn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<f.length;j++){if(X(f[j]))continue;var k=G(f[j]);const pe=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const _e=T[pe]||[];T[pe]=_e,_e.push(k)}V(T,function(j){return j.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(f,T,k){return k&&k.internalChannelParams&&k.internalChannelParams[f]||T}function jl(f){this.Aa=0,this.i=[],this.j=new hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ws("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ws("baseRetryDelayMs",5e3,f),this.cb=Ws("retryDelaySeedMs",1e4,f),this.Wa=Ws("forwardChannelMaxRetries",2,f),this.wa=Ws("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Lo(f&&f.concurrentRequestLimit),this.Da=new Ri,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=jl.prototype,n.la=8,n.G=1,n.connect=function(f,T,k,j){tn(0),this.W=f,this.H=T||{},k&&j!==void 0&&(this.H.OSID=k,this.H.OAID=j),this.F=this.X,this.I=Vo(this,null,this.W),wr(this)};function Oo(f){if(Ul(f),f.G==3){var T=f.U++,k=Lt(f.I);if(Ye(k,"SID",f.K),Ye(k,"RID",T),Ye(k,"TYPE","terminate"),Qr(f,k),T=new us(f,f.j,T),T.L=2,T.v=Li(Lt(k)),k=!1,g.navigator&&g.navigator.sendBeacon)try{k=g.navigator.sendBeacon(T.v.toString(),"")}catch{}!k&&g.Image&&(new Image().src=T.v,k=!0),k||(T.g=Bl(T.j,null),T.g.ea(T.v)),T.F=Date.now(),cs(T)}qa(f)}function br(f){f.g&&(No(f),f.g.cancel(),f.g=null)}function Ul(f){br(f),f.u&&(g.clearTimeout(f.u),f.u=null),Er(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&g.clearTimeout(f.s),f.s=null)}function wr(f){if(!Io(f.h)&&!f.s){f.s=!0;var T=f.Ga;J||Q(),ee||(J(),ee=!0),de.add(T,f),f.B=0}}function Xu(f,T){return fr(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=T.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=cr(I(f.Ga,f,T),Ha(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const pe=new us(this,this.j,f);let _e=this.o;if(this.S&&(_e?(_e=z(_e),q(_e,this.S)):_e=this.S),this.m!==null||this.O||(pe.H=_e,_e=null),this.P)e:{for(var T=0,k=0;k<this.i.length;k++){t:{var j=this.i[k];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(T+=j,4096<T){T=k;break e}if(T===4096||k===this.i.length-1){T=k+1;break e}}T=1e3}else T=1e3;T=Po(this,pe,T),k=Lt(this.I),Ye(k,"RID",f),Ye(k,"CVER",22),this.D&&Ye(k,"X-HTTP-Session-Id",this.D),Qr(this,k),_e&&(this.O?T="headers="+encodeURIComponent(String(vr(_e)))+"&"+T:this.m&&Gs(k,this.m,_e)),Mt(this.h,pe),this.Ua&&Ye(k,"TYPE","init"),this.P?(Ye(k,"$req",T),Ye(k,"SID","null"),pe.T=!0,Gr(pe,k,null)):Gr(pe,k,T),this.G=2}}else this.G==3&&(f?Mi(this,f):this.i.length==0||Io(this.h)||Mi(this))};function Mi(f,T){var k;T?k=T.l:k=f.U++;const j=Lt(f.I);Ye(j,"SID",f.K),Ye(j,"RID",k),Ye(j,"AID",f.T),Qr(f,j),f.m&&f.o&&Gs(j,f.m,f.o),k=new us(f,f.j,k,f.B+1),f.m===null&&(k.H=f.o),T&&(f.i=T.D.concat(f.i)),T=Po(f,k,1e3),k.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Mt(f.h,k),Gr(k,j,T)}function Qr(f,T){f.H&&re(f.H,function(k,j){Ye(T,j,k)}),f.l&&st({},function(k,j){Ye(T,j,k)})}function Po(f,T,k){k=Math.min(f.i.length,k);var j=f.l?I(f.l.Na,f.l,f):null;e:{var pe=f.i;let _e=-1;for(;;){const De=["count="+k];_e==-1?0<k?(_e=pe[0].g,De.push("ofs="+_e)):_e=0:De.push("ofs="+_e);let Pt=!0;for(let fn=0;fn<k;fn++){let dt=pe[fn].g;const Bt=pe[fn].map;if(dt-=_e,0>dt)_e=Math.max(0,pe[fn].g-100),Pt=!1;else try{$r(Bt,De,"req"+dt+"_")}catch{j&&j(Bt)}}if(Pt){j=De.join("&");break e}}}return f=f.i.splice(0,k),T.D=f,j}function ds(f){if(!f.g&&!f.u){f.Y=1;var T=f.Fa;J||Q(),ee||(J(),ee=!0),de.add(T,f),f.v=0}}function Do(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=cr(I(f.Fa,f),Ha(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,zo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=cr(I(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),br(this),zo(this))};function No(f){f.A!=null&&(g.clearTimeout(f.A),f.A=null)}function zo(f){f.g=new us(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var T=Lt(f.qa);Ye(T,"RID","rpc"),Ye(T,"SID",f.K),Ye(T,"AID",f.T),Ye(T,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ye(T,"TO",f.ja),Ye(T,"TYPE","xmlhttp"),Qr(f,T),f.m&&f.o&&Gs(T,f.m,f.o),f.L&&(f.g.I=f.L);var k=f.g;f=f.ia,k.L=1,k.v=Li(Lt(T)),k.m=null,k.P=!0,Ts(k,f)}n.Za=function(){this.C!=null&&(this.C=null,br(this),Do(this),tn(19))};function Er(f){f.C!=null&&(g.clearTimeout(f.C),f.C=null)}function Fa(f,T){var k=null;if(f.g==T){Er(f),No(f),f.g=null;var j=2}else if(ht(f.h,T))k=T.D,ii(f.h,T),j=1;else return;if(f.G!=0){if(T.o)if(j==1){k=T.m?T.m.length:0,T=Date.now()-T.F;var pe=f.B;j=js(),mt(j,new tt(j,k)),wr(f)}else ds(f);else if(pe=T.s,pe==3||pe==0&&0<T.X||!(j==1&&Xu(f,T)||j==2&&Do(f)))switch(k&&0<k.length&&(T=f.h,T.i=T.i.concat(k)),pe){case 1:Ks(f,5);break;case 4:Ks(f,10);break;case 3:Ks(f,6);break;default:Ks(f,2)}}}function Ha(f,T){let k=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(k*=2),k*T}function Ks(f,T){if(f.j.info("Error code "+T),T==2){var k=I(f.fb,f),j=f.Xa;const pe=!j;j=new Hi(j||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||gr(j,"https"),Li(j),pe?Ot(j.toString(),k):Ba(j.toString(),k)}else tn(2);f.G=0,f.l&&f.l.sa(T),qa(f),Ul(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function qa(f){if(f.G=0,f.ka=[],f.l){const T=vn(f.h);(T.length!=0||f.i.length!=0)&&(B(f.ka,T),B(f.ka,f.i),f.h.i.length=0,H(f.i),f.i.length=0),f.l.ra()}}function Vo(f,T,k){var j=k instanceof Hi?Lt(k):new Hi(k);if(j.g!="")T&&(j.g=T+"."+j.g),xs(j,j.s);else{var pe=g.location;j=pe.protocol,T=T?T+"."+pe.hostname:pe.hostname,pe=+pe.port;var _e=new Hi(null);j&&gr(_e,j),T&&(_e.g=T),pe&&xs(_e,pe),k&&(_e.l=k),j=_e}return k=f.D,T=f.ya,k&&T&&Ye(j,k,T),Ye(j,"VER",f.la),Qr(f,j),j}function Bl(f,T,k){if(T&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=f.Ca&&!f.pa?new Qt(new $n({eb:k})):new Qt(f.pa),T.Ha(f.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ga(){}n=Ga.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xr(){}Xr.prototype.g=function(f,T){return new Mn(f,T)};function Mn(f,T){ot.call(this),this.g=new jl(T),this.l=f,this.h=T&&T.messageUrlParams||null,f=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(f?f["X-WebChannel-Content-Type"]=T.messageContentType:f={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(f?f["X-WebChannel-Client-Profile"]=T.va:f={"X-WebChannel-Client-Profile":T.va}),this.g.S=f,(f=T&&T.Sb)&&!X(f)&&(this.g.m=f),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!X(T)&&(this.g.D=T,f=this.h,f!==null&&T in f&&(f=this.h,T in f&&delete f[T])),this.j=new Wi(this)}D(Mn,ot),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){Oo(this.g)},Mn.prototype.o=function(f){var T=this.g;if(typeof f=="string"){var k={};k.__data__=f,f=k}else this.u&&(k={},k.__data__=In(f),f=k);T.i.push(new Zr(T.Ya++,f)),T.G==3&&wr(T)},Mn.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,Mn.aa.N.call(this)};function As(f){ji.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var T=f.__sm__;if(T){e:{for(const k in T){f=k;break e}f=void 0}(this.i=f)&&(f=this.i,T=T!==null&&f in T?T[f]:void 0),this.data=T}else this.data=f}D(As,ji);function Fl(){Zn.call(this),this.status=1}D(Fl,Zn);function Wi(f){this.g=f}D(Wi,Ga),Wi.prototype.ua=function(){mt(this.g,"a")},Wi.prototype.ta=function(f){mt(this.g,new As(f))},Wi.prototype.sa=function(f){mt(this.g,new Fl)},Wi.prototype.ra=function(){mt(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,WS=function(){return new Xr},ZS=function(){return js()},GS=ti,Vm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nn.NO_ERROR=0,nn.TIMEOUT=8,nn.HTTP_ERROR=6,Xd=nn,Tn.COMPLETE="complete",qS=Tn,os.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Fc=os,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,HS=Qt}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});const aw="@firebase/firestore",lw="4.8.0";class Ei{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ei.UNAUTHENTICATED=new Ei(null),Ei.GOOGLE_CREDENTIALS=new Ei("google-credentials-uid"),Ei.FIRST_PARTY=new Ei("first-party-uid"),Ei.MOCK_USER=new Ei("mock-user");let Gu="11.10.0";const kl=new yv("@firebase/firestore");function bu(){return kl.logLevel}function Ue(n,...e){if(kl.logLevel<=Ct.DEBUG){const t=e.map(Rv);kl.debug(`Firestore (${Gu}): ${n}`,...t)}}function So(n,...e){if(kl.logLevel<=Ct.ERROR){const t=e.map(Rv);kl.error(`Firestore (${Gu}): ${n}`,...t)}}function Aa(n,...e){if(kl.logLevel<=Ct.WARN){const t=e.map(Rv);kl.warn(`Firestore (${Gu}): ${n}`,...t)}}function Rv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function nt(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,KS(n,s,t)}function KS(n,e,t){let s=`FIRESTORE (${Gu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw So(s),new Error(s)}function Ft(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||KS(e,a,s)}function ut(n,e){return n}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Ao{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ei.UNAUTHENTICATED)))}shutdown(){}}class zM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class VM{constructor(e){this.t=e,this.currentUser=Ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ft(this.o===void 0,42304);let s=this.i;const a=v=>this.i!==s?(s=this.i,t(v)):Promise.resolve();let u=new Sa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Sa,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const v=u;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},g=v=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Sa)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ft(typeof s.accessToken=="string",31837,{l:s}),new $S(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ft(e===null||typeof e=="string",2055,{h:e}),new Ei(e)}}class jM{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ei.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UM{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new jM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ei.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class uw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ft(this.o===void 0,3512);const s=u=>{u.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const a=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>a(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new uw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function FM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}function YS(){return new TextEncoder}class Mv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=FM(40);for(let u=0;u<a.length;++u)s.length<20&&a[u]<t&&(s+=e.charAt(a[u]%62))}return s}}function yt(n,e){return n<e?-1:n>e?1:0}function jm(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return yt(s,a);{const u=YS(),d=HM(u.encode(cw(n,t)),u.encode(cw(e,t)));return d!==0?d:yt(s,a)}}t+=s>65535?2:1}return yt(n.length,e.length)}function cw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function HM(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return yt(n[t],e[t]);return yt(n.length,e.length)}function Nu(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}const hw="__name__";class Pr{constructor(e,t,s){t===void 0?t=0:t>e.length&&nt(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&nt(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const u=Pr.compareSegments(e.get(a),t.get(a));if(u!==0)return u}return yt(e.length,t.length)}static compareSegments(e,t){const s=Pr.isNumericId(e),a=Pr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Pr.extractNumericId(e).compare(Pr.extractNumericId(t)):jm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ta.fromString(e.substring(4,e.length-2))}}class en extends Pr{construct(e,t,s){return new en(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new en(t)}static emptyPath(){return new en([])}}const qM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ui extends Pr{construct(e,t,s){return new ui(e,t,s)}static isValidIdentifier(e){return qM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ui.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hw}static keyField(){return new ui([hw])}static fromServerFormat(e){const t=[];let s="",a=0;const u=()=>{if(s.length===0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new Ve(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ve(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=v,a+=2}else g==="`"?(d=!d,a++):g!=="."||d?(s+=g,a++):(u(),a++)}if(u(),d)throw new Ve(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ui(t)}static emptyPath(){return new ui([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(en.fromString(e))}static fromName(e){return new Ke(en.fromString(e).popFirst(5))}static empty(){return new Ke(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&en.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new en(e.slice()))}}function QS(n,e,t){if(!t)throw new Ve(xe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GM(n,e,t,s){if(e===!0&&s===!0)throw new Ve(xe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dw(n){if(!Ke.isDocumentKey(n))throw new Ve(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fw(n){if(Ke.isDocumentKey(n))throw new Ve(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":nt(12329,{type:typeof n})}function or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zf(n);throw new Ve(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jn(n,e){const t={typeString:n};return e&&(t.value=e),t}function xh(n,e){if(!XS(n))throw new Ve(xe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const d=n[s];if(a&&typeof d!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new Ve(xe.INVALID_ARGUMENT,t);return!0}const pw=-62135596800,gw=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*gw);return new on(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pw)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gw}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:on._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xh(e,on._jsonSchema))return new on(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}on._jsonSchemaVersion="firestore/timestamp/1.0",on._jsonSchema={type:jn("string",on._jsonSchemaVersion),seconds:jn("number"),nanoseconds:jn("number")};class at{static fromTimestamp(e){return new at(e)}static min(){return new at(new on(0,0))}static max(){return new at(new on(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ah=-1;function ZM(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=at.fromTimestamp(s===1e9?new on(t+1,0):new on(t,s));return new ka(a,Ke.empty(),e)}function WM(n){return new ka(n.readTime,n.key,ah)}class ka{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ka(at.min(),Ke.empty(),ah)}static max(){return new ka(at.max(),Ke.empty(),ah)}}function KM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ke.comparator(n.documentKey,e.documentKey),t!==0?t:yt(n.largestBatchId,e.largestBatchId))}const $M="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Zu(n){if(n.code!==xe.FAILED_PRECONDITION||n.message!==$M)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Le(((s,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,a)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Le?t:Le.resolve(t)}catch(t){return Le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Le.reject(t)}static resolve(e){return new Le(((t,s)=>{t(e)}))}static reject(e){return new Le(((t,s)=>{s(e)}))}static waitFor(e){return new Le(((t,s)=>{let a=0,u=0,d=!1;e.forEach((g=>{++a,g.next((()=>{++u,d&&u===a&&t()}),(v=>s(v)))})),d=!0,u===a&&t()}))}static or(e){let t=Le.resolve(!1);for(const s of e)t=t.next((a=>a?Le.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,u)=>{s.push(t.call(this,a,u))})),this.waitFor(s)}static mapArray(e,t){return new Le(((s,a)=>{const u=e.length,d=new Array(u);let g=0;for(let v=0;v<u;v++){const _=v;t(e[_]).next((E=>{d[_]=E,++g,g===u&&s(d)}),(E=>a(E)))}}))}static doWhile(e,t){return new Le(((s,a)=>{const u=()=>{e()===!0?t().next((()=>{u()}),a):s()};u()}))}}function QM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wu(n){return n.name==="IndexedDbTransactionError"}class Wf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Wf.ue=-1;const Ov=-1;function Kf(n){return n==null}function yf(n){return n===0&&1/n==-1/0}function XM(n){return typeof n=="number"&&Number.isInteger(n)&&!yf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const JS="";function JM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mw(e)),e=eO(n.get(t),e);return mw(e)}function eO(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const u=n.charAt(a);switch(u){case"\0":t+="";break;case JS:t+="";break;default:t+=u}}return t}function mw(n){return n+JS+""}function vw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ex(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mn{constructor(e,t){this.comparator=e,this.root=t||li.EMPTY}insert(e,t){return new mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class li{constructor(e,t,s,a,u){this.key=e,this.value=t,this.color=s??li.RED,this.left=a??li.EMPTY,this.right=u??li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,u){return new li(e??this.key,t??this.value,s??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const u=s(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,t,s),null):u===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return li.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw nt(27949);return e+(this.isRed()?0:1)}}li.EMPTY=null,li.RED=!0,li.BLACK=!1;li.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(e,t,s,a,u){return this}insert(e,t,s){return new li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yw(this.data.getIterator())}getIteratorFrom(e){return new yw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=s.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class yw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _s{constructor(e){this.fields=e,e.sort(ui.comparator)}static empty(){return new _s([])}unionWith(e){let t=new qn(ui.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nu(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class tx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new tx("Invalid base64 string: "+u):u}})(e);return new hi(t)}static fromUint8Array(e){const t=(function(a){let u="";for(let d=0;d<a.length;++d)u+=String.fromCharCode(a[d]);return u})(e);return new hi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const tO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(n){if(Ft(!!n,39018),typeof n=="string"){let e=0;const t=tO.exec(n);if(Ft(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:kn(n.seconds),nanos:kn(n.nanos)}}function kn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ia(n){return typeof n=="string"?hi.fromBase64String(n):hi.fromUint8Array(n)}const nx="server_timestamp",ix="__type__",sx="__previous_value__",rx="__local_write_time__";function Pv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ix])===null||t===void 0?void 0:t.stringValue)===nx}function $f(n){const e=n.mapValue.fields[sx];return Pv(e)?$f(e):e}function lh(n){const e=La(n.mapValue.fields[rx].timestampValue);return new on(e.seconds,e.nanos)}class nO{constructor(e,t,s,a,u,d,g,v,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=_,this.isUsingEmulator=E}}const _f="(default)";class uh{constructor(e,t){this.projectId=e,this.database=t||_f}static empty(){return new uh("","")}get isDefaultDatabase(){return this.database===_f}isEqual(e){return e instanceof uh&&e.projectId===this.projectId&&e.database===this.database}}const ox="__type__",iO="__max__",jd={mapValue:{}},ax="__vector__",bf="value";function Ra(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pv(n)?4:rO(n)?9007199254740991:sO(n)?10:11:nt(28295,{value:n})}function Fr(n,e){if(n===e)return!0;const t=Ra(n);if(t!==Ra(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lh(n).isEqual(lh(e));case 3:return(function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const d=La(a.timestampValue),g=La(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,u){return Ia(a.bytesValue).isEqual(Ia(u.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,u){return kn(a.geoPointValue.latitude)===kn(u.geoPointValue.latitude)&&kn(a.geoPointValue.longitude)===kn(u.geoPointValue.longitude)})(n,e);case 2:return(function(a,u){if("integerValue"in a&&"integerValue"in u)return kn(a.integerValue)===kn(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const d=kn(a.doubleValue),g=kn(u.doubleValue);return d===g?yf(d)===yf(g):isNaN(d)&&isNaN(g)}return!1})(n,e);case 9:return Nu(n.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return(function(a,u){const d=a.mapValue.fields||{},g=u.mapValue.fields||{};if(vw(d)!==vw(g))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(g[v]===void 0||!Fr(d[v],g[v])))return!1;return!0})(n,e);default:return nt(52216,{left:n})}}function ch(n,e){return(n.values||[]).find((t=>Fr(t,e)))!==void 0}function zu(n,e){if(n===e)return 0;const t=Ra(n),s=Ra(e);if(t!==s)return yt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,e.booleanValue);case 2:return(function(u,d){const g=kn(u.integerValue||u.doubleValue),v=kn(d.integerValue||d.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(n,e);case 3:return _w(n.timestampValue,e.timestampValue);case 4:return _w(lh(n),lh(e));case 5:return jm(n.stringValue,e.stringValue);case 6:return(function(u,d){const g=Ia(u),v=Ia(d);return g.compareTo(v)})(n.bytesValue,e.bytesValue);case 7:return(function(u,d){const g=u.split("/"),v=d.split("/");for(let _=0;_<g.length&&_<v.length;_++){const E=yt(g[_],v[_]);if(E!==0)return E}return yt(g.length,v.length)})(n.referenceValue,e.referenceValue);case 8:return(function(u,d){const g=yt(kn(u.latitude),kn(d.latitude));return g!==0?g:yt(kn(u.longitude),kn(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return bw(n.arrayValue,e.arrayValue);case 10:return(function(u,d){var g,v,_,E;const S=u.fields||{},I=d.fields||{},O=(g=S[bf])===null||g===void 0?void 0:g.arrayValue,D=(v=I[bf])===null||v===void 0?void 0:v.arrayValue,H=yt(((_=O?.values)===null||_===void 0?void 0:_.length)||0,((E=D?.values)===null||E===void 0?void 0:E.length)||0);return H!==0?H:bw(O,D)})(n.mapValue,e.mapValue);case 11:return(function(u,d){if(u===jd.mapValue&&d===jd.mapValue)return 0;if(u===jd.mapValue)return 1;if(d===jd.mapValue)return-1;const g=u.fields||{},v=Object.keys(g),_=d.fields||{},E=Object.keys(_);v.sort(),E.sort();for(let S=0;S<v.length&&S<E.length;++S){const I=jm(v[S],E[S]);if(I!==0)return I;const O=zu(g[v[S]],_[E[S]]);if(O!==0)return O}return yt(v.length,E.length)})(n.mapValue,e.mapValue);default:throw nt(23264,{le:t})}}function _w(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return yt(n,e);const t=La(n),s=La(e),a=yt(t.seconds,s.seconds);return a!==0?a:yt(t.nanos,s.nanos)}function bw(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const u=zu(t[a],s[a]);if(u)return u}return yt(t.length,s.length)}function Vu(n){return Um(n)}function Um(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=La(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ia(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const u of t.values||[])a?a=!1:s+=",",s+=Um(u);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",u=!0;for(const d of s)u?u=!1:a+=",",a+=`${d}:${Um(t.fields[d])}`;return a+"}"})(n.mapValue):nt(61005,{value:n})}function Jd(n){switch(Ra(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$f(n);return e?16+Jd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ia(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,u)=>a+Jd(u)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Pa(s.fields,((u,d)=>{a+=u.length+Jd(d)})),a})(n.mapValue);default:throw nt(13486,{value:n})}}function ww(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bm(n){return!!n&&"integerValue"in n}function Dv(n){return!!n&&"arrayValue"in n}function Ew(n){return!!n&&"nullValue"in n}function Tw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ef(n){return!!n&&"mapValue"in n}function sO(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ox])===null||t===void 0?void 0:t.stringValue)===ax}function Xc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Xc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===iO}class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xc(t)}setAll(e){let t=ui.emptyPath(),s={},a=[];e.forEach(((d,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,s,a),s={},a=[],t=g.popLast()}d?s[g.lastSegment()]=Xc(d):a.push(g.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,a)}delete(e){const t=this.field(e.popLast());ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ef(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Pa(t,((a,u)=>e[a]=u));for(const a of s)delete e[a]}clone(){return new ss(Xc(this.value))}}function lx(n){const e=[];return Pa(n.fields,((t,s)=>{const a=new ui([t]);if(ef(s)){const u=lx(s.mapValue).fields;if(u.length===0)e.push(a);else for(const d of u)e.push(a.child(d))}else e.push(a)})),new _s(e)}class Ti{constructor(e,t,s,a,u,d,g){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Ti(e,0,at.min(),at.min(),at.min(),ss.empty(),0)}static newFoundDocument(e,t,s,a){return new Ti(e,1,t,at.min(),s,a,0)}static newNoDocument(e,t){return new Ti(e,2,t,at.min(),at.min(),ss.empty(),0)}static newUnknownDocument(e,t){return new Ti(e,3,t,at.min(),at.min(),ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wf{constructor(e,t){this.position=e,this.inclusive=t}}function Sw(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const u=e[a],d=n.position[a];if(u.field.isKeyField()?s=Ke.comparator(Ke.fromName(d.referenceValue),t.key):s=zu(d,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function xw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fr(n.position[t],e.position[t]))return!1;return!0}class hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function oO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ux{}class Vn extends ux{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new lO(e,t,s):t==="array-contains"?new hO(e,s):t==="in"?new dO(e,s):t==="not-in"?new fO(e,s):t==="array-contains-any"?new pO(e,s):new Vn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new uO(e,s):new cO(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zu(t,this.value)):t!==null&&Ra(this.value)===Ra(t)&&this.matchesComparison(zu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends ux{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new lr(e,t)}matches(e){return cx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function cx(n){return n.op==="and"}function hx(n){return aO(n)&&cx(n)}function aO(n){for(const e of n.filters)if(e instanceof lr)return!1;return!0}function Fm(n){if(n instanceof Vn)return n.field.canonicalString()+n.op.toString()+Vu(n.value);if(hx(n))return n.filters.map((e=>Fm(e))).join(",");{const e=n.filters.map((t=>Fm(t))).join(",");return`${n.op}(${e})`}}function dx(n,e){return n instanceof Vn?(function(s,a){return a instanceof Vn&&s.op===a.op&&s.field.isEqual(a.field)&&Fr(s.value,a.value)})(n,e):n instanceof lr?(function(s,a){return a instanceof lr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((u,d,g)=>u&&dx(d,a.filters[g])),!0):!1})(n,e):void nt(19439)}function fx(n){return n instanceof Vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vu(t.value)}`})(n):n instanceof lr?(function(t){return t.op.toString()+" {"+t.getFilters().map(fx).join(" ,")+"}"})(n):"Filter"}class lO extends Vn{constructor(e,t,s){super(e,t,s),this.key=Ke.fromName(s.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class uO extends Vn{constructor(e,t){super(e,"in",t),this.keys=px("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cO extends Vn{constructor(e,t){super(e,"not-in",t),this.keys=px("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function px(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Ke.fromName(s.referenceValue)))}class hO extends Vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dv(t)&&ch(t.arrayValue,this.value)}}class dO extends Vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ch(this.value.arrayValue,t)}}class fO extends Vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ch(this.value.arrayValue,t)}}class pO extends Vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ch(this.value.arrayValue,s)))}}class gO{constructor(e,t=null,s=[],a=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=u,this.startAt=d,this.endAt=g,this.Pe=null}}function Cw(n,e=null,t=[],s=[],a=null,u=null,d=null){return new gO(n,e,t,s,a,u,d)}function Nv(n){const e=ut(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Fm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Kf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Vu(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Vu(s))).join(",")),e.Pe=t}return e.Pe}function zv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xw(n.startAt,e.startAt)&&xw(n.endAt,e.endAt)}function Hm(n){return Ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Ku{constructor(e,t=null,s=[],a=[],u=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function mO(n,e,t,s,a,u,d,g){return new Ku(n,e,t,s,a,u,d,g)}function Yf(n){return new Ku(n)}function Aw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gx(n){return n.collectionGroup!==null}function Jc(n){const e=ut(n);if(e.Te===null){e.Te=[];const t=new Set;for(const u of e.explicitOrderBy)e.Te.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new qn(ui.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Te.push(new hh(u,s))})),t.has(ui.keyField().canonicalString())||e.Te.push(new hh(ui.keyField(),s))}return e.Te}function Vr(n){const e=ut(n);return e.Ie||(e.Ie=vO(e,Jc(n))),e.Ie}function vO(n,e){if(n.limitType==="F")return Cw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const u=a.dir==="desc"?"asc":"desc";return new hh(a.field,u)}));const t=n.endAt?new wf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new wf(n.startAt.position,n.startAt.inclusive):null;return Cw(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function qm(n,e){const t=n.filters.concat([e]);return new Ku(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gm(n,e,t){return new Ku(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qf(n,e){return zv(Vr(n),Vr(e))&&n.limitType===e.limitType}function mx(n){return`${Nv(Vr(n))}|lt:${n.limitType}`}function wu(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>fx(a))).join(", ")}]`),Kf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Vu(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Vu(a))).join(",")),`Target(${s})`})(Vr(n))}; limitType=${n.limitType})`}function Xf(n,e){return e.isFoundDocument()&&(function(s,a){const u=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ke.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(n,e)&&(function(s,a){for(const u of Jc(s))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const u of s.filters)if(!u.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(d,g,v){const _=Sw(d,g,v);return d.inclusive?_<=0:_<0})(s.startAt,Jc(s),a)||s.endAt&&!(function(d,g,v){const _=Sw(d,g,v);return d.inclusive?_>=0:_>0})(s.endAt,Jc(s),a))})(n,e)}function yO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vx(n){return(e,t)=>{let s=!1;for(const a of Jc(n)){const u=_O(a,e,t);if(u!==0)return u;s=s||a.field.isKeyField()}return 0}}function _O(n,e,t){const s=n.field.isKeyField()?Ke.comparator(e.key,t.key):(function(u,d,g){const v=d.data.field(u),_=g.data.field(u);return v!==null&&_!==null?zu(v,_):nt(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return nt(19790,{direction:n.dir})}}class Pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,u]of s)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,((t,s)=>{for(const[a,u]of s)e(a,u)}))}isEmpty(){return ex(this.inner)}size(){return this.innerSize}}const bO=new mn(Ke.comparator);function xo(){return bO}const yx=new mn(Ke.comparator);function Hc(...n){let e=yx;for(const t of n)e=e.insert(t.key,t);return e}function _x(n){let e=yx;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function wl(){return eh()}function bx(){return eh()}function eh(){return new Pl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const wO=new mn(Ke.comparator),EO=new qn(Ke.comparator);function At(...n){let e=EO;for(const t of n)e=e.add(t);return e}const TO=new qn(yt);function SO(){return TO}function Vv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function wx(n){return{integerValue:""+n}}function xO(n,e){return XM(e)?wx(e):Vv(n,e)}class Jf{constructor(){this._=void 0}}function CO(n,e,t){return n instanceof dh?(function(a,u){const d={fields:{[ix]:{stringValue:nx},[rx]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&Pv(u)&&(u=$f(u)),u&&(d.fields[sx]=u),{mapValue:d}})(t,e):n instanceof fh?Tx(n,e):n instanceof ph?Sx(n,e):(function(a,u){const d=Ex(a,u),g=kw(d)+kw(a.Ee);return Bm(d)&&Bm(a.Ee)?wx(g):Vv(a.serializer,g)})(n,e)}function AO(n,e,t){return n instanceof fh?Tx(n,e):n instanceof ph?Sx(n,e):t}function Ex(n,e){return n instanceof Ef?(function(s){return Bm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class dh extends Jf{}class fh extends Jf{constructor(e){super(),this.elements=e}}function Tx(n,e){const t=xx(e);for(const s of n.elements)t.some((a=>Fr(a,s)))||t.push(s);return{arrayValue:{values:t}}}class ph extends Jf{constructor(e){super(),this.elements=e}}function Sx(n,e){let t=xx(e);for(const s of n.elements)t=t.filter((a=>!Fr(a,s)));return{arrayValue:{values:t}}}class Ef extends Jf{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function kw(n){return kn(n.integerValue||n.doubleValue)}function xx(n){return Dv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class kO{constructor(e,t){this.field=e,this.transform=t}}function LO(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof fh&&a instanceof fh||s instanceof ph&&a instanceof ph?Nu(s.elements,a.elements,Fr):s instanceof Ef&&a instanceof Ef?Fr(s.Ee,a.Ee):s instanceof dh&&a instanceof dh})(n.transform,e.transform)}class IO{constructor(e,t){this.version=e,this.transformResults=t}}class ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ep{}function Cx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kx(n.key,ar.none()):new Ch(n.key,n.data,ar.none());{const t=n.data,s=ss.empty();let a=new qn(ui.comparator);for(let u of e.fields)if(!a.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?s.delete(u):s.set(u,d),a=a.add(u)}return new Da(n.key,s,new _s(a.toArray()),ar.none())}}function RO(n,e,t){n instanceof Ch?(function(a,u,d){const g=a.value.clone(),v=Iw(a.fieldTransforms,u,d.transformResults);g.setAll(v),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(n,e,t):n instanceof Da?(function(a,u,d){if(!tf(a.precondition,u))return void u.convertToUnknownDocument(d.version);const g=Iw(a.fieldTransforms,u,d.transformResults),v=u.data;v.setAll(Ax(a)),v.setAll(g),u.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(n,e,t):(function(a,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function th(n,e,t,s){return n instanceof Ch?(function(u,d,g,v){if(!tf(u.precondition,d))return g;const _=u.value.clone(),E=Rw(u.fieldTransforms,v,d);return _.setAll(E),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(n,e,t,s):n instanceof Da?(function(u,d,g,v){if(!tf(u.precondition,d))return g;const _=Rw(u.fieldTransforms,v,d),E=d.data;return E.setAll(Ax(u)),E.setAll(_),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(n,e,t,s):(function(u,d,g){return tf(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(n,e,t)}function MO(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),u=Ex(s.transform,a||null);u!=null&&(t===null&&(t=ss.empty()),t.set(s.field,u))}return t||null}function Lw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Nu(s,a,((u,d)=>LO(u,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ch extends ep{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Da extends ep{constructor(e,t,s,a,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ax(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Iw(n,e,t){const s=new Map;Ft(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const u=n[a],d=u.transform,g=e.data.field(u.field);s.set(u.field,AO(d,g,t[a]))}return s}function Rw(n,e,t){const s=new Map;for(const a of n){const u=a.transform,d=t.data.field(a.field);s.set(a.field,CO(u,d,e))}return s}class kx extends ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OO extends ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class PO{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&RO(u,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=th(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=th(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=bx();return this.mutations.forEach((a=>{const u=e.get(a.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(a.key)?null:g;const v=Cx(d,g);v!==null&&s.set(a.key,v),d.isValidDocument()||d.convertToNoDocument(at.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),At())}isEqual(e){return this.batchId===e.batchId&&Nu(this.mutations,e.mutations,((t,s)=>Lw(t,s)))&&Nu(this.baseMutations,e.baseMutations,((t,s)=>Lw(t,s)))}}class jv{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Ft(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=(function(){return wO})();const u=e.mutations;for(let d=0;d<u.length;d++)a=a.insert(u[d].key,s[d].version);return new jv(e,t,s,a)}}class DO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NO{constructor(e,t){this.count=e,this.unchangedNames=t}}var zn,Rt;function zO(n){switch(n){case xe.OK:return nt(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return nt(15467,{code:n})}}function Lx(n){if(n===void 0)return So("GRPC error has no .code"),xe.UNKNOWN;switch(n){case zn.OK:return xe.OK;case zn.CANCELLED:return xe.CANCELLED;case zn.UNKNOWN:return xe.UNKNOWN;case zn.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case zn.INTERNAL:return xe.INTERNAL;case zn.UNAVAILABLE:return xe.UNAVAILABLE;case zn.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case zn.NOT_FOUND:return xe.NOT_FOUND;case zn.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case zn.ABORTED:return xe.ABORTED;case zn.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case zn.DATA_LOSS:return xe.DATA_LOSS;default:return nt(39323,{code:n})}}(Rt=zn||(zn={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";const VO=new Ta([4294967295,4294967295],0);function Mw(n){const e=YS().encode(n),t=new FS;return t.update(e),new Uint8Array(t.digest())}function Ow(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ta([t,s],0),new Ta([a,u],0)]}class Uv{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new qc(`Invalid padding: ${t}`);if(s<0)throw new qc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new qc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ta.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(Ta.fromNumber(s)));return a.compare(VO)===1&&(a=new Ta([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Mw(e),[s,a]=Ow(t);for(let u=0;u<this.hashCount;u++){const d=this.pe(s,a,u);if(!this.ye(d))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Uv(u,a,t);return s.forEach((g=>d.insert(g))),d}insert(e){if(this.fe===0)return;const t=Mw(e),[s,a]=Ow(t);for(let u=0;u<this.hashCount;u++){const d=this.pe(s,a,u);this.we(d)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tp{constructor(e,t,s,a,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Ah.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new tp(at.min(),a,new mn(yt),xo(),At())}}class Ah{constructor(e,t,s,a,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ah(s,t,At(),At(),At())}}class nf{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class Ix{constructor(e,t){this.targetId=e,this.De=t}}class Rx{constructor(e,t,s=hi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Pw{constructor(){this.ve=0,this.Ce=Dw(),this.Fe=hi.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=At(),t=At(),s=At();return this.Ce.forEach(((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:nt(38017,{changeType:u})}})),new Ah(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=Dw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ft(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class jO{constructor(e){this.We=e,this.Ge=new Map,this.ze=xo(),this.je=Ud(),this.Je=Ud(),this.He=new mn(yt)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:nt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const u=a.target;if(Hm(u))if(s===0){const d=new Ke(u.path);this.Xe(t,d,Ti.newNoDocument(d,at.min()))}else Ft(s===1,20013,{expectedCount:s});else{const d=this.ot(t);if(d!==s){const g=this._t(e),v=g?this.ut(g,e,d):1;if(v!==0){this.rt(t);const _=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,_)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:u=0}=t;let d,g;try{d=Ia(s).toUint8Array()}catch(v){if(v instanceof tx)return Aa("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new Uv(d,a,u)}catch(v){return Aa(v instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.fe===0?null:g}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach((u=>{const d=this.We.lt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.Xe(t,u,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((u,d)=>{const g=this.st(d);if(g){if(u.current&&Hm(g.target)){const v=new Ke(g.target.path);this.Tt(v).has(d)||this.It(d,v)||this.Xe(d,v,Ti.newNoDocument(v,e))}u.Ne&&(t.set(d,u.Le()),u.ke())}}));let s=At();this.Je.forEach(((u,d)=>{let g=!0;d.forEachWhile((v=>{const _=this.st(v);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.ze.forEach(((u,d)=>d.setReadTime(e)));const a=new tp(e,t,this.He,this.ze,s);return this.ze=xo(),this.je=Ud(),this.Je=Ud(),this.He=new mn(yt),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Pw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new qn(yt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new qn(yt),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Pw),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ud(){return new mn(Ke.comparator)}function Dw(){return new mn(Ke.comparator)}const UO={asc:"ASCENDING",desc:"DESCENDING"},BO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FO={and:"AND",or:"OR"};class HO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zm(n,e){return n.useProto3Json||Kf(e)?e:{value:e}}function Tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qO(n,e){return Tf(n,e.toTimestamp())}function jr(n){return Ft(!!n,49232),at.fromTimestamp((function(t){const s=La(t);return new on(s.seconds,s.nanos)})(n))}function Bv(n,e){return Wm(n,e).canonicalString()}function Wm(n,e){const t=(function(a){return new en(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Ox(n){const e=en.fromString(n);return Ft(Vx(e),10190,{key:e.toString()}),e}function Km(n,e){return Bv(n.databaseId,e.path)}function hm(n,e){const t=Ox(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(Dx(t))}function Px(n,e){return Bv(n.databaseId,e)}function GO(n){const e=Ox(n);return e.length===4?en.emptyPath():Dx(e)}function $m(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dx(n){return Ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Nw(n,e,t){return{name:Km(n,e),fields:t.value.mapValue.fields}}function ZO(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:nt(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=(function(_,E){return _.useProto3Json?(Ft(E===void 0||typeof E=="string",58123),hi.fromBase64String(E||"")):(Ft(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),hi.fromUint8Array(E||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(_){const E=_.code===void 0?xe.UNKNOWN:Lx(_.code);return new Ve(E,_.message||"")})(d);t=new Rx(s,a,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=hm(n,s.document.name),u=jr(s.document.updateTime),d=s.document.createTime?jr(s.document.createTime):at.min(),g=new ss({mapValue:{fields:s.document.fields}}),v=Ti.newFoundDocument(a,u,d,g),_=s.targetIds||[],E=s.removedTargetIds||[];t=new nf(_,E,v.key,v)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=hm(n,s.document),u=s.readTime?jr(s.readTime):at.min(),d=Ti.newNoDocument(a,u),g=s.removedTargetIds||[];t=new nf([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=hm(n,s.document),u=s.removedTargetIds||[];t=new nf([],u,a,null)}else{if(!("filter"in e))return nt(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:u}=s,d=new NO(a,u),g=s.targetId;t=new Ix(g,d)}}return t}function WO(n,e){let t;if(e instanceof Ch)t={update:Nw(n,e.key,e.value)};else if(e instanceof kx)t={delete:Km(n,e.key)};else if(e instanceof Da)t={update:Nw(n,e.key,e.data),updateMask:nP(e.fieldMask)};else{if(!(e instanceof OO))return nt(16599,{Rt:e.type});t={verify:Km(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const g=d.transform;if(g instanceof dh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof fh)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ph)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Ef)return{fieldPath:d.field.canonicalString(),increment:g.Ee};throw nt(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,u){return u.updateTime!==void 0?{updateTime:qO(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:nt(27497)})(n,e.precondition)),t}function KO(n,e){return n&&n.length>0?(Ft(e!==void 0,14353),n.map((t=>(function(a,u){let d=a.updateTime?jr(a.updateTime):jr(u);return d.isEqual(at.min())&&(d=jr(u)),new IO(d,a.transformResults||[])})(t,e)))):[]}function $O(n,e){return{documents:[Px(n,e.path)]}}function YO(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Px(n,a);const u=(function(_){if(_.length!==0)return zx(lr.create(_,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(_){if(_.length!==0)return _.map((E=>(function(I){return{field:Eu(I.field),direction:JO(I.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=Zm(n,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{Vt:t,parent:a}}function QO(n){let e=GO(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Ft(s===1,65062);const E=t.from[0];E.allDescendants?a=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(S){const I=Nx(S);return I instanceof lr&&hx(I)?I.getFilters():[I]})(t.where));let d=[];t.orderBy&&(d=(function(S){return S.map((I=>(function(D){return new hh(Tu(D.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(I)))})(t.orderBy));let g=null;t.limit&&(g=(function(S){let I;return I=typeof S=="object"?S.value:S,Kf(I)?null:I})(t.limit));let v=null;t.startAt&&(v=(function(S){const I=!!S.before,O=S.values||[];return new wf(O,I)})(t.startAt));let _=null;return t.endAt&&(_=(function(S){const I=!S.before,O=S.values||[];return new wf(O,I)})(t.endAt)),mO(e,a,d,u,g,"F",v,_)}function XO(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Nx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Tu(t.unaryFilter.field);return Vn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Tu(t.unaryFilter.field);return Vn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Tu(t.unaryFilter.field);return Vn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Tu(t.unaryFilter.field);return Vn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Vn.create(Tu(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return lr.create(t.compositeFilter.filters.map((s=>Nx(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return nt(1026)}})(t.compositeFilter.op))})(n):nt(30097,{filter:n})}function JO(n){return UO[n]}function eP(n){return BO[n]}function tP(n){return FO[n]}function Eu(n){return{fieldPath:n.canonicalString()}}function Tu(n){return ui.fromServerFormat(n.fieldPath)}function zx(n){return n instanceof Vn?(function(t){if(t.op==="=="){if(Tw(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NAN"}};if(Ew(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Tw(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NOT_NAN"}};if(Ew(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eu(t.field),op:eP(t.op),value:t.value}}})(n):n instanceof lr?(function(t){const s=t.getFilters().map((a=>zx(a)));return s.length===1?s[0]:{compositeFilter:{op:tP(t.op),filters:s}}})(n):nt(54877,{filter:n})}function nP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Vx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class ya{constructor(e,t,s,a,u=at.min(),d=at.min(),g=hi.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new ya(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class iP{constructor(e){this.gt=e}}function sP(n){const e=QO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gm(e,e.limit,"L"):e}class rP{constructor(){this.Dn=new oP}addToCollectionParentIndex(e,t){return this.Dn.add(t),Le.resolve()}getCollectionParents(e,t){return Le.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Le.resolve()}deleteFieldIndex(e,t){return Le.resolve()}deleteAllFieldIndexes(e){return Le.resolve()}createTargetIndexes(e,t){return Le.resolve()}getDocumentsMatchingTarget(e,t){return Le.resolve(null)}getIndexType(e,t){return Le.resolve(0)}getFieldIndexes(e,t){return Le.resolve([])}getNextCollectionGroupToUpdate(e){return Le.resolve(null)}getMinOffset(e,t){return Le.resolve(ka.min())}getMinOffsetFromCollectionGroup(e,t){return Le.resolve(ka.min())}updateCollectionGroup(e,t,s){return Le.resolve()}updateIndexEntries(e,t){return Le.resolve()}}class oP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new qn(en.comparator),u=!a.has(s);return this.index[t]=a.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new qn(en.comparator)).toArray()}}const zw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jx=41943040;class is{static withCacheSize(e){return new is(e,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(jx,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);class ju{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ju(0)}static ur(){return new ju(-1)}}const Vw="LruGarbageCollector",aP=1048576;function jw([n,e],[t,s]){const a=yt(n,t);return a===0?yt(e,s):a}class lP{constructor(e){this.Tr=e,this.buffer=new qn(jw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();jw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ue(Vw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wu(t)?Ue(Vw,"Ignoring IndexedDB error during garbage collection: ",t):await Zu(t)}await this.Rr(3e5)}))}}class cP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Le.resolve(Wf.ue);const s=new lP(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(zw)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,u,d,g,v,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),a=this.params.maximumSequenceNumbersToCollect):a=S,d=Date.now(),this.nthSequenceNumber(e,a)))).next((S=>(s=S,g=Date.now(),this.removeTargets(e,s,t)))).next((S=>(u=S,v=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(_=Date.now(),bu()<=Ct.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${a} in `+(g-d)+`ms
	Removed ${u} targets in `+(v-g)+`ms
	Removed ${S} documents in `+(_-v)+`ms
Total Duration: ${_-E}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:S}))))}}function hP(n,e){return new cP(n,e)}class dP{constructor(){this.changes=new Pl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Le.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pP{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&th(s.mutation,a,_s.empty(),on.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,At()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=At()){const a=wl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((u=>{let d=Hc();return u.forEach(((g,v)=>{d=d.insert(g,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=wl();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,At())))}populateOverlays(e,t,s){const a=[];return s.forEach((u=>{t.has(u)||a.push(u)})),this.documentOverlayCache.getOverlays(e,a).next((u=>{u.forEach(((d,g)=>{t.set(d,g)}))}))}computeViews(e,t,s,a){let u=xo();const d=eh(),g=(function(){return eh()})();return t.forEach(((v,_)=>{const E=s.get(_.key);a.has(_.key)&&(E===void 0||E.mutation instanceof Da)?u=u.insert(_.key,_):E!==void 0?(d.set(_.key,E.mutation.getFieldMask()),th(E.mutation,_,E.mutation.getFieldMask(),on.now())):d.set(_.key,_s.empty())})),this.recalculateAndSaveOverlays(e,u).next((v=>(v.forEach(((_,E)=>d.set(_,E))),t.forEach(((_,E)=>{var S;return g.set(_,new fP(E,(S=d.get(_))!==null&&S!==void 0?S:null))})),g)))}recalculateAndSaveOverlays(e,t){const s=eh();let a=new mn(((d,g)=>d-g)),u=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const g of d)g.keys().forEach((v=>{const _=t.get(v);if(_===null)return;let E=s.get(v)||_s.empty();E=g.applyToLocalView(_,E),s.set(v,E);const S=(a.get(g.batchId)||At()).add(v);a=a.insert(g.batchId,S)}))})).next((()=>{const d=[],g=a.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),_=v.key,E=v.value,S=bx();E.forEach((I=>{if(!u.has(I)){const O=Cx(t.get(I),s.get(I));O!==null&&S.set(I,O),u=u.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,S))}return Le.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(d){return Ke.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((u=>{const d=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-u.size):Le.resolve(wl());let g=ah,v=u;return d.next((_=>Le.forEach(_,((E,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),u.get(E)?Le.resolve():this.remoteDocumentCache.getEntry(e,E).next((I=>{v=v.insert(E,I)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,v,_,At()))).next((E=>({batchId:g,changes:_x(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next((s=>{let a=Hc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const u=t.collectionGroup;let d=Hc();return this.indexManager.getCollectionParents(e,u).next((g=>Le.forEach(g,(v=>{const _=(function(S,I){return new Ku(I,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,v.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,s,a).next((E=>{E.forEach(((S,I)=>{d=d.insert(S,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,a)))).next((d=>{u.forEach(((v,_)=>{const E=_.getKey();d.get(E)===null&&(d=d.insert(E,Ti.newInvalidDocument(E)))}));let g=Hc();return d.forEach(((v,_)=>{const E=u.get(v);E!==void 0&&th(E.mutation,_,_s.empty(),on.now()),Xf(t,_)&&(g=g.insert(v,_))})),g}))}}class gP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Le.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:jr(a.createTime)}})(t)),Le.resolve()}getNamedQuery(e,t){return Le.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:sP(a.bundledQuery),readTime:jr(a.readTime)}})(t)),Le.resolve()}}class mP{constructor(){this.overlays=new mn(Ke.comparator),this.kr=new Map}getOverlay(e,t){return Le.resolve(this.overlays.get(t))}getOverlays(e,t){const s=wl();return Le.forEach(t,(a=>this.getOverlay(e,a).next((u=>{u!==null&&s.set(a,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,u)=>{this.wt(e,t,u)})),Le.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach((u=>this.overlays=this.overlays.remove(u))),this.kr.delete(s)),Le.resolve()}getOverlaysForCollection(e,t,s){const a=wl(),u=t.length+1,d=new Ke(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,_=v.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===u&&v.largestBatchId>s&&a.set(v.getKey(),v)}return Le.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let u=new mn(((_,E)=>_-E));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>s){let E=u.get(_.largestBatchId);E===null&&(E=wl(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const g=wl(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((_,E)=>g.set(_,E))),!(g.size()>=a)););return Le.resolve(g)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const d=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new DO(t,s));let u=this.kr.get(t);u===void 0&&(u=At(),this.kr.set(t,u)),this.kr.set(t,u.add(s.key))}}class vP{constructor(){this.sessionToken=hi.EMPTY_BYTE_STRING}getSessionToken(e){return Le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Le.resolve()}}class Fv{constructor(){this.qr=new qn(ei.Qr),this.$r=new qn(ei.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new ei(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new ei(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Ke(new en([])),s=new ei(t,e),a=new ei(t,e+1),u=[];return this.$r.forEachInRange([s,a],(d=>{this.Wr(d),u.push(d.key)})),u}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ke(new en([])),s=new ei(t,e),a=new ei(t,e+1);let u=At();return this.$r.forEachInRange([s,a],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new ei(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class ei{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ke.comparator(e.key,t.key)||yt(e.Hr,t.Hr)}static Ur(e,t){return yt(e.Hr,t.Hr)||Ke.comparator(e.key,t.key)}}class yP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new qn(ei.Qr)}checkEmpty(e){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const u=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new PO(u,t,s,a);this.mutationQueue.push(d);for(const g of a)this.Yr=this.Yr.add(new ei(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return Le.resolve(d)}lookupMutationBatch(e,t){return Le.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),u=a<0?0:a;return Le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?Ov:this.er-1)}getAllMutationBatches(e){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ei(t,0),a=new ei(t,Number.POSITIVE_INFINITY),u=[];return this.Yr.forEachInRange([s,a],(d=>{const g=this.Zr(d.Hr);u.push(g)})),Le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new qn(yt);return t.forEach((a=>{const u=new ei(a,0),d=new ei(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([u,d],(g=>{s=s.add(g.Hr)}))})),Le.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let u=s;Ke.isDocumentKey(u)||(u=u.child(""));const d=new ei(new Ke(u),0);let g=new qn(yt);return this.Yr.forEachWhile((v=>{const _=v.key.path;return!!s.isPrefixOf(_)&&(_.length===a&&(g=g.add(v.Hr)),!0)}),d),Le.resolve(this.ei(g))}ei(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ft(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return Le.forEach(t.mutations,(a=>{const u=new ei(a.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new ei(t,0),a=this.Yr.firstAfterOrEqual(s);return Le.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Le.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _P{constructor(e){this.ni=e,this.docs=(function(){return new mn(Ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),u=a?a.size:0,d=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Le.resolve(s?s.document.mutableCopy():Ti.newInvalidDocument(t))}getEntries(e,t){let s=xo();return t.forEach((a=>{const u=this.docs.get(a);s=s.insert(a,u?u.document.mutableCopy():Ti.newInvalidDocument(a))})),Le.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let u=xo();const d=t.path,g=new Ke(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:_,value:{document:E}}=v.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||KM(WM(E),s)<=0||(a.has(E.key)||Xf(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return Le.resolve(u)}getAllFromCollectionGroup(e,t,s,a){nt(9500)}ri(e,t){return Le.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new bP(this)}getSize(e){return Le.resolve(this.size)}}class bP extends dP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)})),Le.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class wP{constructor(e){this.persistence=e,this.ii=new Pl((t=>Nv(t)),zv),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.si=0,this.oi=new Fv,this.targetCount=0,this._i=ju.ar()}forEachTarget(e,t){return this.ii.forEach(((s,a)=>t(a))),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),Le.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ju(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Le.resolve()}updateTargetData(e,t){return this.hr(t),Le.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,t,s){let a=0;const u=[];return this.ii.forEach(((d,g)=>{g.sequenceNumber<=t&&s.get(g.targetId)===null&&(this.ii.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),Le.waitFor(u).next((()=>a))}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return Le.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),Le.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,u=[];return a&&t.forEach((d=>{u.push(a.markPotentiallyOrphaned(e,d))})),Le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Le.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return Le.resolve(s)}containsKey(e,t){return Le.resolve(this.oi.containsKey(t))}}class Ux{constructor(e,t){this.ai={},this.overlays={},this.ui=new Wf(0),this.ci=!1,this.ci=!0,this.li=new vP,this.referenceDelegate=e(this),this.hi=new wP(this),this.indexManager=new rP,this.remoteDocumentCache=(function(a){return new _P(a)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new iP(t),this.Ti=new gP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new yP(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){Ue("MemoryPersistence","Starting transaction:",e);const a=new EP(this.ui.next());return this.referenceDelegate.Ii(),s(a).next((u=>this.referenceDelegate.di(a).next((()=>u)))).toPromise().then((u=>(a.raiseOnCommittedEvent(),u)))}Ei(e,t){return Le.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class EP extends YM{constructor(e){super(),this.currentSequenceNumber=e}}class Hv{constructor(e){this.persistence=e,this.Ai=new Fv,this.Ri=null}static Vi(e){return new Hv(e)}get mi(){if(this.Ri)return this.Ri;throw nt(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),Le.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),Le.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Le.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((u=>this.mi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.mi,(s=>{const a=Ke.fromPath(s);return this.fi(e,a).next((u=>{u||t.removeEntry(a,at.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Le.or([()=>Le.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Sf{constructor(e,t){this.persistence=e,this.gi=new Pl((s=>JM(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=hP(this,t)}static Vi(e,t){return new Sf(e,t)}Ii(){}di(e){return Le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return Le.forEach(this.gi,((s,a)=>this.Sr(e,s,a).next((u=>u?Le.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.ri(e,(d=>this.Sr(e,d,t).next((g=>{g||(s++,u.removeEntry(d,at.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Le.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),Le.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),Le.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Le.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jd(e.data.value)),t}Sr(e,t,s){return Le.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return Le.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qv{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=At(),a=At();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new qv(e,t.fromCache,s,a)}}class TP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class SP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return vL()?8:QM(Si())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const u={result:null};return this.ps(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ys(e,t,a,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new TP;return this.ws(e,t,d).next((g=>{if(u.result=g,this.Rs)return this.Ss(e,t,d,g.size)}))})).next((()=>u.result))}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(bu()<=Ct.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",wu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Le.resolve()):(bu()<=Ct.DEBUG&&Ue("QueryEngine","Query:",wu(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(bu()<=Ct.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",wu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(t))):Le.resolve())}ps(e,t){if(Aw(t))return Le.resolve(null);let s=Vr(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Gm(t,null,"F"),s=Vr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=At(...u);return this.gs.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,s).next((v=>{const _=this.bs(t,g);return this.Ds(t,_,d,v.readTime)?this.ps(e,Gm(t,null,"F")):this.vs(e,_,t,v)}))))})))))}ys(e,t,s,a){return Aw(t)||a.isEqual(at.min())?Le.resolve(null):this.gs.getDocuments(e,s).next((u=>{const d=this.bs(t,u);return this.Ds(t,d,s,a)?Le.resolve(null):(bu()<=Ct.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),wu(t)),this.vs(e,d,t,ZM(a,ah)).next((g=>g)))}))}bs(e,t){let s=new qn(vx(e));return t.forEach(((a,u)=>{Xf(e,u)&&(s=s.add(u))})),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}ws(e,t,s){return bu()<=Ct.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",wu(t)),this.gs.getDocumentsMatchingQuery(e,t,ka.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Gv="LocalStore",xP=3e8;class CP{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new mn(yt),this.Ms=new Pl((u=>Nv(u)),zv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function AP(n,e,t,s){return new CP(n,e,t,s)}async function Bx(n,e){const t=ut(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((u=>(a=u,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],g=[];let v=At();for(const _ of a){d.push(_.batchId);for(const E of _.mutations)v=v.add(E.key)}for(const _ of u){g.push(_.batchId);for(const E of _.mutations)v=v.add(E.key)}return t.localDocuments.getDocuments(s,v).next((_=>({Bs:_,removedBatchIds:d,addedBatchIds:g})))}))}))}function kP(n,e){const t=ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),u=t.Os.newChangeBuffer({trackRemovals:!0});return(function(g,v,_,E){const S=_.batch,I=S.keys();let O=Le.resolve();return I.forEach((D=>{O=O.next((()=>E.getEntry(v,D))).next((H=>{const B=_.docVersions.get(D);Ft(B!==null,48541),H.version.compareTo(B)<0&&(S.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),E.addEntry(H)))}))})),O.next((()=>g.mutationQueue.removeMutationBatch(v,S)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let v=At();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(v=v.add(g.batch.mutations[_].key));return v})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function Fx(n){const e=ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function LP(n,e){const t=ut(n),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const g=[];e.targetChanges.forEach(((E,S)=>{const I=a.get(S);if(!I)return;g.push(t.hi.removeMatchingKeys(u,E.removedDocuments,S).next((()=>t.hi.addMatchingKeys(u,E.addedDocuments,S))));let O=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?O=O.withResumeToken(hi.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),a=a.insert(S,O),(function(H,B,te){return H.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=xP?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(I,O,E)&&g.push(t.hi.updateTargetData(u,O))}));let v=xo(),_=At();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),g.push(IP(u,d,e.documentUpdates).next((E=>{v=E.Ls,_=E.ks}))),!s.isEqual(at.min())){const E=t.hi.getLastRemoteSnapshotVersion(u).next((S=>t.hi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(E)}return Le.waitFor(g).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,v,_))).next((()=>v))})).then((u=>(t.Fs=a,u)))}function IP(n,e,t){let s=At(),a=At();return t.forEach((u=>s=s.add(u))),e.getEntries(n,s).next((u=>{let d=xo();return t.forEach(((g,v)=>{const _=u.get(g);v.isFoundDocument()!==_.isFoundDocument()&&(a=a.add(g)),v.isNoDocument()&&v.version.isEqual(at.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||v.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):Ue(Gv,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",v.version)})),{Ls:d,ks:a}}))}function RP(n,e){const t=ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ov),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function MP(n,e){const t=ut(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.hi.getTargetData(s,e).next((u=>u?(a=u,Le.resolve(a)):t.hi.allocateTargetId(s).next((d=>(a=new ya(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function Ym(n,e,t){const s=ut(n),a=s.Fs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!Wu(d))throw d;Ue(Gv,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function Uw(n,e,t){const s=ut(n);let a=at.min(),u=At();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,_,E){const S=ut(v),I=S.Ms.get(E);return I!==void 0?Le.resolve(S.Fs.get(I)):S.hi.getTargetData(_,E)})(s,d,Vr(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(d,g.targetId).next((v=>{u=v}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,t?a:at.min(),t?u:At()))).next((g=>(OP(s,yO(e),g),{documents:g,qs:u})))))}function OP(n,e,t){let s=n.xs.get(e)||at.min();t.forEach(((a,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),n.xs.set(e,s)}class Bw{constructor(){this.activeTargetIds=SO()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PP{constructor(){this.Fo=new Bw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Bw,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DP{xo(e){}shutdown(){}}const Fw="ConnectivityMonitor";class Hw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ue(Fw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ue(Fw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Bd=null;function Qm(){return Bd===null?Bd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bd++,"0x"+Bd.toString(16)}const dm="RestConnection",NP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===_f?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,u){const d=Qm(),g=this.Go(e,t.toUriEncodedString());Ue(dm,`Sending RPC '${e}' ${d}:`,g,s);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,a,u);const{host:_}=new URL(g),E=Fu(_);return this.jo(e,g,v,s,E).then((S=>(Ue(dm,`Received RPC '${e}' ${d}: `,S),S)),(S=>{throw Aa(dm,`RPC '${e}' ${d} failed with error: `,S,"url: ",g,"request:",s),S}))}Jo(e,t,s,a,u,d){return this.Wo(e,t,s,a,u)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,u)=>e[u]=a)),s&&s.headers.forEach(((a,u)=>e[u]=a))}Go(e,t){const s=NP[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}class VP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const wi="WebChannelConnection";class jP extends zP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,u){const d=Qm();return new Promise(((g,v)=>{const _=new HS;_.setWithCredentials(!0),_.listenOnce(qS.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Xd.NO_ERROR:const S=_.getResponseJson();Ue(wi,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),g(S);break;case Xd.TIMEOUT:Ue(wi,`RPC '${e}' ${d} timed out`),v(new Ve(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Xd.HTTP_ERROR:const I=_.getStatus();if(Ue(wi,`RPC '${e}' ${d} failed with status:`,I,"response text:",_.getResponseText()),I>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const D=O?.error;if(D&&D.status&&D.message){const H=(function(te){const X=te.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(X)>=0?X:xe.UNKNOWN})(D.status);v(new Ve(H,D.message))}else v(new Ve(xe.UNKNOWN,"Server responded with status "+_.getStatus()))}else v(new Ve(xe.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{c_:e,streamId:d,l_:_.getLastErrorCode(),h_:_.getLastError()})}}finally{Ue(wi,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(a);Ue(wi,`RPC '${e}' ${d} sending request:`,a),_.send(t,"POST",E,s,15)}))}P_(e,t,s){const a=Qm(),u=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=WS(),g=ZS(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(v.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,t,s),v.encodeInitMessageHeaders=!0;const E=u.join("");Ue(wi,`Creating RPC '${e}' stream ${a}: ${E}`,v);const S=d.createWebChannel(E,v);this.T_(S);let I=!1,O=!1;const D=new VP({Ho:B=>{O?Ue(wi,`Not sending because RPC '${e}' stream ${a} is closed:`,B):(I||(Ue(wi,`Opening RPC '${e}' stream ${a} transport.`),S.open(),I=!0),Ue(wi,`RPC '${e}' stream ${a} sending:`,B),S.send(B))},Yo:()=>S.close()}),H=(B,te,X)=>{B.listen(te,(le=>{try{X(le)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return H(S,Fc.EventType.OPEN,(()=>{O||(Ue(wi,`RPC '${e}' stream ${a} transport opened.`),D.s_())})),H(S,Fc.EventType.CLOSE,(()=>{O||(O=!0,Ue(wi,`RPC '${e}' stream ${a} transport closed`),D.__(),this.I_(S))})),H(S,Fc.EventType.ERROR,(B=>{O||(O=!0,Aa(wi,`RPC '${e}' stream ${a} transport errored. Name:`,B.name,"Message:",B.message),D.__(new Ve(xe.UNAVAILABLE,"The operation could not be completed")))})),H(S,Fc.EventType.MESSAGE,(B=>{var te;if(!O){const X=B.data[0];Ft(!!X,16349);const le=X,oe=le?.error||((te=le[0])===null||te===void 0?void 0:te.error);if(oe){Ue(wi,`RPC '${e}' stream ${a} received error:`,oe);const ae=oe.status;let re=(function(M){const q=zn[M];if(q!==void 0)return Lx(q)})(ae),V=oe.message;re===void 0&&(re=xe.INTERNAL,V="Unknown error status: "+ae+" with message "+oe.message),O=!0,D.__(new Ve(re,V)),S.close()}else Ue(wi,`RPC '${e}' stream ${a} received:`,X),D.a_(X)}})),H(g,GS.STAT_EVENT,(B=>{B.stat===Vm.PROXY?Ue(wi,`RPC '${e}' stream ${a} detected buffering proxy`):B.stat===Vm.NOPROXY&&Ue(wi,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{D.o_()}),0),D}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function fm(){return typeof document<"u"?document:null}function np(n){return new HO(n,!0)}class Hx{constructor(e,t,s=1e3,a=1.5,u=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=u,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&Ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const qw="PersistentStream";class qx{constructor(e,t,s,a,u,d,g,v){this.Fi=e,this.w_=s,this.S_=a,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Hx(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===xe.RESOURCE_EXHAUSTED?(So(t.toString()),So("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.b_===t&&this.W_(s,a)}),(s=>{e((()=>{const a=new Ve(xe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{s((()=>this.G_(a)))})),this.stream.onMessage((a=>{s((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ue(qw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Ue(qw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class UP extends qx{constructor(e,t,s,a,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,d),this.serializer=u}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=ZO(this.serializer,e),s=(function(u){if(!("targetChange"in u))return at.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?at.min():d.readTime?jr(d.readTime):at.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=$m(this.serializer),t.addTarget=(function(u,d){let g;const v=d.target;if(g=Hm(v)?{documents:$O(u,v)}:{query:YO(u,v).Vt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=Mx(u,d.resumeToken);const _=Zm(u,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(at.min())>0){g.readTime=Tf(u,d.snapshotVersion.toTimestamp());const _=Zm(u,d.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const s=XO(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=$m(this.serializer),t.removeTarget=e,this.k_(t)}}class BP extends qx{constructor(e,t,s,a,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,d),this.serializer=u}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=KO(e.writeResults,e.commitTime),s=jr(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=$m(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>WO(this.serializer,s)))};this.k_(t)}}class FP{}class HP extends FP{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new Ve(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Wm(t,s),a,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ve(xe.UNKNOWN,u.toString())}))}Jo(e,t,s,a,u){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Jo(e,Wm(t,s),a,d,g,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ve(xe.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class qP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(So(t),this._a=!1):Ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Ll="RemoteStore";class GP{constructor(e,t,s,a,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=u,this.Ea.xo((d=>{s.enqueueAndForget((async()=>{Dl(this)&&(Ue(Ll,"Restarting streams for network reachability change."),await(async function(v){const _=ut(v);_.Ia.add(4),await kh(_),_.Aa.set("Unknown"),_.Ia.delete(4),await ip(_)})(this))}))})),this.Aa=new qP(s,a)}}async function ip(n){if(Dl(n))for(const e of n.da)await e(!0)}async function kh(n){for(const e of n.da)await e(!1)}function Gx(n,e){const t=ut(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),$v(t)?Kv(t):$u(t).x_()&&Wv(t,e))}function Zv(n,e){const t=ut(n),s=$u(t);t.Ta.delete(e),s.x_()&&Zx(t,e),t.Ta.size===0&&(s.x_()?s.B_():Dl(t)&&t.Aa.set("Unknown"))}function Wv(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$u(n).H_(e)}function Zx(n,e){n.Ra.$e(e),$u(n).Y_(e)}function Kv(n){n.Ra=new jO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),$u(n).start(),n.Aa.aa()}function $v(n){return Dl(n)&&!$u(n).M_()&&n.Ta.size>0}function Dl(n){return ut(n).Ia.size===0}function Wx(n){n.Ra=void 0}async function ZP(n){n.Aa.set("Online")}async function WP(n){n.Ta.forEach(((e,t)=>{Wv(n,e)}))}async function KP(n,e){Wx(n),$v(n)?(n.Aa.la(e),Kv(n)):n.Aa.set("Unknown")}async function $P(n,e,t){if(n.Aa.set("Online"),e instanceof Rx&&e.state===2&&e.cause)try{await(async function(a,u){const d=u.cause;for(const g of u.targetIds)a.Ta.has(g)&&(await a.remoteSyncer.rejectListen(g,d),a.Ta.delete(g),a.Ra.removeTarget(g))})(n,e)}catch(s){Ue(Ll,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xf(n,s)}else if(e instanceof nf?n.Ra.Ye(e):e instanceof Ix?n.Ra.it(e):n.Ra.et(e),!t.isEqual(at.min()))try{const s=await Fx(n.localStore);t.compareTo(s)>=0&&await(function(u,d){const g=u.Ra.Pt(d);return g.targetChanges.forEach(((v,_)=>{if(v.resumeToken.approximateByteSize()>0){const E=u.Ta.get(_);E&&u.Ta.set(_,E.withResumeToken(v.resumeToken,d))}})),g.targetMismatches.forEach(((v,_)=>{const E=u.Ta.get(v);if(!E)return;u.Ta.set(v,E.withResumeToken(hi.EMPTY_BYTE_STRING,E.snapshotVersion)),Zx(u,v);const S=new ya(E.target,v,_,E.sequenceNumber);Wv(u,S)})),u.remoteSyncer.applyRemoteEvent(g)})(n,t)}catch(s){Ue(Ll,"Failed to raise snapshot:",s),await xf(n,s)}}async function xf(n,e,t){if(!Wu(e))throw e;n.Ia.add(1),await kh(n),n.Aa.set("Offline"),t||(t=()=>Fx(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ue(Ll,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await ip(n)}))}function Kx(n,e){return e().catch((t=>xf(n,t,e)))}async function sp(n){const e=ut(n),t=Ma(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ov;for(;YP(e);)try{const a=await RP(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,QP(e,a)}catch(a){await xf(e,a)}$x(e)&&Yx(e)}function YP(n){return Dl(n)&&n.Pa.length<10}function QP(n,e){n.Pa.push(e);const t=Ma(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function $x(n){return Dl(n)&&!Ma(n).M_()&&n.Pa.length>0}function Yx(n){Ma(n).start()}async function XP(n){Ma(n).na()}async function JP(n){const e=Ma(n);for(const t of n.Pa)e.X_(t.mutations)}async function e2(n,e,t){const s=n.Pa.shift(),a=jv.from(s,e,t);await Kx(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await sp(n)}async function t2(n,e){e&&Ma(n).Z_&&await(async function(s,a){if((function(d){return zO(d)&&d!==xe.ABORTED})(a.code)){const u=s.Pa.shift();Ma(s).N_(),await Kx(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,a))),await sp(s)}})(n,e),$x(n)&&Yx(n)}async function Gw(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),Ue(Ll,"RemoteStore received new credentials");const s=Dl(t);t.Ia.add(3),await kh(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await ip(t)}async function n2(n,e){const t=ut(n);e?(t.Ia.delete(2),await ip(t)):e||(t.Ia.add(2),await kh(t),t.Aa.set("Unknown"))}function $u(n){return n.Va||(n.Va=(function(t,s,a){const u=ut(t);return u.ia(),new UP(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(n.datastore,n.asyncQueue,{Zo:ZP.bind(null,n),e_:WP.bind(null,n),n_:KP.bind(null,n),J_:$P.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),$v(n)?Kv(n):n.Aa.set("Unknown")):(await n.Va.stop(),Wx(n))}))),n.Va}function Ma(n){return n.ma||(n.ma=(function(t,s,a){const u=ut(t);return u.ia(),new BP(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:XP.bind(null,n),n_:t2.bind(null,n),ea:JP.bind(null,n),ta:e2.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await sp(n)):(await n.ma.stop(),n.Pa.length>0&&(Ue(Ll,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}class Yv{constructor(e,t,s,a,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=u,this.deferred=new Sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,u){const d=Date.now()+s,g=new Yv(e,t,d,a,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qv(n,e){if(So("AsyncQueue",`${e}: ${n}`),Wu(n))return new Ve(xe.UNAVAILABLE,`${e}: ${n}`);throw n}class Iu{static emptySet(e){return new Iu(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ke.comparator(t.key,s.key):(t,s)=>Ke.comparator(t.key,s.key),this.keyedMap=Hc(),this.sortedSet=new mn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Iu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=s.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Iu;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Zw{constructor(){this.fa=new mn(Ke.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):nt(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Uu{constructor(e,t,s,a,u,d,g,v,_){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=_}static fromInitialDocuments(e,t,s,a,u){const d=[];return t.forEach((g=>{d.push({type:0,doc:g})})),new Uu(e,t,Iu.emptySet(t),d,s,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class i2{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class s2{constructor(){this.queries=Ww(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=ut(t),u=a.queries;a.queries=Ww(),u.forEach(((d,g)=>{for(const v of g.wa)v.onError(s)}))})(this,new Ve(xe.ABORTED,"Firestore shutting down"))}}function Ww(){return new Pl((n=>mx(n)),Qf)}async function Qx(n,e){const t=ut(n);let s=3;const a=e.query;let u=t.queries.get(a);u?!u.Sa()&&e.ba()&&(s=2):(u=new i2,s=e.ba()?0:1);try{switch(s){case 0:u.ya=await t.onListen(a,!0);break;case 1:u.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(d){const g=Qv(d,`Initialization of query '${wu(e.query)}' failed`);return void e.onError(g)}t.queries.set(a,u),u.wa.push(e),e.va(t.onlineState),u.ya&&e.Ca(u.ya)&&Xv(t)}async function Xx(n,e){const t=ut(n),s=e.query;let a=3;const u=t.queries.get(s);if(u){const d=u.wa.indexOf(e);d>=0&&(u.wa.splice(d,1),u.wa.length===0?a=e.ba()?0:1:!u.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function r2(n,e){const t=ut(n);let s=!1;for(const a of e){const u=a.query,d=t.queries.get(u);if(d){for(const g of d.wa)g.Ca(a)&&(s=!0);d.ya=a}}s&&Xv(t)}function o2(n,e,t){const s=ut(n),a=s.queries.get(e);if(a)for(const u of a.wa)u.onError(t);s.queries.delete(e)}function Xv(n){n.Da.forEach((e=>{e.next()}))}var Xm,Kw;(Kw=Xm||(Xm={})).Fa="default",Kw.Cache="cache";class Jx{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Uu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Uu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Xm.Cache}}class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class a2{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=At(),this.mutatedKeys=At(),this.Xa=vx(e),this.eu=new Iu(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new Zw,a=t?t.eu:this.eu;let u=t?t.mutatedKeys:this.mutatedKeys,d=a,g=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,_=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((E,S)=>{const I=a.get(E),O=Xf(this.query,S)?S:null,D=!!I&&this.mutatedKeys.has(I.key),H=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let B=!1;I&&O?I.data.isEqual(O.data)?D!==H&&(s.track({type:3,doc:O}),B=!0):this.iu(I,O)||(s.track({type:2,doc:O}),B=!0,(v&&this.Xa(O,v)>0||_&&this.Xa(O,_)<0)&&(g=!0)):!I&&O?(s.track({type:0,doc:O}),B=!0):I&&!O&&(s.track({type:1,doc:I}),B=!0,(v||_)&&(g=!0)),B&&(O?(d=d.add(O),u=H?u.add(E):u.delete(E)):(d=d.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{eu:d,ru:s,Ds:g,mutatedKeys:u}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const u=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((E,S)=>(function(O,D){const H=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt(20277,{At:B})}};return H(O)-H(D)})(E.type,S.type)||this.Xa(E.doc,S.doc))),this.su(s),a=a!=null&&a;const g=t&&!a?this.ou():[],v=this.Za.size===0&&this.current&&!a?1:0,_=v!==this.Ya;return this.Ya=v,d.length!==0||_?{snapshot:new Uu(this.query,e.eu,u,d,e.mutatedKeys,v===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Zw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=At(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new tC(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new eC(s))})),t}uu(e){this.Ha=e.qs,this.Za=At();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Uu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Jv="SyncEngine";class l2{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class u2{constructor(e){this.key=e,this.lu=!1}}class c2{constructor(e,t,s,a,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Pl((g=>mx(g)),Qf),this.Tu=new Map,this.Iu=new Set,this.du=new mn(Ke.comparator),this.Eu=new Map,this.Au=new Fv,this.Ru={},this.Vu=new Map,this.mu=ju.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function h2(n,e,t=!0){const s=aC(n);let a;const u=s.Pu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.cu()):a=await nC(s,e,t,!0),a}async function d2(n,e){const t=aC(n);await nC(t,e,!0,!1)}async function nC(n,e,t,s){const a=await MP(n.localStore,Vr(e)),u=a.targetId,d=n.sharedClientState.addLocalQueryTarget(u,t);let g;return s&&(g=await f2(n,e,u,d==="current",a.resumeToken)),n.isPrimaryClient&&t&&Gx(n.remoteStore,a),g}async function f2(n,e,t,s,a){n.gu=(S,I,O)=>(async function(H,B,te,X){let le=B.view.nu(te);le.Ds&&(le=await Uw(H.localStore,B.query,!1).then((({documents:V})=>B.view.nu(V,le))));const oe=X&&X.targetChanges.get(B.targetId),ae=X&&X.targetMismatches.get(B.targetId)!=null,re=B.view.applyChanges(le,H.isPrimaryClient,oe,ae);return Yw(H,B.targetId,re._u),re.snapshot})(n,S,I,O);const u=await Uw(n.localStore,e,!0),d=new a2(e,u.qs),g=d.nu(u.documents),v=Ah.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),_=d.applyChanges(g,n.isPrimaryClient,v);Yw(n,t,_._u);const E=new l2(e,t,d);return n.Pu.set(e,E),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),_.snapshot}async function p2(n,e,t){const s=ut(n),a=s.Pu.get(e),u=s.Tu.get(a.targetId);if(u.length>1)return s.Tu.set(a.targetId,u.filter((d=>!Qf(d,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ym(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Zv(s.remoteStore,a.targetId),Jm(s,a.targetId)})).catch(Zu)):(Jm(s,a.targetId),await Ym(s.localStore,a.targetId,!0))}async function g2(n,e){const t=ut(n),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Zv(t.remoteStore,s.targetId))}async function m2(n,e,t){const s=T2(n);try{const a=await(function(d,g){const v=ut(d),_=on.now(),E=g.reduce(((O,D)=>O.add(D.key)),At());let S,I;return v.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let D=xo(),H=At();return v.Os.getEntries(O,E).next((B=>{D=B,D.forEach(((te,X)=>{X.isValidDocument()||(H=H.add(te))}))})).next((()=>v.localDocuments.getOverlayedDocuments(O,D))).next((B=>{S=B;const te=[];for(const X of g){const le=MO(X,S.get(X.key).overlayedDocument);le!=null&&te.push(new Da(X.key,le,lx(le.value.mapValue),ar.exists(!0)))}return v.mutationQueue.addMutationBatch(O,_,te,g)})).next((B=>{I=B;const te=B.applyToLocalDocumentSet(S,H);return v.documentOverlayCache.saveOverlays(O,B.batchId,te)}))})).then((()=>({batchId:I.batchId,changes:_x(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(d,g,v){let _=d.Ru[d.currentUser.toKey()];_||(_=new mn(yt)),_=_.insert(g,v),d.Ru[d.currentUser.toKey()]=_})(s,a.batchId,t),await Lh(s,a.changes),await sp(s.remoteStore)}catch(a){const u=Qv(a,"Failed to persist write");t.reject(u)}}async function iC(n,e){const t=ut(n);try{const s=await LP(t.localStore,e);e.targetChanges.forEach(((a,u)=>{const d=t.Eu.get(u);d&&(Ft(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.lu=!0:a.modifiedDocuments.size>0?Ft(d.lu,14607):a.removedDocuments.size>0&&(Ft(d.lu,42227),d.lu=!1))})),await Lh(t,s,e)}catch(s){await Zu(s)}}function $w(n,e,t){const s=ut(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach(((u,d)=>{const g=d.view.va(e);g.snapshot&&a.push(g.snapshot)})),(function(d,g){const v=ut(d);v.onlineState=g;let _=!1;v.queries.forEach(((E,S)=>{for(const I of S.wa)I.va(g)&&(_=!0)})),_&&Xv(v)})(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function v2(n,e,t){const s=ut(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),u=a&&a.key;if(u){let d=new mn(Ke.comparator);d=d.insert(u,Ti.newNoDocument(u,at.min()));const g=At().add(u),v=new tp(at.min(),new Map,new mn(yt),d,g);await iC(s,v),s.du=s.du.remove(u),s.Eu.delete(e),ey(s)}else await Ym(s.localStore,e,!1).then((()=>Jm(s,e,t))).catch(Zu)}async function y2(n,e){const t=ut(n),s=e.batch.batchId;try{const a=await kP(t.localStore,e);rC(t,s,null),sC(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Lh(t,a)}catch(a){await Zu(a)}}async function _2(n,e,t){const s=ut(n);try{const a=await(function(d,g){const v=ut(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return v.mutationQueue.lookupMutationBatch(_,g).next((S=>(Ft(S!==null,37113),E=S.keys(),v.mutationQueue.removeMutationBatch(_,S)))).next((()=>v.mutationQueue.performConsistencyCheck(_))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(_,E,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>v.localDocuments.getDocuments(_,E)))}))})(s.localStore,e);rC(s,e,t),sC(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Lh(s,a)}catch(a){await Zu(a)}}function sC(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function rC(n,e,t){const s=ut(n);let a=s.Ru[s.currentUser.toKey()];if(a){const u=a.get(e);u&&(t?u.reject(t):u.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||oC(n,s)}))}function oC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zv(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ey(n))}function Yw(n,e,t){for(const s of t)s instanceof eC?(n.Au.addReference(s.key,e),b2(n,s)):s instanceof tC?(Ue(Jv,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||oC(n,s.key)):nt(19791,{yu:s})}function b2(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(Ue(Jv,"New document in limbo: "+t),n.Iu.add(s),ey(n))}function ey(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ke(en.fromString(e)),s=n.mu.next();n.Eu.set(s,new u2(t)),n.du=n.du.insert(t,s),Gx(n.remoteStore,new ya(Vr(Yf(t.path)),s,"TargetPurposeLimboResolution",Wf.ue))}}async function Lh(n,e,t){const s=ut(n),a=[],u=[],d=[];s.Pu.isEmpty()||(s.Pu.forEach(((g,v)=>{d.push(s.gu(v,e,t).then((_=>{var E;if((_||t)&&s.isPrimaryClient){const S=_?!_.fromCache:(E=t?.targetChanges.get(v.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(v.targetId,S?"current":"not-current")}if(_){a.push(_);const S=qv.Es(v.targetId,_);u.push(S)}})))})),await Promise.all(d),s.hu.J_(a),await(async function(v,_){const E=ut(v);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>Le.forEach(_,(I=>Le.forEach(I.Is,(O=>E.persistence.referenceDelegate.addReference(S,I.targetId,O))).next((()=>Le.forEach(I.ds,(O=>E.persistence.referenceDelegate.removeReference(S,I.targetId,O)))))))))}catch(S){if(!Wu(S))throw S;Ue(Gv,"Failed to update sequence numbers: "+S)}for(const S of _){const I=S.targetId;if(!S.fromCache){const O=E.Fs.get(I),D=O.snapshotVersion,H=O.withLastLimboFreeSnapshotVersion(D);E.Fs=E.Fs.insert(I,H)}}})(s.localStore,u))}async function w2(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){Ue(Jv,"User change. New user:",e.toKey());const s=await Bx(t.localStore,e);t.currentUser=e,(function(u,d){u.Vu.forEach((g=>{g.forEach((v=>{v.reject(new Ve(xe.CANCELLED,d))}))})),u.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Lh(t,s.Bs)}}function E2(n,e){const t=ut(n),s=t.Eu.get(e);if(s&&s.lu)return At().add(s.key);{let a=At();const u=t.Tu.get(e);if(!u)return a;for(const d of u){const g=t.Pu.get(d);a=a.unionWith(g.view.tu)}return a}}function aC(n){const e=ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v2.bind(null,e),e.hu.J_=r2.bind(null,e.eventManager),e.hu.pu=o2.bind(null,e.eventManager),e}function T2(n){const e=ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_2.bind(null,e),e}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=np(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return AP(this.persistence,new SP,e.initialUser,this.serializer)}Du(e){return new Ux(Hv.Vi,this.serializer)}bu(e){return new PP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class S2 extends Cf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ft(this.persistence.referenceDelegate instanceof Sf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new uP(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?is.withCacheSize(this.cacheSizeBytes):is.DEFAULT;return new Ux((s=>Sf.Vi(s,t)),this.serializer)}}class ev{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>$w(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=w2.bind(null,this.syncEngine),await n2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new s2})()}createDatastore(e){const t=np(e.databaseInfo.databaseId),s=(function(u){return new jP(u)})(e.databaseInfo);return(function(u,d,g,v){return new HP(u,d,g,v)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,u,d,g){return new GP(s,a,u,d,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>$w(this.syncEngine,t,0)),(function(){return Hw.C()?new Hw:new DP})())}createSyncEngine(e,t){return(function(a,u,d,g,v,_,E){const S=new c2(a,u,d,g,v,_);return E&&(S.fu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const u=ut(a);Ue(Ll,"RemoteStore shutting down."),u.Ia.add(5),await kh(u),u.Ea.shutdown(),u.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ev.provider={build:()=>new ev};class lC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):So("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Oa="FirestoreClient";class x2{constructor(e,t,s,a,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Ei.UNAUTHENTICATED,this.clientId=Mv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{Ue(Oa,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Ue(Oa,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Qv(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function pm(n,e){n.asyncQueue.verifyOperationInProgress(),Ue(Oa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await Bx(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>{Aa("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Ue("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Aa("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),n._offlineComponents=e}async function Qw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await C2(n);Ue(Oa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Gw(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>Gw(e.remoteStore,a))),n._onlineComponents=e}async function C2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue(Oa,"Using user provided OfflineComponentProvider");try{await pm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===xe.FAILED_PRECONDITION||a.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Aa("Error using user provided cache. Falling back to memory cache: "+t),await pm(n,new Cf)}}else Ue(Oa,"Using default OfflineComponentProvider"),await pm(n,new S2(void 0));return n._offlineComponents}async function uC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue(Oa,"Using user provided OnlineComponentProvider"),await Qw(n,n._uninitializedComponentsProvider._online)):(Ue(Oa,"Using default OnlineComponentProvider"),await Qw(n,new ev))),n._onlineComponents}function A2(n){return uC(n).then((e=>e.syncEngine))}async function tv(n){const e=await uC(n),t=e.eventManager;return t.onListen=h2.bind(null,e.syncEngine),t.onUnlisten=p2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=d2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=g2.bind(null,e.syncEngine),t}function k2(n,e,t={}){const s=new Sa;return n.asyncQueue.enqueueAndForget((async()=>(function(u,d,g,v,_){const E=new lC({next:I=>{E.Ou(),d.enqueueAndForget((()=>Xx(u,S)));const O=I.docs.has(g);!O&&I.fromCache?_.reject(new Ve(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&v&&v.source==="server"?_.reject(new Ve(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(I)},error:I=>_.reject(I)}),S=new Jx(Yf(g.path),E,{includeMetadataChanges:!0,ka:!0});return Qx(u,S)})(await tv(n),n.asyncQueue,e,t,s))),s.promise}function cC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Xw=new Map;const hC="firestore.googleapis.com",Jw=!0;class eE{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hC,this.ssl=Jw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Jw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aP)throw new Ve(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cC((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rp{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new NM;switch(s.type){case"firstParty":return new UM(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ve(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Xw.get(t);s&&(Ue("ComponentProvider","Removing Datastore"),Xw.delete(t),s.terminate())})(this),Promise.resolve()}}function L2(n,e,t,s={}){var a;n=or(n,rp);const u=Fu(e),d=n._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:n._getEmulatorOptions()}),v=`${e}:${t}`;u&&(iS(`https://${v}`),sS("Firestore",!0)),d.host!==hC&&d.host!==v&&Aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},d),{host:v,ssl:u,emulatorOptions:s});if(!xl(_,g)&&(n._setSettings(_),s.mockUserToken)){let E,S;if(typeof s.mockUserToken=="string")E=s.mockUserToken,S=Ei.MOCK_USER;else{E=lL(s.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new Ve(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ei(I)}n._authCredentials=new zM(new $S(E,S))}}class Nl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Nl(this.firestore,e,this._query)}}class wn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}toJSON(){return{type:wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(xh(t,wn._jsonSchema))return new wn(e,s||null,new Ke(en.fromString(t.referencePath)))}}wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:jn("string",wn._jsonSchemaVersion),referencePath:jn("string")};class xa extends Nl{constructor(e,t,s){super(e,t,Yf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Ke(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function xu(n,e,...t){if(n=ci(n),QS("collection","path",e),n instanceof rp){const s=en.fromString(e,...t);return fw(s),new xa(n,null,s)}{if(!(n instanceof wn||n instanceof xa))throw new Ve(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(en.fromString(e,...t));return fw(s),new xa(n.firestore,null,s)}}function Tl(n,e,...t){if(n=ci(n),arguments.length===1&&(e=Mv.newId()),QS("doc","path",e),n instanceof rp){const s=en.fromString(e,...t);return dw(s),new wn(n,null,new Ke(s))}{if(!(n instanceof wn||n instanceof xa))throw new Ve(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(en.fromString(e,...t));return dw(s),new wn(n.firestore,n instanceof xa?n.converter:null,new Ke(s))}}const tE="AsyncQueue";class nE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Hx(this,"async_queue_retry"),this.oc=()=>{const s=fm();s&&Ue(tE,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=fm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=fm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Sa;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Wu(e))throw e;Ue(tE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,So("INTERNAL UNHANDLED ERROR: ",iE(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=Yv.createAndSchedule(this,e,t,s,(u=>this.lc(u)));return this.ec.push(a),a}ac(){this.tc&&nt(47125,{hc:iE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function iE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function sE(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const u of s)if(u in a&&typeof a[u]=="function")return!0;return!1})(n,["next","error","complete"])}class Il extends rp{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new nE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nE(e),this._firestoreClient=void 0,await e}}}function I2(n,e){const t=typeof n=="object"?n:lS(),s=typeof n=="string"?n:_f,a=bv(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const u=oL("firestore");u&&L2(a,...u)}return a}function ty(n){if(n._terminated)throw new Ve(xe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||R2(n),n._firestoreClient}function R2(n){var e,t,s;const a=n._freezeSettings(),u=(function(g,v,_,E){return new nO(g,v,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,cC(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new x2(n._authCredentials,n._appCheckCredentials,n._queue,u,n._componentsProvider&&(function(g){const v=g?._online.build();return{_offline:g?._offline.build(v),_online:v}})(n._componentsProvider))}class Ns{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ns(hi.fromBase64String(e))}catch(t){throw new Ve(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ns(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ns._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xh(e,Ns._jsonSchema))return Ns.fromBase64String(e.bytes)}}Ns._jsonSchemaVersion="firestore/bytes/1.0",Ns._jsonSchema={type:jn("string",Ns._jsonSchemaVersion),bytes:jn("string")};class op{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ui(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ap{constructor(e){this._methodName=e}}class Ur{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ur._jsonSchemaVersion}}static fromJSON(e){if(xh(e,Ur._jsonSchema))return new Ur(e.latitude,e.longitude)}}Ur._jsonSchemaVersion="firestore/geoPoint/1.0",Ur._jsonSchema={type:jn("string",Ur._jsonSchemaVersion),latitude:jn("number"),longitude:jn("number")};class Br{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==a[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xh(e,Br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Br(e.vectorValues);throw new Ve(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Br._jsonSchemaVersion="firestore/vectorValue/1.0",Br._jsonSchema={type:jn("string",Br._jsonSchemaVersion),vectorValues:jn("object")};const M2=/^__.*__$/;class O2{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Da(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ch(e,this.data,t,this.fieldTransforms)}}class dC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Da(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt(40011,{Ec:n})}}class ny{constructor(e,t,s,a,u,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,u===void 0&&this.Ac(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ny(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Af(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fC(this.Ec)&&M2.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class P2{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||np(e)}Dc(e,t,s,a=!1){return new ny({Ec:e,methodName:t,bc:s,path:ui.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lp(n){const e=n._freezeSettings(),t=np(n._databaseId);return new P2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pC(n,e,t,s,a,u={}){const d=n.Dc(u.merge||u.mergeFields?2:0,e,t,a);sy("Data must be an object, but it was:",d,s);const g=gC(s,d);let v,_;if(u.merge)v=new _s(d.fieldMask),_=d.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const I=nv(e,S,t);if(!d.contains(I))throw new Ve(xe.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);vC(E,I)||E.push(I)}v=new _s(E),_=d.fieldTransforms.filter((S=>v.covers(S.field)))}else v=null,_=d.fieldTransforms;return new O2(new ss(g),v,_)}class up extends ap{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}class iy extends ap{_toFieldTransform(e){return new kO(e.path,new dh)}isEqual(e){return e instanceof iy}}function D2(n,e,t,s){const a=n.Dc(1,e,t);sy("Data must be an object, but it was:",a,s);const u=[],d=ss.empty();Pa(s,((v,_)=>{const E=ry(e,v,t);_=ci(_);const S=a.gc(E);if(_ instanceof up)u.push(E);else{const I=Ih(_,S);I!=null&&(u.push(E),d.set(E,I))}}));const g=new _s(u);return new dC(d,g,a.fieldTransforms)}function N2(n,e,t,s,a,u){const d=n.Dc(1,e,t),g=[nv(e,s,t)],v=[a];if(u.length%2!=0)throw new Ve(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)g.push(nv(e,u[I])),v.push(u[I+1]);const _=[],E=ss.empty();for(let I=g.length-1;I>=0;--I)if(!vC(_,g[I])){const O=g[I];let D=v[I];D=ci(D);const H=d.gc(O);if(D instanceof up)_.push(O);else{const B=Ih(D,H);B!=null&&(_.push(O),E.set(O,B))}}const S=new _s(_);return new dC(E,S,d.fieldTransforms)}function z2(n,e,t,s=!1){return Ih(t,n.Dc(s?4:3,e))}function Ih(n,e){if(mC(n=ci(n)))return sy("Unsupported field value:",e,n),gC(n,e);if(n instanceof ap)return(function(s,a){if(!fC(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(a);u&&a.fieldTransforms.push(u)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,a){const u=[];let d=0;for(const g of s){let v=Ih(g,a.yc(d));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),d++}return{arrayValue:{values:u}}})(n,e)}return(function(s,a){if((s=ci(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xO(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=on.fromDate(s);return{timestampValue:Tf(a.serializer,u)}}if(s instanceof on){const u=new on(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Tf(a.serializer,u)}}if(s instanceof Ur)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ns)return{bytesValue:Mx(a.serializer,s._byteString)};if(s instanceof wn){const u=a.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw a.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bv(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Br)return(function(d,g){return{mapValue:{fields:{[ox]:{stringValue:ax},[bf]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw g.wc("VectorValues must only contain numeric values.");return Vv(g.serializer,_)}))}}}}}})(s,a);throw a.wc(`Unsupported field value: ${Zf(s)}`)})(n,e)}function gC(n,e){const t={};return ex(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,((s,a)=>{const u=Ih(a,e.Vc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function mC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof on||n instanceof Ur||n instanceof Ns||n instanceof wn||n instanceof ap||n instanceof Br)}function sy(n,e,t){if(!mC(t)||!XS(t)){const s=Zf(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function nv(n,e,t){if((e=ci(e))instanceof op)return e._internalPath;if(typeof e=="string")return ry(n,e);throw Af("Field path arguments must be of type string or ",n,!1,void 0,t)}const V2=new RegExp("[~\\*/\\[\\]]");function ry(n,e,t){if(e.search(V2)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new op(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Af(n,e,t,s,a){const u=s&&!s.isEmpty(),d=a!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${s}`),d&&(v+=` in document ${a}`),v+=")"),new Ve(xe.INVALID_ARGUMENT,g+n+v)}function vC(n,e){return n.some((t=>t.isEqual(e)))}class yC{constructor(e,t,s,a,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class j2 extends yC{data(){return super.data()}}function cp(n,e){return typeof e=="string"?ry(n,e):e instanceof op?e._internalPath:e._delegate._internalPath}function U2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class _C extends oy{}function kf(n,e,...t){let s=[];e instanceof oy&&s.push(e),s=s.concat(t),(function(u){const d=u.filter((v=>v instanceof ay)).length,g=u.filter((v=>v instanceof hp)).length;if(d>1||d>0&&g>0)throw new Ve(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class hp extends _C{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new hp(e,t,s)}_apply(e){const t=this._parse(e);return bC(e._query,t),new Nl(e.firestore,e.converter,qm(e._query,t))}_parse(e){const t=lp(e.firestore);return(function(u,d,g,v,_,E,S){let I;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Ve(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){oE(S,E);const D=[];for(const H of S)D.push(rE(v,u,H));I={arrayValue:{values:D}}}else I=rE(v,u,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||oE(S,E),I=z2(g,d,S,E==="in"||E==="not-in");return Vn.create(_,E,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function B2(n,e,t){const s=e,a=cp("where",n);return hp._create(a,s,t)}class ay extends oy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ay(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:lr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,u){let d=a;const g=u.getFlattenedFilters();for(const v of g)bC(d,v),d=qm(d,v)})(e._query,t),new Nl(e.firestore,e.converter,qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ly extends _C{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ly(e,t)}_apply(e){const t=(function(a,u,d){if(a.startAt!==null)throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hh(u,d)})(e._query,this._field,this._direction);return new Nl(e.firestore,e.converter,(function(a,u){const d=a.explicitOrderBy.concat([u]);return new Ku(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function uy(n,e="asc"){const t=e,s=cp("orderBy",n);return ly._create(s,t)}function rE(n,e,t){if(typeof(t=ci(t))=="string"){if(t==="")throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gx(e)&&t.indexOf("/")!==-1)throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(en.fromString(t));if(!Ke.isDocumentKey(s))throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ww(n,new Ke(s))}if(t instanceof wn)return ww(n,t._key);throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zf(t)}.`)}function oE(n,e){if(!Array.isArray(n)||n.length===0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bC(n,e){const t=(function(a,u){for(const d of a)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ve(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class F2{convertValue(e,t="none"){switch(Ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw nt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Pa(e,((a,u)=>{s[a]=this.convertValue(u,t)})),s}convertVectorValue(e){var t,s,a;const u=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[bf].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((d=>kn(d.doubleValue)));return new Br(u)}convertGeoPoint(e){return new Ur(kn(e.latitude),kn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=$f(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const t=La(e);return new on(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=en.fromString(e);Ft(Vx(s),9688,{name:e});const a=new uh(s.get(1),s.get(3)),u=new Ke(s.popFirst(5));return a.isEqual(t)||So(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function wC(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Gc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sl extends yC{constructor(e,t,s,a,u,d){super(e,t,s,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(cp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Sl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Sl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sl._jsonSchema={type:jn("string",Sl._jsonSchemaVersion),bundleSource:jn("string","DocumentSnapshot"),bundleName:jn("string"),bundle:jn("string")};class sf extends Sl{data(e={}){return super.data(e)}}class Ru{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Gc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new sf(this._firestore,this._userDataWriter,s.key,s,new Gc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,u){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((g=>{const v=new sf(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Gc(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const v=new sf(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Gc(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let _=-1,E=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),E=d.indexOf(g.doc.key)),{type:H2(g.type),doc:v,oldIndex:_,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ru._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),a.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function H2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:n})}}function cy(n){n=or(n,wn);const e=or(n.firestore,Il);return k2(ty(e),n._key).then((t=>TC(e,n,t)))}Ru._jsonSchemaVersion="firestore/querySnapshot/1.0",Ru._jsonSchema={type:jn("string",Ru._jsonSchemaVersion),bundleSource:jn("string","QuerySnapshot"),bundleName:jn("string"),bundle:jn("string")};class EC extends F2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ns(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function Zc(n,e,t){n=or(n,wn);const s=or(n.firestore,Il),a=wC(n.converter,e,t);return hy(s,[pC(lp(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ar.none())])}function Wc(n,e,t,...s){n=or(n,wn);const a=or(n.firestore,Il),u=lp(a);let d;return d=typeof(e=ci(e))=="string"||e instanceof op?N2(u,"updateDoc",n._key,e,t,s):D2(u,"updateDoc",n._key,e),hy(a,[d.toMutation(n._key,ar.exists(!0))])}function _l(n,e){const t=or(n.firestore,Il),s=Tl(n),a=wC(n.converter,e);return hy(t,[pC(lp(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,ar.exists(!1))]).then((()=>s))}function Lf(n,...e){var t,s,a;n=ci(n);let u={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||sE(e[d])||(u=e[d++]);const g={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(sE(e[d])){const S=e[d];e[d]=(t=S.next)===null||t===void 0?void 0:t.bind(S),e[d+1]=(s=S.error)===null||s===void 0?void 0:s.bind(S),e[d+2]=(a=S.complete)===null||a===void 0?void 0:a.bind(S)}let v,_,E;if(n instanceof wn)_=or(n.firestore,Il),E=Yf(n._key.path),v={next:S=>{e[d]&&e[d](TC(_,n,S))},error:e[d+1],complete:e[d+2]};else{const S=or(n,Nl);_=or(S.firestore,Il),E=S._query;const I=new EC(_);v={next:O=>{e[d]&&e[d](new Ru(_,I,S,O))},error:e[d+1],complete:e[d+2]},U2(n._query)}return(function(I,O,D,H){const B=new lC(H),te=new Jx(O,B,D);return I.asyncQueue.enqueueAndForget((async()=>Qx(await tv(I),te))),()=>{B.Ou(),I.asyncQueue.enqueueAndForget((async()=>Xx(await tv(I),te)))}})(ty(_),E,g,v)}function hy(n,e){return(function(s,a){const u=new Sa;return s.asyncQueue.enqueueAndForget((async()=>m2(await A2(s),a,u))),u.promise})(ty(n),e)}function TC(n,e,t){const s=t.docs.get(e._key),a=new EC(n);return new Sl(n,a,e._key,s,new Gc(t.hasPendingWrites,t.fromCache),e.converter)}function ns(){return new iy("serverTimestamp")}(function(e,t=!0){(function(a){Gu=a})(Hu),Pu(new Cl("firestore",((s,{instanceIdentifier:a,options:u})=>{const d=s.getProvider("app").getImmediate(),g=new Il(new VM(s.getProvider("auth-internal")),new BM(d,s.getProvider("app-check-internal")),(function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Ve(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uh(_.options.projectId,E)})(d,a),d);return u=Object.assign({useFetchStreams:t},u),g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Ea(aw,lw,e),Ea(aw,lw,"esm2017")})();const q2={apiKey:"AIzaSyCV7cTC6DPWERCQcYDviWCVsDWFwTLW8bk",authDomain:"swift-delivery-38345.firebaseapp.com",projectId:"swift-delivery-38345",storageBucket:"swift-delivery-38345.firebasestorage.app",messagingSenderId:"959515973555",appId:"1:959515973555:web:3e2e38ae84e962589cddc6"},SC=aS(q2),ir=PM(SC),sr=I2(SC);function G2({onSendMessage:n,userId:e}){const[t,s]=w.useState(!1),[a,u]=w.useState(""),[d,g]=w.useState(!1),[v,_]=w.useState(""),[E,S]=w.useState(!1),[I,O]=w.useState(!1),D=w.useRef(null),H=w.useRef(window.speechSynthesis),B=w.useRef(new Set),[te,X]=w.useState([]),[le,oe]=w.useState(null),[ae,re]=w.useState(!1),[V,z]=w.useState(!1);w.useEffect(()=>{const J=window.SpeechRecognition||window.webkitSpeechRecognition;if(!J){console.warn("Speech Recognition not supported");return}const ee=new J;return ee.continuous=!1,ee.interimResults=!0,ee.lang="en-US",ee.onstart=()=>{s(!0),_(""),u("")},ee.onresult=de=>{let Q="",N="";for(let K=de.resultIndex;K<de.results.length;K++){const se=de.results[K][0].transcript;de.results[K].isFinal?N+=se+" ":Q+=se}const F=(N||Q).trim();if(N){const K=G(F);u(K),(async()=>{try{const se=await Z(K);se&&se!==K&&u(se)}catch{}})()}else u(F)},ee.onerror=de=>{_(`Error: ${de.error}`),console.error("Speech recognition error:",de.error)},ee.onend=()=>{s(!1)},D.current=ee,()=>{D.current&&D.current.abort()}},[]),w.useEffect(()=>{const J=()=>{const ee=H.current&&H.current.getVoices&&H.current.getVoices()||[];if(X(ee),!le&&ee.length){const de=["female","woman","zira","samantha","victoria","amelia","alloy","google","microsoft"],Q=ee.find(N=>{const F=(N.name||"").toLowerCase(),K=(N.lang||"").toLowerCase();return de.some(se=>F.includes(se)||K.includes(se))});oe(Q?Q.name:ee[0].name)}};return J(),window.speechSynthesis&&window.speechSynthesis.addEventListener&&window.speechSynthesis.addEventListener("voiceschanged",J),()=>{window.speechSynthesis&&window.speechSynthesis.removeEventListener&&window.speechSynthesis.removeEventListener("voiceschanged",J)}},[le]),w.useEffect(()=>{try{const J=window.translations&&window.translations.en||{};Object.values(J).forEach(ee=>{!ee||typeof ee!="string"||ee.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g," ").split(/\s+/).map(de=>de.trim().toLowerCase()).filter(Boolean).forEach(de=>B.current.add(de))})}catch{}},[]),w.useEffect(()=>{const J=ee=>{ee.key==="Enter"&&E&&a&&!I&&!v&&(ee.preventDefault(),ie())};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[E,a,I,v]);const M=(J,ee)=>{J=J||"",ee=ee||"";const de=J.length,Q=ee.length,N=Array.from({length:de+1},()=>Array(Q+1).fill(0));for(let F=0;F<=de;F++)N[F][0]=F;for(let F=0;F<=Q;F++)N[0][F]=F;for(let F=1;F<=de;F++)for(let K=1;K<=Q;K++){const se=J[F-1]===ee[K-1]?0:1;N[F][K]=Math.min(N[F-1][K]+1,N[F][K-1]+1,N[F-1][K-1]+se)}return N[de][Q]},q=J=>{if(!J)return J;const ee=J.toLowerCase();if(B.current.has(ee))return J;let de=null,Q=1/0;return B.current.forEach(N=>{if(Math.abs(N.length-ee.length)>3)return;const F=M(ee,N);F<Q&&(Q=F,de=N)}),de&&Q<=Math.max(1,Math.floor(ee.length*.33))?de:J},G=J=>J&&J.split(/\s+/).map(ee=>{const de=ee.match(/^([\w']+)([^\w']*)$/);if(!de)return ee;const Q=de[1],N=de[2]||"";return q(Q)+N}).join(" "),Z=async J=>{if(!J||typeof fetch!="function")return J;try{const ee=new URLSearchParams;ee.append("text",J),ee.append("language","en-US");const de=await fetch("https://api.languagetool.org/v2/check",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ee.toString()});if(!de.ok)return J;const Q=await de.json();if(!Q.matches||Q.matches.length===0)return J;let N=J;return Q.matches.slice().sort((K,se)=>se.offset-K.offset).forEach(K=>{if(!K.replacements||K.replacements.length===0)return;const se=K.replacements[0].value,$=K.offset,ce=K.offset+K.length;N=N.slice(0,$)+se+N.slice(ce)}),N}catch{return J}},U=()=>{D.current&&!t&&(u(""),_(""),D.current.start())},Pe=()=>{D.current&&t&&D.current.stop()},ke=async J=>{if(V)try{g(!0);const se=await fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:J})});if(se.ok){const $=await se.json(),ce=$.audioBase64||$.audio,we=$.contentType||"audio/mpeg";if(ce){const Re=new Audio(`data:${we};base64,${ce}`);Re.onended=()=>g(!1),Re.onerror=()=>g(!1),await Re.play();return}}}catch(se){console.warn("Cloud TTS failed, falling back to local TTS",se)}if(!H.current)return;H.current.cancel();let ee=H.current.getVoices()||[];ee.length||(ee=H.current.getVoices()||[]);const de=["female","woman","zira","samantha","victoria","amelia","alloy","google uk english female","google us english","microsoft zira"];let Q=null;le&&(Q=ee.find(se=>se.name===le)||null),Q||(Q=ee.find(se=>{const $=(se.name||"").toLowerCase(),ce=(se.lang||"").toLowerCase();return de.some(we=>$.includes(we)||ce.includes(we))||$.includes("female")})||ee.find(se=>se.lang&&se.lang.startsWith("en"))||ee[0]);const N=J.match(/[^.!?]+[.!?]+/g)||[J];let F=0;const K=()=>{if(F>=N.length){g(!1);return}const se=N[F].trim();F++;const $=new SpeechSynthesisUtterance(se);$.rate=.85,$.pitch=1.1+Math.random()*.2,$.volume=.85,Q&&($.voice=Q),$.onstart=()=>g(!0),$.onend=()=>{F<N.length?setTimeout(K,400):g(!1)},$.onerror=()=>g(!1),H.current.speak($)};g(!0),K()},ie=async()=>{if(!a.trim())return;const J=a.trim();u(""),O(!0);try{const Q=(await(await fetch("http://localhost:5000/api/bot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:J})})).json()).reply||"I couldn't understand that. Please try again.";n(J),setTimeout(()=>{ke(Q)},500)}catch(ee){console.error("Voice message failed:",ee),ke("Sorry, I couldn't process your request. Please try again.")}finally{O(!1)}};return x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px",backgroundColor:"#e0f7ff",borderRadius:"6px",border:"2px solid #06b6d4"},children:[x.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",flexWrap:"wrap"},children:[x.jsx("button",{onClick:()=>S(!E),title:E?"Voice ON":"Voice OFF",style:{padding:"8px 12px",background:E?"#10b981":"#9ca3af",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",whiteSpace:"nowrap"},children:E?" ON":" OFF"}),E&&x.jsxs("button",{onClick:t?Pe:U,disabled:I,style:{padding:"8px 12px",background:t?"#ef4444":"#4f46e5",color:"#fff",border:"none",borderRadius:"4px",cursor:I?"not-allowed":"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",opacity:I?.6:1,whiteSpace:"nowrap"},title:t?"Stop listening":"Start speaking",children:[t?"":""," ",t?"Stop":"Speak"]}),d&&x.jsx("button",{onClick:()=>H.current?.cancel(),style:{padding:"8px 12px",background:"#f97316",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",whiteSpace:"nowrap"},title:"Stop speaking",children:" Stop"}),E&&x.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[x.jsx("label",{style:{fontSize:12,color:"#0f172a"},children:"Voice:"}),x.jsxs("select",{value:le||"",onChange:J=>oe(J.target.value),style:{padding:"6px 8px",borderRadius:6},children:[te.length===0&&x.jsx("option",{children:"Loading voices..."}),(()=>{const J=["female","woman","zira","samantha","victoria","amelia","alloy","google","microsoft"],ee=te.filter(Q=>{const N=(Q.name||"").toLowerCase(),F=(Q.lang||"").toLowerCase();return J.some(K=>N.includes(K)||F.includes(K))}),de=te.filter(Q=>!ee.includes(Q));return x.jsxs(x.Fragment,{children:[ee.length>0&&x.jsx("optgroup",{label:"Female voices",children:ee.map(Q=>x.jsxs("option",{value:Q.name,children:[Q.name," (",Q.lang,")"]},Q.name))}),de.length>0&&x.jsx("optgroup",{label:"Other voices",children:de.map(Q=>x.jsxs("option",{value:Q.name,disabled:ae,children:[Q.name," (",Q.lang,")"]},Q.name))})]})})()]}),x.jsx("button",{onClick:()=>{const J=["female","woman","zira","samantha","victoria","amelia","alloy","google","microsoft"],ee=te.filter(de=>{const Q=(de.name||"").toLowerCase(),N=(de.lang||"").toLowerCase();return J.some(F=>Q.includes(F)||N.includes(F))});ee.length?(oe(ee[0].name),re(!0)):te.length&&(oe(te[0].name),re(!0))},style:{padding:"6px 8px",borderRadius:6},title:"Force female voice",children:"Force female"}),ae&&x.jsx("button",{onClick:()=>re(!1),style:{padding:"6px 8px",borderRadius:6},children:"Unlock"}),x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,marginLeft:6},title:"Use cloud TTS (more natural voices)",children:[x.jsx("input",{type:"checkbox",checked:V,onChange:J=>z(J.target.checked)}),x.jsx("span",{style:{fontSize:12},children:"Use cloud TTS"})]})]})]}),E&&a&&!I&&x.jsxs("div",{style:{padding:"8px",background:"#dbeafe",borderRadius:"4px",fontSize:"11px",color:"#1e40af",borderLeft:"3px solid #3b82f6"},children:[x.jsx("strong",{children:"You:"})," ",a]}),E&&v&&x.jsx("div",{style:{padding:"8px",background:"#fee2e2",borderRadius:"4px",fontSize:"10px",color:"#991b1b",borderLeft:"3px solid #ef4444"},children:v}),E&&I&&x.jsx("div",{style:{padding:"8px",background:"#fef3c7",borderRadius:"4px",fontSize:"11px",color:"#92400e"},children:" Processing..."}),E&&a&&!v&&!I&&x.jsx("button",{onClick:ie,style:{padding:"8px 12px",background:"#10b981",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%"},children:" Send Voice Message"})]})}const Z2=({onSuggestionClick:n,autoplay:e=!1})=>{const[t,s]=w.useState(null),a=[{id:"switch_day_mode",label:" Switch to Day Mode",text:"switch to day mode"},{id:"switch_night_mode",label:" Switch to Night Mode",text:"switch to night mode"},{id:"spanish_language",label:" Cambiar a Espaol",text:"change language to spanish"},{id:"track_item",label:" Help me track this item",text:"help me track my package"},{id:"check_status",label:" Check delivery status",text:"what is the status of my delivery"},{id:"human_agent",label:" Speak with an agent",text:"I want to speak with an agent"}];return w.useEffect(()=>{if(!e)return;const u=[],d=1200,g=3;for(let v=0;v<g;v++)a.forEach((_,E)=>{const S=v*a.length*(d+100)+E*(d+100);u.push(setTimeout(()=>s(E),S)),u.push(setTimeout(()=>s(null),S+d))});return()=>{u.forEach(v=>clearTimeout(v))}},[e,a.length]),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px",backgroundColor:"#f9f9f9",borderTop:"1px solid #eee",borderBottom:"1px solid #eee"},children:[x.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"12px",fontWeight:"600",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px"},children:" Quick Suggestions"}),x.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px"},children:a.map((u,d)=>x.jsx("button",{onClick:()=>n(u.text),style:{padding:"8px 12px",fontSize:"12px",fontWeight:"500",color:"#fff",background:"linear-gradient(135deg, #0369a1 0%, #06b6d4 100%)",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transform:t===d?"scale(1.05)":"scale(1)",opacity:t===d?1:.7},onMouseEnter:g=>{g.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.15)",g.target.style.transform="translateY(-1px) scale(1.05)"},onMouseLeave:g=>{const v=t===d;g.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",g.target.style.transform=v?"scale(1.05)":"scale(1)"},title:u.text,children:u.label},u.id))}),x.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"11px",color:"#999",fontStyle:"italic"},children:"Click a suggestion to add it to your message"})]})},Jt={NAVIGATE_HOME:"navigate_home",NAVIGATE_GALLERY:"navigate_gallery",NAVIGATE_SERVICES:"navigate_services",NAVIGATE_TRACK:"navigate_track",NAVIGATE_CONTACT:"navigate_contact",NAVIGATE_FAQ:"navigate_faq",NAVIGATE_BOOKING:"navigate_booking",NAVIGATE_TESTIMONIALS:"navigate_testimonials",ABOUT_SERVICES:"about_services",ABOUT_TRACKING:"about_tracking",ABOUT_COMPANY:"about_company",PRICING_INFO:"pricing_info",GENERAL_CHAT:"general_chat"},aE={[Jt.NAVIGATE_HOME]:{section:"home",label:"Home"},[Jt.NAVIGATE_GALLERY]:{section:"gallery",label:"Gallery"},[Jt.NAVIGATE_SERVICES]:{section:"services",label:"Services"},[Jt.NAVIGATE_TRACK]:{section:"track",label:"Tracking"},[Jt.NAVIGATE_CONTACT]:{section:"contact",label:"Contact"},[Jt.NAVIGATE_FAQ]:{section:"faq",label:"FAQ"},[Jt.NAVIGATE_BOOKING]:{section:"booking",label:"Booking"},[Jt.NAVIGATE_TESTIMONIALS]:{section:"testimonials",label:"Testimonials"},[Jt.ABOUT_SERVICES]:{section:"services",label:"Services Info"},[Jt.ABOUT_TRACKING]:{section:"track",label:"Tracking Info"},[Jt.ABOUT_COMPANY]:{section:"home",label:"Company Info"},[Jt.PRICING_INFO]:{section:"services",label:"Pricing"}},W2={[Jt.NAVIGATE_HOME]:{keywords:["home","main page","homepage","start","beginning","main","welcome"],phrases:["take me home","go home","show me home","go to home page"]},[Jt.NAVIGATE_GALLERY]:{keywords:["gallery","photos","images","pictures","portfolio","showcase","facilities","fleet","equipment"],phrases:["show me gallery","show photos","view gallery","see our facilities","show equipment"]},[Jt.NAVIGATE_SERVICES]:{keywords:["services","offerings","what do you offer","capabilities","features","packages","airfreight","warehouse","customs"],phrases:["show services","what services","tell me about services","service options","your offerings"]},[Jt.NAVIGATE_TRACK]:{keywords:["track","tracking","where is my","status","shipment","package","delivery","cargo","courier","find","locate","trace","monitor","follow","check","swift","has it arrived","when will it arrive","where is it","locate my","carrying"],phrases:["track my package","check tracking","where is my shipment","track shipment","delivery status","please track","help me track","i want to track","can you track","track this package","track this shipment","find my package","find my shipment","locate my package","locate my shipment","where is my package","where is my cargo","where is my parcel","when will my package","when will my shipment","when will my delivery","has my package arrived","has my shipment arrived","current status of","package status","shipment status","cargo status","delivery update","tracking update","check status","trace package","trace shipment","trace cargo","monitor package","monitor shipment","follow package","follow shipment","help track","track for me","please help me track","can you help track","i need to track","need help tracking","package tracking","shipment tracking","cargo tracking","live tracking","real-time tracking","trace my","find status of","check status of","what is the status","what is the location","show me tracking","show tracking info","show delivery status","help with tracking","tracking help","track this","track id","tracking number","reference number","shipment number","cargo number","parcel tracking","parcel status","package location","shipment location","delivery location","current location of","last update on","track and trace","trace and track","package trace","shipment trace","track the courier carrying","track courier carrying","track package carrying","track the package"]},[Jt.NAVIGATE_CONTACT]:{keywords:["contact","email","phone","address","reach us","call","message","contact us","get in touch"],phrases:["contact us","how to contact","get in touch","contact information","reach out"]},[Jt.NAVIGATE_FAQ]:{keywords:["faq","frequently asked","questions","help","common issues","troubleshoot","problem","issue"],phrases:["show faq","frequently asked questions","common questions","help me","how do i"]},[Jt.NAVIGATE_BOOKING]:{keywords:["booking","book","reserve","schedule","send package","shipment","order","booking dashboard"],phrases:["make booking","book shipment","schedule delivery","send package","new shipment"]},[Jt.NAVIGATE_TESTIMONIALS]:{keywords:["testimonial","reviews","feedback","customers","what people say","customer feedback","success stories"],phrases:["show testimonials","customer reviews","what customers say","success stories"]},[Jt.ABOUT_SERVICES]:{keywords:["airfreight","warehouse","customs","temperature","dangerous goods","cargo","transport","logistics"],phrases:["tell me about services","explain services","service details","what can you do"]},[Jt.ABOUT_TRACKING]:{keywords:["tracking system","real-time","location","map","gps","live tracking","monitoring"],phrases:["how does tracking work","real-time tracking","live updates","location tracking"]},[Jt.ABOUT_COMPANY]:{keywords:["company","about","swiftdelivery","who are you","mission","vision","commitment"],phrases:["tell me about swiftdelivery","about your company","who are you","company background"]},[Jt.PRICING_INFO]:{keywords:["pricing","cost","price","rate","fees","how much","expense","charge"],phrases:["what are your prices","pricing","cost of service","how much does it cost"]}},xC=n=>{const e=n.toLowerCase().trim();let t=0,s=Jt.GENERAL_CHAT;for(const[a,u]of Object.entries(W2)){const{keywords:d,phrases:g}=u;let v=0;g.forEach(_=>{e.includes(_)&&(v+=10)}),d.forEach(_=>{e.includes(_)&&(v+=1)}),v>t&&(t=v,s=a)}return{intent:s,confidence:Math.min(t/10,1),section:aE[s]?.section,label:aE[s]?.label,shouldNavigate:t>0&&s!==Jt.GENERAL_CHAT}};if(!document.querySelector("style[data-chatbot-highlight]")){const n=document.createElement("style");n.setAttribute("data-chatbot-highlight","true"),n.textContent=`
    @keyframes chatbot-highlight-pulse {
      0% {
        background-color: rgba(79, 70, 229, 0.1);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7);
      }
      50% {
        box-shadow: 0 0 0 15px rgba(79, 70, 229, 0);
      }
      100% {
        background-color: rgba(79, 70, 229, 0);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
      }
    }
    
    .chatbot-highlight {
      animation: chatbot-highlight-pulse 1s ease-out !important;
    }
  `,document.head.appendChild(n)}class K2{constructor(){this.history=[],this.currentIntent=null,this.context={},this.maxHistoryLength=10}addMessage(e,t,s={}){this.history.push({message:e,intent:t,timestamp:Date.now(),metadata:s}),this.history.length>this.maxHistoryLength&&this.history.shift(),this.currentIntent=t}getContext(){return{currentIntent:this.currentIntent,lastMessages:this.history.slice(-3),context:this.context}}setContextData(e,t){this.context[e]=t}getContextData(e){return this.context[e]}clearContext(){this.history=[],this.currentIntent=null,this.context={}}getMessageHistory(){return this.history}hasRecentIntent(e,t=5e3){const s=Date.now();return this.history.some(a=>a.intent===e&&s-a.timestamp<t)}getFollowUpSuggestions(){return{navigate_home:["Check our gallery","Learn about services"],navigate_services:["View pricing","Book a shipment"],navigate_track:["Track another package","Contact support"],navigate_contact:["View gallery","Check FAQ"]}[this.currentIntent]||[]}}let gm=null;const $2=()=>(gm||(gm=new K2),gm);class Y2{constructor(){this.sessionId=null,this.customerName=null,this.sessionData=null,this.apiBase="http://localhost:5000/api/chatbot"}async getAuthToken(){return await ir.currentUser?.getIdToken()}async initializeSession(){try{const e=await this.getAuthToken();if(!e)throw new Error("Not authenticated");const t=ir.currentUser?.displayName||ir.currentUser?.email?.split("@")[0],s=await fetch(`${this.apiBase}/session/create`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({displayName:t})});if(!s.ok)throw new Error("Failed to create session");const a=await s.json();return this.sessionId=a.sessionId,this.customerName=a.customerName,this.sessionData=a.sessionMetadata,console.log(` Session initialized for ${this.customerName}`,this.sessionId),a}catch(e){throw console.error("Error initializing session:",e),e}}async getSessionInfo(){try{const e=await this.getAuthToken();if(!e)throw new Error("Not authenticated");const t=await fetch(`${this.apiBase}/session/info`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to get session info");const s=await t.json();return this.sessionId=s.session.sessionId,this.customerName=s.session.customerName,this.sessionData={totalMessages:s.session.totalMessages,trackingRequests:s.session.trackingRequests,lastTrackingId:s.session.lastTrackingId},s.session}catch(e){throw console.error("Error getting session info:",e),e}}async saveMessage(e,t,s={}){try{const a=await this.getAuthToken();if(!a||!this.sessionId)throw new Error("Invalid session");const u=await fetch(`${this.apiBase}/message/save`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({sessionId:this.sessionId,message:e,from:t,metadata:s})});if(!u.ok)throw new Error("Failed to save message");return await u.json()}catch(a){throw console.error("Error saving message:",a),a}}async getChatHistory(e=50){try{const t=await this.getAuthToken();if(!t||!this.sessionId)throw new Error("Invalid session");const s=await fetch(`${this.apiBase}/history/${this.sessionId}?limit=${e}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to get chat history");return(await s.json()).messages||[]}catch(t){return console.error("Error getting chat history:",t),[]}}async saveTrackingHistory(e,t,s={}){try{const a=await this.getAuthToken();if(!a)throw new Error("Not authenticated");const u=await fetch(`${this.apiBase}/tracking/save`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({trackingId:e,trackingData:t,context:s})});if(!u.ok)throw new Error("Failed to save tracking history");return await u.json()}catch(a){throw console.error("Error saving tracking history:",a),a}}async getTrackingSuggestions(e=5){try{const t=await this.getAuthToken();if(!t)throw new Error("Not authenticated");const s=await fetch(`${this.apiBase}/tracking/suggestions?limit=${e}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to get tracking suggestions");return(await s.json()).suggestions||[]}catch(t){return console.error("Error getting tracking suggestions:",t),[]}}async endSession(){try{const e=await this.getAuthToken();if(!e||!this.sessionId)throw new Error("Invalid session");if(!(await fetch(`${this.apiBase}/session/end`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({sessionId:this.sessionId})})).ok)throw new Error("Failed to end session");return this.sessionId=null,this.customerName=null,this.sessionData=null,!0}catch(e){throw console.error("Error ending session:",e),e}}getCustomerName(){return this.customerName}getSessionId(){return this.sessionId}getSessionMetadata(){return this.sessionData}}let mm=null;const Q2=()=>(mm||(mm=new Y2),mm);class X2{constructor(){this.sessionService=Q2(),this.context={customerName:null,recentTrackingIds:[],conversationHistory:[],trackingSuggestions:[],lastInteraction:null,messageCount:0}}async initializeContext(){try{await this.sessionService.initializeSession(),this.context.customerName=this.sessionService.getCustomerName();const e=await this.sessionService.getTrackingSuggestions(5);return this.context.trackingSuggestions=e,e.length>0&&(this.context.recentTrackingIds=e.map(t=>t.trackingId)),console.log(" Customer context initialized:",this.context),!0}catch(e){return console.error("Error initializing customer context:",e),!1}}async updateContextWithMessage(e,t="customer"){try{const s={timestamp:new Date,type:t};return await this.sessionService.saveMessage(e,t,s),this.context.messageCount+=1,this.context.lastInteraction=new Date,!0}catch(s){return console.error("Error updating context:",s),!1}}async updateTrackingContext(e,t=null){try{return await this.sessionService.saveTrackingHistory(e,t,{source:"chatbot",timestamp:new Date}),this.context.recentTrackingIds.includes(e)||(this.context.recentTrackingIds.unshift(e),this.context.recentTrackingIds.length>10&&this.context.recentTrackingIds.pop()),!0}catch(s){return console.error("Error updating tracking context:",s),!1}}async loadConversationHistory(e=20){try{const t=await this.sessionService.getChatHistory(e);return this.context.conversationHistory=t,t}catch(t){return console.error("Error loading conversation history:",t),[]}}async refreshTrackingSuggestions(){try{const e=await this.sessionService.getTrackingSuggestions(5);return this.context.trackingSuggestions=e,e}catch(e){return console.error("Error refreshing tracking suggestions:",e),[]}}getCustomerGreeting(){const e=this.context.customerName||"there",t=this.context.messageCount;return t===0?` Welcome ${e}! How can I help you today?`:t<5?` Welcome back, ${e}! How can I assist you?`:` Hello ${e}! What can I do for you today?`}getTrackingSuggestions(){return this.context.trackingSuggestions}hasTrackingHistory(){return this.context.recentTrackingIds.length>0}getRecentTrackingIds(){return this.context.recentTrackingIds}getContext(){return{...this.context}}getCustomerName(){return this.context.customerName}async endSession(){try{return await this.sessionService.endSession(),this.resetContext(),!0}catch(e){return console.error("Error ending session:",e),!1}}resetContext(){this.context={customerName:null,recentTrackingIds:[],conversationHistory:[],trackingSuggestions:[],lastInteraction:null,messageCount:0}}}let vm=null;const CC=()=>(vm||(vm=new X2),vm),An={...xC?.INTENTS||{},TRACK_BY_ID:"track_by_id",TRACK_BY_NAME:"track_by_name",NAVIGATE_TO_TRACKING:"navigate_to_tracking",FOLLOW_UP_TRACKING:"follow_up_tracking",STATUS_INQUIRY:"status_inquiry",LOCATION_INQUIRY:"location_inquiry",DELIVERY_TIME_INQUIRY:"delivery_time_inquiry",TRACK_COURIER:"track_courier",TRACK_COURIER_AUTONOMOUS:"track_courier_autonomous"},ml={TRACKING_ID:{patterns:[/\b[A-Z]{2,}-\d{10,}-[A-Z]{3,}\b/gi,/\b[A-Z]{2,}-\d{8,}-[A-Z]{3,}\b/gi,/\b[A-Z]{3,}\d{6,}[A-Z]{2,}\b/gi,/\b\d{10,}\b/g,/\b[A-Z0-9]{8,}-\d{4,}\b/gi,/\bSWIFT-[\w-]+\b/gi,/\btrack\s+(?:this\s+)?(?:item|package|shipment|cargo|parcel)\s+(?:swift\s+)?([A-Z0-9-]+)\b/gi,/\btrack\s+(?:this\s+)?(?:item|package|shipment|cargo|parcel)\s+([A-Z0-9-]+)\b/gi,/\btrack\s+(?:this\s+)?(?:item|package|shipment|cargo|parcel)\s+swift\s+([A-Z0-9-]+)\b/gi]},PACKAGE_STATUS:{patterns:[/\b(delivered|out for delivery|in transit|pending|pickup|failed|returned)\b/gi,/\b(package|shipment|delivery|cargo|parcel)\s+(status|location|where|when)\b/gi]},COURIER_KEYWORDS:{patterns:[/\b(courier|delivery agent|rider|driver|logistics partner)\b/gi,/\b(track.*courier|courier.*track)\b/gi,/\btrack\s+(?:this\s+)?courier\b/gi,/\btrack\s+courier\b/gi,/\bcourier\s+tracking\b/gi,/\btrack\s+(?:this\s+)?(?:delivery\s+)?(?:agent|rider|driver)\b/gi]},PACKAGE_KEYWORDS:{patterns:[/\b(track.*package|package.*track|my package|track shipment|track cargo)\b/gi,/\b(parcel|shipment|cargo|goods|items?)\b/gi]},LOCATION_ENTITIES:{patterns:[/\b(at|in|near|around)\s+([a-z\s]+?)(?:\s+(?:office|hub|facility|location|center))/gi,/\b(address|location|place|where)\s+(is|are)\s+([a-z\s]+)/gi]},TIME_EXPRESSIONS:{patterns:[/\b(today|tomorrow|yesterday|now|current|latest|recent|soon|asap|immediately)\b/gi,/\b(\d{1,2}\s*(?:am|pm|o'clock))\b/gi,/\b(\d{1,2}:\d{2}\s*(?:am|pm)?)\b/gi]},CUSTOMER_NAMES:{patterns:[/\b(my|i'm|for)\s+([a-z]+(?:\s+[a-z]+)?)\s+(package|shipment|delivery)/gi,/\b([A-Z][a-z]+\s+[A-Z][a-z]+)'s\s+(package|shipment|delivery)/gi]}};class J2{constructor(){this.context=$2(),this.customerContext=CC(),this.confidenceThreshold=.6,this.entityCache=new Map}async processMessage(e,t=null){const s=e.toLowerCase().trim(),a=this.extractEntities(s),u=this.detectEnhancedIntent(s,a),d=this.applyConversationContext(u,a),g=this.checkTrackingHistory(s),v=await this.generateAutonomousActions(d,a,t);this.updateConversationContext(e,d,a);try{await this.customerContext.updateContextWithMessage(e,"customer")}catch(_){console.warn("Failed to save context:",_)}return{...d,entities:a,actions:v,trackingSuggestions:g,timestamp:Date.now(),userId:t}}extractEntities(e){const t={trackingIds:[],statusKeywords:[],locations:[],timeExpressions:[],customerNames:[],hasTrackingPhrase:!1,hasCourierKeyword:!1,hasPackageKeyword:!1,confidence:{}};return["track","tracking","where is","locate","find","trace","monitor","follow","status","shipment","package","cargo","delivery","check","have you","can you","help me","please","need to","want to","arrive","arrived"].some(u=>e.includes(u))&&(t.hasTrackingPhrase=!0),ml.COURIER_KEYWORDS.patterns.forEach(u=>{u.test(e)&&(t.hasCourierKeyword=!0,t.confidence.courier=.9)}),ml.PACKAGE_KEYWORDS.patterns.forEach(u=>{u.test(e)&&(t.hasPackageKeyword=!0,t.confidence.package=.9)}),ml.TRACKING_ID.patterns.forEach(u=>{const d=e.match(u);if(d){const g=d.map(v=>v.trim()).filter(v=>v.length>0);t.trackingIds.push(...g),t.confidence.trackingIds=.95}}),ml.PACKAGE_STATUS.patterns.forEach(u=>{const d=e.match(u);d&&(t.statusKeywords.push(...d.map(g=>g.toLowerCase())),t.confidence.statusKeywords=.8)}),ml.LOCATION_ENTITIES.patterns.forEach(u=>{const d=e.match(u);d&&(t.locations.push(...d),t.confidence.locations=.7)}),ml.TIME_EXPRESSIONS.patterns.forEach(u=>{const d=e.match(u);d&&(t.timeExpressions.push(...d),t.confidence.timeExpressions=.8)}),ml.CUSTOMER_NAMES.patterns.forEach(u=>{const d=e.match(u);d&&(t.customerNames.push(...d),t.confidence.customerNames=.6)}),t}detectEnhancedIntent(e,t){const s=xC(e);let a=s.intent,u=s.confidence,d=s.shouldNavigate;const g=/\btrack\s+(?:this\s+)?(?:item|package|shipment|cargo|parcel)\s+(?:swift\s+)?([A-Z0-9-]+)\b/gi.test(e),v=/\btrack\s+(?:this\s+)?(?:package|shipment|cargo|parcel)\s+swift\s+([A-Z0-9-]+)\b/gi.test(e),_=/\btrack\s+(?:this\s+)?courier\b/gi.test(e)||/\btrack\s+courier\b/gi.test(e);return t.hasCourierKeyword||_?(a=An.TRACK_COURIER_AUTONOMOUS,u=.99,d=!1):g||v?(a=An.TRACK_BY_ID,u=.99,d=!0):t.hasCourierKeyword&&t.hasTrackingPhrase?(a=An.TRACK_COURIER_AUTONOMOUS,u=.98,d=!1):t.hasCourierKeyword&&e.toLowerCase().includes("track")?(a=An.TRACK_COURIER,u=.95,d=!1):t.trackingIds.length>0&&t.hasTrackingPhrase&&!t.hasCourierKeyword?(a=An.TRACK_BY_ID,u=.99,d=!0):t.trackingIds.length>0&&!t.hasCourierKeyword?(a=An.TRACK_BY_ID,u=.98,d=!0):s.intent===An.NAVIGATE_TRACK&&t.hasTrackingPhrase?(a=An.NAVIGATE_TO_TRACKING,u=Math.max(s.confidence,.9),d=!0):t.hasTrackingPhrase&&!s.shouldNavigate?(a=An.NAVIGATE_TO_TRACKING,u=.88,d=!0):t.customerNames.length>0&&(e.includes("track")||e.includes("where")||e.includes("status"))?(a=An.TRACK_BY_NAME,u=.85,d=!0):t.statusKeywords.length>0&&(e.includes("what")||e.includes("current"))?(a=An.STATUS_INQUIRY,u=.8):e.includes("where")&&t.trackingIds.length===0?(a=An.LOCATION_INQUIRY,u=.75):e.includes("when")&&(e.includes("deliver")||e.includes("arrive"))&&(a=An.DELIVERY_TIME_INQUIRY,u=.8),this.context.getMessageHistory().slice(-3).some(I=>I.intent?.includes("track")||I.intent?.includes("navigate_track"))&&(e.includes("again")||e.includes("also")||e.includes("another"))&&(a=An.FOLLOW_UP_TRACKING,u=.9),{intent:a,confidence:u,shouldNavigate:d,originalIntent:s.intent,entities:t}}checkTrackingHistory(e){try{const t=this.customerContext.getContext(),s=t.trackingSuggestions||[];if(s.length===0)return[];if(!["track","where","status","delivery","package","shipment"].some(v=>e.includes(v)))return[];const d=t.recentTrackingIds||[];return s.filter(v=>d.includes(v.trackingId)).slice(0,3).map(v=>({trackingId:v.trackingId,status:v.status,lastTracked:v.lastTracked,confidence:.9}))}catch(t){return console.warn("Error checking tracking history:",t),[]}}applyConversationContext(e,t){const s=this.context.getContext(),a={...e};if(s.currentIntent?.includes("track")&&t.trackingIds.length===0&&t.customerNames.length===0&&(a.contextualTracking=!0,a.confidence=Math.max(a.confidence,.7)),s.lastMessages?.length>0){const u=s.lastMessages.find(d=>d.metadata?.trackingId||d.metadata?.trackingData);u&&(a.recentTrackingContext={trackingId:u.metadata?.trackingId,timestamp:u.timestamp})}return a}async generateAutonomousActions(e,t,s){const a=[];if(e.intent===An.TRACK_COURIER_AUTONOMOUS){const u=message.match(/\b([A-Z0-9-]{8,})\b/gi),d=u?u[1]:null;a.push({type:"TRACK_COURIER_AUTONOMOUS",trackingIds:d?[d]:t.trackingIds,openNewTab:!0,message:d?` Opening courier tracking for ${d} in new tab...`:" Opening courier tracking page..."})}else if(e.intent===An.TRACK_COURIER)a.push({type:"NAVIGATE_TO_COURIER_TRACKING",route:"/courier-tracking",openNewTab:!0,message:" Opening courier tracking page in new tab..."});else if(e.intent===An.TRACK_BY_ID&&t.trackingIds.length>0){const u=message.match(/\btrack\s+(?:this\s+)?(?:item|package|shipment|cargo|parcel)\s+(?:swift\s+)?([A-Z0-9-]+)\b/gi),d=u?u[1]:t.trackingIds[0];a.push({type:"AUTONOMOUS_TRACKING",trackingIds:[d],navigateToTracking:!0,autoFillForm:!0,executeTracking:!0,message:` Tracking package ${d} automatically...`})}return e.shouldNavigate&&e.intent.includes("track")&&!e.intent.includes("courier")&&a.push({type:"NAVIGATE_TO_TRACKING",route:"/tracking",highlightSection:!0,autoFocus:!0}),e.contextualTracking&&e.recentTrackingContext&&a.push({type:"CONTEXTUAL_TRACKING_REFRESH",trackingId:e.recentTrackingContext.trackingId,showMessage:"Checking for updates on your recent package..."}),t.trackingIds.length>0&&!e.intent.includes("courier")&&a.push({type:"AUTO_FILL_TRACKING_FORM",trackingId:t.trackingIds[0],triggerSearch:!0}),a}updateConversationContext(e,t,s){const a={entities:s,confidence:t.confidence,trackingId:s.trackingIds[0]||null,trackingData:s.trackingIds.length>0?{requested:!0}:null};this.context.addMessage(e,t.intent,a),s.trackingIds.length>0&&(this.context.setContextData("lastTrackingId",s.trackingIds[0]),this.context.setContextData("lastTrackingRequest",Date.now()))}async saveConversationToStorage(e){try{const t={history:this.context.getMessageHistory(),contextData:this.context.context,timestamp:Date.now(),userId:e};return localStorage.setItem(`swift_chat_${e}`,JSON.stringify(t)),!0}catch(t){return console.error("Failed to save conversation context:",t),!1}}async loadConversationFromStorage(e){try{const t=localStorage.getItem(`swift_chat_${e}`);if(t){const s=JSON.parse(t);return s.history.forEach(a=>{this.context.addMessage(a.message,a.intent,a.metadata)}),Object.entries(s.contextData||{}).forEach(([a,u])=>{this.context.setContextData(a,u)}),!0}}catch(t){console.error("Failed to load conversation context:",t)}return!1}getFollowUpSuggestions(e){return{[An.TRACK_BY_ID]:["Show me delivery details","When will it arrive?","Track another package"],[An.NAVIGATE_TO_TRACKING]:["Enter tracking ID","Track by name","Help with tracking"],[An.STATUS_INQUIRY]:["Show location on map","Contact support","Track another package"],[An.FOLLOW_UP_TRACKING]:["Check another package","Set delivery alerts","Contact courier"]}[e]||["Track a package","Check delivery status","Contact support"]}}let ym=null;const eD=()=>(ym||(ym=new J2),ym);if(!document.querySelector("style[data-highlight-section]")){const n=document.createElement("style");n.setAttribute("data-highlight-section","true"),n.textContent=`
    @keyframes highlight-pulse {
      0% {
        background-color: rgba(79, 70, 229, 0.1);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7);
      }
      50% {
        box-shadow: 0 0 0 15px rgba(79, 70, 229, 0);
      }
      100% {
        background-color: rgba(79, 70, 229, 0);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
      }
    }
    
    .highlight-section {
      animation: highlight-pulse 1s ease-out !important;
    }
  `,document.head.appendChild(n)}class tD{constructor(){this.isExecuting=!1,this.executionQueue=[],this.trackingComponentRef=null,this.appNavigationRef=null}setTrackingComponentRef(e){this.trackingComponentRef=e}setAppNavigationRef(e){this.appNavigationRef=e}async executeActions(e,t=null){if(this.isExecuting)return this.executionQueue.push({actions:e,userId:t}),{queued:!0,message:"Actions queued for execution"};this.isExecuting=!0;const s=[];try{for(const a of e){const u=await this.executeSingleAction(a,t);s.push(u),await new Promise(d=>setTimeout(d,300))}}catch(a){console.error("Error executing autonomous actions:",a),s.push({success:!1,error:a.message})}finally{if(this.isExecuting=!1,this.executionQueue.length>0){const a=this.executionQueue.shift();setTimeout(()=>this.executeActions(a.actions,a.userId),100)}}return{executed:!0,results:s}}async executeSingleAction(e,t){switch(e.type){case"AUTONOMOUS_TRACKING":return await this.executeAutonomousTracking(e);case"NAVIGATE_TO_TRACKING":return await this.executeNavigationToTracking(e);case"AUTO_FILL_TRACKING_FORM":return await this.autoFillTrackingForm(e);case"CONTEXTUAL_TRACKING_REFRESH":return await this.executeContextualTrackingRefresh(e);default:return{success:!1,error:`Unknown action type: ${e.type}`}}}async executeAutonomousTracking(e){const{trackingIds:t,navigateToTracking:s,autoFillForm:a,executeTracking:u}=e,d=t[0];try{return console.log(` Starting autonomous tracking for ${d}`),s&&(console.log(" Step 1: Navigating to tracking page..."),await this.navigateToTrackingPage(),console.log(" Step 1 complete: Navigation successful")),a&&(console.log(" Step 2: Auto-filling tracking form..."),await this.fillTrackingForm(d),console.log(" Step 2 complete: Form filled")),u&&(console.log(" Step 3: Triggering tracking search..."),await this.triggerTrackingSearch(d),console.log(" Step 3 complete: Search triggered")),this.emitTrackingEvent("autonomous_tracking_started",{trackingId:d,source:"chatbot"}),console.log(` Autonomous tracking completed for ${d}`),{success:!0,trackingId:d,message:` Tracking package ${d} automatically...`,actions:["navigation","form_fill","search_triggered"].filter(Boolean)}}catch(g){return console.error(" Autonomous tracking error:",g),{success:!1,error:g.message,trackingId:d}}}async executeNavigationToTracking(e){const{route:t,highlightSection:s,autoFocus:a}=e;try{return this.appNavigationRef&&this.appNavigationRef.navigate?await this.appNavigationRef.navigate(t):window.location.hash=t,s&&setTimeout(()=>{const u=document.getElementById("tracking")||document.querySelector("[data-tracking-section]")||document.querySelector(".tracking-container");u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.classList.add("chatbot-highlight"),setTimeout(()=>{u.classList.remove("chatbot-highlight")},3e3))},500),a&&setTimeout(()=>{const u=document.querySelector('input[placeholder*="tracking"]')||document.querySelector("#tracking-input")||document.querySelector('input[name="trackingId"]');u&&(u.focus(),u.select())},800),{success:!0,route:t,message:" Navigated to tracking page"}}catch(u){return console.error("Navigation error:",u),{success:!1,error:u.message,route:t}}}async autoFillTrackingForm(e){const{trackingId:t,triggerSearch:s}=e;try{console.log(` Auto-filling tracking form with ID: ${t}`);const a=['input[placeholder*="tracking"]','input[placeholder*="Tracking"]','input[id*="tracking"]','input[name*="tracking"]','input[id="trackingIdInput"]','input[name="trackingId"]',"#tracking-input","#trackingIdInput",'input[type="text"]:not([readonly])','input:not([type="hidden"]):not([readonly])'];let u=null;for(const d of a)if(u=document.querySelector(d),u){console.log(` Found tracking input: ${d}`);break}if(!u)throw new Error("Tracking input field not found");u.focus(),u.select(),u.value="";for(let d=0;d<t.length;d++)u.value+=t[d],u.dispatchEvent(new Event("input",{bubbles:!0})),await new Promise(g=>setTimeout(g,50));return u.dispatchEvent(new Event("change",{bubbles:!0})),u.classList.add("autofilled","chatbot-highlight"),u.style.backgroundColor="#e0f2fe",u.style.borderColor="#3b82f6",setTimeout(()=>{u.classList.remove("autofilled"),u.style.backgroundColor="",u.style.borderColor=""},3e3),s&&(await new Promise(d=>setTimeout(d,500)),await this.triggerTrackingSearch(t)),{success:!0,trackingId:t,message:` Tracking ID ${t} filled automatically`}}catch(a){return console.error(" Auto-fill error:",a),{success:!1,error:a.message,trackingId:t}}}async executeContextualTrackingRefresh(e){const{trackingId:t,showMessage:s}=e;try{return s&&this.emitTrackingEvent("contextual_message",{message:s,trackingId:t}),await this.navigateToTrackingPage(),await this.fillTrackingForm(t),await this.triggerTrackingSearch(t),{success:!0,trackingId:t,message:` Refreshed tracking information for ${t}`}}catch(a){return console.error("Contextual tracking refresh error:",a),{success:!1,error:a.message,trackingId:t}}}async executeTrackCourierAutonomous(e){const{trackingIds:t,openNewTab:s,message:a}=e,u=t&&t.length>0?t[0]:null;try{console.log(` Starting autonomous courier tracking for ${u}`);const d=this.getCourierTrackingUrl(u);return a&&this.emitTrackingEvent("courier_message",{message:a,trackingId:u,source:"chatbot"}),s?(window.open(d,"_blank"),console.log(" Opened courier tracking in new tab")):window.location.href=d,this.emitTrackingEvent("courier_tracking_started",{trackingId:u,source:"chatbot",newTab:s}),console.log(` Courier tracking initiated for ${u}`),{success:!0,trackingId:u,message:a||" Opening courier tracking in new tab...",newTab:s,url:d}}catch(d){return console.error(" Courier tracking error:",d),{success:!1,error:d.message,trackingId:u}}}async executeNavigateToCourierTracking(e){const{route:t,openNewTab:s}=e;try{const a=this.getCourierTrackingUrl();return s?(window.open(a,"_blank"),console.log(" Opened courier tracking in new tab")):window.location.href=a,{success:!0,route:t,message:" Navigated to courier tracking page",newTab:s}}catch(a){return console.error("Courier tracking navigation error:",a),{success:!1,error:a.message,route:t}}}getCourierTrackingUrl(e){const t=window.location.origin;return e?`${t}/courier-tracking.html?trackingId=${encodeURIComponent(e)}`:`${t}/courier-tracking.html`}async navigateToTrackingPage(){if((window.location.pathname||window.location.hash).includes("tracking"))return console.log(" Already on tracking page"),await new Promise(a=>setTimeout(a,300)),!0;console.log(" Navigating to tracking page"),this.appNavigationRef&&this.appNavigationRef.navigate?await this.appNavigationRef.navigate("/tracking"):window.location.hash="#/tracking";let t=0;const s=10;for(;t<s;){if(document.querySelector('input[placeholder*="tracking"]')||document.querySelector("#tracking-input")||document.querySelector('input[name="trackingId"]'))return console.log(" Tracking input found"),!0;t++,await new Promise(u=>setTimeout(u,200))}return console.warn(" Tracking input not found after multiple attempts"),!1}async triggerTrackingSearch(e){console.log(` Triggering tracking search for ${e}`);const t=['button[type="submit"]','button[onclick*="track"]','button:contains("Track")','button:contains("Track Shipment")','button:contains("track")',".track-btn","#trackButton",'button[data-action="track"]'];let s=null;for(const v of t)if(s=document.querySelector(v),s&&!s.disabled){console.log(` Found search button: ${v}`);break}if(s)return console.log(" Clicking search button"),s.click(),await new Promise(v=>setTimeout(v,800)),!0;const a=['form[id="trackingForm"]','form[action*="track"]',"form","#trackingForm"];let u=null;for(const v of a)if(u=document.querySelector(v),u){console.log(` Found form: ${v}`);break}if(u){console.log(" Submitting form directly");const v=new Event("submit",{bubbles:!0,cancelable:!0});return u.dispatchEvent(v),await new Promise(_=>setTimeout(_,800)),!0}const d=['input[placeholder*="tracking"]','input[id="trackingIdInput"]','input[name="trackingId"]',"#tracking-input",'input[type="text"]'];let g=null;for(const v of d)if(g=document.querySelector(v),g&&g.value.includes(e)){console.log(` Found input: ${v}`);break}if(g){console.log(" Pressing Enter on input");const v=["keydown","keypress","keyup"];for(const _ of v)g.dispatchEvent(new KeyboardEvent(_,{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,composed:!0,cancelable:!0}));return await new Promise(_=>setTimeout(_,800)),!0}return console.warn(" Could not find tracking button or form"),!1}emitTrackingEvent(e,t){const s=new CustomEvent(`swiftbot_${e}`,{detail:t,bubbles:!0,cancelable:!0});document.dispatchEvent(s)}}const nD=()=>new tD;class iD{constructor(){this.emailRegex=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,this.phoneRegex=/(?:\+\d{1,3}[-.\s]?)?\(?(\d{1,4})\)?[-.\s]?(\d{1,4})[-.\s]?(\d{1,9})/g,this.dateRegex=/(\d{1,2}[-\/]\d{1,2}[-\/]\d{2,4}|\d{4}[-\/]\d{1,2}[-\/]\d{1,2}|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\.?\s+\d{1,2}[,\s]+\d{4})/gi,this.cityCountryRegex=/(?:to|in|from|at|city|country)[\s:]+([A-Z][a-z]+(?:\s[A-Z][a-z]+)*)/g,this.numberRegex=/(\b(?:package|packages|item|items|box|boxes|parcel|parcels)\s*:?\s*(\d+)|\d+\s*(?:package|packages|item|items|box|boxes|parcel|parcels)\b)/gi}extractEmails(e){const t=[];let s;for(;(s=this.emailRegex.exec(e))!==null;)t.push({value:s[0],type:"email",position:s.index,confidence:.95});return this.emailRegex.lastIndex=0,t}extractPhoneNumbers(e){const t=[];let s;for(;(s=this.phoneRegex.exec(e))!==null;){const a=s[0];t.push({value:a.replace(/[^\d+]/g,""),original:a,type:"phone",position:s.index,confidence:.85})}return this.phoneRegex.lastIndex=0,t}extractDates(e){const t=[];let s;for(;(s=this.dateRegex.exec(e))!==null;)t.push({value:s[0],type:"date",position:s.index,confidence:.88,parsedDate:this.parseDate(s[0])});return this.dateRegex.lastIndex=0,t}parseDate(e){try{const t=new Date(e);if(!isNaN(t.getTime()))return t}catch{return null}return null}extractNames(e){const t=[],s=e.match(/\b[A-Z][a-z]+(?:\s[A-Z][a-z]+)?\b/g)||[],a=new Set(["Swift","Delivery","Package","Tracking","Order","Status","Please","Thank","Hi","Hello","SMS","Mr","Mrs","Ms","Dr","Prof"]);for(const u of s)!a.has(u)&&u.length>2&&t.push({value:u,type:"name",confidence:.72});return t}extractDestinations(e){const t=[],s=e.toLowerCase(),a=["to ","in ","delivering to ","going to ","heading to ","destination ","address ","location "];for(const u of a){const d=s.indexOf(u);if(d!==-1){const v=e.substring(d+u.length).split(/[,.\n]/)[0].trim();v.length>2&&!this.isCommonWord(v)&&t.push({value:v,type:"destination",keyword:u.trim(),confidence:.8})}}return t}extractPackageCount(e){const t=[];let s;const a=/(\d+)\s*(?:package|packages|item|items|box|boxes|parcel|parcels)/gi;for(;(s=a.exec(e))!==null;)t.push({value:parseInt(s[1]),unit:s[2],type:"package_count",original:s[0],confidence:.92});const u={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10};for(const[d,g]of Object.entries(u))new RegExp(`\\b${d}\\s+(?:package|packages|item|items|box|boxes|parcel|parcels)\\b`,"gi").test(e)&&t.push({value:g,type:"package_count",original:`${d} packages`,confidence:.85});return t}isCommonWord(e){return new Set(["the","a","and","or","but","is","are","be","been","that","this","from","to","of","in","for","with","please","thank","hello","hi","yes","no","ok","okay","package","tracking","order","delivery","swift"]).has(e.toLowerCase())}extractAllEntities(e){return{emails:this.extractEmails(e),phoneNumbers:this.extractPhoneNumbers(e),dates:this.extractDates(e),names:this.extractNames(e),destinations:this.extractDestinations(e),packageCounts:this.extractPackageCount(e),summary:{hasEmail:this.extractEmails(e).length>0,hasPhone:this.extractPhoneNumbers(e).length>0,hasDate:this.extractDates(e).length>0,hasName:this.extractNames(e).length>0,hasDestination:this.extractDestinations(e).length>0,hasPackageInfo:this.extractPackageCount(e).length>0}}}extractMostReliableEntities(e){const t=this.extractAllEntities(e);return{primaryEmail:t.emails[0]||null,primaryPhone:t.phoneNumbers[0]||null,nearestDate:t.dates[0]||null,likelyName:t.names[0]||null,primaryDestination:t.destinations[0]||null,totalPackages:t.packageCounts.reduce((s,a)=>s+a.value,0)||null,allEntities:t}}}class sD{constructor(){this.positiveWords=new Set(["good","great","excellent","amazing","wonderful","fantastic","awesome","perfect","love","happy","pleased","satisfied","thanks","thank","appreciate","grateful","brilliant","cool","nice","glad","joy","comfortable","helped","working","resolved","fixed","solved","quick","fast","efficient","smooth","easy","simple","best","better","improving","improved"]),this.negativeWords=new Set(["bad","terrible","awful","horrible","useless","hate","angry","frustrated","annoyed","upset","disappointed","confused","lost","broken","failed","error","problem","issue","complaint","complain","worst","waste","rubbish","garbage","unacceptable","ridiculous","pathetic","pathetic","scam","fraud","angry","furious","disgusted","sick","tired","fed up"]),this.angryWords=new Set(["angry","furious","rage","outrage","infuriated","livid","enraged","mad","irate","hostile","aggressive","demanding","urgent","immediately","now","asap","ridiculous","unacceptable","unbelievable","absolutely not"]),this.frustratedWords=new Set(["frustrated","frustration","annoyed","irritated","bothered","upset","exasperated","fed up","tired","sick of","over it","enough","again","still","repeatedly","keep","keeps","always","never","impossible"]),this.happyWords=new Set(["happy","happy","joy","joyful","excited","thrilled","delighted","pleased","satisfied","content","cheerful","upbeat","positive","wonderful","fantastic","great","amazing","love","can't wait","looking forward","excellent","brilliant"]),this.confusedWords=new Set(["confused","confusion","unclear","don't understand","not sure","confused about","lost","uncertain","bewildered","puzzled","question","what","why","how","explain","clarify","understand","help","not clear","complicated"]),this.intensifiers=new Set(["very","extremely","absolutely","definitely","certainly","really","quite","so","too","much","deeply","highly","incredibly","terribly","awfully","strongly","particularly","especially"]),this.negations=new Set(["not","no","never","neither","nobody","nothing","nowhere","don't","doesn't","didn't","won't","wouldn't","can't","couldn't","shouldn't"])}analyzeSentiment(e){if(!e||typeof e!="string")return this.getNeutralSentiment();const s=e.toLowerCase().split(/\s+/),a={anger:this.calculateEmotionScore(s,this.angryWords),frustration:this.calculateEmotionScore(s,this.frustratedWords),happiness:this.calculateEmotionScore(s,this.happyWords),confusion:this.calculateEmotionScore(s,this.confusedWords)},u=this.calculateScore(s,this.positiveWords),d=this.calculateScore(s,this.negativeWords),g=u-d,v=u+d;return{primary:this.determinePrimarySentiment(g,a,v),confidence:Math.min(v*.3+.5,.99),score:g,emotionScores:a,positiveScore:u,negativeScore:d,emotions:this.detectDominantEmotions(a),analysis:{keyPhrases:this.extractKeyPhrases(e),negativeIndicators:this.findIndicators(s,this.negativeWords),positiveIndicators:this.findIndicators(s,this.positiveWords),sentimentReason:this.generateSentimentReason(g,a,e)}}}calculateScore(e,t){let s=0,a=!1;for(let u=0;u<e.length;u++){const d=e[u].replace(/[^a-zA-Z]/g,"");if(t.has(d)){let g=1;u>0&&this.intensifiers.has(e[u-1].replace(/[^a-zA-Z]/g,""))&&(g=1.5),u>0&&this.negations.has(e[u-1].replace(/[^a-zA-Z]/g,""))&&(g=-.5),s+=g,a=!0}}return a?s:0}calculateEmotionScore(e,t){let s=0;for(let a=0;a<e.length;a++){const u=e[a].replace(/[^a-zA-Z]/g,"");if(t.has(u)){let d=1;a>0&&this.intensifiers.has(e[a-1].replace(/[^a-zA-Z]/g,""))&&(d=1.5),s+=d}}return Math.min(s/2,1)}determinePrimarySentiment(e,t,s){return t.anger>.6?"very_negative":t.frustration>.6?"negative":t.confusion>.5?"neutral":t.happiness>.6||e>2?"very_positive":e>.5?"positive":e<-2?"very_negative":e<-.5?"negative":"neutral"}detectDominantEmotions(e){const t=[],s=Object.entries(e).sort(([,a],[,u])=>u-a).slice(0,2);for(const[a,u]of s)u>.3&&t.push({emotion:a,score:Math.round(u*100)});return t.length>0?t:[{emotion:"neutral",score:50}]}extractKeyPhrases(e){const t=[],s=/[^.!?]+[.!?]+/g,a=e.match(s)||[];for(const u of a.slice(0,3)){const d=u.trim();d.length>5&&t.push(d)}return t}findIndicators(e,t){const s=[];for(const a of e){const u=a.replace(/[^a-zA-Z]/g,"");t.has(u)&&s.push(u)}return[...new Set(s)]}generateSentimentReason(e,t,s){return t.anger>.6?"Customer shows signs of anger - immediate attention recommended":t.frustration>.5?"Customer appears frustrated - consider escalation or immediate resolution":t.confusion>.5?"Customer seems confused - clarification or detailed explanation needed":t.happiness>.6?"Customer is satisfied and happy":e>1?"Overall positive sentiment detected":e<-1?"Overall negative sentiment detected":"Neutral sentiment - standard customer interaction"}getNeutralSentiment(){return{primary:"neutral",confidence:.5,score:0,emotionScores:{anger:0,frustration:0,happiness:0,confusion:0},emotions:[{emotion:"neutral",score:50}],analysis:{keyPhrases:[],negativeIndicators:[],positiveIndicators:[],sentimentReason:"Insufficient data for sentiment analysis"}}}shouldEscalate(e){return e.primary==="very_negative"||e.emotionScores.anger>.7||e.emotionScores.frustration>.8}shouldShowProactive(e){return e.primary==="negative"||e.emotionScores.confusion>.5}generateProactiveMessage(e,t={}){return e.emotionScores.anger>.6?" I sense you're frustrated. I'm here to help resolve this immediately. What can I do for you?":e.emotionScores.confusion>.5?" Let me clarify that for you. What specifically would you like help with?":e.primary==="negative"?" I'm sorry to hear you're having issues. Let me help you get this resolved.":e.emotionScores.happiness>.5?" Glad I could help! Is there anything else I can assist with?":null}}const mo="http://localhost:5000/api";class rD{constructor(e){this.authService=e,this.localCache={userProfile:null,sentimentHistory:[],entityCache:{},lastUpdate:null},this.syncInterval=300*1e3,this.startAutoSync()}async initialize(e,t){try{const s=await this.authService.getIdToken?.()||"dummy-token",a=await fetch(`${mo}/memory/profile/${e}`,{headers:{Authorization:`Bearer ${s}`}});if(a.ok){const u=await a.json();return this.localCache.userProfile=u.profile||u,this.localCache.lastUpdate=new Date,console.log(" Advanced memory initialized:",this.localCache.userProfile),u.profile||u}return null}catch(s){return console.error("Failed to initialize advanced memory:",s),null}}async recordInteraction(e,t,s,a){try{const u=await this.authService.getIdToken?.()||"dummy-token",d=await this.authService.getCurrentUserId?.()||"anonymous",g=await this.authService.getCurrentUserEmail?.()||"unknown@example.com",v={sessionId:e,userId:d,email:g,messageContent:t.text,timestamp:new Date,entities:s,sentiment:a,intent:t.intent,messageId:t.id},_=await fetch(`${mo}/memory/interaction/record`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify(v)});if(_.ok){const E=await _.json();return await this.updateLocalCache(E.profile||E),E}return null}catch(u){return console.error("Failed to record interaction:",u),null}}async updateLocalCache(e){this.localCache.userProfile=e,this.localCache.lastUpdate=new Date,e.sentimentHistory&&(this.localCache.sentimentHistory=e.sentimentHistory)}async recordSentiment(e,t,s,a){try{const u=await this.authService.getIdToken?.()||"dummy-token",d={userId:e,sessionId:t,messageId:s,sentiment:{primary:a.primary,confidence:a.confidence,emotions:a.emotions,emotionScores:a.emotionScores},triggerContext:{messageContent:a.messageContent,intent:a.intent,previousSentiment:this.getPreviousSentiment()},analysis:a.analysis,timestamp:new Date},g=await fetch(`${mo}/memory/sentiment/record`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify(d)});return g.ok?(this.localCache.sentimentHistory.push(d),await g.json()):null}catch(u){return console.error("Failed to record sentiment:",u),null}}getPreviousSentiment(){return this.localCache.sentimentHistory.length>0?this.localCache.sentimentHistory[this.localCache.sentimentHistory.length-1].sentiment.primary:"neutral"}async enrichUserProfile(e,t){try{const s=await this.authService.getIdToken?.()||"dummy-token",a={userId:e,entities:{emails:t.emails||[],phoneNumbers:t.phoneNumbers||[],destinations:t.destinations||[],names:t.names||[],packageCounts:t.packageCounts||[]},timestamp:new Date},u=await fetch(`${mo}/memory/profile/enrich`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(u.ok){const d=await u.json();return await this.updateLocalCache(d.profile||d),d}return null}catch(s){return console.error("Failed to enrich user profile:",s),null}}async getPersonalizationContext(e){try{if(this.localCache.userProfile&&this.localCache.lastUpdate&&Date.now()-this.localCache.lastUpdate.getTime()<6e4)return this.localCache.userProfile;const t=await this.authService.getIdToken?.()||"dummy-token",s=await fetch(`${mo}/memory/context/personalization/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const a=await s.json();return this.localCache.userProfile=a,this.localCache.lastUpdate=new Date,a}return this.localCache.userProfile}catch(t){return console.error("Failed to get personalization context:",t),this.localCache.userProfile}}async getSentimentTrend(e,t=30){try{const s=await this.authService.getIdToken?.()||"dummy-token",a=await fetch(`${mo}/memory/sentiment/trend/${e}?days=${t}`,{headers:{Authorization:`Bearer ${s}`}});return a.ok?await a.json():null}catch(s){return console.error("Failed to get sentiment trend:",s),null}}async getSuccessfulResolutions(e){try{const t=await this.authService.getIdToken?.()||"dummy-token",s=await fetch(`${mo}/memory/resolutions/successful/${e}`,{headers:{Authorization:`Bearer ${t}`}});return s.ok?await s.json():null}catch(t){return console.error("Failed to get successful resolutions:",t),null}}async recordResolution(e,t,s,a){try{const u=await this.authService.getIdToken?.()||"dummy-token",d={userId:e,issue:t,resolutionMethod:s,sentiment:a.primary,timestamp:new Date},g=await fetch(`${mo}/memory/resolution/record`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify(d)});return g.ok?await g.json():null}catch(u){return console.error("Failed to record resolution:",u),null}}async updateBehaviorPattern(e,t,s=!0){try{const a=await this.authService.getIdToken?.()||"dummy-token",u={userId:e,intent:t,success:s,timestamp:new Date},d=await fetch(`${mo}/memory/behavior/update`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(u)});if(d.ok){const g=await d.json();return await this.updateLocalCache(g.profile||g),g}return null}catch(a){return console.error("Failed to update behavior pattern:",a),null}}async getProactiveRecommendations(e){try{const t=await this.getPersonalizationContext(e);if(!t)return null;const s=[];t.behaviorPatterns.trackingFrequency>3&&s.push({type:"tracking_habit",message:"You frequently track shipments. Quick tracking enabled.",action:"enable_quick_tracking"}),t.complaintHistory.complaintTrend==="increasing"&&s.push({type:"escalation_notice",message:"We've noticed an increase in issues. Our support team is ready to help.",action:"offer_support"}),t.sentimentProfile.overallSentiment==="negative"&&s.push({type:"sentiment_recovery",message:"We'd like to improve your experience. Can we help?",action:"offer_resolution"});const a=t.resolutionHistory.successfulResolutions[0];return a&&s.push({type:"pattern_based",message:`Based on your history, we can help with ${a.issue}`,action:"offer_common_solution"}),s}catch(t){return console.error("Failed to get proactive recommendations:",t),[]}}async startAutoSync(){setInterval(async()=>{const e=await this.authService.getCurrentUserId?.();e&&(await this.getPersonalizationContext(e),console.log(" Advanced memory auto-synced"))},this.syncInterval)}getLocalCache(){return this.localCache}clearLocalCache(){this.localCache={userProfile:null,sentimentHistory:[],entityCache:{},lastUpdate:null}}}function oD({status:n}){return!n||n==="sent"?x.jsx("span",{title:"Sent",children:""}):n==="delivered"?x.jsx("span",{title:"Delivered",children:""}):n==="read"?x.jsx("span",{title:"Read",children:""}):null}function aD(){const n=ir.currentUser,e=n?.uid||"anonymous",[t,s]=w.useState([]),[a,u]=w.useState(""),[d,g]=w.useState(!1),[v,_]=w.useState(!0),[E,S]=w.useState(""),[I,O]=w.useState(!1),[D,H]=w.useState([]),[B,te]=w.useState(""),[X,le]=w.useState(""),[oe,ae]=w.useState([]),[re,V]=w.useState(!1),[z,M]=w.useState(!1),q=w.useRef(null),[G,Z]=w.useState([]),[U,Pe]=w.useState("neutral"),ke=w.useMemo(()=>eD(),[]),ie=w.useMemo(()=>nD(),[]),J=w.useMemo(()=>CC(),[]),ee=w.useMemo(()=>new iD,[]),de=w.useMemo(()=>new sD,[]),Q=w.useMemo(()=>new rD(ir),[]),N=w.useMemo(()=>Tl(sr,"threads",e),[sr,e]),F=w.useMemo(()=>xu(sr,"threads",e,"messages"),[sr,e]);w.useEffect(()=>{console.log(" ChatBox mounted, VoiceAssistant should be visible"),(async()=>{if(e!=="anonymous")try{await ke.loadConversationFromStorage(e),await J.initializeContext();const we=J.getCustomerName();te(we);const Re=J.getCustomerGreeting();le(Re);const je=J.getTrackingSuggestions();ae(je),await Q.initialize(e,ir.currentUser?.email),console.log(` Advanced memory initialized for ${we}`),console.log(` Customer context loaded for ${we}`)}catch(we){console.warn("Error loading context:",we)}})()},[e,ke,J,Q]),w.useEffect(()=>{const ce=we=>{const{type:Re,detail:je}=we;if(console.log(` Autonomous event: ${Re}`,je),Re==="swiftbot_autonomous_tracking_started"){const Ie=` **Autonomous Tracking Started**

Tracking ID: ${je.trackingId}
Source: ${je.source}

I'm navigating to tracking page and filling in details for you...`;_l(F,{from:"bot",text:Ie,ts:ns(),status:"sent",metadata:{autonomousAction:!0,trackingId:je.trackingId,eventType:Re}})}};return document.addEventListener("swiftbot_autonomous_tracking_started",ce),document.addEventListener("swiftbot_contextual_message",ce),()=>{document.removeEventListener("swiftbot_autonomous_tracking_started",ce),document.removeEventListener("swiftbot_contextual_message",ce)}},[F]),w.useEffect(()=>{let ce=()=>{},we=!0;return(async()=>{try{const Re=await cy(N);if(!Re.exists())await Zc(N,{userId:e,agentRequested:!1,updatedAt:ns()});else{const Ie=Re.data();we&&g(!!Ie.agentRequested)}const je=kf(F,uy("ts","asc"));ce=Lf(je,async Ie=>{const Me=Ie.docs.map(Je=>({id:Je.id,...Je.data()}));s(Me),q.current&&(q.current.scrollTop=q.current.scrollHeight);const Xe=[];for(const Je of Ie.docs){const it=Je.data();it.from!=="customer"&&(it.status==="sent"&&Xe.push(Wc(Tl(F,Je.id),{status:"delivered"})),it.status!=="read"&&Xe.push(Wc(Tl(F,Je.id),{status:"read"})))}if(Xe.length)for(const Je of Xe)try{await Je}catch(it){console.warn("message status update failed",it)}})}catch(Re){console.error("Chat init failed",Re)}finally{we&&_(!1)}})(),()=>{we=!1;try{ce()}catch{}}},[N,F,e]);const K=async()=>{const ce=a.trim();if(ce){u(""),O(!0),re||(M(!0),setTimeout(()=>M(!1),25e3));try{await _l(F,{from:"customer",text:ce,ts:ns(),status:"sent"}),await Wc(N,{updatedAt:ns()}),re||V(!0);const we=await ke.processMessage(ce,e);console.log(" Enhanced NLU Result:",we);const Re=ee.extractAllEntities(ce);console.log(" Extracted Entities:",Re);const je=de.analyzeSentiment(ce);Pe(je.primary),Z([...G,je]),console.log(" Sentiment Analysis:",je);try{const Me=await J.getSessionId?.();Me&&ir.currentUser&&(await Q.recordInteraction(Me,{text:ce,intent:we.intent,id:Date.now()},Re,je),await Q.recordSentiment(ir.currentUser.uid,Me,Date.now().toString(),{...je,messageContent:ce,intent:we.intent}),await Q.enrichUserProfile(ir.currentUser.uid,Re),console.log(" Advanced memory recorded"))}catch(Me){console.warn("Failed to record in advanced memory:",Me)}if(we.entities?.trackingIds&&we.entities.trackingIds.length>0)for(const Me of we.entities.trackingIds)try{await J.updateTrackingContext(Me,{requestedVia:"chatbot",timestamp:new Date}),console.log(` Tracking history saved for ${Me}`)}catch(Xe){console.warn(`Failed to save tracking history for ${Me}:`,Xe)}if(we.actions&&we.actions.length>0){console.log(" Executing autonomous actions:",we.actions);const Me=await ie.executeActions(we.actions,e);if(H(Me.results),Me.executed){const Xe=Me.results.filter(it=>it.success),Je=Me.results.filter(it=>!it.success);if(Xe.length>0){const it=Xe.map(et=>et.message).join(`
`);await _l(F,{from:"bot",text:` **Autonomous Actions Executed**

${it}`,ts:ns(),status:"sent",metadata:{autonomousActions:!0,results:Me.results}})}if(Je.length>0){const it=Je.map(et=>et.error).join(`
`);await _l(F,{from:"bot",text:` **Some actions failed**

${it}

You can try again or contact support.`,ts:ns(),status:"sent",metadata:{autonomousActions:!0,errors:Je}})}}}let Ie=null;if(we.intent.includes("track")&&we.entities.trackingIds.length>0)Ie=` **Package Tracking Initiated**

I found tracking ID: ${we.entities.trackingIds[0]}

I'm automatically navigating to the tracking page and filling in the details for you.`;else if(we.intent.includes("track")){const Me=oe.length>0?oe.map(Je=>` ${Je.trackingId} - ${Je.status}`).join(`
`):"";Me?Ie=` **Recent Packages**

${Me}

Would you like me to track any of these? Just say the tracking ID or I can navigate you to the tracking page.`:Ie="I can help you track your package! Please provide your tracking ID, or I can navigate you to the tracking page.";const Xe=await ie.executeActions([{type:"NAVIGATE_TO_TRACKING",route:"/tracking",highlightSection:!0,autoFocus:!0}],e)}else if(we.intent.includes("status_inquiry")){const Me=oe.length>0?oe.map(Xe=>` ${Xe.trackingId}`).join(`
`):"";Me?Ie=` **Recent Packages**

${Me}

Which one would you like to check the status for?`:Ie="I can check the status of your package. Please provide your tracking ID or tell me which package you're asking about."}else we.intent.includes("location_inquiry")?Ie="I can help you find your package location. Please provide your tracking ID so I can show you exactly where it is.":we.intent.includes("delivery_time_inquiry")&&(Ie="I can check when your package will arrive. Please provide your tracking ID and I'll get you the latest delivery estimate.");if(!Ie){const Me=ce.toLowerCase();if(["tracking","track my package","where is my package","package status","delivery status","is my package","when will my package"].some(it=>Me.includes(it)))try{const it=await fetch(`http://localhost:5000/api/bot/tracking-suggestions?customerName=${encodeURIComponent(n?.displayName||"Customer")}`);if(it.ok){const et=await it.json();if(Array.isArray(et)&&et.length>0){const En=et[0];Ie=` **Your Package Tracking**

 Tracking ID: ${En.trackingId}
 Status: ${En.status}
 Recipient: ${En.user.fullName}
 Last Updated: ${new Date(En.updatedAt).toLocaleString()}

Location: ${En.location.lat.toFixed(4)}, ${En.location.lng.toFixed(4)}`}}}catch(it){console.warn("Tracking lookup failed:",it)}}if(!Ie){const Me=ce.toLowerCase();if(["speak with agent","speak with human","speak to agent","talk to agent","talk to human","talk with human","human agent","live agent"].some(Je=>Me.includes(Je)))try{await Zc(N,{agentRequested:!0,updatedAt:ns()},{merge:!0}),g(!0),Ie=" I've connected you with our support team. An agent will be with you shortly!"}catch(Je){console.warn("auto-escalation setDoc failed",Je)}}if(!Ie){const Me=ce.toLowerCase().trim();["hello","hi","hey","greetings","good morning","good afternoon","good evening"].some(it=>Me===it||Me.startsWith(it+" "))&&(Ie=`Hello ${n?.displayName||B||"there"}!  How can I help you with your deliveries today?`)}if(!Ie&&de.shouldShowProactive(je)){const Me=de.generateProactiveMessage(je);Me&&(Ie=Me)}if(de.shouldEscalate(je)){console.log(" HIGH SENTIMENT ESCALATION NEEDED");try{await Zc(N,{agentRequested:!0,escalationReason:"high_negative_sentiment",escalationSentiment:je.primary,updatedAt:ns()},{merge:!0}),g(!0),Ie||(Ie=" I'm truly sorry you're experiencing issues. I'm connecting you with our support team immediately so we can resolve this right away.")}catch(Me){console.warn("Escalation setDoc failed:",Me)}}if(!Ie)try{console.log(" Calling AI endpoint with message:",ce);const Me=n?.displayName||B||"Customer",Xe=await fetch("http://localhost:5000/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:ce,userName:Me})});if(console.log(" AI response status:",Xe.status),Xe.ok){const Je=await Xe.json();console.log(" AI response data:",Je),Je.reply&&Je.reply.trim()&&(Ie=Je.reply)}else console.warn(" AI endpoint returned non-ok status:",Xe.status),Ie="I'm experiencing a temporary issue, but I'm here to help. What do you need?"}catch(Me){console.error(" AI chat error:",Me),Ie="I'm temporarily unavailable. Would you like to connect with a human agent?"}Ie||(Ie="I'm here to help! How can I assist you today?"),console.log(" Sending bot response:",Ie),S(Ie),await _l(F,{from:"bot",text:Ie,ts:ns(),status:"sent"});try{await J.updateContextWithMessage(Ie,"bot")}catch(Me){console.warn("Failed to save bot response context:",Me)}await ke.saveConversationToStorage(e)}catch(we){console.error("sendMessage failed",we)}finally{O(!1)}}},se=async()=>{try{await Zc(N,{agentRequested:!0,updatedAt:ns()},{merge:!0}),g(!0)}catch(ce){console.error("request agent failed",ce)}},$=ce=>{u(ce);const we=document.querySelector(".chatbox-input input");we&&we.focus()};return x.jsxs("div",{className:"chatbox-container",style:{border:"1px solid #ddd",borderRadius:8,maxWidth:400,display:"flex",flexDirection:"column"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",padding:8,borderBottom:"1px solid #eee"},children:[x.jsx("strong",{style:{flex:1},children:"Support Chat"}),x.jsx("button",{onClick:se,disabled:d,children:d?"Agent Requested":"Request Human Agent"})]}),x.jsxs("div",{ref:q,className:"chatbox-messages",style:{height:280,overflowY:"auto",padding:12,flex:1},children:[v&&x.jsx("p",{children:"Loading chat"}),!v&&t.length===0&&!re&&x.jsxs("div",{children:[X&&x.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:12},children:x.jsxs("div",{style:{background:"#f0f8ff",padding:"8px 12px",borderRadius:8,maxWidth:"80%"},children:[x.jsx("strong",{children:"SwiftBot"}),x.jsx("div",{style:{fontStyle:"italic",marginTop:4},children:X})]})}),oe.length>0&&x.jsxs("div",{style:{marginTop:12,padding:"8px",background:"#f5f5f5",borderRadius:6},children:[x.jsx("strong",{style:{fontSize:12},children:" Recent Packages:"}),x.jsx("div",{style:{marginTop:6},children:oe.map((ce,we)=>x.jsxs("div",{style:{fontSize:12,padding:"4px 0",color:"#333"},children:[" ",ce.trackingId," - ",ce.status]},we))}),x.jsx("div",{style:{fontSize:11,color:"#666",marginTop:6},children:"Just ask me to track any of these!"})]})]}),t.map(ce=>{const we=ce.meta&&ce.meta.location&&typeof ce.meta.location.lat=="number"&&typeof ce.meta.location.lng=="number",Re=ce.meta&&ce.meta.pkgStatus,je=we?`https://www.google.com/maps?q=${ce.meta.location.lat},${ce.meta.location.lng}`:null;return x.jsxs("div",{className:`chatbox-message ${ce.from==="customer"?"chatbox-user":ce.from==="admin"?"chatbox-admin":"chatbox-bot"}`,style:{display:"flex",flexDirection:"column",alignItems:ce.from==="customer"?"flex-end":"flex-start",marginBottom:8},children:[x.jsxs("div",{style:{background:ce.from==="customer"?"#daf1ff":ce.from==="admin"?"#f4f6ff":"#f9f9f9",padding:"6px 10px",borderRadius:8,maxWidth:"80%",whiteSpace:"pre-wrap",fontStyle:"italic"},children:[x.jsx("strong",{children:ce.from==="customer"?"You":ce.from==="admin"?"Admin":"SwiftBot"}),x.jsx("div",{style:{fontStyle:"italic"},children:ce.text}),Re&&x.jsx("div",{style:{marginTop:6},children:x.jsxs("span",{style:{fontSize:12,color:"#0c5460",background:"#d1ecf1",padding:"2px 6px",borderRadius:6},children:["Status: ",String(ce.meta.pkgStatus).replace("_"," ")]})}),we&&x.jsx("div",{style:{marginTop:6},children:x.jsx("a",{href:je,target:"_blank",rel:"noreferrer",style:{fontSize:12},children:"View package location on map"})})]}),ce.from==="customer"&&x.jsx("div",{style:{fontSize:12,color:"#888",marginTop:2},children:x.jsx(oD,{status:ce.status})})]},ce.id)})]}),x.jsxs("div",{style:{padding:12,borderTop:"2px solid #06b6d4",backgroundColor:"#fff"},children:[x.jsx("p",{style:{margin:"0 0 10px 0",fontSize:13,fontWeight:600,color:"#0369a1"},children:" Voice Commands:"}),x.jsx(G2,{onSendMessage:ce=>{ce.trim()&&_l(F,{from:"customer",text:ce.trim(),ts:ns(),status:"sent"}).then(()=>{Wc(N,{updatedAt:ns()})})},userId:e})]}),x.jsx(Z2,{onSuggestionClick:$,autoplay:z}),x.jsxs("div",{className:"chatbox-input",style:{display:"flex",gap:8,padding:8,borderTop:"1px solid #eee"},children:[x.jsx("input",{type:"text",value:a,onChange:ce=>u(ce.target.value),onKeyDown:ce=>{ce.key==="Enter"&&K()},placeholder:"Type your message",style:{flex:1,padding:8},disabled:I}),x.jsx("button",{onClick:K,disabled:I,children:I?"Processing...":"Send"})]})]})}const Hr=Object.create(null);Hr.open="0";Hr.close="1";Hr.ping="2";Hr.pong="3";Hr.message="4";Hr.upgrade="5";Hr.noop="6";const rf=Object.create(null);Object.keys(Hr).forEach(n=>{rf[Hr[n]]=n});const iv={type:"error",data:"parser error"},AC=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kC=typeof ArrayBuffer=="function",LC=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,dy=({type:n,data:e},t,s)=>AC&&e instanceof Blob?t?s(e):lE(e,s):kC&&(e instanceof ArrayBuffer||LC(e))?t?s(e):lE(new Blob([e]),s):s(Hr[n]+(e||"")),lE=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function uE(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let _m;function lD(n,e){if(AC&&n.data instanceof Blob)return n.data.arrayBuffer().then(uE).then(e);if(kC&&(n.data instanceof ArrayBuffer||LC(n.data)))return e(uE(n.data));dy(n,!1,t=>{_m||(_m=new TextEncoder),e(_m.encode(t))})}const cE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<cE.length;n++)Kc[cE.charCodeAt(n)]=n;const uD=n=>{let e=n.length*.75,t=n.length,s,a=0,u,d,g,v;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const _=new ArrayBuffer(e),E=new Uint8Array(_);for(s=0;s<t;s+=4)u=Kc[n.charCodeAt(s)],d=Kc[n.charCodeAt(s+1)],g=Kc[n.charCodeAt(s+2)],v=Kc[n.charCodeAt(s+3)],E[a++]=u<<2|d>>4,E[a++]=(d&15)<<4|g>>2,E[a++]=(g&3)<<6|v&63;return _},cD=typeof ArrayBuffer=="function",fy=(n,e)=>{if(typeof n!="string")return{type:"message",data:IC(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:hD(n.substring(1),e)}:rf[t]?n.length>1?{type:rf[t],data:n.substring(1)}:{type:rf[t]}:iv},hD=(n,e)=>{if(cD){const t=uD(n);return IC(t,e)}else return{base64:!0,data:n}},IC=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},RC="",dD=(n,e)=>{const t=n.length,s=new Array(t);let a=0;n.forEach((u,d)=>{dy(u,!1,g=>{s[d]=g,++a===t&&e(s.join(RC))})})},fD=(n,e)=>{const t=n.split(RC),s=[];for(let a=0;a<t.length;a++){const u=fy(t[a],e);if(s.push(u),u.type==="error")break}return s};function pD(){return new TransformStream({transform(n,e){lD(n,t=>{const s=t.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const u=new DataView(a.buffer);u.setUint8(0,126),u.setUint16(1,s)}else{a=new Uint8Array(9);const u=new DataView(a.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(a[0]|=128),e.enqueue(a),e.enqueue(t)})}})}let bm;function Fd(n){return n.reduce((e,t)=>e+t.length,0)}function Hd(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let a=0;a<e;a++)t[a]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function gD(n,e){bm||(bm=new TextDecoder);const t=[];let s=0,a=-1,u=!1;return new TransformStream({transform(d,g){for(t.push(d);;){if(s===0){if(Fd(t)<1)break;const v=Hd(t,1);u=(v[0]&128)===128,a=v[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(Fd(t)<2)break;const v=Hd(t,2);a=new DataView(v.buffer,v.byteOffset,v.length).getUint16(0),s=3}else if(s===2){if(Fd(t)<8)break;const v=Hd(t,8),_=new DataView(v.buffer,v.byteOffset,v.length),E=_.getUint32(0);if(E>Math.pow(2,21)-1){g.enqueue(iv);break}a=E*Math.pow(2,32)+_.getUint32(4),s=3}else{if(Fd(t)<a)break;const v=Hd(t,a);g.enqueue(fy(u?v:bm.decode(v),e)),s=0}if(a===0||a>n){g.enqueue(iv);break}}}})}const MC=4;function Un(n){if(n)return mD(n)}function mD(n){for(var e in Un.prototype)n[e]=Un.prototype[e];return n}Un.prototype.on=Un.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};Un.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};Un.prototype.off=Un.prototype.removeListener=Un.prototype.removeAllListeners=Un.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,a=0;a<t.length;a++)if(s=t[a],s===e||s.fn===e){t.splice(a,1);break}return t.length===0&&delete this._callbacks["$"+n],this};Un.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,a=t.length;s<a;++s)t[s].apply(this,e)}return this};Un.prototype.emitReserved=Un.prototype.emit;Un.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Un.prototype.hasListeners=function(n){return!!this.listeners(n).length};const dp=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ds=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),vD="arraybuffer";function OC(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const yD=Ds.setTimeout,_D=Ds.clearTimeout;function fp(n,e){e.useNativeTimers?(n.setTimeoutFn=yD.bind(Ds),n.clearTimeoutFn=_D.bind(Ds)):(n.setTimeoutFn=Ds.setTimeout.bind(Ds),n.clearTimeoutFn=Ds.clearTimeout.bind(Ds))}const bD=1.33;function wD(n){return typeof n=="string"?ED(n):Math.ceil((n.byteLength||n.size)*bD)}function ED(n){let e=0,t=0;for(let s=0,a=n.length;s<a;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function PC(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function TD(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function SD(n){let e={},t=n.split("&");for(let s=0,a=t.length;s<a;s++){let u=t[s].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}class xD extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class py extends Un{constructor(e){super(),this.writable=!1,fp(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new xD(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=fy(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=TD(e);return t.length?"?"+t:""}}class CD extends py{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};fD(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,dD(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=PC()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let DC=!1;try{DC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const AD=DC;function kD(){}class LD extends CD{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(a,u)=>{this.onError("xhr post error",a,u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}let Mu=class of extends Un{constructor(e,t,s){super(),this.createRequest=e,fp(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=OC(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=of.requestsCount++,of.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=kD,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete of.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Mu.requestsCount=0;Mu.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hE);else if(typeof addEventListener=="function"){const n="onpagehide"in Ds?"pagehide":"unload";addEventListener(n,hE,!1)}}function hE(){for(let n in Mu.requests)Mu.requests.hasOwnProperty(n)&&Mu.requests[n].abort()}const ID=(function(){const n=NC({xdomain:!1});return n&&n.responseType!==null})();class RD extends LD{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=ID&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Mu(NC,this.uri(),e)}}function NC(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||AD))return new XMLHttpRequest}catch{}if(!e)try{return new Ds[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const zC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class MD extends py{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=zC?{}:OC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],a=t===e.length-1;dy(s,this.supportsBinary,u=>{try{this.doWrite(s,u)}catch{}a&&dp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=PC()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const wm=Ds.WebSocket||Ds.MozWebSocket;class OD extends MD{createSocket(e,t,s){return zC?new wm(e,t,s):t?new wm(e,t):new wm(e)}doWrite(e,t){this.ws.send(t)}}class PD extends py{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=gD(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),a=pD();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const u=()=>{s.read().then(({done:g,value:v})=>{g||(this.onPacket(v),u())}).catch(g=>{})};u();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],a=t===e.length-1;this._writer.write(s).then(()=>{a&&dp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const DD={websocket:OD,webtransport:PD,polling:RD},ND=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,zD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sv(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let a=ND.exec(n||""),u={},d=14;for(;d--;)u[zD[d]]=a[d]||"";return t!=-1&&s!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=VD(u,u.path),u.queryKey=jD(u,u.query),u}function VD(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function jD(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,u){a&&(t[a]=u)}),t}const rv=typeof addEventListener=="function"&&typeof removeEventListener=="function",af=[];rv&&addEventListener("offline",()=>{af.forEach(n=>n())},!1);class Ca extends Un{constructor(e,t){if(super(),this.binaryType=vD,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=sv(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=sv(t.host).host);fp(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=SD(this.opts.query)),rv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},af.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=MC,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ca.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Ca.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(t+=wD(a)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,dp(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,a){if(typeof t=="function"&&(a=t,t=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const u={type:e,data:t,options:s};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Ca.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),rv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=af.indexOf(this._offlineEventListener);s!==-1&&af.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Ca.protocol=MC;class UD extends Ca{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;Ca.priorWebsocketSuccess=!1;const a=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",S=>{if(!s)if(S.type==="pong"&&S.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ca.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(E(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const I=new Error("probe error");I.transport=t.name,this.emitReserved("upgradeError",I)}}))};function u(){s||(s=!0,E(),t.close(),t=null)}const d=S=>{const I=new Error("probe error: "+S);I.transport=t.name,u(),this.emitReserved("upgradeError",I)};function g(){d("transport closed")}function v(){d("socket closed")}function _(S){t&&S.name!==t.name&&u()}const E=()=>{t.removeListener("open",a),t.removeListener("error",d),t.removeListener("close",g),this.off("close",v),this.off("upgrading",_)};t.once("open",a),t.once("error",d),t.once("close",g),this.once("close",v),this.once("upgrading",_),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let BD=class extends UD{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>DD[a]).filter(a=>!!a)),super(e,s)}};function FD(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=sv(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const u=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+u+":"+s.port+e,s.href=s.protocol+"://"+u+(t&&t.port===s.port?"":":"+s.port),s}const HD=typeof ArrayBuffer=="function",qD=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,VC=Object.prototype.toString,GD=typeof Blob=="function"||typeof Blob<"u"&&VC.call(Blob)==="[object BlobConstructor]",ZD=typeof File=="function"||typeof File<"u"&&VC.call(File)==="[object FileConstructor]";function gy(n){return HD&&(n instanceof ArrayBuffer||qD(n))||GD&&n instanceof Blob||ZD&&n instanceof File}function lf(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(lf(n[t]))return!0;return!1}if(gy(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return lf(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&lf(n[t]))return!0;return!1}function WD(n){const e=[],t=n.data,s=n;return s.data=ov(t,e),s.attachments=e.length,{packet:s,buffers:e}}function ov(n,e){if(!n)return n;if(gy(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=ov(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=ov(n[s],e));return t}return n}function KD(n,e){return n.data=av(n.data,e),delete n.attachments,n}function av(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=av(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=av(n[t],e));return n}const $D=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],YD=5;var It;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(It||(It={}));class QD{constructor(e){this.replacer=e}encode(e){return(e.type===It.EVENT||e.type===It.ACK)&&lf(e)?this.encodeAsBinary({type:e.type===It.EVENT?It.BINARY_EVENT:It.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===It.BINARY_EVENT||e.type===It.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=WD(e),s=this.encodeAsString(t.packet),a=t.buffers;return a.unshift(s),a}}function dE(n){return Object.prototype.toString.call(n)==="[object Object]"}class my extends Un{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===It.BINARY_EVENT;s||t.type===It.BINARY_ACK?(t.type=s?It.EVENT:It.ACK,this.reconstructor=new XD(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(gy(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(It[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===It.BINARY_EVENT||s.type===It.BINARY_ACK){const u=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const d=e.substring(u,t);if(d!=Number(d)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(e.charAt(t+1)==="/"){const u=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(u,t)}else s.nsp="/";const a=e.charAt(t+1);if(a!==""&&Number(a)==a){const u=t+1;for(;++t;){const d=e.charAt(t);if(d==null||Number(d)!=d){--t;break}if(t===e.length)break}s.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){const u=this.tryParse(e.substr(t));if(my.isPayloadValid(s.type,u))s.data=u;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case It.CONNECT:return dE(t);case It.DISCONNECT:return t===void 0;case It.CONNECT_ERROR:return typeof t=="string"||dE(t);case It.EVENT:case It.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&$D.indexOf(t[0])===-1);case It.ACK:case It.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class XD{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=KD(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const JD=Object.freeze(Object.defineProperty({__proto__:null,Decoder:my,Encoder:QD,get PacketType(){return It},protocol:YD},Symbol.toStringTag,{value:"Module"}));function nr(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const eN=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class jC extends Un{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[nr(e,"open",this.onopen.bind(this)),nr(e,"packet",this.onpacket.bind(this)),nr(e,"error",this.onerror.bind(this)),nr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,a,u;if(eN.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const d={type:It.EVENT,data:t};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const E=this.ids++,S=t.pop();this._registerAckCallback(E,S),d.id=E}const g=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,v=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!g||(v?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(e,t){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[e]=t;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let g=0;g<this.sendBuffer.length;g++)this.sendBuffer[g].id===e&&this.sendBuffer.splice(g,1);t.call(this,new Error("operation has timed out"))},a),d=(...g)=>{this.io.clearTimeoutFn(u),t.apply(this,g)};d.withError=!0,this.acks[e]=d}emitWithAck(e,...t){return new Promise((s,a)=>{const u=(d,g)=>d?a(d):s(g);u.withError=!0,t.push(u),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((a,...u)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(a)):(this._queue.shift(),t&&t(null,...u)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:It.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case It.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case It.EVENT:case It.BINARY_EVENT:this.onevent(e);break;case It.ACK:case It.BINARY_ACK:this.onack(e);break;case It.DISCONNECT:this.ondisconnect();break;case It.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...a){s||(s=!0,t.packet({type:It.ACK,id:e,data:a}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:It.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Yu(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Yu.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};Yu.prototype.reset=function(){this.attempts=0};Yu.prototype.setMin=function(n){this.ms=n};Yu.prototype.setMax=function(n){this.max=n};Yu.prototype.setJitter=function(n){this.jitter=n};class lv extends Un{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,fp(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Yu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const a=t.parser||JD;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new BD(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=nr(t,"open",function(){s.onopen(),e&&e()}),u=g=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",g),e?e(g):this.maybeReconnectOnOpen()},d=nr(t,"error",u);if(this._timeout!==!1){const g=this._timeout,v=this.setTimeoutFn(()=>{a(),u(new Error("timeout")),t.close()},g);this.opts.autoUnref&&v.unref(),this.subs.push(()=>{this.clearTimeoutFn(v)})}return this.subs.push(a),this.subs.push(d),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(nr(e,"ping",this.onping.bind(this)),nr(e,"data",this.ondata.bind(this)),nr(e,"error",this.onerror.bind(this)),nr(e,"close",this.onclose.bind(this)),nr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){dp(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new jC(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Vc={};function nh(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=FD(n,e.path||"/socket.io"),s=t.source,a=t.id,u=t.path,d=Vc[a]&&u in Vc[a].nsps,g=e.forceNew||e["force new connection"]||e.multiplex===!1||d;let v;return g?v=new lv(s,e):(Vc[a]||(Vc[a]=new lv(s,e)),v=Vc[a]),t.query&&!e.query&&(e.query=t.queryKey),v.socket(t.path,e)}Object.assign(nh,{Manager:lv,Socket:jC,io:nh,connect:nh});const tN=()=>{const n=localStorage.getItem("token");if(!n)return null;try{const e=n.split(".")[1],t=JSON.parse(atob(e));return{email:t.email||t.user?.email||"",role:t.role||t.user?.role||"",...t}}catch(e){return console.error("getCurrentUser error",e),null}},nN=async()=>{try{localStorage.removeItem("token"),await TR(ir),console.log("User successfully logged out from both Firebase and local storage")}catch(n){console.error("Logout error:",n),localStorage.removeItem("token")}};var $c={exports:{}};var iN=$c.exports,fE;function sN(){return fE||(fE=1,(function(n,e){(function(t,s){s(e)})(iN,(function(t){var s="1.9.4";function a(o){var c,p,b,C;for(p=1,b=arguments.length;p<b;p++){C=arguments[p];for(c in C)o[c]=C[c]}return o}var u=Object.create||(function(){function o(){}return function(c){return o.prototype=c,new o}})();function d(o,c){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var b=p.call(arguments,2);return function(){return o.apply(c,b.length?b.concat(p.call(arguments)):arguments)}}var g=0;function v(o){return"_leaflet_id"in o||(o._leaflet_id=++g),o._leaflet_id}function _(o,c,p){var b,C,R,W;return W=function(){b=!1,C&&(R.apply(p,C),C=!1)},R=function(){b?C=arguments:(o.apply(p,arguments),setTimeout(W,c),b=!0)},R}function E(o,c,p){var b=c[1],C=c[0],R=b-C;return o===b&&p?o:((o-C)%R+R)%R+C}function S(){return!1}function I(o,c){if(c===!1)return o;var p=Math.pow(10,c===void 0?6:c);return Math.round(o*p)/p}function O(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function D(o){return O(o).split(/\s+/)}function H(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?u(o.options):{});for(var p in c)o.options[p]=c[p];return o.options}function B(o,c,p){var b=[];for(var C in o)b.push(encodeURIComponent(p?C.toUpperCase():C)+"="+encodeURIComponent(o[C]));return(!c||c.indexOf("?")===-1?"?":"&")+b.join("&")}var te=/\{ *([\w_ -]+) *\}/g;function X(o,c){return o.replace(te,function(p,b){var C=c[b];if(C===void 0)throw new Error("No value provided for variable "+p);return typeof C=="function"&&(C=C(c)),C})}var le=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function oe(o,c){for(var p=0;p<o.length;p++)if(o[p]===c)return p;return-1}var ae="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function re(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var V=0;function z(o){var c=+new Date,p=Math.max(0,16-(c-V));return V=c+p,window.setTimeout(o,p)}var M=window.requestAnimationFrame||re("RequestAnimationFrame")||z,q=window.cancelAnimationFrame||re("CancelAnimationFrame")||re("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function G(o,c,p){if(p&&M===z)o.call(c);else return M.call(window,d(o,c))}function Z(o){o&&q.call(window,o)}var U={__proto__:null,extend:a,create:u,bind:d,get lastId(){return g},stamp:v,throttle:_,wrapNum:E,falseFn:S,formatNum:I,trim:O,splitWords:D,setOptions:H,getParamString:B,template:X,isArray:le,indexOf:oe,emptyImageUrl:ae,requestFn:M,cancelFn:q,requestAnimFrame:G,cancelAnimFrame:Z};function Pe(){}Pe.extend=function(o){var c=function(){H(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,b=u(p);b.constructor=c,c.prototype=b;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(c[C]=this[C]);return o.statics&&a(c,o.statics),o.includes&&(ke(o.includes),a.apply(null,[b].concat(o.includes))),a(b,o),delete b.statics,delete b.includes,b.options&&(b.options=p.options?u(p.options):{},a(b.options,o.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,W=b._initHooks.length;R<W;R++)b._initHooks[R].call(this)}},c},Pe.include=function(o){var c=this.prototype.options;return a(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},Pe.mergeOptions=function(o){return a(this.prototype.options,o),this},Pe.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function ke(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=le(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ie={on:function(o,c,p){if(typeof o=="object")for(var b in o)this._on(b,o[b],c);else{o=D(o);for(var C=0,R=o.length;C<R;C++)this._on(o[C],c,p)}return this},off:function(o,c,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var b in o)this._off(b,o[b],c);else{o=D(o);for(var C=arguments.length===1,R=0,W=o.length;R<W;R++)C?this._off(o[R]):this._off(o[R],c,p)}return this},_on:function(o,c,p,b){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,p)===!1){p===this&&(p=void 0);var C={fn:c,ctx:p};b&&(C.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(C)}},_off:function(o,c,p){var b,C,R;if(this._events&&(b=this._events[o],!!b)){if(arguments.length===1){if(this._firingCount)for(C=0,R=b.length;C<R;C++)b[C].fn=S;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var W=this._listens(o,c,p);if(W!==!1){var he=b[W];this._firingCount&&(he.fn=S,this._events[o]=b=b.slice()),b.splice(W,1)}}},fire:function(o,c,p){if(!this.listens(o,p))return this;var b=a({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var C=this._events[o];if(C){this._firingCount=this._firingCount+1||1;for(var R=0,W=C.length;R<W;R++){var he=C[R],ve=he.fn;he.once&&this.off(o,ve,he.ctx),ve.call(he.ctx||this,b)}this._firingCount--}}return p&&this._propagateEvent(b),this},listens:function(o,c,p,b){typeof o!="string"&&console.warn('"string" type argument expected');var C=c;typeof c!="function"&&(b=!!c,C=void 0,p=void 0);var R=this._events&&this._events[o];if(R&&R.length&&this._listens(o,C,p)!==!1)return!0;if(b){for(var W in this._eventParents)if(this._eventParents[W].listens(o,c,p,b))return!0}return!1},_listens:function(o,c,p){if(!this._events)return!1;var b=this._events[o]||[];if(!c)return!!b.length;p===this&&(p=void 0);for(var C=0,R=b.length;C<R;C++)if(b[C].fn===c&&b[C].ctx===p)return C;return!1},once:function(o,c,p){if(typeof o=="object")for(var b in o)this._on(b,o[b],c,!0);else{o=D(o);for(var C=0,R=o.length;C<R;C++)this._on(o[C],c,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[v(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[v(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,a({layer:o.target,propagatedFrom:o.target},o),!0)}};ie.addEventListener=ie.on,ie.removeEventListener=ie.clearAllEventListeners=ie.off,ie.addOneTimeEventListener=ie.once,ie.fireEvent=ie.fire,ie.hasEventListeners=ie.listens;var J=Pe.extend(ie);function ee(o,c,p){this.x=p?Math.round(o):o,this.y=p?Math.round(c):c}var de=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(o){return this.clone()._add(Q(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(Q(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ee(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ee(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(o){o=Q(o);var c=o.x-this.x,p=o.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(o){return o=Q(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=Q(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function Q(o,c,p){return o instanceof ee?o:le(o)?new ee(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ee(o.x,o.y):new ee(o,c,p)}function N(o,c){if(o)for(var p=c?[o,c]:o,b=0,C=p.length;b<C;b++)this.extend(p[b])}N.prototype={extend:function(o){var c,p;if(!o)return this;if(o instanceof ee||typeof o[0]=="number"||"x"in o)c=p=Q(o);else if(o=F(o),c=o.min,p=o.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,p;return typeof o[0]=="number"||o instanceof ee?o=Q(o):o=F(o),o instanceof N?(c=o.min,p=o.max):c=p=o,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=F(o);var c=this.min,p=this.max,b=o.min,C=o.max,R=C.x>=c.x&&b.x<=p.x,W=C.y>=c.y&&b.y<=p.y;return R&&W},overlaps:function(o){o=F(o);var c=this.min,p=this.max,b=o.min,C=o.max,R=C.x>c.x&&b.x<p.x,W=C.y>c.y&&b.y<p.y;return R&&W},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,p=this.max,b=Math.abs(c.x-p.x)*o,C=Math.abs(c.y-p.y)*o;return F(Q(c.x-b,c.y-C),Q(p.x+b,p.y+C))},equals:function(o){return o?(o=F(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function F(o,c){return!o||o instanceof N?o:new N(o,c)}function K(o,c){if(o)for(var p=c?[o,c]:o,b=0,C=p.length;b<C;b++)this.extend(p[b])}K.prototype={extend:function(o){var c=this._southWest,p=this._northEast,b,C;if(o instanceof $)b=o,C=o;else if(o instanceof K){if(b=o._southWest,C=o._northEast,!b||!C)return this}else return o?this.extend(ce(o)||se(o)):this;return!c&&!p?(this._southWest=new $(b.lat,b.lng),this._northEast=new $(C.lat,C.lng)):(c.lat=Math.min(b.lat,c.lat),c.lng=Math.min(b.lng,c.lng),p.lat=Math.max(C.lat,p.lat),p.lng=Math.max(C.lng,p.lng)),this},pad:function(o){var c=this._southWest,p=this._northEast,b=Math.abs(c.lat-p.lat)*o,C=Math.abs(c.lng-p.lng)*o;return new K(new $(c.lat-b,c.lng-C),new $(p.lat+b,p.lng+C))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof $||"lat"in o?o=ce(o):o=se(o);var c=this._southWest,p=this._northEast,b,C;return o instanceof K?(b=o.getSouthWest(),C=o.getNorthEast()):b=C=o,b.lat>=c.lat&&C.lat<=p.lat&&b.lng>=c.lng&&C.lng<=p.lng},intersects:function(o){o=se(o);var c=this._southWest,p=this._northEast,b=o.getSouthWest(),C=o.getNorthEast(),R=C.lat>=c.lat&&b.lat<=p.lat,W=C.lng>=c.lng&&b.lng<=p.lng;return R&&W},overlaps:function(o){o=se(o);var c=this._southWest,p=this._northEast,b=o.getSouthWest(),C=o.getNorthEast(),R=C.lat>c.lat&&b.lat<p.lat,W=C.lng>c.lng&&b.lng<p.lng;return R&&W},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=se(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(o,c){return o instanceof K?o:new K(o,c)}function $(o,c,p){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,p!==void 0&&(this.alt=+p)}$.prototype={equals:function(o,c){if(!o)return!1;o=ce(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+I(this.lat,o)+", "+I(this.lng,o)+")"},distanceTo:function(o){return Re.distance(this,ce(o))},wrap:function(){return Re.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,p=c/Math.cos(Math.PI/180*this.lat);return se([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new $(this.lat,this.lng,this.alt)}};function ce(o,c,p){return o instanceof $?o:le(o)&&typeof o[0]!="object"?o.length===3?new $(o[0],o[1],o[2]):o.length===2?new $(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new $(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new $(o,c,p)}var we={latLngToPoint:function(o,c){var p=this.projection.project(o),b=this.scale(c);return this.transformation._transform(p,b)},pointToLatLng:function(o,c){var p=this.scale(c),b=this.transformation.untransform(o,p);return this.projection.unproject(b)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(o),b=this.transformation.transform(c.min,p),C=this.transformation.transform(c.max,p);return new N(b,C)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?E(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?E(o.lat,this.wrapLat,!0):o.lat,b=o.alt;return new $(p,c,b)},wrapLatLngBounds:function(o){var c=o.getCenter(),p=this.wrapLatLng(c),b=c.lat-p.lat,C=c.lng-p.lng;if(b===0&&C===0)return o;var R=o.getSouthWest(),W=o.getNorthEast(),he=new $(R.lat-b,R.lng-C),ve=new $(W.lat-b,W.lng-C);return new K(he,ve)}},Re=a({},we,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var p=Math.PI/180,b=o.lat*p,C=c.lat*p,R=Math.sin((c.lat-o.lat)*p/2),W=Math.sin((c.lng-o.lng)*p/2),he=R*R+Math.cos(b)*Math.cos(C)*W*W,ve=2*Math.atan2(Math.sqrt(he),Math.sqrt(1-he));return this.R*ve}}),je=6378137,Ie={R:je,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,p=this.MAX_LATITUDE,b=Math.max(Math.min(p,o.lat),-p),C=Math.sin(b*c);return new ee(this.R*o.lng*c,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(o){var c=180/Math.PI;return new $((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:(function(){var o=je*Math.PI;return new N([-o,-o],[o,o])})()};function Me(o,c,p,b){if(le(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=p,this._d=b}Me.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new ee((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function Xe(o,c,p,b){return new Me(o,c,p,b)}var Je=a({},Re,{code:"EPSG:3857",projection:Ie,transformation:(function(){var o=.5/(Math.PI*Ie.R);return Xe(o,.5,-o,.5)})()}),it=a({},Je,{code:"EPSG:900913"});function et(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function En(o,c){var p="",b,C,R,W,he,ve;for(b=0,R=o.length;b<R;b++){for(he=o[b],C=0,W=he.length;C<W;C++)ve=he[C],p+=(C?"L":"M")+ve.x+" "+ve.y;p+=c?Fe.svg?"z":"x":""}return p||"M0 0"}var Ni=document.documentElement.style,zi="ActiveXObject"in window,di=zi&&!document.addEventListener,fe="msLaunchUri"in navigator&&!("documentMode"in document),ze=gi("webkit"),$e=gi("android"),an=gi("android 2")||gi("android 3"),kt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),$t=$e&&gi("Google")&&kt<537&&!("AudioNode"in window),ot=!!window.opera,mt=!fe&&gi("chrome"),Ln=gi("gecko")&&!ze&&!ot&&!zi,bs=!mt&&gi("safari"),rs=gi("phantom"),xi="OTransition"in Ni,Ci=navigator.platform.indexOf("Win")===0,fi=zi&&"transition"in Ni,cn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!an,In="MozPerspective"in Ni,Rn=!window.L_DISABLE_3D&&(fi||cn||In)&&!xi&&!rs,Vi=typeof orientation<"u"||gi("mobile"),ur=Vi&&ze,Vs=Vi&&cn,os=!window.PointerEvent&&window.MSPointerEvent,pi=!!(window.PointerEvent||os),ji="ontouchstart"in window||!!window.TouchEvent,Zn=!window.L_NO_TOUCH&&(ji||pi),ti=Vi&&ot,Ai=Vi&&Ln,js=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ws=(function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",S,c),window.removeEventListener("testPassiveEventSupport",S,c)}catch{}return o})(),Ui=(function(){return!!document.createElement("canvas").getContext})(),Bi=!!(document.createElementNS&&et("svg").createSVGRect),tn=!!Bi&&(function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),tt=!Bi&&(function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),cr=navigator.platform.indexOf("Mac")===0,hr=navigator.platform.indexOf("Linux")===0;function gi(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Fe={ie:zi,ielt9:di,edge:fe,webkit:ze,android:$e,android23:an,androidStock:$t,opera:ot,chrome:mt,gecko:Ln,safari:bs,phantom:rs,opera12:xi,win:Ci,ie3d:fi,webkit3d:cn,gecko3d:In,any3d:Rn,mobile:Vi,mobileWebkit:ur,mobileWebkit3d:Vs,msPointer:os,pointer:pi,touch:Zn,touchNative:ji,mobileOpera:ti,mobileGecko:Ai,retina:js,passiveEvents:ws,canvas:Ui,svg:Bi,vml:tt,inlineSvg:tn,mac:cr,linux:hr},Es=Fe.msPointer?"MSPointerDown":"pointerdown",Na=Fe.msPointer?"MSPointerMove":"pointermove",as=Fe.msPointer?"MSPointerUp":"pointerup",nn=Fe.msPointer?"MSPointerCancel":"pointercancel",Tn={touchstart:Es,touchmove:Na,touchend:as,touchcancel:nn},ls={touchstart:cs,touchmove:Ss,touchend:Ss,touchcancel:Ss},ki={},us=!1;function zl(o,c,p){return c==="touchstart"&&Bs(),ls[c]?(p=ls[c].bind(this,p),o.addEventListener(Tn[c],p,!1),p):(console.warn("wrong event specified:",c),S)}function za(o,c,p){if(!Tn[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(Tn[c],p,!1)}function Us(o){ki[o.pointerId]=o}function Gr(o){ki[o.pointerId]&&(ki[o.pointerId]=o)}function Ts(o){delete ki[o.pointerId]}function Bs(){us||(document.addEventListener(Es,Us,!0),document.addEventListener(Na,Gr,!0),document.addEventListener(as,Ts,!0),document.addEventListener(nn,Ts,!0),us=!0)}function Ss(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in ki)c.touches.push(ki[p]);c.changedTouches=[c],o(c)}}function cs(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Gt(c),Ss(o,c)}function hn(o){var c={},p,b;for(b in o)p=o[b],c[b]=p&&p.bind?p.bind(o):p;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var ko=200;function dr(o,c){o.addEventListener("dblclick",c);var p=0,b;function C(R){if(R.detail!==1){b=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var W=vr(R);if(!(W.some(function(ve){return ve instanceof HTMLLabelElement&&ve.attributes.for})&&!W.some(function(ve){return ve instanceof HTMLInputElement||ve instanceof HTMLSelectElement}))){var he=Date.now();he-p<=ko?(b++,b===2&&c(hn(R))):b=1,p=he}}}return o.addEventListener("click",C),{dblclick:c,simDblclick:C}}function ni(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var Fi=xs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zr=xs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Lo=Zr==="webkitTransition"||Zr==="OTransition"?Zr+"End":"transitionend";function Io(o){return typeof o=="string"?document.getElementById(o):o}function fr(o,c){var p=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(o,null);p=b?b[c]:null}return p==="auto"?null:p}function ht(o,c,p){var b=document.createElement(o);return b.className=c||"",p&&p.appendChild(b),b}function Mt(o){var c=o.parentNode;c&&c.removeChild(o)}function ii(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function vn(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function Fs(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function Va(o,c){if(o.classList!==void 0)return o.classList.contains(c);var p=Hi(o);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function st(o,c){if(o.classList!==void 0)for(var p=D(c),b=0,C=p.length;b<C;b++)o.classList.add(p[b]);else if(!Va(o,c)){var R=Hi(o);pr(o,(R?R+" ":"")+c)}}function Yt(o,c){o.classList!==void 0?o.classList.remove(c):pr(o,O((" "+Hi(o)+" ").replace(" "+c+" "," ")))}function pr(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function Hi(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Lt(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&gr(o,c)}function gr(o,c){var p=!1,b="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(b)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):o.style.filter+=" progid:"+b+"(opacity="+c+")"}function xs(o){for(var c=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in c)return o[p];return!1}function qi(o,c,p){var b=c||new ee(0,0);o.style[Fi]=(Fe.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(p?" scale("+p+")":"")}function Ye(o,c){o._leaflet_pos=c,Fe.any3d?qi(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function Li(o){return o._leaflet_pos||new ee(0,0)}var Gi,Wn,ja;if("onselectstart"in document)Gi=function(){Ze(window,"selectstart",Gt)},Wn=function(){Ot(window,"selectstart",Gt)};else{var Hs=xs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Gi=function(){if(Hs){var o=document.documentElement.style;ja=o[Hs],o[Hs]="none"}},Wn=function(){Hs&&(document.documentElement.style[Hs]=ja,ja=void 0)}}function Ro(){Ze(window,"dragstart",Gt)}function Wr(){Ot(window,"dragstart",Gt)}var Mo,Ua;function Zi(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(dn(),Mo=o,Ua=o.style.outlineStyle,o.style.outlineStyle="none",Ze(window,"keydown",dn))}function dn(){Mo&&(Mo.style.outlineStyle=Ua,Mo=void 0,Ua=void 0,Ot(window,"keydown",dn))}function Kr(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function mr(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var qs={__proto__:null,TRANSFORM:Fi,TRANSITION:Zr,TRANSITION_END:Lo,get:Io,getStyle:fr,create:ht,remove:Mt,empty:ii,toFront:vn,toBack:Fs,hasClass:Va,addClass:st,removeClass:Yt,setClass:pr,getClass:Hi,setOpacity:Lt,testProp:xs,setTransform:qi,setPosition:Ye,getPosition:Li,get disableTextSelection(){return Gi},get enableTextSelection(){return Wn},disableImageDrag:Ro,enableImageDrag:Wr,preventOutline:Zi,restoreOutline:dn,getSizedParentNode:Kr,getScale:mr};function Ze(o,c,p,b){if(c&&typeof c=="object")for(var C in c)Ri(o,C,c[C],p);else{c=D(c);for(var R=0,W=c.length;R<W;R++)Ri(o,c[R],p,b)}return this}var Ii="_leaflet_events";function Ot(o,c,p,b){if(arguments.length===1)Ba(o),delete o[Ii];else if(c&&typeof c=="object")for(var C in c)$r(o,C,c[C],p);else if(c=D(c),arguments.length===2)Ba(o,function(he){return oe(c,he)!==-1});else for(var R=0,W=c.length;R<W;R++)$r(o,c[R],p,b);return this}function Ba(o,c){for(var p in o[Ii]){var b=p.split(/\d/)[0];(!c||c(b))&&$r(o,b,null,null,p)}}var Kn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ri(o,c,p,b){var C=c+v(p)+(b?"_"+v(b):"");if(o[Ii]&&o[Ii][C])return this;var R=function(he){return p.call(b||o,he||window.event)},W=R;!Fe.touchNative&&Fe.pointer&&c.indexOf("touch")===0?R=zl(o,c,R):Fe.touch&&c==="dblclick"?R=dr(o,R):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(Kn[c]||c,R,Fe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(R=function(he){he=he||window.event,hs(o,he)&&W(he)},o.addEventListener(Kn[c],R,!1)):o.addEventListener(c,W,!1):o.attachEvent("on"+c,R),o[Ii]=o[Ii]||{},o[Ii][C]=R}function $r(o,c,p,b,C){C=C||c+v(p)+(b?"_"+v(b):"");var R=o[Ii]&&o[Ii][C];if(!R)return this;!Fe.touchNative&&Fe.pointer&&c.indexOf("touch")===0?za(o,c,R):Fe.touch&&c==="dblclick"?ni(o,R):"removeEventListener"in o?o.removeEventListener(Kn[c]||c,R,!1):o.detachEvent("on"+c,R),o[Ii][C]=null}function $n(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function si(o){return Ri(o,"wheel",$n),this}function Cs(o){return Ze(o,"mousedown touchstart dblclick contextmenu",$n),o._leaflet_disable_click=!0,this}function Gt(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function mi(o){return Gt(o),$n(o),this}function vr(o){if(o.composedPath)return o.composedPath();for(var c=[],p=o.target;p;)c.push(p),p=p.parentNode;return c}function Gs(o,c){if(!c)return new ee(o.clientX,o.clientY);var p=mr(c),b=p.boundingClientRect;return new ee((o.clientX-b.left)/p.x-c.clientLeft,(o.clientY-b.top)/p.y-c.clientTop)}var Qt=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Bn(o){return Fe.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Qt:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function hs(o,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var Yr={__proto__:null,on:Ze,off:Ot,stopPropagation:$n,disableScrollPropagation:si,disableClickPropagation:Cs,preventDefault:Gt,stop:mi,getPropagationPath:vr,getMousePosition:Gs,getWheelDelta:Bn,isExternalTarget:hs,addListener:Ze,removeListener:Ot},Zs=J.extend({run:function(o,c,p,b){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=Li(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=G(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var p=this._startPos.add(this._offset.multiplyBy(o));c&&p._round(),Ye(this._el,p),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),vt=J.extend({options:{crs:Je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=H(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ce(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zr&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ze(this._proxy,Lo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(ce(o),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=a({animate:p.animate},p.zoom),p.pan=a({animate:p.animate,duration:p.duration},p.pan));var b=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,p.zoom):this._tryAnimatedPan(o,p.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,p){var b=this.getZoomScale(c),C=this.getSize().divideBy(2),R=o instanceof ee?o:this.latLngToContainerPoint(o),W=R.subtract(C).multiplyBy(1-1/b),he=this.containerPointToLatLng(C.add(W));return this.setView(he,c,{zoom:p})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():se(o);var p=Q(c.paddingTopLeft||c.padding||[0,0]),b=Q(c.paddingBottomRight||c.padding||[0,0]),C=this.getBoundsZoom(o,!1,p.add(b));if(C=typeof c.maxZoom=="number"?Math.min(c.maxZoom,C):C,C===1/0)return{center:o.getCenter(),zoom:C};var R=b.subtract(p).divideBy(2),W=this.project(o.getSouthWest(),C),he=this.project(o.getNorthEast(),C),ve=this.unproject(W.add(he).divideBy(2).add(R),C);return{center:ve,zoom:C}},fitBounds:function(o,c){if(o=se(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=Q(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){st(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,p){if(p=p||{},p.animate===!1||!Fe.any3d)return this.setView(o,c,p);this._stop();var b=this.project(this.getCenter()),C=this.project(o),R=this.getSize(),W=this._zoom;o=ce(o),c=c===void 0?W:c;var he=Math.max(R.x,R.y),ve=he*this.getZoomScale(W,c),Ce=C.distanceTo(b)||1,Ne=1.42,qe=Ne*Ne;function ft(pn){var Qs=pn?-1:1,no=pn?ve:he,sc=ve*ve-he*he+Qs*qe*qe*Ce*Ce,rl=2*no*qe*Ce,ol=sc/rl,Rr=Math.sqrt(ol*ol+1)-ol,Xs=Rr<1e-9?-18:Math.log(Rr);return Xs}function Fn(pn){return(Math.exp(pn)-Math.exp(-pn))/2}function yn(pn){return(Math.exp(pn)+Math.exp(-pn))/2}function Oi(pn){return Fn(pn)/yn(pn)}var Dt=ft(0);function Nt(pn){return he*(yn(Dt)/yn(Dt+Ne*pn))}function bt(pn){return he*(yn(Dt)*Oi(Dt+Ne*pn)-Fn(Dt))/qe}function Lr(pn){return 1-Math.pow(1-pn,1.5)}var Yi=Date.now(),Xl=(ft(1)-Dt)/Ne,Ir=p.duration?1e3*p.duration:1e3*Xl*.8;function ic(){var pn=(Date.now()-Yi)/Ir,Qs=Lr(pn)*Xl;pn<=1?(this._flyToFrame=G(ic,this),this._move(this.unproject(b.add(C.subtract(b).multiplyBy(bt(Qs)/Ce)),W),this.getScaleZoom(he/Nt(Qs),W),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),ic.call(this),this},flyToBounds:function(o,c){var p=this._getBoundsCenterZoom(o,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(o){return o=se(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var p=this.getCenter(),b=this._limitCenter(p,this._zoom,se(o));return p.equals(b)||this.panTo(b,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var p=Q(c.paddingTopLeft||c.padding||[0,0]),b=Q(c.paddingBottomRight||c.padding||[0,0]),C=this.project(this.getCenter()),R=this.project(o),W=this.getPixelBounds(),he=F([W.min.add(p),W.max.subtract(b)]),ve=he.getSize();if(!he.contains(R)){this._enforcingBounds=!0;var Ce=R.subtract(he.getCenter()),Ne=he.extend(R).getSize().subtract(ve);C.x+=Ce.x<0?-Ne.x:Ne.x,C.y+=Ce.y<0?-Ne.y:Ne.y,this.panTo(this.unproject(C),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=a({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),b=c.divideBy(2).round(),C=p.divideBy(2).round(),R=b.subtract(C);return!R.x&&!R.y?this:(o.animate&&o.pan?this.panBy(R):(o.pan&&this._rawPanBy(R),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=a({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=d(this._handleGeolocationResponse,this),p=d(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,o):navigator.geolocation.getCurrentPosition(c,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,p=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,p=o.coords.longitude,b=new $(c,p),C=b.toBounds(o.coords.accuracy*2),R=this._locateOptions;if(R.setView){var W=this.getBoundsZoom(C);this.setView(b,R.maxZoom?Math.min(W,R.maxZoom):W)}var he={latlng:b,bounds:C,timestamp:o.timestamp};for(var ve in o.coords)typeof o.coords[ve]=="number"&&(he[ve]=o.coords[ve]);this.fire("locationfound",he)}},addHandler:function(o,c){if(!c)return this;var p=this[o]=new c(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Mt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),b=ht("div",p,c||this._mapPane);return o&&(this._panes[o]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new K(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,p){o=se(o),p=Q(p||[0,0]);var b=this.getZoom()||0,C=this.getMinZoom(),R=this.getMaxZoom(),W=o.getNorthWest(),he=o.getSouthEast(),ve=this.getSize().subtract(p),Ce=F(this.project(he,b),this.project(W,b)).getSize(),Ne=Fe.any3d?this.options.zoomSnap:1,qe=ve.x/Ce.x,ft=ve.y/Ce.y,Fn=c?Math.max(qe,ft):Math.min(qe,ft);return b=this.getScaleZoom(Fn,b),Ne&&(b=Math.round(b/(Ne/100))*(Ne/100),b=c?Math.ceil(b/Ne)*Ne:Math.floor(b/Ne)*Ne),Math.max(C,Math.min(R,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var p=this._getTopLeftPoint(o,c);return new N(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(o)/p.scale(c)},getScaleZoom:function(o,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var b=p.zoom(o*p.scale(c));return isNaN(b)?1/0:b},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ce(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Q(o),c)},layerPointToLatLng:function(o){var c=Q(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(ce(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ce(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(se(o))},distance:function(o,c){return this.options.crs.distance(ce(o),ce(c))},containerPointToLayerPoint:function(o){return Q(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return Q(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(Q(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(o)))},mouseEventToContainerPoint:function(o){return Gs(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=Io(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ze(c,"scroll",this._onScroll,this),this._containerId=v(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,st(o,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=fr(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ye(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(st(o.markerPane,"leaflet-zoom-hide"),st(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,p){Ye(this._mapPane,new ee(0,0));var b=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var C=this._zoom!==c;this._moveStart(C,p)._move(o,c)._moveEnd(C),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,p,b){c===void 0&&(c=this._zoom);var C=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),b?p&&p.pinch&&this.fire("zoom",p):((C||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ye(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[v(this._container)]=this;var c=o?Ot:Ze;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=G(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var p=[],b,C=c==="mouseout"||c==="mouseover",R=o.target||o.srcElement,W=!1;R;){if(b=this._targets[v(R)],b&&(c==="click"||c==="preclick")&&this._draggableMoved(b)){W=!0;break}if(b&&b.listens(c,!0)&&(C&&!hs(R,o)||(p.push(b),C))||R===this._container)break;R=R.parentNode}return!p.length&&!W&&!C&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var p=o.type;p==="mousedown"&&Zi(c),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,p){if(o.type==="click"){var b=a({},o);b.type="preclick",this._fireDOMEvent(b,b.type,p)}var C=this._findEventTargets(o,c);if(p){for(var R=[],W=0;W<p.length;W++)p[W].listens(c,!0)&&R.push(p[W]);C=R.concat(C)}if(C.length){c==="contextmenu"&&Gt(o);var he=C[0],ve={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Ce=he.getLatLng&&(!he._radius||he._radius<=10);ve.containerPoint=Ce?this.latLngToContainerPoint(he.getLatLng()):this.mouseEventToContainerPoint(o),ve.layerPoint=this.containerPointToLayerPoint(ve.containerPoint),ve.latlng=Ce?he.getLatLng():this.layerPointToLatLng(ve.layerPoint)}for(W=0;W<C.length;W++)if(C[W].fire(c,ve,!0),ve.originalEvent._stopped||C[W].options.bubblingMouseEvents===!1&&oe(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return Li(this._mapPane)||new ee(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var p=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var p=this.getSize()._divideBy(2);return this.project(o,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,p){var b=this._getNewPixelOrigin(p,c);return this.project(o,c)._subtract(b)},_latLngBoundsToNewLayerBounds:function(o,c,p){var b=this._getNewPixelOrigin(p,c);return F([this.project(o.getSouthWest(),c)._subtract(b),this.project(o.getNorthWest(),c)._subtract(b),this.project(o.getSouthEast(),c)._subtract(b),this.project(o.getNorthEast(),c)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,p){if(!p)return o;var b=this.project(o,c),C=this.getSize().divideBy(2),R=new N(b.subtract(C),b.add(C)),W=this._getBoundsOffset(R,p,c);return Math.abs(W.x)<=1&&Math.abs(W.y)<=1?o:this.unproject(b.add(W),c)},_limitOffset:function(o,c){if(!c)return o;var p=this.getPixelBounds(),b=new N(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(b,c))},_getBoundsOffset:function(o,c,p){var b=F(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),C=b.min.subtract(o.min),R=b.max.subtract(o.max),W=this._rebound(C.x,-R.x),he=this._rebound(C.y,-R.y);return new ee(W,he)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),p=this.getMaxZoom(),b=Fe.any3d?this.options.zoomSnap:1;return b&&(o=Math.round(o/b)*b),Math.max(c,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var p=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var o=this._proxy=ht("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var p=Fi,b=this._proxy.style[p];qi(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),b===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();qi(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(c),C=this._getCenterOffset(o)._divideBy(1-1/b);return p.animate!==!0&&!this.getSize().contains(C)?!1:(G(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,p,b){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,st(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function yr(o,c){return new vt(o,c)}var Yn=Pe.extend({options:{position:"topright"},initialize:function(o){H(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),p=this.getPosition(),b=o._controlCorners[p];return st(c,"leaflet-control"),p.indexOf("bottom")!==-1?b.insertBefore(c,b.firstChild):b.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Sn=function(o){return new Yn(o)};vt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",p=this._controlContainer=ht("div",c+"control-container",this._container);function b(C,R){var W=c+C+" "+c+R;o[C+R]=ht("div",W,p)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Mt(this._controlCorners[o]);Mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _r=Yn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,p,b){return p<b?-1:b<p?1:0}},initialize:function(o,c,p){H(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in o)this._addLayer(o[b],b);for(b in c)this._addLayer(c[b],b,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Yn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(v(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){st(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(st(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=ht("div",o),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Cs(c),si(c);var b=this._section=ht("section",o+"-list");p&&(this._map.on("click",this.collapse,this),Ze(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=ht("a",o+"-toggle",c);C.href="#",C.title="Layers",C.setAttribute("role","button"),Ze(C,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){Gt(R),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=ht("div",o+"-base",b),this._separator=ht("div",o+"-separator",b),this._overlaysList=ht("div",o+"-overlays",b),c.appendChild(b)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&v(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(d(function(b,C){return this.options.sortFunction(b.layer,C.layer,b.name,C.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ii(this._baseLayersList),ii(this._overlaysList),this._layerControlInputs=[];var o,c,p,b,C=0;for(p=0;p<this._layers.length;p++)b=this._layers[p],this._addItem(b),c=c||b.overlay,o=o||!b.overlay,C+=b.overlay?0:1;return this.options.hideSingleBase&&(o=o&&C>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(v(o.target)),p=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(o,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=p,b.firstChild},_addItem:function(o){var c=document.createElement("label"),p=this._map.hasLayer(o.layer),b;o.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=p):b=this._createRadioElement("leaflet-base-layers_"+v(this),p),this._layerControlInputs.push(b),b.layerId=v(o.layer),Ze(b,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+o.name;var R=document.createElement("span");c.appendChild(R),R.appendChild(b),R.appendChild(C);var W=o.overlay?this._overlaysList:this._baseLayersList;return W.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,p,b=[],C=[];this._handlingClick=!0;for(var R=o.length-1;R>=0;R--)c=o[R],p=this._getLayer(c.layerId).layer,c.checked?b.push(p):c.checked||C.push(p);for(R=0;R<C.length;R++)this._map.hasLayer(C[R])&&this._map.removeLayer(C[R]);for(R=0;R<b.length;R++)this._map.hasLayer(b[R])||this._map.addLayer(b[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,p,b=this._map.getZoom(),C=o.length-1;C>=0;C--)c=o[C],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&b<p.options.minZoom||p.options.maxZoom!==void 0&&b>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Ze(o,"click",Gt),this.expand();var c=this;setTimeout(function(){Ot(o,"click",Gt),c._preventClick=!1})}}),Vl=function(o,c,p){return new _r(o,c,p)},Ws=Yn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",p=ht("div",c+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,p,b,C){var R=ht("a",p,b);return R.innerHTML=o,R.href="#",R.title=c,R.setAttribute("role","button"),R.setAttribute("aria-label",c),Cs(R),Ze(R,"click",mi),Ze(R,"click",C,this),Ze(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Yt(this._zoomInButton,c),Yt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(st(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(st(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});vt.mergeOptions({zoomControl:!0}),vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ws,this.addControl(this.zoomControl))});var jl=function(o){return new Ws(o)},Oo=Yn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",p=ht("div",c),b=this.options;return this._addScales(b,c+"-line",p),o.on(b.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,p){o.metric&&(this._mScale=ht("div",c,p)),o.imperial&&(this._iScale=ht("div",c,p))},_update:function(){var o=this._map,c=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/o)},_updateImperial:function(o){var c=o*3.2808399,p,b,C;c>5280?(p=c/5280,b=this._getRoundNum(p),this._updateScale(this._iScale,b+" mi",b/p)):(C=this._getRoundNum(c),this._updateScale(this._iScale,C+" ft",C/c))},_updateScale:function(o,c,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),p=o/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),br=function(o){return new Oo(o)},Ul='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',wr=Yn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?Ul+" ":"")+"Leaflet</a>"},initialize:function(o){H(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=ht("div","leaflet-control-attribution"),Cs(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});vt.mergeOptions({attributionControl:!0}),vt.addInitHook(function(){this.options.attributionControl&&new wr().addTo(this)});var Xu=function(o){return new wr(o)};Yn.Layers=_r,Yn.Zoom=Ws,Yn.Scale=Oo,Yn.Attribution=wr,Sn.layers=Vl,Sn.zoom=jl,Sn.scale=br,Sn.attribution=Xu;var Mi=Pe.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Mi.addTo=function(o,c){return o.addHandler(c,this),this};var Qr={Events:ie},Po=Fe.touch?"touchstart mousedown":"mousedown",ds=J.extend({options:{clickTolerance:3},initialize:function(o,c,p,b){H(this,b),this._element=o,this._dragStartTarget=c||o,this._preventOutline=p},enable:function(){this._enabled||(Ze(this._dragStartTarget,Po,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ds._dragging===this&&this.finishDrag(!0),Ot(this._dragStartTarget,Po,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Va(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ds._dragging===this&&this.finishDrag();return}if(!(ds._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ds._dragging=this,this._preventOutline&&Zi(this._element),Ro(),Gi(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,p=Kr(this._element);this._startPoint=new ee(c.clientX,c.clientY),this._startPos=Li(this._element),this._parentScale=mr(p);var b=o.type==="mousedown";Ze(document,b?"mousemove":"touchmove",this._onMove,this),Ze(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,p=new ee(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Gt(o),this._moved||(this.fire("dragstart"),this._moved=!0,st(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),st(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ye(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Yt(document.body,"leaflet-dragging"),this._lastTarget&&(Yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ot(document,"mousemove touchmove",this._onMove,this),Ot(document,"mouseup touchend touchcancel",this._onUp,this),Wr(),Wn();var c=this._moved&&this._moving;this._moving=!1,ds._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Do(o,c,p){var b,C=[1,4,2,8],R,W,he,ve,Ce,Ne,qe,ft;for(R=0,Ne=o.length;R<Ne;R++)o[R]._code=As(o[R],c);for(he=0;he<4;he++){for(qe=C[he],b=[],R=0,Ne=o.length,W=Ne-1;R<Ne;W=R++)ve=o[R],Ce=o[W],ve._code&qe?Ce._code&qe||(ft=Mn(Ce,ve,qe,c,p),ft._code=As(ft,c),b.push(ft)):(Ce._code&qe&&(ft=Mn(Ce,ve,qe,c,p),ft._code=As(ft,c),b.push(ft)),b.push(ve));o=b}return o}function No(o,c){var p,b,C,R,W,he,ve,Ce,Ne;if(!o||o.length===0)throw new Error("latlngs not passed");f(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var qe=ce([0,0]),ft=se(o),Fn=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Fn<1700&&(qe=zo(o));var yn=o.length,Oi=[];for(p=0;p<yn;p++){var Dt=ce(o[p]);Oi.push(c.project(ce([Dt.lat-qe.lat,Dt.lng-qe.lng])))}for(he=ve=Ce=0,p=0,b=yn-1;p<yn;b=p++)C=Oi[p],R=Oi[b],W=C.y*R.x-R.y*C.x,ve+=(C.x+R.x)*W,Ce+=(C.y+R.y)*W,he+=W*3;he===0?Ne=Oi[0]:Ne=[ve/he,Ce/he];var Nt=c.unproject(Q(Ne));return ce([Nt.lat+qe.lat,Nt.lng+qe.lng])}function zo(o){for(var c=0,p=0,b=0,C=0;C<o.length;C++){var R=ce(o[C]);c+=R.lat,p+=R.lng,b++}return ce([c/b,p/b])}var Er={__proto__:null,clipPolygon:Do,polygonCenter:No,centroid:zo};function Fa(o,c){if(!c||!o.length)return o.slice();var p=c*c;return o=Bl(o,p),o=qa(o,p),o}function Ha(o,c,p){return Math.sqrt(Wi(o,c,p,!0))}function Ks(o,c,p){return Wi(o,c,p)}function qa(o,c){var p=o.length,b=typeof Uint8Array<"u"?Uint8Array:Array,C=new b(p);C[0]=C[p-1]=1,Vo(o,C,c,0,p-1);var R,W=[];for(R=0;R<p;R++)C[R]&&W.push(o[R]);return W}function Vo(o,c,p,b,C){var R=0,W,he,ve;for(he=b+1;he<=C-1;he++)ve=Wi(o[he],o[b],o[C],!0),ve>R&&(W=he,R=ve);R>p&&(c[W]=1,Vo(o,c,p,b,W),Vo(o,c,p,W,C))}function Bl(o,c){for(var p=[o[0]],b=1,C=0,R=o.length;b<R;b++)Fl(o[b],o[C])>c&&(p.push(o[b]),C=b);return C<R-1&&p.push(o[R-1]),p}var Ga;function Xr(o,c,p,b,C){var R=b?Ga:As(o,p),W=As(c,p),he,ve,Ce;for(Ga=W;;){if(!(R|W))return[o,c];if(R&W)return!1;he=R||W,ve=Mn(o,c,he,p,C),Ce=As(ve,p),he===R?(o=ve,R=Ce):(c=ve,W=Ce)}}function Mn(o,c,p,b,C){var R=c.x-o.x,W=c.y-o.y,he=b.min,ve=b.max,Ce,Ne;return p&8?(Ce=o.x+R*(ve.y-o.y)/W,Ne=ve.y):p&4?(Ce=o.x+R*(he.y-o.y)/W,Ne=he.y):p&2?(Ce=ve.x,Ne=o.y+W*(ve.x-o.x)/R):p&1&&(Ce=he.x,Ne=o.y+W*(he.x-o.x)/R),new ee(Ce,Ne,C)}function As(o,c){var p=0;return o.x<c.min.x?p|=1:o.x>c.max.x&&(p|=2),o.y<c.min.y?p|=4:o.y>c.max.y&&(p|=8),p}function Fl(o,c){var p=c.x-o.x,b=c.y-o.y;return p*p+b*b}function Wi(o,c,p,b){var C=c.x,R=c.y,W=p.x-C,he=p.y-R,ve=W*W+he*he,Ce;return ve>0&&(Ce=((o.x-C)*W+(o.y-R)*he)/ve,Ce>1?(C=p.x,R=p.y):Ce>0&&(C+=W*Ce,R+=he*Ce)),W=o.x-C,he=o.y-R,b?W*W+he*he:new ee(C,R)}function f(o){return!le(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function T(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),f(o)}function k(o,c){var p,b,C,R,W,he,ve,Ce;if(!o||o.length===0)throw new Error("latlngs not passed");f(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ne=ce([0,0]),qe=se(o),ft=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());ft<1700&&(Ne=zo(o));var Fn=o.length,yn=[];for(p=0;p<Fn;p++){var Oi=ce(o[p]);yn.push(c.project(ce([Oi.lat-Ne.lat,Oi.lng-Ne.lng])))}for(p=0,b=0;p<Fn-1;p++)b+=yn[p].distanceTo(yn[p+1])/2;if(b===0)Ce=yn[0];else for(p=0,R=0;p<Fn-1;p++)if(W=yn[p],he=yn[p+1],C=W.distanceTo(he),R+=C,R>b){ve=(R-b)/C,Ce=[he.x-ve*(he.x-W.x),he.y-ve*(he.y-W.y)];break}var Dt=c.unproject(Q(Ce));return ce([Dt.lat+Ne.lat,Dt.lng+Ne.lng])}var j={__proto__:null,simplify:Fa,pointToSegmentDistance:Ha,closestPointOnSegment:Ks,clipSegment:Xr,_getEdgeIntersection:Mn,_getBitCode:As,_sqClosestPointOnSegment:Wi,isFlat:f,_flat:T,polylineCenter:k},pe={project:function(o){return new ee(o.lng,o.lat)},unproject:function(o){return new $(o.y,o.x)},bounds:new N([-180,-90],[180,90])},_e={R:6378137,R_MINOR:6356752314245179e-9,bounds:new N([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,p=this.R,b=o.lat*c,C=this.R_MINOR/p,R=Math.sqrt(1-C*C),W=R*Math.sin(b),he=Math.tan(Math.PI/4-b/2)/Math.pow((1-W)/(1+W),R/2);return b=-p*Math.log(Math.max(he,1e-10)),new ee(o.lng*c*p,b)},unproject:function(o){for(var c=180/Math.PI,p=this.R,b=this.R_MINOR/p,C=Math.sqrt(1-b*b),R=Math.exp(-o.y/p),W=Math.PI/2-2*Math.atan(R),he=0,ve=.1,Ce;he<15&&Math.abs(ve)>1e-7;he++)Ce=C*Math.sin(W),Ce=Math.pow((1-Ce)/(1+Ce),C/2),ve=Math.PI/2-2*Math.atan(R*Ce)-W,W+=ve;return new $(W*c,o.x*c/p)}},De={__proto__:null,LonLat:pe,Mercator:_e,SphericalMercator:Ie},Pt=a({},Re,{code:"EPSG:3395",projection:_e,transformation:(function(){var o=.5/(Math.PI*_e.R);return Xe(o,.5,-o,.5)})()}),fn=a({},Re,{code:"EPSG:4326",projection:pe,transformation:Xe(1/180,1,-1/180,.5)}),dt=a({},we,{projection:pe,transformation:Xe(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var p=c.lng-o.lng,b=c.lat-o.lat;return Math.sqrt(p*p+b*b)},infinite:!0});we.Earth=Re,we.EPSG3395=Pt,we.EPSG3857=Je,we.EPSG900913=it,we.EPSG4326=fn,we.Simple=dt;var Bt=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[v(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[v(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});vt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=v(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=v(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return v(o)in this._layers},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},_addLayers:function(o){o=o?le(o)?o:[o]:[];for(var c=0,p=o.length;c<p;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[v(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=v(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,p=this._getZoomSpan();for(var b in this._zoomBoundLayers){var C=this._zoomBoundLayers[b].options;o=C.minZoom===void 0?o:Math.min(o,C.minZoom),c=C.maxZoom===void 0?c:Math.max(c,C.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var sn=Bt.extend({initialize:function(o,c){H(this,c),this._layers={};var p,b;if(o)for(p=0,b=o.length;p<b;p++)this.addLayer(o[p])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),p,b;for(p in this._layers)b=this._layers[p],b[o]&&b[o].apply(b,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return v(o)}}),Tr=function(o,c){return new sn(o,c)},ln=sn.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),sn.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),sn.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new K;for(var c in this._layers){var p=this._layers[c];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),Jr=function(o,c){return new ln(o,c)},vi=Pe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){H(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(b,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(o,c){var p=this.options,b=p[c+"Size"];typeof b=="number"&&(b=[b,b]);var C=Q(b),R=Q(c==="shadow"&&p.shadowAnchor||p.iconAnchor||C&&C.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(p.className||""),R&&(o.style.marginLeft=-R.x+"px",o.style.marginTop=-R.y+"px"),C&&(o.style.width=C.x+"px",o.style.height=C.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return Fe.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Za(o){return new vi(o)}var Wa=vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Wa.imagePath!="string"&&(Wa.imagePath=this._detectIconPath()),(this.options.imagePath||Wa.imagePath)+vi.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(p,b,C){var R=b.exec(p);return R&&R[C]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=ht("div","leaflet-default-icon-path",document.body),c=fr(o,"background-image")||fr(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Ka=Mi.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ds(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),st(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,p=c._map,b=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,R=Li(c._icon),W=p.getPixelBounds(),he=p.getPixelOrigin(),ve=F(W.min._subtract(he).add(C),W.max._subtract(he).subtract(C));if(!ve.contains(R)){var Ce=Q((Math.max(ve.max.x,R.x)-ve.max.x)/(W.max.x-ve.max.x)-(Math.min(ve.min.x,R.x)-ve.min.x)/(W.min.x-ve.min.x),(Math.max(ve.max.y,R.y)-ve.max.y)/(W.max.y-ve.max.y)-(Math.min(ve.min.y,R.y)-ve.min.y)/(W.min.y-ve.min.y)).multiplyBy(b);p.panBy(Ce,{animate:!1}),this._draggable._newPos._add(Ce),this._draggable._startPos._add(Ce),Ye(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=G(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=G(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,p=c._shadow,b=Li(c._icon),C=c._map.layerPointToLatLng(b);p&&Ye(p,b),c._latlng=C,o.latlng=C,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),$a=Bt.extend({options:{icon:new Wa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){H(this,c),this._latlng=ce(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=ce(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),b=!1;p!==this._icon&&(this._icon&&this._removeIcon(),b=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),st(p,c),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ze(p,"focus",this._panOnFocus,this);var C=o.icon.createShadow(this._shadow),R=!1;C!==this._shadow&&(this._removeShadow(),R=!0),C&&(st(C,c),C.alt=""),this._shadow=C,o.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&R&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ot(this._icon,"focus",this._panOnFocus,this),Mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Mt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ye(this._icon,o),this._shadow&&Ye(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(st(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ka)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ka(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Lt(this._icon,o),this._shadow&&Lt(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,p=c.iconSize?Q(c.iconSize):Q(0,0),b=c.iconAnchor?Q(c.iconAnchor):Q(0,0);o.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:p.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Rh(o,c){return new $a(o,c)}var ks=Bt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return H(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jo=ks.extend({options:{fill:!0,radius:10},initialize:function(o,c){H(this,c),this._latlng=ce(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=ce(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return ks.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,p=this._clickTolerance(),b=[o+p,c+p];this._pxBounds=new N(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Mh(o,c){return new jo(o,c)}var Hl=jo.extend({initialize:function(o,c,p){if(typeof c=="number"&&(c=a({},p,{radius:c})),H(this,c),this._latlng=ce(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new K(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:ks.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,p=this._map,b=p.options.crs;if(b.distance===Re.distance){var C=Math.PI/180,R=this._mRadius/Re.R/C,W=p.project([c+R,o]),he=p.project([c-R,o]),ve=W.add(he).divideBy(2),Ce=p.unproject(ve).lat,Ne=Math.acos((Math.cos(R*C)-Math.sin(c*C)*Math.sin(Ce*C))/(Math.cos(c*C)*Math.cos(Ce*C)))/C;(isNaN(Ne)||Ne===0)&&(Ne=R/Math.cos(Math.PI/180*c)),this._point=ve.subtract(p.getPixelOrigin()),this._radius=isNaN(Ne)?0:ve.x-p.project([Ce,o-Ne]).x,this._radiusY=ve.y-W.y}else{var qe=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(qe).x}this._updateBounds()}});function Oh(o,c,p){return new Hl(o,c,p)}var $s=ks.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){H(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,p=null,b=Wi,C,R,W=0,he=this._parts.length;W<he;W++)for(var ve=this._parts[W],Ce=1,Ne=ve.length;Ce<Ne;Ce++){C=ve[Ce-1],R=ve[Ce];var qe=b(o,C,R,!0);qe<c&&(c=qe,p=b(o,C,R))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return k(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=ce(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new K,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return f(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],p=f(o),b=0,C=o.length;b<C;b++)p?(c[b]=ce(o[b]),this._bounds.extend(c[b])):c[b]=this._convertLatLngs(o[b]);return c},_project:function(){var o=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new ee(o,o);this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,p){var b=o[0]instanceof $,C=o.length,R,W;if(b){for(W=[],R=0;R<C;R++)W[R]=this._map.latLngToLayerPoint(o[R]),p.extend(W[R]);c.push(W)}else for(R=0;R<C;R++)this._projectLatlngs(o[R],c,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,b,C,R,W,he,ve;for(p=0,C=0,R=this._rings.length;p<R;p++)for(ve=this._rings[p],b=0,W=ve.length;b<W-1;b++)he=Xr(ve[b],ve[b+1],o,b,!0),he&&(c[C]=c[C]||[],c[C].push(he[0]),(he[1]!==ve[b+1]||b===W-2)&&(c[C].push(he[1]),C++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,p=0,b=o.length;p<b;p++)o[p]=Fa(o[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var p,b,C,R,W,he,ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,R=this._parts.length;p<R;p++)for(he=this._parts[p],b=0,W=he.length,C=W-1;b<W;C=b++)if(!(!c&&b===0)&&Ha(o,he[C],he[b])<=ve)return!0;return!1}});function pp(o,c){return new $s(o,c)}$s._flat=T;var Uo=$s.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return No(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=$s.prototype._convertLatLngs.call(this,o),p=c.length;return p>=2&&c[0]instanceof $&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(o){$s.prototype._setLatLngs.call(this,o),f(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return f(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,p=new ee(c,c);if(o=new N(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,C=this._rings.length,R;b<C;b++)R=Do(this._rings[b],o,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,p,b,C,R,W,he,ve,Ce;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(R=0,ve=this._parts.length;R<ve;R++)for(p=this._parts[R],W=0,Ce=p.length,he=Ce-1;W<Ce;he=W++)b=p[W],C=p[he],b.y>o.y!=C.y>o.y&&o.x<(C.x-b.x)*(o.y-b.y)/(C.y-b.y)+b.x&&(c=!c);return c||$s.prototype._containsPoint.call(this,o,!0)}});function gp(o,c){return new Uo(o,c)}var Ys=ln.extend({initialize:function(o,c){H(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=le(o)?o:o.features,p,b,C;if(c){for(p=0,b=c.length;p<b;p++)C=c[p],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var R=this.options;if(R.filter&&!R.filter(o))return this;var W=Qn(o,R);return W?(W.feature=Zl(o),W.defaultOptions=W.options,this.resetStyle(W),R.onEachFeature&&R.onEachFeature(o,W),this.addLayer(W)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=a({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function Qn(o,c){var p=o.type==="Feature"?o.geometry:o,b=p?p.coordinates:null,C=[],R=c&&c.pointToLayer,W=c&&c.coordsToLatLng||ql,he,ve,Ce,Ne;if(!b&&!p)return null;switch(p.type){case"Point":return he=W(b),Bo(R,o,he,c);case"MultiPoint":for(Ce=0,Ne=b.length;Ce<Ne;Ce++)he=W(b[Ce]),C.push(Bo(R,o,he,c));return new ln(C);case"LineString":case"MultiLineString":return ve=Ya(b,p.type==="LineString"?0:1,W),new $s(ve,c);case"Polygon":case"MultiPolygon":return ve=Ya(b,p.type==="Polygon"?1:2,W),new Uo(ve,c);case"GeometryCollection":for(Ce=0,Ne=p.geometries.length;Ce<Ne;Ce++){var qe=Qn({geometry:p.geometries[Ce],type:"Feature",properties:o.properties},c);qe&&C.push(qe)}return new ln(C);case"FeatureCollection":for(Ce=0,Ne=p.features.length;Ce<Ne;Ce++){var ft=Qn(p.features[Ce],c);ft&&C.push(ft)}return new ln(C);default:throw new Error("Invalid GeoJSON object.")}}function Bo(o,c,p,b){return o?o(c,p):new $a(p,b&&b.markersInheritOptions&&b)}function ql(o){return new $(o[1],o[0],o[2])}function Ya(o,c,p){for(var b=[],C=0,R=o.length,W;C<R;C++)W=c?Ya(o[C],c-1,p):(p||ql)(o[C]),b.push(W);return b}function Gl(o,c){return o=ce(o),o.alt!==void 0?[I(o.lng,c),I(o.lat,c),I(o.alt,c)]:[I(o.lng,c),I(o.lat,c)]}function Qa(o,c,p,b){for(var C=[],R=0,W=o.length;R<W;R++)C.push(c?Qa(o[R],f(o[R])?0:c-1,p,b):Gl(o[R],b));return!c&&p&&C.length>0&&C.push(C[0].slice()),C}function Sr(o,c){return o.feature?a({},o.feature,{geometry:c}):Zl(c)}function Zl(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var xr={toGeoJSON:function(o){return Sr(this,{type:"Point",coordinates:Gl(this.getLatLng(),o)})}};$a.include(xr),Hl.include(xr),jo.include(xr),$s.include({toGeoJSON:function(o){var c=!f(this._latlngs),p=Qa(this._latlngs,c?1:0,!1,o);return Sr(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),Uo.include({toGeoJSON:function(o){var c=!f(this._latlngs),p=c&&!f(this._latlngs[0]),b=Qa(this._latlngs,p?2:c?1:0,!0,o);return c||(b=[b]),Sr(this,{type:(p?"Multi":"")+"Polygon",coordinates:b})}}),sn.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(o).geometry.coordinates)}),Sr(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var p=c==="GeometryCollection",b=[];return this.eachLayer(function(C){if(C.toGeoJSON){var R=C.toGeoJSON(o);if(p)b.push(R.geometry);else{var W=Zl(R);W.type==="FeatureCollection"?b.push.apply(b,W.features):b.push(W)}}}),p?Sr(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function Wl(o,c){return new Ys(o,c)}var Xa=Wl,Fo=Bt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,p){this._url=o,this._bounds=se(c),H(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(st(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&vn(this._image),this},bringToBack:function(){return this._map&&Fs(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=se(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:ht("img");if(st(c,"leaflet-image-layer"),this._zoomAnimated&&st(c,"leaflet-zoom-animated"),this.options.className&&st(c,this.options.className),c.onselectstart=S,c.onmousemove=S,c.onload=d(this.fire,this,"load"),c.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;qi(this._image,p,c)},_reset:function(){var o=this._image,c=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();Ye(o,c.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){Lt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ph=function(o,c,p){return new Fo(o,c,p)},Cr=Fo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:ht("video");if(st(c,"leaflet-image-layer"),this._zoomAnimated&&st(c,"leaflet-zoom-animated"),this.options.className&&st(c,this.options.className),c.onselectstart=S,c.onmousemove=S,c.onloadeddata=d(this.fire,this,"load"),o){for(var p=c.getElementsByTagName("source"),b=[],C=0;C<p.length;C++)b.push(p[C].src);this._url=p.length>0?b:[c.src];return}le(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var W=ht("source");W.src=this._url[R],c.appendChild(W)}}});function Ho(o,c,p){return new Cr(o,c,p)}var Kl=Fo.extend({_initImage:function(){var o=this._image=this._url;st(o,"leaflet-image-layer"),this._zoomAnimated&&st(o,"leaflet-zoom-animated"),this.options.className&&st(o,this.options.className),o.onselectstart=S,o.onmousemove=S}});function Dh(o,c,p){return new Kl(o,c,p)}var Xn=Bt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof $||le(o))?(this._latlng=ce(o),H(this,c)):(H(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Lt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Lt(this._container,1),this.bringToFront(),this.options.interactive&&(st(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Lt(this._container,0),this._removeTimeout=setTimeout(d(Mt,void 0,this._container),200)):Mt(this._container),this.options.interactive&&(Yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ce(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vn(this._container),this},bringToBack:function(){return this._map&&Fs(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof ln){c=null;var p=this._source._layers;for(var b in p)if(p[b]._map){c=p[b];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=Q(this.options.offset),p=this._getAnchor();this._zoomAnimated?Ye(this._container,o.add(p)):c=c.add(o).add(p);var b=this._containerBottom=-c.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=b+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});vt.include({_initOverlay:function(o,c,p,b){var C=c;return C instanceof o||(C=new o(b).setContent(c)),p&&C.setLatLng(p),C}}),Bt.include({_initOverlay:function(o,c,p,b){var C=p;return C instanceof o?(H(C,b),C._source=this):(C=c&&!b?c:new o(b,this),C.setContent(p)),C}});var Ja=Xn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Xn.prototype.openOn.call(this,o)},onAdd:function(o){Xn.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ks||this._source.on("preclick",$n))},onRemove:function(o){Xn.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ks||this._source.off("preclick",$n))},getEvents:function(){var o=Xn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=ht("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=ht("div",o+"-content-wrapper",c);if(this._contentNode=ht("div",o+"-content",p),Cs(c),si(this._contentNode),Ze(c,"contextmenu",$n),this._tipContainer=ht("div",o+"-tip-container",c),this._tip=ht("div",o+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=ht("a",o+"-close-button",c);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',Ze(b,"click",function(C){Gt(C),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var b=o.offsetHeight,C=this.options.maxHeight,R="leaflet-popup-scrolled";C&&b>C?(c.height=C+"px",st(o,R)):Yt(o,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();Ye(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(fr(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,b=this._containerWidth,C=new ee(this._containerLeft,-p-this._containerBottom);C._add(Li(this._container));var R=o.layerPointToContainerPoint(C),W=Q(this.options.autoPanPadding),he=Q(this.options.autoPanPaddingTopLeft||W),ve=Q(this.options.autoPanPaddingBottomRight||W),Ce=o.getSize(),Ne=0,qe=0;R.x+b+ve.x>Ce.x&&(Ne=R.x+b-Ce.x+ve.x),R.x-Ne-he.x<0&&(Ne=R.x-he.x),R.y+p+ve.y>Ce.y&&(qe=R.y+p-Ce.y+ve.y),R.y-qe-he.y<0&&(qe=R.y-he.y),(Ne||qe)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Ne,qe]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Nh=function(o,c){return new Ja(o,c)};vt.mergeOptions({closePopupOnClick:!0}),vt.include({openPopup:function(o,c,p){return this._initOverlay(Ja,o,c,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Bt.include({bindPopup:function(o,c){return this._popup=this._initOverlay(Ja,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof ln||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){mi(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof ks)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var el=Xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Xn.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Xn.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Xn.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ht("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,p,b=this._map,C=this._container,R=b.latLngToContainerPoint(b.getCenter()),W=b.layerPointToContainerPoint(o),he=this.options.direction,ve=C.offsetWidth,Ce=C.offsetHeight,Ne=Q(this.options.offset),qe=this._getAnchor();he==="top"?(c=ve/2,p=Ce):he==="bottom"?(c=ve/2,p=0):he==="center"?(c=ve/2,p=Ce/2):he==="right"?(c=0,p=Ce/2):he==="left"?(c=ve,p=Ce/2):W.x<R.x?(he="right",c=0,p=Ce/2):(he="left",c=ve+(Ne.x+qe.x)*2,p=Ce/2),o=o.subtract(Q(c,p,!0)).add(Ne).add(qe),Yt(C,"leaflet-tooltip-right"),Yt(C,"leaflet-tooltip-left"),Yt(C,"leaflet-tooltip-top"),Yt(C,"leaflet-tooltip-bottom"),st(C,"leaflet-tooltip-"+he),Ye(C,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Lt(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mp=function(o,c){return new el(o,c)};vt.include({openTooltip:function(o,c,p){return this._initOverlay(el,o,c,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Bt.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(el,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof ln||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(Ze(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Ze(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,p,b;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),b=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(c)}});var zh=vi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(ii(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var b=Q(p.bgPos);c.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function vp(o){return new zh(o)}vi.Default=Wa;var qo=Bt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){H(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Mt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ee?o:new ee(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,p=-o(-1/0,1/0),b=0,C=c.length,R;b<C;b++)R=c[b].style.zIndex,c[b]!==this._container&&R&&(p=o(p,+R));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){Lt(this._container,this.options.opacity);var o=+new Date,c=!1,p=!1;for(var b in this._tiles){var C=this._tiles[b];if(!(!C.current||!C.loaded)){var R=Math.min(1,(o-C.loaded)/200);Lt(C.el,R),R<1?c=!0:(C.active?p=!0:this._onOpaqueTile(C),C.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(Z(this._fadeFrame),this._fadeFrame=G(this._updateOpacity,this))}},_onOpaqueTile:S,_initContainer:function(){this._container||(this._container=ht("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=c-Math.abs(o-p),this._onUpdateLevel(p)):(Mt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var b=this._levels[o],C=this._map;return b||(b=this._levels[o]={},b.el=ht("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=c,b.origin=C.project(C.unproject(C.getPixelOrigin()),o).round(),b.zoom=o,this._setZoomTransform(b,C.getCenter(),C.getZoom()),S(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:S,_onRemoveLevel:S,_onCreateLevel:S,_pruneTiles:function(){if(this._map){var o,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var b=c.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Mt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,p,b){var C=Math.floor(o/2),R=Math.floor(c/2),W=p-1,he=new ee(+C,+R);he.z=+W;var ve=this._tileCoordsToKey(he),Ce=this._tiles[ve];return Ce&&Ce.active?(Ce.retain=!0,!0):(Ce&&Ce.loaded&&(Ce.retain=!0),W>b?this._retainParent(C,R,W,b):!1)},_retainChildren:function(o,c,p,b){for(var C=2*o;C<2*o+2;C++)for(var R=2*c;R<2*c+2;R++){var W=new ee(C,R);W.z=p+1;var he=this._tileCoordsToKey(W),ve=this._tiles[he];if(ve&&ve.active){ve.retain=!0;continue}else ve&&ve.loaded&&(ve.retain=!0);p+1<b&&this._retainChildren(C,R,p+1,b)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,p,b){var C=Math.round(c);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var R=this.options.updateWhenZooming&&C!==this._tileZoom;(!b||R)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,c)},_setZoomTransform:function(o,c,p){var b=this._map.getZoomScale(p,o.zoom),C=o.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(c,p)).round();Fe.any3d?qi(o.el,C,b):Ye(o.el,C)},_resetGrid:function(){var o=this._map,c=o.options.crs,p=this._tileSize=this.getTileSize(),b=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],b).x/p.x),Math.ceil(o.project([0,c.wrapLng[1]],b).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],b).y/p.x),Math.ceil(o.project([c.wrapLat[1],0],b).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),b=c.getZoomScale(p,this._tileZoom),C=c.project(o,this._tileZoom).floor(),R=c.getSize().divideBy(b*2);return new N(C.subtract(R),C.add(R))},_update:function(o){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(o),C=this._pxBoundsToTileRange(b),R=C.getCenter(),W=[],he=this.options.keepBuffer,ve=new N(C.getBottomLeft().subtract([he,-he]),C.getTopRight().add([he,-he]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ce in this._tiles){var Ne=this._tiles[Ce].coords;(Ne.z!==this._tileZoom||!ve.contains(new ee(Ne.x,Ne.y)))&&(this._tiles[Ce].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var qe=C.min.y;qe<=C.max.y;qe++)for(var ft=C.min.x;ft<=C.max.x;ft++){var Fn=new ee(ft,qe);if(Fn.z=this._tileZoom,!!this._isValidTile(Fn)){var yn=this._tiles[this._tileCoordsToKey(Fn)];yn?yn.current=!0:W.push(Fn)}}if(W.sort(function(Dt,Nt){return Dt.distanceTo(R)-Nt.distanceTo(R)}),W.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Oi=document.createDocumentFragment();for(ft=0;ft<W.length;ft++)this._addTile(W[ft],Oi);this._level.el.appendChild(Oi)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!c.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(o);return se(this.options.bounds).overlaps(b)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,p=this.getTileSize(),b=o.scaleBy(p),C=b.add(p),R=c.unproject(b,o.z),W=c.unproject(C,o.z);return[R,W]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),p=new K(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),p=new ee(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(o){var c=this._tiles[o];c&&(Mt(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){st(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=S,o.onmousemove=S,Fe.ielt9&&this.options.opacity<1&&Lt(o,this.options.opacity)},_addTile:function(o,c){var p=this._getTilePos(o),b=this._tileCoordsToKey(o),C=this.createTile(this._wrapCoords(o),d(this._tileReady,this,o));this._initTile(C),this.createTile.length<2&&G(d(this._tileReady,this,o,null,C)),Ye(C,p),this._tiles[b]={el:C,coords:o,current:!0},c.appendChild(C),this.fire("tileloadstart",{tile:C,coords:o})},_tileReady:function(o,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:o});var b=this._tileCoordsToKey(o);p=this._tiles[b],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Lt(p.el,0),Z(this._fadeFrame),this._fadeFrame=G(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(st(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?G(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new ee(this._wrapX?E(o.x,this._wrapX):o.x,this._wrapY?E(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new N(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Vh(o){return new qo(o)}var Ar=qo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=H(this,c),c.detectRetina&&Fe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var p=document.createElement("img");return Ze(p,"load",d(this._tileOnLoad,this,c,p)),Ze(p,"error",d(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var c={r:Fe.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=p),c["-y"]=p}return X(this._url,a(c,this.options))},_tileOnLoad:function(o,c){Fe.ielt9?setTimeout(d(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,p){var b=this.options.errorTileUrl;b&&c.getAttribute("src")!==b&&(c.src=b),o(p,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,b=this.options.zoomOffset;return p&&(o=c-o),o+b},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=S,c.onerror=S,!c.complete)){c.src=ae;var p=this._tiles[o].coords;Mt(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",ae),qo.prototype._removeTile.call(this,o)},_tileReady:function(o,c,p){if(!(!this._map||p&&p.getAttribute("src")===ae))return qo.prototype._tileReady.call(this,o,c,p)}});function Ki(o,c){return new Ar(o,c)}var tl=Ar.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var p=a({},this.defaultWmsParams);for(var b in c)b in this.options||(p[b]=c[b]);c=H(this,c);var C=c.detectRetina&&Fe.retina?2:1,R=this.getTileSize();p.width=R.x*C,p.height=R.y*C,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Ar.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),p=this._crs,b=F(p.project(c[0]),p.project(c[1])),C=b.min,R=b.max,W=(this._wmsVersion>=1.3&&this._crs===fn?[C.y,C.x,R.y,R.x]:[C.x,C.y,R.x,R.y]).join(","),he=Ar.prototype.getTileUrl.call(this,o);return he+B(this.wmsParams,he,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+W},setParams:function(o,c){return a(this.wmsParams,o),c||this.redraw(),this}});function $i(o,c){return new tl(o,c)}Ar.WMS=tl,Ki.wms=$i;var yi=Bt.extend({options:{padding:.1},initialize:function(o){H(this,o),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),st(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var p=this._map.getZoomScale(c,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,c),R=b.multiplyBy(-p).add(C).subtract(this._map._getNewPixelOrigin(o,c));Fe.any3d?qi(this._container,R,p):Ye(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new N(p,p.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$l=yi.extend({options:{tolerance:0},getEvents:function(){var o=yi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){yi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Ze(o,"mousemove",this._onMouseMove,this),Ze(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ze(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,Mt(this._container),Ot(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var o=this._bounds,c=this._container,p=o.getSize(),b=Fe.retina?2:1;Ye(c,o.min),c.width=b*p.x,c.height=b*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){yi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[v(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,p=c.next,b=c.prev;p?p.prev=b:this._drawLast=b,b?b.next=p:this._drawFirst=p,delete o._order,delete this._layers[v(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),p=[],b,C;for(C=0;C<c.length;C++){if(b=Number(c[C]),isNaN(b))return;p.push(b)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||G(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)o=b.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var p,b,C,R,W=o._parts,he=W.length,ve=this._ctx;if(he){for(ve.beginPath(),p=0;p<he;p++){for(b=0,C=W[p].length;b<C;b++)R=W[p][b],ve[b?"lineTo":"moveTo"](R.x,R.y);c&&ve.closePath()}this._fillStroke(ve,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,p=this._ctx,b=Math.max(Math.round(o._radius),1),C=(Math.max(Math.round(o._radiusY),1)||b)/b;C!==1&&(p.save(),p.scale(1,C)),p.beginPath(),p.arc(c.x,c.y/C,b,0,Math.PI*2,!1),C!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,c){var p=c.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),p,b,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(b=p);this._fireEvent(b?[b]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Yt(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var p,b,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(c)&&(b=p);b!==this._hoveredLayer&&(this._handleMouseOut(o),b&&(st(this._container,"leaflet-interactive"),this._fireEvent([b],o,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,p){this._map._fireDOMEvent(c,p||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var p=c.next,b=c.prev;if(p)p.prev=b;else return;b?b.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var p=c.next,b=c.prev;if(b)b.next=p;else return;p?p.prev=b:b&&(this._drawLast=b),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function nl(o){return Fe.canvas?new $l(o):null}var kr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ju={_initContainer:function(){this._container=ht("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(yi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=kr("shape");st(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=kr("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;Mt(c),o.removeInteractiveTarget(c),delete this._layers[v(o)]},_updateStyle:function(o){var c=o._stroke,p=o._fill,b=o.options,C=o._container;C.stroked=!!b.stroke,C.filled=!!b.fill,b.stroke?(c||(c=o._stroke=kr("stroke")),C.appendChild(c),c.weight=b.weight+"px",c.color=b.color,c.opacity=b.opacity,b.dashArray?c.dashStyle=le(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=b.lineCap.replace("butt","flat"),c.joinstyle=b.lineJoin):c&&(C.removeChild(c),o._stroke=null),b.fill?(p||(p=o._fill=kr("fill")),C.appendChild(p),p.color=b.fillColor||b.color,p.opacity=b.fillOpacity):p&&(C.removeChild(p),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),p=Math.round(o._radius),b=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+b+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){vn(o._container)},_bringToBack:function(o){Fs(o._container)}},Ls=Fe.vml?kr:et,Go=yi.extend({_initContainer:function(){this._container=Ls("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ls("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Mt(this._container),Ot(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var o=this._bounds,c=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),Ye(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=Ls("path");o.options.className&&st(c,o.options.className),o.options.interactive&&st(c,"leaflet-interactive"),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Mt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[v(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,p=o.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,En(o._parts,c))},_updateCircle:function(o){var c=o._point,p=Math.max(Math.round(o._radius),1),b=Math.max(Math.round(o._radiusY),1)||p,C="a"+p+","+b+" 0 1,0 ",R=o._empty()?"M0 0":"M"+(c.x-p)+","+c.y+C+p*2+",0 "+C+-p*2+",0 ";this._setPath(o,R)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){vn(o._path)},_bringToBack:function(o){Fs(o._path)}});Fe.vml&&Go.include(Ju);function il(o){return Fe.svg||Fe.vml?new Go(o):null}vt.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&nl(o)||il(o)}});var eo=Uo.extend({initialize:function(o,c){Uo.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=se(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function yp(o,c){return new eo(o,c)}Go.create=Ls,Go.pointsToPath=En,Ys.geometryToLayer=Qn,Ys.coordsToLatLng=ql,Ys.coordsToLatLngs=Ya,Ys.latLngToCoords=Gl,Ys.latLngsToCoords=Qa,Ys.getFeature=Sr,Ys.asFeature=Zl,vt.mergeOptions({boxZoom:!0});var _i=Mi.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ot(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Gi(),Ro(),this._startPoint=this._map.mouseEventToContainerPoint(o),Ze(document,{contextmenu:mi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=ht("div","leaflet-zoom-box",this._container),st(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new N(this._point,this._startPoint),p=c.getSize();Ye(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Mt(this._box),Yt(this._container,"leaflet-crosshair")),Wn(),Wr(),Ot(document,{contextmenu:mi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var c=new K(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vt.addInitHook("addHandler","boxZoom",_i),vt.mergeOptions({doubleClickZoom:!0});var Yl=Mi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,p=c.getZoom(),b=c.options.zoomDelta,C=o.originalEvent.shiftKey?p-b:p+b;c.options.doubleClickZoom==="center"?c.setZoom(C):c.setZoomAround(o.containerPoint,C)}});vt.addInitHook("addHandler","doubleClickZoom",Yl),vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Is=Mi.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ds(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}st(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Yt(this._map._container,"leaflet-grab"),Yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=se(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),p=this._initialWorldOffset,b=this._draggable._newPos.x,C=(b-c+p)%o+c-p,R=(b+c+p)%o-c-p,W=Math.abs(C+p)<Math.abs(R+p)?C:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=W},_onDragEnd:function(o){var c=this._map,p=c.options,b=!p.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),b)c.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,W=p.easeLinearity,he=C.multiplyBy(W/R),ve=he.distanceTo([0,0]),Ce=Math.min(p.inertiaMaxSpeed,ve),Ne=he.multiplyBy(Ce/ve),qe=Ce/(p.inertiaDeceleration*W),ft=Ne.multiplyBy(-qe/2).round();!ft.x&&!ft.y?c.fire("moveend"):(ft=c._limitOffset(ft,c.options.maxBounds),G(function(){c.panBy(ft,{duration:qe,easeLinearity:W,noMoveStart:!0,animate:!0})}))}}});vt.addInitHook("addHandler","dragging",Is),vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ec=Mi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Ze(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ot(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,p=o.scrollTop||c.scrollTop,b=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(b,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},p=this.keyCodes,b,C;for(b=0,C=p.left.length;b<C;b++)c[p.left[b]]=[-1*o,0];for(b=0,C=p.right.length;b<C;b++)c[p.right[b]]=[o,0];for(b=0,C=p.down.length;b<C;b++)c[p.down[b]]=[0,o];for(b=0,C=p.up.length;b<C;b++)c[p.up[b]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},p=this.keyCodes,b,C;for(b=0,C=p.zoomIn.length;b<C;b++)c[p.zoomIn[b]]=o;for(b=0,C=p.zoomOut.length;b<C;b++)c[p.zoomOut[b]]=-o},_addHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ot(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,p=this._map,b;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(b=this._panKeys[c],o.shiftKey&&(b=Q(b).multiplyBy(3)),p.options.maxBounds&&(b=p._limitOffset(Q(b),p.options.maxBounds)),p.options.worldCopyJump){var C=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(b)));p.panTo(C)}else p.panBy(b)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;mi(o)}}});vt.addInitHook("addHandler","keyboard",ec),vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var sl=Mi.extend({addHooks:function(){Ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ot(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=Bn(o),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var b=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),b),mi(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,R=p?Math.ceil(C/p)*p:C,W=o._limitZoom(c+(this._delta>0?R:-R))-c;this._delta=0,this._startTime=null,W&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+W):o.setZoomAround(this._lastMousePos,c+W))}});vt.addInitHook("addHandler","scrollWheelZoom",sl);var to=600;vt.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var Ql=Mi.extend({addHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ot(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new ee(c.clientX,c.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Ze(document,"touchend",Gt),Ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),to),Ze(document,"touchend touchcancel contextmenu",this._cancel,this),Ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Ot(document,"touchend",Gt),Ot(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Ot(document,"touchend touchcancel contextmenu",this._cancel,this),Ot(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new ee(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});vt.addInitHook("addHandler","tapHold",Ql),vt.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var tc=Mi.extend({addHooks:function(){st(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Yt(this._map._container,"leaflet-touch-zoom"),Ot(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(o.touches[0]),b=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(b)._divideBy(2))),this._startDist=p.distanceTo(b),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend touchcancel",this._onTouchEnd,this),Gt(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(o.touches[0]),b=c.mouseEventToContainerPoint(o.touches[1]),C=p.distanceTo(b)/this._startDist;if(this._zoom=c.getScaleZoom(C,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&C<1||this._zoom>c.getMaxZoom()&&C>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var R=p._add(b)._divideBy(2)._subtract(this._centerPoint);if(C===1&&R.x===0&&R.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var W=d(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=G(W,this,!0),Gt(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),Ot(document,"touchmove",this._onTouchMove,this),Ot(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});vt.addInitHook("addHandler","touchZoom",tc),vt.BoxZoom=_i,vt.DoubleClickZoom=Yl,vt.Drag=Is,vt.Keyboard=ec,vt.ScrollWheelZoom=sl,vt.TapHold=Ql,vt.TouchZoom=tc,t.Bounds=N,t.Browser=Fe,t.CRS=we,t.Canvas=$l,t.Circle=Hl,t.CircleMarker=jo,t.Class=Pe,t.Control=Yn,t.DivIcon=zh,t.DivOverlay=Xn,t.DomEvent=Yr,t.DomUtil=qs,t.Draggable=ds,t.Evented=J,t.FeatureGroup=ln,t.GeoJSON=Ys,t.GridLayer=qo,t.Handler=Mi,t.Icon=vi,t.ImageOverlay=Fo,t.LatLng=$,t.LatLngBounds=K,t.Layer=Bt,t.LayerGroup=sn,t.LineUtil=j,t.Map=vt,t.Marker=$a,t.Mixin=Qr,t.Path=ks,t.Point=ee,t.PolyUtil=Er,t.Polygon=Uo,t.Polyline=$s,t.Popup=Ja,t.PosAnimation=Zs,t.Projection=De,t.Rectangle=eo,t.Renderer=yi,t.SVG=Go,t.SVGOverlay=Kl,t.TileLayer=Ar,t.Tooltip=el,t.Transformation=Me,t.Util=U,t.VideoOverlay=Cr,t.bind=d,t.bounds=F,t.canvas=nl,t.circle=Oh,t.circleMarker=Mh,t.control=Sn,t.divIcon=vp,t.extend=a,t.featureGroup=Jr,t.geoJSON=Wl,t.geoJson=Xa,t.gridLayer=Vh,t.icon=Za,t.imageOverlay=Ph,t.latLng=ce,t.latLngBounds=se,t.layerGroup=Tr,t.map=yr,t.marker=Rh,t.point=Q,t.polygon=gp,t.polyline=pp,t.popup=Nh,t.rectangle=yp,t.setOptions=H,t.stamp=v,t.svg=il,t.svgOverlay=Dh,t.tileLayer=Ki,t.tooltip=mp,t.transformation=Xe,t.version=s,t.videoOverlay=Ho;var nc=window.L;t.noConflict=function(){return window.L=nc,this},window.L=t}))})($c,$c.exports)),$c.exports}var rN=sN();const Di=jf(rN),pE=["Pending Pickup","Pickup Assigned","Pickup Accepted","Enroute to Facility","Arrived at Hub or Facility","In Transit","Out for Delivery","Delivered","Awaiting Receipt","Delivery Failed","Returned to Sender"],Em="http://localhost:5000",oN=()=>{const n=w.useRef(null),[e,t]=w.useState(null),[s,a]=w.useState([]),[u,d]=w.useState(null),[g,v]=w.useState(pE[0]),[_,E]=w.useState(!1),[S,I]=w.useState(null),[O,D]=w.useState([]),[H,B]=w.useState(null),[te,X]=w.useState([]),[le,oe]=w.useState(!1),[ae,re]=w.useState(null),[V,z]=w.useState(null),M=()=>localStorage.getItem("token");w.useEffect(()=>{try{if(!n.current){console.warn("Map ref not available");return}const de=Di.map(n.current).setView([6.5244,3.3792],11),Q=Di.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,name:"Street Map"}),N=Di.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:18,name:"Satellite"});return Q.addTo(de),Di.control.layers({"Street Map":Q,Satellite:N}).addTo(de),t(de),()=>{de.remove()}}catch(de){console.error("Error initializing Leaflet map:",de),re("Failed to initialize map: "+de.message)}},[]),w.useEffect(()=>{if(!e)return;const de=Q=>{_&&u&&ke(Q)};return e.on("click",de),()=>{e.off("click",de)}},[e,_,u,g]),w.useEffect(()=>{Z(),U()},[]),w.useEffect(()=>{if(!e||!te.length)return;O.forEach(Q=>e.removeLayer(Q));const de=te.map(Q=>{const N=q(Q.status),F=Di.marker([Q.location.lat,Q.location.lng],{icon:N}).addTo(e),K=`
        <div style="font-size: 13px;">
          <strong style="color: #4f46e5;">${Q.user.fullName}</strong><br/>
          <div style="margin-top: 6px;">
            <strong> Email:</strong> ${Q.user.email}<br/>
            <strong> Status:</strong> <span style="color: ${G(Q.status)}; font-weight: 600;">${Q.status}</span><br/>
            <strong> Tracking:</strong> <span style="font-family: monospace; color: #4f46e5;">${Q.trackingId}</span><br/>
            <strong> Updated:</strong> ${new Date(Q.updatedAt).toLocaleString()}
          </div>
        </div>
      `;return F.bindPopup(K),F});D(de)},[e,te]);const q=de=>{const N={"Pending Pickup":"#f59e0b","Pickup Assigned":"#3b82f6","Pickup Accepted":"#10b981","Enroute to Facility":"#8b5cf6","Arrived at Hub or Facility":"#6366f1","In Transit":"#06b6d4","Out for Delivery":"#f97316",Delivered:"#22c55e","Awaiting Receipt":"#14b8a6","Delivery Failed":"#ef4444","Returned to Sender":"#64748b"}[de]||"#9ca3af";return Di.divIcon({html:`<div style="
        background-color: ${N};
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      "></div>`,iconSize:[36,36],className:"custom-icon"})},G=de=>({"Pending Pickup":"#f59e0b","Pickup Assigned":"#3b82f6","Pickup Accepted":"#10b981","Enroute to Facility":"#8b5cf6","Arrived at Hub or Facility":"#6366f1","In Transit":"#06b6d4","Out for Delivery":"#f97316",Delivered:"#22c55e","Awaiting Receipt":"#14b8a6","Delivery Failed":"#ef4444","Returned to Sender":"#64748b"})[de]||"#9ca3af",Z=async()=>{try{re(null);const de=M(),Q=await fetch(`${Em}/api/admin/verified-users`,{headers:{Authorization:`Bearer ${de}`}});if(!Q.ok)throw new Error("Failed to fetch verified users");const N=await Q.json();a(Array.isArray(N)?N:[])}catch(de){console.error("Error fetching verified users:",de),re("Failed to load verified users. Make sure you are logged in as admin.")}},U=async()=>{try{const de=M();if(!de){console.warn("No token available for fetching tracking records"),X([]);return}const Q=await fetch(`${Em}/api/admin/tracking`,{headers:{Authorization:`Bearer ${de}`}});if(!Q.ok)throw new Error(`Failed to fetch tracking records (${Q.status})`);const N=await Q.json();X(Array.isArray(N)?N:[])}catch(de){console.error("Error fetching tracking records:",de),X([])}},Pe=de=>{d(de),B(null),z(null),re(null)},ke=w.useCallback(async de=>{try{if(console.log("Map clicked. isPinMode:",_,"selectedUser:",u?u.name:null),!_||!u||!e){console.log("Skipping click - isPinMode:",_,"selectedUser:",!!u,"map:",!!e);return}const Q={lat:de.latlng.lat,lng:de.latlng.lng};console.log("Creating marker at:",Q),S&&e.removeLayer(S);const N=q(g),F=Di.marker([Q.lat,Q.lng],{icon:N}).addTo(e),K=`
        <div style="font-size: 13px;">
          <strong style="color: #4f46e5;">${u.name}</strong><br/>
          <strong> Email:</strong> ${u.email}<br/>
          <strong> Status:</strong> <span style="color: ${G(g)}; font-weight: 600;">${g}</span><br/>
          <strong> Location:</strong> ${Q.lat.toFixed(4)}, ${Q.lng.toFixed(4)}
        </div>
      `;F.bindPopup(K).openPopup(),I(F),console.log("Saving tracking record..."),await ie(Q),E(!1)}catch(Q){console.error("Error in handleMapClick:",Q),re("Failed to process map click. Please try again."),E(!1)}},[_,u,e,g,S]),ie=async de=>{oe(!0),re(null);try{const Q=M();if(!Q)throw new Error("No authentication token found. Please log in again.");if(!u||!u._id)throw new Error("No user selected. Please select a verified user.");console.log("Sending tracking request:",{userId:u._id,status:g,location:de});const N=await fetch(`${Em}/api/admin/tracking`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify({userId:u._id,status:g,location:de})});if(console.log("Response status:",N.status),!N.ok){let K=`Failed to save tracking record (${N.status})`;try{K=(await N.json()).message||K}catch{const $=await N.text();console.error("Error response text:",$)}throw new Error(K)}const F=await N.json();if(console.log("Response data:",F),!F.trackingId)throw new Error("No tracking ID returned from server");console.log("Tracking ID generated:",F.trackingId),B(F.trackingId),z(" Tracking record created successfully!"),re(null),await U()}catch(Q){const N=Q.message||"Failed to save tracking record";console.error("Error saving tracking record:",Q),re(N),B(null)}finally{oe(!1)}},J=()=>{if(!u){re("Please select a verified user first.");return}E(!_),re(null)},ee=async()=>{if(H)try{await navigator.clipboard.writeText(H),z("Tracking ID copied to clipboard!"),setTimeout(()=>z(null),3e3)}catch{const Q=document.createElement("textarea");Q.value=H,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q),z("Tracking ID copied to clipboard!"),setTimeout(()=>z(null),3e3)}};return x.jsxs("section",{className:"live-tracking-section",children:[x.jsx("h2",{className:"section-title",children:" Live Package Tracking Map"}),ae&&x.jsxs("div",{className:"error-message",children:[" ",ae]}),V&&x.jsxs("div",{className:"success-message",children:[" ",V]}),x.jsxs("div",{className:"tracking-layout",children:[x.jsxs("div",{className:"tracking-sidebar",children:[x.jsxs("h3",{className:"sidebar-title",children:[" Verified Users (",s.length,")"]}),x.jsx("p",{className:"sidebar-hint",children:"Select a user to assign package tracking"}),x.jsx("div",{className:"users-list",children:s.length===0?x.jsxs("div",{className:"no-users",children:[x.jsx("span",{className:"no-users-icon",children:""}),x.jsx("p",{children:"No verified users available"}),x.jsx("small",{children:"Verify users in the Users tab first"})]}):s.map(de=>x.jsxs("button",{className:`user-item ${u?._id===de._id?"active":""}`,onClick:()=>Pe(de),title:`${de.name} - ${de.email}`,children:[x.jsx("div",{className:"user-avatar",children:de.name?.charAt(0)?.toUpperCase()||"?"}),x.jsxs("div",{className:"user-info",children:[x.jsx("strong",{children:de.name}),x.jsx("span",{className:"user-email",children:de.email})]}),u?._id===de._id&&x.jsx("span",{className:"selected-badge",children:""})]},de._id))})]}),x.jsxs("div",{className:"tracking-map-wrapper",children:[x.jsx("div",{ref:n,className:"tracking-map",id:"adminMap",children:!e&&x.jsxs("div",{className:"map-loading",children:[x.jsx("div",{className:"loading-spinner"}),x.jsx("p",{children:"Loading map..."})]})}),x.jsxs("div",{className:"tracking-controls",children:[x.jsx("div",{className:"selected-user-display",children:u?x.jsxs("div",{className:"selected-user-info",children:[x.jsx("span",{className:"label",children:"Selected:"}),x.jsx("span",{className:"user-name",children:u.name})]}):x.jsx("span",{className:"no-selection",children:"No user selected"})}),x.jsxs("div",{className:"status-control",children:[x.jsx("label",{htmlFor:"statusSelect",children:" Package Status:"}),x.jsx("select",{id:"statusSelect",className:"status-select",value:g,onChange:de=>v(de.target.value),disabled:!u,children:pE.map(de=>x.jsx("option",{value:de,children:de},de))})]}),x.jsx("button",{className:`pin-button ${_?"active":""}`,onClick:J,disabled:!u||le,children:le?x.jsx(x.Fragment,{children:" Saving..."}):_?x.jsx(x.Fragment,{children:" Click on Map to Pin Location"}):x.jsx(x.Fragment,{children:" Pin Package Location"})})]}),x.jsxs("div",{className:"tracking-id-box",children:[x.jsxs("div",{className:"id-header",children:[x.jsx("div",{className:"id-label",children:" Generated Tracking ID"}),te.length>0&&x.jsxs("span",{className:"records-count",children:[te.length," active packages"]})]}),H?x.jsxs("div",{className:"id-display",children:[x.jsx("span",{className:"tracking-id",children:H}),x.jsx("button",{className:"copy-button",onClick:ee,title:"Copy to clipboard",children:" Copy"})]}):x.jsxs("div",{className:"id-placeholder",children:[x.jsx("span",{className:"placeholder-icon",children:""}),x.jsx("span",{children:"Select a user, set status, and click on the map to generate a tracking ID"})]})]}),x.jsxs("div",{className:"instructions-box",children:[x.jsx("h4",{children:" How to Create a Tracking Record:"}),x.jsxs("ol",{children:[x.jsx("li",{children:"Select a verified user from the left sidebar"}),x.jsx("li",{children:"Choose the package status from the dropdown"}),x.jsx("li",{children:'Click "Pin Package Location" button'}),x.jsx("li",{children:"Click on the map to pin the exact package location"}),x.jsx("li",{children:"Copy the generated tracking ID and share with the customer"})]})]})]})]})]})};class aN extends dv.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("TrackingModal Error:",e,t)}render(){return this.state.hasError?x.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[x.jsxs("p",{style:{color:"#c53030",fontSize:"14px"},children:[" Error loading tracking map: ",this.state.error?.message]}),x.jsx("p",{style:{color:"#718096",fontSize:"12px"},children:"Please close this dialog and try again"})]}):this.props.children}}const lN=({isOpen:n,onClose:e})=>{const[t,s]=w.useState(!1);if(w.useEffect(()=>{if(n){s(!0);const d=g=>{g.key==="Escape"&&e()};return document.addEventListener("keydown",d),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}}else s(!1)},[n,e]),!n)return null;const a=d=>{d.target===d.currentTarget&&e()},u=x.jsx("div",{className:"tracking-modal-overlay",onClick:a,style:{display:"flex"},children:x.jsxs("div",{className:"tracking-modal-content",onClick:d=>d.stopPropagation(),children:[x.jsxs("div",{className:"tracking-modal-header",children:[x.jsx("h2",{className:"tracking-modal-title",children:" Live Package Tracking"}),x.jsx("button",{className:"tracking-modal-close",onClick:e,title:"Close (ESC)",type:"button",children:""})]}),x.jsx("div",{className:"tracking-modal-body",children:t&&x.jsx(aN,{children:x.jsx(oN,{})})})]})});return Qk.createPortal(u,document.body)},uN=({isOpen:n,onClose:e})=>{if(w.useEffect(()=>{if(n){const s=a=>{a.key==="Escape"&&e()};return document.addEventListener("keydown",s),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}}},[n,e]),!n)return null;const t=s=>{s.target===s.currentTarget&&e()};return x.jsx("div",{className:"tracking-modal-overlay",onClick:t,children:x.jsxs("div",{className:"tracking-modal-content",onClick:s=>s.stopPropagation(),children:[x.jsxs("div",{className:"tracking-modal-header",children:[x.jsx("h2",{className:"tracking-modal-title",children:" Test Modal"}),x.jsx("button",{className:"tracking-modal-close",onClick:e,title:"Close (ESC)",type:"button",children:""})]}),x.jsxs("div",{className:"tracking-modal-body",style:{textAlign:"center",padding:"40px 20px"},children:[x.jsx("p",{style:{fontSize:"16px",color:"#2d3748"},children:" Modal is working!"}),x.jsx("p",{style:{fontSize:"14px",color:"#718096",marginBottom:"20px"},children:"The modal overlay and popup infrastructure is functioning correctly."}),x.jsx("p",{style:{fontSize:"13px",color:"#a0aec0",marginBottom:"20px"},children:"If you can see this message, the modal system itself is working."}),x.jsx("div",{style:{backgroundColor:"#f0f4ff",border:"1px solid #c7d2fe",padding:"16px",borderRadius:"8px",marginBottom:"20px"},children:x.jsxs("p",{style:{margin:"0",fontSize:"12px",color:"#4f46e5",fontFamily:"monospace"},children:["If the main tracking map disappears when you try to open it,",x.jsx("br",{}),"the issue is likely with the Google Maps API configuration."]})}),x.jsx("button",{onClick:e,style:{backgroundColor:"#4f46e5",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"Close Test Modal"})]})]})})},gE=({onLogout:n})=>{const[e,t]=w.useState(null),[s,a]=w.useState(!0),[u,d]=w.useState("overview"),[g,v]=w.useState(!1),[_,E]=w.useState(!1),[S,I]=w.useState([]),[O,D]=w.useState([]),[H,B]=w.useState([]),[te,X]=w.useState([]),[le,oe]=w.useState(null),[ae,re]=w.useState([]),[V,z]=w.useState(""),[M,q]=w.useState({}),[G,Z]=w.useState([]),[U,Pe]=w.useState([]),[ke,ie]=w.useState(null),[J,ee]=w.useState([]),[de,Q]=w.useState(""),[N,F]=w.useState(null),[K,se]=w.useState(!1);w.useEffect(()=>{(async()=>{try{const ze=await tN();t(ze?{name:ze.email,...ze}:null)}catch(ze){console.error("Error fetching user:",ze),t(null)}finally{a(!1)}})()},[]);const $=async()=>{try{if(console.log("Logout clicked"),n){await n();return}await nN(),t(null),window.location.hash="#/",window.location.reload()}catch(fe){console.error("Logout failed:",fe),localStorage.removeItem("token"),t(null),window.location.hash="#/",window.location.reload()}};w.useEffect(()=>{if(!e||!e.id)return;const fe=nh("http://localhost:5000",{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5});return fe.on("connect",()=>{console.log(" Admin connected to messaging server"),se(!0),fe.emit("user-login",{userId:e.id})}),fe.on("disconnect",()=>{console.log(" Admin disconnected from messaging server"),se(!1)}),fe.on("message-error",ze=>{console.error(" Message error:",ze)}),fe.on(`notification-${e.id}`,ze=>{console.log(" Notification received:",ze),alert(` New message from ${ze.senderName}: ${ze.message}`)}),F(fe),()=>{fe.disconnect()}},[e]),w.useEffect(()=>{let fe;return e&&(u==="users"&&ce(),u==="couriers"&&we(),u==="shipments"&&Re(),u==="chat"&&(fe=je()),u==="agent-requests"&&Xe(),u==="verified-users"&&Je(),u==="direct-messages"&&Je()),()=>{fe&&typeof fe=="function"&&fe()}},[u,e]);const ce=async()=>{try{const fe=localStorage.getItem("token"),ze=await fetch("http://localhost:5000/api/admin/users",{headers:{Authorization:`Bearer ${fe}`}});if(ze.ok){const $e=await ze.json();return I($e),$e}}catch(fe){console.error("Failed to fetch users:",fe)}return[]},we=async()=>{try{const fe=localStorage.getItem("token"),ze=await fetch("http://localhost:5000/api/admin/couriers",{headers:{Authorization:`Bearer ${fe}`}});if(ze.ok){const $e=await ze.json();D($e)}}catch(fe){console.error("Failed to fetch couriers:",fe),D([{_id:"c1",name:"John Courier",email:"john@courier.com",status:"active",verified:!0},{_id:"c2",name:"Jane Driver",email:"jane@driver.com",status:"inactive",verified:!1}])}},Re=async()=>{try{const fe=localStorage.getItem("token"),ze=await fetch("http://localhost:5000/api/admin/shipments",{headers:{Authorization:`Bearer ${fe}`}});if(ze.ok){const $e=await ze.json();B($e)}}catch(fe){console.error("Failed to fetch shipments:",fe),B([{_id:"s1",sender:"Alice Customer",receiver:"Bob Receiver",pickupAddress:"123 Main St",deliveryAddress:"456 Elm St",courier:"John Courier",status:"in_transit"},{_id:"s2",sender:"Charlie Sender",receiver:"Diana Dest",pickupAddress:"789 Oak Ave",deliveryAddress:"321 Pine Rd",courier:"Not Assigned",status:"pending"}])}},je=()=>{try{const fe=xu(sr,"threads"),ze=kf(B2("agentRequested","==",!0));return Lf(ze,async an=>{const kt=[];for(const $t of an.docs){const ot=$t.data(),mt=$t.id;try{const Ln=xu(sr,"threads",mt,"messages"),bs=await cy(Tl(sr,"threads",mt)),rs=await Promise.resolve().then(()=>{const xi=S.find(Ci=>Ci._id===mt||Ci.id===mt);return xi&&(xi.name||xi.email)||"Customer"});kt.push({_id:mt,customerName:rs,agentRequested:!0,lastMessage:ot.lastMessage||"",unread:ot.unread||0})}catch(Ln){console.error("Error processing thread:",Ln)}}X(kt)})}catch(fe){console.error("Failed to fetch conversations from Firestore:",fe),X([])}},Ie=async fe=>{console.log("Verify clicked for",fe),q(ze=>({...ze,[fe]:!0}));try{const ze=localStorage.getItem("token"),$e=await fetch(`http://localhost:5000/api/admin/verify-user/${fe}`,{method:"PUT",headers:{Authorization:`Bearer ${ze}`}});if(!$e.ok){let kt=`Failed to verify user (${$e.status})`;try{kt=(await $e.json()).message||kt}catch{const ot=await $e.text();console.error("Verify response text:",ot)}console.error("Verify error:",$e.status,kt),alert(`Verification failed: ${kt}`);return}const an=await $e.json();console.log("User verification successful:",an),alert("User verified successfully!"),await ce()}catch(ze){console.error("Failed to verify user:",ze),alert(`Network error verifying user: ${ze.message}`)}finally{q(ze=>({...ze,[fe]:!1}))}},Me=async(fe,ze)=>{try{const $e=localStorage.getItem("token");(await fetch(`http://localhost:5000/api/admin/shipments/${fe}/status`,{method:"PUT",headers:{Authorization:`Bearer ${$e}`,"Content-Type":"application/json"},body:JSON.stringify({status:ze})})).ok&&(alert("Status updated!"),Re())}catch($e){console.error("Failed to update status:",$e)}},Xe=async()=>{try{const fe=localStorage.getItem("token"),ze=await fetch("http://localhost:5000/api/agent-requests",{headers:{Authorization:`Bearer ${fe}`}});if(ze.ok){const $e=await ze.json();Z($e)}}catch(fe){console.error("Failed to fetch agent requests:",fe)}},Je=async()=>{try{const fe=localStorage.getItem("token"),ze=await fetch("http://localhost:5000/api/verified-users-list",{headers:{Authorization:`Bearer ${fe}`}});if(ze.ok){const $e=await ze.json();Pe($e)}}catch(fe){console.error("Failed to fetch verified users:",fe)}},it=async fe=>{try{const ze=localStorage.getItem("token"),$e=`customer-${fe}`,an=await fetch(`http://localhost:5000/api/messaging/conversation/${$e}`,{headers:{Authorization:`Bearer ${ze}`}});if(an.ok){const kt=await an.json();ee(kt.messages||[]),console.log(` Loaded ${kt.messages?.length||0} messages for conversation ${$e}`),await fetch(`http://localhost:5000/api/messaging/mark-read/${$e}`,{method:"PUT",headers:{Authorization:`Bearer ${ze}`}}).catch($t=>console.warn("Failed to mark as read:",$t)),N&&K&&(N.off(`message-${$e}`),N.off(`message-status-${$e}`),N.on(`message-${$e}`,$t=>{console.log(" New message received:",$t),ee(ot=>ot.some(Ln=>Ln._id===$t._id)?ot:[...ot,$t])}),N.on(`message-status-${$e}`,$t=>{console.log(" Message status updated:",$t),ee(ot=>ot.map(mt=>mt._id===$t.messageId?{...mt,status:$t.status}:mt))}),N.on(`message-status-updated-${$e}`,$t=>{console.log(" Messages marked as read"),ee(ot=>ot.map(mt=>({...mt,status:"read"})))}))}}catch(ze){console.error("Failed to fetch conversation:",ze)}},et=async()=>{if(!ke||!de.trim()){alert("Please select a user and type a message");return}try{const fe=localStorage.getItem("token"),ze=`customer-${ke._id}`,$e=await fetch("http://localhost:5000/api/messaging/send",{method:"POST",headers:{Authorization:`Bearer ${fe}`,"Content-Type":"application/json"},body:JSON.stringify({conversationId:ze,recipientId:ke._id,message:de,isFromAdmin:!0})});if($e.ok){const an=await $e.json();Q(""),N&&K&&N.emit("send-message",{conversationId:ze,senderId:e.id,recipientId:ke._id,message:de,isFromAdmin:!0}),await it(ke._id)}else alert("Failed to send message")}catch(fe){console.error("Failed to send message:",fe),alert("Error sending message")}},En=async fe=>{try{const ze=localStorage.getItem("token");(await fetch(`http://localhost:5000/api/agent-request/${fe}/accept`,{method:"POST",headers:{Authorization:`Bearer ${ze}`}})).ok&&(alert("Agent request accepted!"),Xe())}catch(ze){console.error("Failed to accept agent request:",ze)}},Ni=async fe=>{try{const ze=localStorage.getItem("token");(await fetch(`http://localhost:5000/api/agent-request/${fe}/resolve`,{method:"POST",headers:{Authorization:`Bearer ${ze}`}})).ok&&(alert("Agent request resolved!"),Xe())}catch(ze){console.error("Failed to resolve agent request:",ze)}},zi=async fe=>{oe(fe),re([]);try{const ze=xu(sr,"threads",fe._id,"messages"),$e=kf(ze,uy("ts","asc")),an=Lf($e,kt=>{const $t=kt.docs.map(ot=>({_id:ot.id,sender:ot.data().from==="admin"?"admin":ot.data().from==="bot"?"bot":"customer",text:ot.data().text,timestamp:ot.data().ts?.toDate?.()||new Date}));re($t)});fe._unsubscribe=an}catch(ze){console.error("Failed to open Firestore conversation:",ze),re([])}},di=async()=>{if(!(!V.trim()||!le))try{const fe=xu(sr,"threads",le._id,"messages");await _l(fe,{from:"admin",text:V,ts:ns(),status:"sent"}),z("")}catch(fe){console.error("Failed to send admin message:",fe),alert("Failed to send message: "+fe.message)}};return s?x.jsx("div",{style:Oe.loading,children:"Loading admin data..."}):e?x.jsxs("div",{style:Oe.container,children:[x.jsx("header",{style:Oe.header,children:x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[x.jsxs("div",{children:[x.jsx("h1",{children:"SwiftDelivery Admin Dashboard"}),x.jsxs("p",{children:["Welcome, ",e.name||"Admin","!"]})]}),x.jsx("button",{onClick:$,style:Oe.logoutButton,title:"Log out",children:""})]})}),x.jsxs("nav",{style:Oe.nav,children:[x.jsx("button",{style:u==="overview"?Oe.tabActive:Oe.tab,onClick:()=>d("overview"),children:"Overview"}),x.jsx("button",{style:u==="users"?Oe.tabActive:Oe.tab,onClick:()=>d("users"),children:"Users"}),x.jsx("button",{style:u==="couriers"?Oe.tabActive:Oe.tab,onClick:()=>d("couriers"),children:"Couriers"}),x.jsx("button",{style:u==="shipments"?Oe.tabActive:Oe.tab,onClick:()=>d("shipments"),children:"Shipments"}),x.jsx("button",{style:u==="tracking"?Oe.tabActive:Oe.tab,onClick:()=>d("tracking"),children:"Tracking"}),x.jsx("button",{style:u==="chat"?Oe.tabActive:Oe.tab,onClick:()=>d("chat"),children:"Chat/Support"}),x.jsxs("button",{style:u==="agent-requests"?Oe.tabActive:Oe.tab,onClick:()=>d("agent-requests"),children:["Agent Requests ",G.length>0&&`(${G.length})`]}),x.jsx("button",{style:u==="verified-users"?Oe.tabActive:Oe.tab,onClick:()=>d("verified-users"),children:"All Verified Users"}),x.jsx("button",{style:u==="direct-messages"?Oe.tabActive:Oe.tab,onClick:()=>d("direct-messages"),children:"Direct Messages"}),x.jsx("button",{style:u==="analytics"?Oe.tabActive:Oe.tab,onClick:()=>d("analytics"),children:"Analytics"})]}),x.jsxs("main",{style:Oe.main,children:[u==="overview"&&x.jsxs("div",{children:[x.jsx("h2",{children:"Dashboard Overview"}),x.jsxs("div",{style:Oe.statsGrid,children:[x.jsxs("div",{style:Oe.statCard,children:[x.jsx("h3",{children:"Total Users"}),x.jsx("p",{style:Oe.statNumber,children:S.length||0})]}),x.jsxs("div",{style:Oe.statCard,children:[x.jsx("h3",{children:"Active Shipments"}),x.jsx("p",{style:Oe.statNumber,children:H.filter(fe=>fe.status==="in_transit").length||0})]}),x.jsxs("div",{style:Oe.statCard,children:[x.jsx("h3",{children:"Total Shipments"}),x.jsx("p",{style:Oe.statNumber,children:H.length||0})]}),x.jsxs("div",{style:Oe.statCard,children:[x.jsx("h3",{children:"Delivered Today"}),x.jsx("p",{style:Oe.statNumber,children:"0"})]})]})]}),u==="users"&&x.jsxs("div",{children:[x.jsx("h2",{children:"User Management"}),x.jsx("div",{style:{position:"relative",zIndex:5},children:x.jsxs("table",{style:Oe.table,children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"Name"}),x.jsx("th",{children:"Email"}),x.jsx("th",{children:"Admin"}),x.jsx("th",{children:"Verified"}),x.jsx("th",{children:"Actions"})]})}),x.jsx("tbody",{children:S.map(fe=>x.jsxs("tr",{children:[x.jsx("td",{children:fe.name}),x.jsx("td",{children:fe.email}),x.jsx("td",{children:fe.isAdmin?"Yes":"No"}),x.jsx("td",{children:fe.isVerified?"":""}),x.jsx("td",{children:!fe.isVerified&&x.jsx("button",{style:{...Oe.btnSmall,opacity:M[fe._id]?.6:1,cursor:M[fe._id]?"not-allowed":"pointer"},disabled:M[fe._id],onClick:()=>{console.log("Button onClick fired for",fe._id),Ie(fe._id)},children:M[fe._id]?"Verifying...":"Verify"})})]},fe._id))})]})})]}),u==="couriers"&&x.jsxs("div",{children:[x.jsx("h2",{children:"Courier Management"}),x.jsx("button",{style:Oe.btnPrimary,children:"Add New Courier"}),x.jsxs("table",{style:Oe.table,children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"Name"}),x.jsx("th",{children:"Email"}),x.jsx("th",{children:"Status"}),x.jsx("th",{children:"Verified"}),x.jsx("th",{children:"Actions"})]})}),x.jsx("tbody",{children:O.map(fe=>x.jsxs("tr",{children:[x.jsx("td",{children:fe.name}),x.jsx("td",{children:fe.email}),x.jsx("td",{children:fe.status}),x.jsx("td",{children:fe.verified?"":""}),x.jsx("td",{children:x.jsx("button",{style:Oe.btnSmall,children:"Edit"})})]},fe._id))})]})]}),u==="shipments"&&x.jsxs("div",{children:[x.jsx("h2",{children:"Shipment Overview"}),x.jsxs("table",{style:Oe.table,children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"ID"}),x.jsx("th",{children:"Sender"}),x.jsx("th",{children:"Receiver"}),x.jsx("th",{children:"Pickup"}),x.jsx("th",{children:"Delivery"}),x.jsx("th",{children:"Courier"}),x.jsx("th",{children:"Status"}),x.jsx("th",{children:"Actions"})]})}),x.jsx("tbody",{children:H.map(fe=>x.jsxs("tr",{children:[x.jsx("td",{children:fe._id}),x.jsx("td",{children:fe.sender}),x.jsx("td",{children:fe.receiver}),x.jsx("td",{children:fe.pickupAddress}),x.jsx("td",{children:fe.deliveryAddress}),x.jsx("td",{children:fe.courier}),x.jsx("td",{children:fe.status}),x.jsx("td",{children:x.jsxs("select",{style:Oe.select,value:fe.status,onChange:ze=>Me(fe._id,ze.target.value),children:[x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"picked_up",children:"Picked Up"}),x.jsx("option",{value:"in_transit",children:"In Transit"}),x.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),x.jsx("option",{value:"delivered",children:"Delivered"}),x.jsx("option",{value:"failed",children:"Failed"})]})})]},fe._id))})]})]}),u==="tracking"&&x.jsxs("div",{style:{textAlign:"center",padding:"40px 20px"},children:[x.jsxs("div",{style:{marginBottom:"20px"},children:[x.jsx("h2",{children:" Live Package Tracking"}),x.jsx("p",{style:{color:"#718096",marginBottom:"20px"},children:"Manage package tracking, pinpoint locations, and generate tracking IDs for customers"})]}),x.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[x.jsx("button",{onClick:()=>v(!0),style:{...Oe.btnPrimary,padding:"12px 32px",fontSize:"16px",fontWeight:"600"},children:" Open Live Tracking Map"}),x.jsx("button",{onClick:()=>E(!0),style:{...Oe.tab,padding:"12px 32px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f0f4ff",border:"1px solid #c7d2fe",color:"#4f46e5",cursor:"pointer"},title:"Click to test if modal system works",children:" Test Modal"})]})]}),u==="chat"&&x.jsxs("div",{style:Oe.chatContainer,children:[x.jsxs("div",{style:Oe.chatSidebar,children:[x.jsx("h3",{children:"Agent Requests "}),te.length===0?x.jsx("p",{style:{padding:"15px",color:"#6c757d",fontSize:"12px"},children:"No agent requests pending"}):te.map(fe=>x.jsxs("div",{style:{...Oe.conversationItem,backgroundColor:le?._id===fe._id?"#e3f2fd":"transparent",borderLeft:fe.agentRequested?"4px solid #dc3545":"4px solid transparent",transition:"background-color 0.2s"},onClick:()=>zi(fe),children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("span",{style:{color:"#dc3545",fontSize:"16px"},children:""}),x.jsx("strong",{children:fe.customerName})]}),x.jsx("p",{style:Oe.lastMessage,children:fe.lastMessage||"New agent request"}),fe.unread>0&&x.jsx("span",{style:Oe.unreadBadge,children:fe.unread})]},fe._id))]}),x.jsx("div",{style:Oe.chatMain,children:le?x.jsxs(x.Fragment,{children:[x.jsx("div",{style:Oe.chatHeader,children:x.jsxs("h3",{children:["Chat with ",le.customerName]})}),x.jsx("div",{style:Oe.chatMessages,children:ae.map(fe=>x.jsx("div",{style:{display:"flex",justifyContent:fe.sender==="admin"?"flex-end":"flex-start",marginBottom:"10px"},children:x.jsxs("div",{style:fe.sender==="admin"?{...Oe.adminMessage,maxWidth:"70%"}:fe.sender==="bot"?{...Oe.botMessage,maxWidth:"70%"}:{...Oe.customerMessage,maxWidth:"70%"},children:[x.jsx("p",{style:{margin:"0 0 4px 0",wordWrap:"break-word"},children:fe.text}),x.jsx("small",{style:{opacity:.7,fontSize:"11px"},children:fe.timestamp?.toLocaleTimeString?.()||""})]})},fe._id))}),x.jsxs("div",{style:Oe.chatInput,children:[x.jsx("input",{type:"text",placeholder:"Type your message...",value:V,onChange:fe=>z(fe.target.value),onKeyPress:fe=>fe.key==="Enter"&&di(),style:Oe.input}),x.jsx("button",{style:Oe.btnPrimary,onClick:di,children:"Send"})]})]}):x.jsx("div",{style:Oe.chatPlaceholder,children:x.jsx("p",{children:"Select a conversation to start chatting with a customer."})})})]}),u==="agent-requests"&&x.jsxs("div",{children:[x.jsx("h2",{children:" Agent Requests"}),G.length===0?x.jsx("p",{style:{padding:"20px",color:"#6c757d",fontSize:"14px"},children:"No pending agent requests"}):x.jsx("div",{style:{...Oe.statsGrid,gap:"15px"},children:G.map(fe=>x.jsxs("div",{style:{...Oe.statCard,backgroundColor:"#fff3cd",borderLeft:"4px solid #ffc107",padding:"15px"},children:[x.jsxs("h4",{style:{marginTop:0},children:[fe.userId?.name||"Unknown"," (",fe.userId?.email,")"]}),x.jsxs("p",{style:{color:"#555",marginBottom:"10px"},children:[x.jsx("strong",{children:"Message:"})," ",fe.message]}),x.jsxs("p",{style:{fontSize:"12px",color:"#666",marginBottom:"10px"},children:[x.jsx("strong",{children:"Status:"})," ",fe.status]}),x.jsxs("p",{style:{fontSize:"12px",color:"#666",marginBottom:"15px"},children:[x.jsx("strong",{children:"Requested:"})," ",new Date(fe.createdAt).toLocaleString()]}),x.jsxs("div",{style:{display:"flex",gap:"10px"},children:[fe.status==="pending"&&x.jsxs(x.Fragment,{children:[x.jsx("button",{style:{...Oe.btnSmall,backgroundColor:"#28a745",color:"#fff"},onClick:()=>En(fe._id),children:"Accept"}),x.jsx("button",{style:{...Oe.btnSmall,backgroundColor:"#6c757d",color:"#fff"},onClick:()=>{ie({_id:fe.userId?._id,name:fe.userId?.name}),d("direct-messages")},children:"Message Customer"})]}),fe.status==="accepted"&&x.jsx("button",{style:{...Oe.btnSmall,backgroundColor:"#6c757d",color:"#fff"},onClick:()=>Ni(fe._id),children:"Resolve"})]})]},fe._id))})]}),u==="verified-users"&&x.jsxs("div",{children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[x.jsx("h2",{style:{margin:0},children:" All Verified Users"}),x.jsxs("div",{style:{backgroundColor:"#28a745",color:"white",padding:"8px 16px",borderRadius:"20px",fontWeight:"600",fontSize:"14px"},children:["Total: ",U.length]})]}),U.length===0?x.jsx("p",{style:{padding:"20px",color:"#6c757d",fontSize:"14px"},children:"No verified users"}):x.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"15px",maxHeight:"calc(100vh - 250px)",overflowY:"auto",overflowX:"hidden",padding:"15px",paddingRight:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:U.map((fe,ze)=>x.jsxs("div",{style:{...Oe.statCard,backgroundColor:"#d4edda",borderLeft:"4px solid #28a745",borderRadius:"8px",padding:"16px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onMouseEnter:$e=>{$e.currentTarget.style.transform="translateY(-4px)",$e.currentTarget.style.boxShadow="0 6px 12px rgba(40, 167, 69, 0.2)"},onMouseLeave:$e=>{$e.currentTarget.style.transform="translateY(0)",$e.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},onClick:()=>{ie(fe),it(fe._id),d("direct-messages")},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[x.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#28a745",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",marginRight:"10px",fontSize:"14px"},children:fe.name?.[0]?.toUpperCase()||"U"}),x.jsx("h4",{style:{margin:0,flex:1,fontSize:"15px"},children:fe.name})]}),x.jsxs("p",{style:{color:"#555",marginBottom:"8px",fontSize:"13px"},children:[" ",fe.email]}),x.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"12px",color:"#28a745",fontWeight:"600"},children:" Send Message "})]},fe._id))})]}),u==="direct-messages"&&x.jsxs("div",{children:[x.jsx("h2",{children:" Direct Messages"}),x.jsxs("div",{style:Oe.chatContainer,children:[x.jsxs("div",{style:{...Oe.chatSidebar,flex:"0 0 320px"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[x.jsx("h3",{style:{margin:0},children:"Verified Users"}),x.jsx("span",{style:{backgroundColor:"#e9ecef",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:U.length})]}),x.jsx("div",{style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",overflowX:"hidden",paddingRight:"8px"},children:U.length===0?x.jsx("p",{style:{padding:"15px",color:"#6c757d",fontSize:"12px"},children:"No verified users"}):U.map(fe=>x.jsxs("div",{style:{...Oe.conversationItem,backgroundColor:ke?._id===fe._id?"#e3f2fd":"transparent",cursor:"pointer"},onClick:()=>{ie(fe),it(fe._id)},children:[x.jsx("strong",{children:fe.name}),x.jsx("p",{style:{...Oe.lastMessage,margin:"5px 0 0 0"},children:fe.email})]},fe._id))})]}),x.jsx("div",{style:Oe.chatMain,children:ke?x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:Oe.chatHeader,children:[x.jsxs("h3",{style:{margin:0},children:[" ",ke.name]}),x.jsx("p",{style:{margin:"5px 0 0 0",color:"#6c757d",fontSize:"12px"},children:ke.email})]}),x.jsx("div",{style:Oe.chatMessages,children:J.length===0?x.jsx("p",{style:{color:"#6c757d",textAlign:"center"},children:"No messages yet. Start the conversation!"}):J.map((fe,ze)=>x.jsxs("div",{style:{display:"flex",justifyContent:fe.isFromAdmin?"flex-end":"flex-start",marginBottom:"8px",gap:"4px",alignItems:"flex-end"},children:[x.jsx("div",{style:fe.isFromAdmin?Oe.adminMessage:Oe.customerMessage,children:fe.message}),fe.isFromAdmin&&x.jsxs("span",{style:{fontSize:"11px",color:"#9ca3af",minWidth:"20px"},children:[fe.status==="read"&&"",fe.status==="delivered"&&"",fe.status==="sent"&&""]})]},ze))}),x.jsxs("div",{style:Oe.chatInput,children:[x.jsx("input",{type:"text",style:Oe.input,placeholder:"Type your message...",value:de,onChange:fe=>Q(fe.target.value),onKeyPress:fe=>{fe.key==="Enter"&&et()}}),x.jsx("button",{style:Oe.btnSmall,onClick:et,children:"Send"})]})]}):x.jsx("div",{style:Oe.chatPlaceholder,children:x.jsx("p",{children:"Select a user to start messaging"})})})]})]}),u==="analytics"&&x.jsxs("div",{children:[x.jsx("h2",{children:"System Analytics"}),x.jsxs("div",{style:Oe.statsGrid,children:[x.jsxs("div",{style:Oe.statCard,children:[x.jsx("h3",{children:"Revenue (This Month)"}),x.jsx("p",{style:Oe.statNumber,children:"$0"})]}),x.jsxs("div",{style:Oe.statCard,children:[x.jsx("h3",{children:"Total Deliveries"}),x.jsx("p",{style:Oe.statNumber,children:H.filter(fe=>fe.status==="delivered").length})]}),x.jsxs("div",{style:Oe.statCard,children:[x.jsx("h3",{children:"Failed Deliveries"}),x.jsx("p",{style:Oe.statNumber,children:H.filter(fe=>fe.status==="failed").length})]}),x.jsxs("div",{style:Oe.statCard,children:[x.jsx("h3",{children:"Active Couriers"}),x.jsx("p",{style:Oe.statNumber,children:O.filter(fe=>fe.status==="active").length})]})]}),x.jsx("p",{style:{marginTop:"20px"},children:"Charts and detailed performance metrics will be displayed here."})]})]}),x.jsx(lN,{isOpen:g,onClose:()=>v(!1)}),x.jsx(uN,{isOpen:_,onClose:()=>E(!1)})]}):x.jsx("div",{style:Oe.loading,children:"You must be logged in as an admin to view this page."})},Oe={container:{fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",minHeight:"100vh",padding:"20px"},loading:{textAlign:"center",marginTop:"50px",fontSize:"18px"},header:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:"20px"},logoutButton:{backgroundColor:"#f56565",color:"#fff",border:"none",borderRadius:"999px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"18px",fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},nav:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"12px 24px",border:"none",backgroundColor:"#fff",cursor:"pointer",borderRadius:"6px",fontSize:"14px",fontWeight:"500",transition:"all 0.3s"},tabActive:{padding:"12px 24px",border:"none",backgroundColor:"#007bff",color:"#fff",cursor:"pointer",borderRadius:"6px",fontSize:"14px",fontWeight:"600"},main:{backgroundColor:"#fff",padding:"30px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",minHeight:"500px",position:"relative",zIndex:1},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginTop:"20px"},statCard:{backgroundColor:"#f9fafb",padding:"20px",borderRadius:"8px",textAlign:"center",border:"1px solid #e5e7eb"},statNumber:{fontSize:"32px",fontWeight:"bold",color:"#007bff",margin:"10px 0 0 0"},table:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},btnSmall:{padding:"6px 12px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"transform 0.1s ease, box-shadow 0.1s ease, background-color 0.1s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.15)"},btnPrimary:{padding:"10px 20px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",marginBottom:"15px",pointerEvents:"auto",zIndex:10},select:{padding:"6px",borderRadius:"4px",border:"1px solid #ccc"},chatContainer:{display:"flex",height:"500px",gap:"20px",marginTop:"20px"},chatSidebar:{flex:"0 0 300px",backgroundColor:"#f9fafb",borderRadius:"8px",padding:"15px",overflowY:"auto",border:"1px solid #e5e7eb"},conversationItem:{padding:"12px",borderBottom:"1px solid #e5e7eb",cursor:"pointer",position:"relative"},lastMessage:{fontSize:"12px",color:"#6c757d",margin:"5px 0 0 0"},unreadBadge:{position:"absolute",top:"10px",right:"10px",backgroundColor:"#dc3545",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},chatMain:{flex:"1",display:"flex",flexDirection:"column",backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},chatHeader:{padding:"15px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f9fafb"},chatMessages:{flex:"1",padding:"15px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"10px"},adminMessage:{alignSelf:"flex-end",backgroundColor:"#007bff",color:"#fff",padding:"10px 15px",borderRadius:"12px",maxWidth:"70%"},customerMessage:{alignSelf:"flex-start",backgroundColor:"#e9ecef",color:"#000",padding:"10px 15px",borderRadius:"12px",maxWidth:"70%"},botMessage:{alignSelf:"flex-start",backgroundColor:"#f0f7ff",color:"#1f2937",padding:"10px 15px",borderRadius:"12px",maxWidth:"70%",border:"1px solid #bfdbfe"},chatInput:{display:"flex",padding:"15px",borderTop:"1px solid #e5e7eb",gap:"10px"},input:{flex:"1",padding:"10px",border:"1px solid #ccc",borderRadius:"6px",fontSize:"14px"},chatPlaceholder:{flex:"1",display:"flex",alignItems:"center",justifyContent:"center",color:"#6c757d"}};function gh(n){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(n)}function cN(n,e){if(gh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(gh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hN(n){var e=cN(n,"string");return gh(e)=="symbol"?e:e+""}function Ee(n,e,t){return(e=hN(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tm,mE;function dN(){if(mE)return Tm;mE=1;var n=function(t,s,a,u,d,g,v,_){if(!t){var E;if(s===void 0)E=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var S=[a,u,d,g,v,_],I=0;E=new Error(s.replace(/%s/g,function(){return S[I++]})),E.name="Invariant Violation"}throw E.framesToPop=1,E}};return Tm=n,Tm}var fN=dN(),Gn=UC(fN),gt=w.createContext(null);function pN(){Gn(!!w.useContext,"useGoogleMap is React hook and requires React version 16.8+");var n=w.useContext(gt);return Gn(!!n,"useGoogleMap needs a GoogleMap available up in the tree"),n}function gN(n,e,t){return Object.keys(n).reduce(function(a,u){return e(a,n[u],u)},t)}function mN(n,e){Object.keys(n).forEach(t=>e(n[t],t))}function vN(n,e,t,s){var a={},u=(d,g)=>{var v=t[g];v!==e[g]&&(a[g]=v,d(s,v))};return mN(n,u),a}function yN(n,e,t){var s=gN(t,function(u,d,g){return typeof n[g]=="function"&&u.push(google.maps.event.addListener(e,d,n[g])),u},[]);return s}function _N(n){google.maps.event.removeListener(n)}function Tt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(_N)}function _t(n){var{updaterMap:e,eventMap:t,prevProps:s,nextProps:a,instance:u}=n,d=yN(a,u,t);return vN(e,s,a,u),d}var vE={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},yE={extraMapTypes(n,e){e.forEach(function(s,a){n.mapTypes.set(String(a),s)})},center(n,e){n.setCenter(e)},clickableIcons(n,e){n.setClickableIcons(e)},heading(n,e){n.setHeading(e)},mapTypeId(n,e){n.setMapTypeId(e)},options(n,e){n.setOptions(e)},streetView(n,e){n.setStreetView(e)},tilt(n,e){n.setTilt(e)},zoom(n,e){n.setZoom(e)}};function bN(n){var{children:e,options:t,id:s,mapContainerStyle:a,mapContainerClassName:u,center:d,onClick:g,onDblClick:v,onDrag:_,onDragEnd:E,onDragStart:S,onMouseMove:I,onMouseOut:O,onMouseOver:D,onMouseDown:H,onMouseUp:B,onRightClick:te,onCenterChanged:X,onLoad:le,onUnmount:oe}=n,[ae,re]=w.useState(null),V=w.useRef(null),[z,M]=w.useState(null),[q,G]=w.useState(null),[Z,U]=w.useState(null),[Pe,ke]=w.useState(null),[ie,J]=w.useState(null),[ee,de]=w.useState(null),[Q,N]=w.useState(null),[F,K]=w.useState(null),[se,$]=w.useState(null),[ce,we]=w.useState(null),[Re,je]=w.useState(null),[Ie,Me]=w.useState(null);return w.useEffect(()=>{t&&ae!==null&&ae.setOptions(t)},[ae,t]),w.useEffect(()=>{ae!==null&&typeof d<"u"&&ae.setCenter(d)},[ae,d]),w.useEffect(()=>{ae&&v&&(q!==null&&google.maps.event.removeListener(q),G(google.maps.event.addListener(ae,"dblclick",v)))},[v]),w.useEffect(()=>{ae&&E&&(Z!==null&&google.maps.event.removeListener(Z),U(google.maps.event.addListener(ae,"dragend",E)))},[E]),w.useEffect(()=>{ae&&S&&(Pe!==null&&google.maps.event.removeListener(Pe),ke(google.maps.event.addListener(ae,"dragstart",S)))},[S]),w.useEffect(()=>{ae&&H&&(ie!==null&&google.maps.event.removeListener(ie),J(google.maps.event.addListener(ae,"mousedown",H)))},[H]),w.useEffect(()=>{ae&&I&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(ae,"mousemove",I)))},[I]),w.useEffect(()=>{ae&&O&&(Q!==null&&google.maps.event.removeListener(Q),N(google.maps.event.addListener(ae,"mouseout",O)))},[O]),w.useEffect(()=>{ae&&D&&(F!==null&&google.maps.event.removeListener(F),K(google.maps.event.addListener(ae,"mouseover",D)))},[D]),w.useEffect(()=>{ae&&B&&(se!==null&&google.maps.event.removeListener(se),$(google.maps.event.addListener(ae,"mouseup",B)))},[B]),w.useEffect(()=>{ae&&te&&(ce!==null&&google.maps.event.removeListener(ce),we(google.maps.event.addListener(ae,"rightclick",te)))},[te]),w.useEffect(()=>{ae&&g&&(Re!==null&&google.maps.event.removeListener(Re),je(google.maps.event.addListener(ae,"click",g)))},[g]),w.useEffect(()=>{ae&&_&&(Ie!==null&&google.maps.event.removeListener(Ie),Me(google.maps.event.addListener(ae,"drag",_)))},[_]),w.useEffect(()=>{ae&&X&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(ae,"center_changed",X)))},[g]),w.useEffect(()=>{var Xe=V.current===null?null:new google.maps.Map(V.current,t);return re(Xe),Xe!==null&&le&&le(Xe),()=>{Xe!==null&&oe&&oe(Xe)}},[]),x.jsx("div",{id:s,ref:V,style:a,className:u,children:x.jsx(gt.Provider,{value:ae,children:ae!==null?e:null})})}w.memo(bN);class BC extends w.PureComponent{constructor(){super(...arguments),Ee(this,"state",{map:null}),Ee(this,"registeredEvents",[]),Ee(this,"mapRef",null),Ee(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),Ee(this,"panTo",e=>{var t=this.getInstance();t&&t.panTo(e)}),Ee(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),Ee(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=_t({updaterMap:yE,eventMap:vE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:yE,eventMap:vE,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),Tt(this.registeredEvents))}render(){return x.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:x.jsx(gt.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function _E(n,e,t,s,a,u,d){try{var g=n[u](d),v=g.value}catch(_){return void t(_)}g.done?e(v):Promise.resolve(v).then(s,a)}function FC(n){return function(){var e=this,t=arguments;return new Promise(function(s,a){var u=n.apply(e,t);function d(v){_E(u,s,a,d,g,"next",v)}function g(v){_E(u,s,a,d,g,"throw",v)}d(void 0)})}}function HC(n){var{googleMapsApiKey:e,googleMapsClientId:t,version:s="weekly",language:a,region:u,libraries:d,channel:g,mapIds:v,authReferrerPolicy:_,apiUrl:E="https://maps.googleapis.com"}=n,S=[];return Gn(e&&t||!(e&&t),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?S.push("key=".concat(e)):t&&S.push("client=".concat(t)),s&&S.push("v=".concat(s)),a&&S.push("language=".concat(a)),u&&S.push("region=".concat(u)),d&&d.length&&S.push("libraries=".concat(d.sort().join(","))),g&&S.push("channel=".concat(g)),v&&v.length&&S.push("map_ids=".concat(v.join(","))),_&&S.push("auth_referrer_policy=".concat(_)),S.push("loading=async"),S.push("callback=initMap"),"".concat(E,"/maps/api/js?").concat(S.join("&"))}var _a=typeof document<"u";function qC(n){var{url:e,id:t,nonce:s}=n;return _a?new Promise(function(u,d){var g=document.getElementById(t),v=window;if(g){var _=g.getAttribute("data-state");if(g.src===e&&_!=="error"){if(_==="ready")return u(t);var E=v.initMap,S=g.onerror;v.initMap=function(){E&&E(),u(t)},g.onerror=function(O){S&&S(O),d(O)};return}else g.remove()}var I=document.createElement("script");I.type="text/javascript",I.src=e,I.id=t,I.async=!0,I.nonce=s||"",I.onerror=function(D){I.setAttribute("data-state","error"),d(D)},v.initMap=function(){I.setAttribute("data-state","ready"),u(t)},document.head.appendChild(I)}).catch(a=>{throw console.error("injectScript error: ",a),a}):Promise.reject(new Error("document is undefined"))}function bE(n){var e=n.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:n.tagName.toLowerCase()==="style"&&n.styleSheet&&n.styleSheet.cssText&&n.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(n.styleSheet.cssText="",!0):n.tagName.toLowerCase()==="style"&&n.innerHTML&&n.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(n.innerHTML="",!0):n.tagName.toLowerCase()==="style"&&!n.styleSheet&&!n.innerHTML}function vy(){var n=document.getElementsByTagName("head")[0];if(n){var e=n.insertBefore.bind(n);n.insertBefore=function(a,u){return bE(a)||Reflect.apply(e,n,[a,u]),a};var t=n.appendChild.bind(n);n.appendChild=function(a){return bE(a)||Reflect.apply(t,n,[a]),a}}}var jc=!1;function GC(){return x.jsx("div",{children:"Loading..."})}var mh={id:"script-loader",version:"weekly"};class wN extends w.PureComponent{constructor(){super(...arguments),Ee(this,"check",null),Ee(this,"state",{loaded:!1}),Ee(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Ee(this,"isCleaningUp",FC(function*(){function e(t){if(!jc)t();else if(_a)var s=window.setInterval(function(){jc||(window.clearInterval(s),t())},1)}return new Promise(e)})),Ee(this,"cleanup",()=>{jc=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(s){return typeof s.src=="string"&&s.src.includes("maps.googleapis")}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(s){return s.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(s){return s.innerText!==void 0&&s.innerText.length>0&&s.innerText.includes(".gm-")}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)})}),Ee(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&vy(),Gn(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:HC(this.props)};qC(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(t=>{this.props.onError&&this.props.onError(t),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),Ee(this,"getRef",e=>{this.check=e})}componentDidMount(){if(_a){if(window.google&&window.google.maps&&!jc){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(t){console.error("Error at injecting script after cleaning up: ",t)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),_a&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(_a){this.cleanup();var e=()=>{this.check||(delete window.google,jc=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return x.jsxs(x.Fragment,{children:[x.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||x.jsx(GC,{})]})}}Ee(wN,"defaultProps",mh);function EN(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.includes(s))continue;t[s]=n[s]}return t}function yy(n,e){if(n==null)return{};var t,s,a=EN(n,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(s=0;s<u.length;s++)t=u[s],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var wE;function TN(n){var{id:e=mh.id,version:t=mh.version,nonce:s,googleMapsApiKey:a,googleMapsClientId:u,language:d,region:g,libraries:v,preventGoogleFontsLoading:_,channel:E,mapIds:S,authReferrerPolicy:I,apiUrl:O="https://maps.googleapis.com"}=n,D=w.useRef(!1),[H,B]=w.useState(!1),[te,X]=w.useState(void 0);w.useEffect(function(){return D.current=!0,()=>{D.current=!1}},[]),w.useEffect(function(){_a&&_&&vy()},[_]),w.useEffect(function(){H&&Gn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[H]);var le=HC({version:t,googleMapsApiKey:a,googleMapsClientId:u,language:d,region:g,libraries:v,channel:E,mapIds:S,authReferrerPolicy:I,apiUrl:O});w.useEffect(function(){if(!_a)return;function re(){D.current&&(B(!0),wE=le)}if(window.google&&window.google.maps&&wE===le){re();return}qC({id:e,url:le,nonce:s}).then(re).catch(function(z){D.current&&X(z),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(a||"-",") or Client ID (").concat(u||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(z)})},[e,le,s]);var oe=w.useRef(void 0);return w.useEffect(function(){oe.current&&v!==oe.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),oe.current=v},[v]),{isLoaded:H,loadError:te,url:le}}var SN=["loadingElement","onLoad","onError","onUnmount","children"],xN=x.jsx(GC,{});function CN(n){var{loadingElement:e,onLoad:t,onError:s,onUnmount:a,children:u}=n,d=yy(n,SN),{isLoaded:g,loadError:v}=TN(d);return w.useEffect(function(){g&&typeof t=="function"&&t()},[g,t]),w.useEffect(function(){v&&typeof s=="function"&&s(v)},[v,s]),w.useEffect(function(){return()=>{a&&a()}},[a]),g?u:e||xN}w.memo(CN);function AN(n,e,t,s){function a(u){return u instanceof t?u:new t(function(d){d(u)})}return new(t||(t=Promise))(function(u,d){function g(E){try{_(s.next(E))}catch(S){d(S)}}function v(E){try{_(s.throw(E))}catch(S){d(S)}}function _(E){E.done?u(E.value):a(E.value).then(g,v)}_((s=s.apply(n,[])).next())})}function kN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var LN=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,a,u;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(a=s;a--!==0;)if(!n(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(u=Object.keys(e),s=u.length,s!==Object.keys(t).length)return!1;for(a=s;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[a]))return!1;for(a=s;a--!==0;){var d=u[a];if(!n(e[d],t[d]))return!1}return!0}return e!==e&&t!==t},IN=kN(LN),EE="__googleMapsScriptId",Cu;(function(n){n[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE"})(Cu||(Cu={}));class bl{constructor(e){var{apiKey:t,authReferrerPolicy:s,channel:a,client:u,id:d=EE,language:g,libraries:v=[],mapIds:_,nonce:E,region:S,retries:I=3,url:O="https://maps.googleapis.com/maps/api/js",version:D}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=s,this.channel=a,this.client=u,this.id=d||EE,this.language=g,this.libraries=v,this.mapIds=_,this.nonce=E,this.region=S,this.retries=I,this.url=O,this.version=D,bl.instance){if(!IN(this.options,bl.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(bl.instance.options)));return bl.instance}bl.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Cu.FAILURE:this.done?Cu.SUCCESS:this.loading?Cu.LOADING:Cu.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(s=>{s?t(s.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}var s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach(u=>!s[u]&&delete s[u]),!((t=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(u=>{var d,g,v,_="The Google Maps JavaScript API",E="google",S="importLibrary",I="__ib__",O=document,D=window;D=D[E]||(D[E]={});var H=D.maps||(D.maps={}),B=new Set,te=new URLSearchParams,X=()=>d||(d=new Promise((le,oe)=>AN(this,void 0,void 0,function*(){var ae;yield g=O.createElement("script"),g.id=this.id,te.set("libraries",[...B]+"");for(v in u)te.set(v.replace(/[A-Z]/g,re=>"_"+re[0].toLowerCase()),u[v]);te.set("callback",E+".maps."+I),g.src=this.url+"?"+te,H[I]=le,g.onerror=()=>d=oe(Error(_+" could not load.")),g.nonce=this.nonce||((ae=O.querySelector("script[nonce]"))===null||ae===void 0?void 0:ae.nonce)||"",O.head.append(g)})));H[S]?console.warn(_+" only loads once. Ignoring:",u):H[S]=function(le){for(var oe=arguments.length,ae=new Array(oe>1?oe-1:0),re=1;re<oe;re++)ae[re-1]=arguments[re];return B.add(le)&&X().then(()=>H[S](le,...ae))}})(s);var a=this.libraries.map(u=>this.importLibrary(u));a.length||a.push(this.importLibrary("core")),Promise.all(a).then(()=>this.callback(),u=>{var d=new ErrorEvent("error",{error:u});this.loadErrorCallback(d)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var t=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(t," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var RN=["maps"];function ZC(n){var{id:e=mh.id,version:t=mh.version,nonce:s,googleMapsApiKey:a,language:u,region:d,libraries:g=RN,preventGoogleFontsLoading:v,mapIds:_,authReferrerPolicy:E}=n,S=w.useRef(!1),[I,O]=w.useState(!1),[D,H]=w.useState(void 0);w.useEffect(function(){return S.current=!0,()=>{S.current=!1}},[]);var B=w.useMemo(()=>new bl({id:e,apiKey:a,version:t,libraries:g,language:u||"en",region:d||"US",mapIds:_||[],nonce:s||"",authReferrerPolicy:E||"origin"}),[e,a,t,g,u,d,_,s,E]);w.useEffect(function(){I||B.load().then(()=>{S.current&&O(!0)}).catch(le=>{H(le)})},[]),w.useEffect(()=>{_a&&v&&vy()},[v]);var te=w.useRef();return w.useEffect(()=>{te.current&&g!==te.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),te.current=g},[g]),{isLoaded:I,loadError:D}}function TE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function If(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TE(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):TE(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var SE={},xE={options(n,e){n.setOptions(e)}};function MN(n){var{options:e,onLoad:t,onUnmount:s}=n,a=w.useContext(gt),[u,d]=w.useState(null);return w.useEffect(()=>{u!==null&&u.setMap(a)},[a]),w.useEffect(()=>{e&&u!==null&&u.setOptions(e)},[u,e]),w.useEffect(()=>{var g=new google.maps.TrafficLayer(If(If({},e),{},{map:a}));return d(g),t&&t(g),()=>{u!==null&&(s&&s(u),u.setMap(null))}},[]),null}w.memo(MN);class ON extends w.PureComponent{constructor(){super(...arguments),Ee(this,"state",{trafficLayer:null}),Ee(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Ee(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(If(If({},this.props.options),{},{map:this.context}));this.registeredEvents=_t({updaterMap:xE,eventMap:SE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:xE,eventMap:SE,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Tt(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Ee(ON,"contextType",gt);function PN(n){var{onLoad:e,onUnmount:t}=n,s=w.useContext(gt),[a,u]=w.useState(null);return w.useEffect(()=>{a!==null&&a.setMap(s)},[s]),w.useEffect(()=>{var d=new google.maps.BicyclingLayer;return u(d),d.setMap(s),e&&e(d),()=>{d!==null&&(t&&t(d),d.setMap(null))}},[]),null}w.memo(PN);class DN extends w.PureComponent{constructor(){super(...arguments),Ee(this,"state",{bicyclingLayer:null}),Ee(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Ee(DN,"contextType",gt);function NN(n){var{onLoad:e,onUnmount:t}=n,s=w.useContext(gt),[a,u]=w.useState(null);return w.useEffect(()=>{a!==null&&a.setMap(s)},[s]),w.useEffect(()=>{var d=new google.maps.TransitLayer;return u(d),d.setMap(s),e&&e(d),()=>{a!==null&&(t&&t(a),a.setMap(null))}},[]),null}w.memo(NN);class zN extends w.PureComponent{constructor(){super(...arguments),Ee(this,"state",{transitLayer:null}),Ee(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}Ee(zN,"contextType",gt);function CE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Rf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CE(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):CE(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var AE={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},kE={drawingMode(n,e){n.setDrawingMode(e)},options(n,e){n.setOptions(e)}};function VN(n){var{options:e,drawingMode:t,onCircleComplete:s,onMarkerComplete:a,onOverlayComplete:u,onPolygonComplete:d,onPolylineComplete:g,onRectangleComplete:v,onLoad:_,onUnmount:E}=n,S=w.useContext(gt),[I,O]=w.useState(null),[D,H]=w.useState(null),[B,te]=w.useState(null),[X,le]=w.useState(null),[oe,ae]=w.useState(null),[re,V]=w.useState(null),[z,M]=w.useState(null);return w.useEffect(()=>{I!==null&&I.setMap(S)},[S]),w.useEffect(()=>{e&&I!==null&&I.setOptions(e)},[I,e]),w.useEffect(()=>{I!==null&&I.setDrawingMode(t??null)},[I,t]),w.useEffect(()=>{I&&s&&(D!==null&&google.maps.event.removeListener(D),H(google.maps.event.addListener(I,"circlecomplete",s)))},[I,s]),w.useEffect(()=>{I&&a&&(B!==null&&google.maps.event.removeListener(B),te(google.maps.event.addListener(I,"markercomplete",a)))},[I,a]),w.useEffect(()=>{I&&u&&(X!==null&&google.maps.event.removeListener(X),le(google.maps.event.addListener(I,"overlaycomplete",u)))},[I,u]),w.useEffect(()=>{I&&d&&(oe!==null&&google.maps.event.removeListener(oe),ae(google.maps.event.addListener(I,"polygoncomplete",d)))},[I,d]),w.useEffect(()=>{I&&g&&(re!==null&&google.maps.event.removeListener(re),V(google.maps.event.addListener(I,"polylinecomplete",g)))},[I,g]),w.useEffect(()=>{I&&v&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(I,"rectanglecomplete",v)))},[I,v]),w.useEffect(()=>{Gn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var q=new google.maps.drawing.DrawingManager(Rf(Rf({},e),{},{map:S}));return t&&q.setDrawingMode(t),s&&H(google.maps.event.addListener(q,"circlecomplete",s)),a&&te(google.maps.event.addListener(q,"markercomplete",a)),u&&le(google.maps.event.addListener(q,"overlaycomplete",u)),d&&ae(google.maps.event.addListener(q,"polygoncomplete",d)),g&&V(google.maps.event.addListener(q,"polylinecomplete",g)),v&&M(google.maps.event.addListener(q,"rectanglecomplete",v)),O(q),_&&_(q),()=>{I!==null&&(D&&google.maps.event.removeListener(D),B&&google.maps.event.removeListener(B),X&&google.maps.event.removeListener(X),oe&&google.maps.event.removeListener(oe),re&&google.maps.event.removeListener(re),z&&google.maps.event.removeListener(z),E&&E(I),I.setMap(null))}},[]),null}w.memo(VN);class jN extends w.PureComponent{constructor(e){super(e),Ee(this,"registeredEvents",[]),Ee(this,"state",{drawingManager:null}),Ee(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Gn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Rf(Rf({},this.props.options),{},{map:this.context}));this.registeredEvents=_t({updaterMap:kE,eventMap:AE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:kE,eventMap:AE,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Tt(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}Ee(jN,"contextType",gt);function LE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Ou(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LE(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LE(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var IE={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},RE={animation(n,e){n.setAnimation(e)},clickable(n,e){n.setClickable(e)},cursor(n,e){n.setCursor(e)},draggable(n,e){n.setDraggable(e)},icon(n,e){n.setIcon(e)},label(n,e){n.setLabel(e)},map(n,e){n.setMap(e)},opacity(n,e){n.setOpacity(e)},options(n,e){n.setOptions(e)},position(n,e){n.setPosition(e)},shape(n,e){n.setShape(e)},title(n,e){n.setTitle(e)},visible(n,e){n.setVisible(e)},zIndex(n,e){n.setZIndex(e)}},Mf={};function UN(n){var{position:e,options:t,clusterer:s,noClustererRedraw:a,children:u,draggable:d,visible:g,animation:v,clickable:_,cursor:E,icon:S,label:I,opacity:O,shape:D,title:H,zIndex:B,onClick:te,onDblClick:X,onDrag:le,onDragEnd:oe,onDragStart:ae,onMouseOut:re,onMouseOver:V,onMouseUp:z,onMouseDown:M,onRightClick:q,onClickableChanged:G,onCursorChanged:Z,onAnimationChanged:U,onDraggableChanged:Pe,onFlatChanged:ke,onIconChanged:ie,onPositionChanged:J,onShapeChanged:ee,onTitleChanged:de,onVisibleChanged:Q,onZindexChanged:N,onLoad:F,onUnmount:K}=n,se=w.useContext(gt),[$,ce]=w.useState(null),[we,Re]=w.useState(null),[je,Ie]=w.useState(null),[Me,Xe]=w.useState(null),[Je,it]=w.useState(null),[et,En]=w.useState(null),[Ni,zi]=w.useState(null),[di,fe]=w.useState(null),[ze,$e]=w.useState(null),[an,kt]=w.useState(null),[$t,ot]=w.useState(null),[mt,Ln]=w.useState(null),[bs,rs]=w.useState(null),[xi,Ci]=w.useState(null),[fi,cn]=w.useState(null),[In,Rn]=w.useState(null),[Vi,ur]=w.useState(null),[Vs,os]=w.useState(null),[pi,ji]=w.useState(null),[Zn,ti]=w.useState(null),[Ai,js]=w.useState(null),[ws,Ui]=w.useState(null);w.useEffect(()=>{$!==null&&$.setMap(se)},[se]),w.useEffect(()=>{typeof t<"u"&&$!==null&&$.setOptions(t)},[$,t]),w.useEffect(()=>{typeof d<"u"&&$!==null&&$.setDraggable(d)},[$,d]),w.useEffect(()=>{e&&$!==null&&$.setPosition(e)},[$,e]),w.useEffect(()=>{typeof g<"u"&&$!==null&&$.setVisible(g)},[$,g]),w.useEffect(()=>{$?.setAnimation(v)},[$,v]),w.useEffect(()=>{$&&_!==void 0&&$.setClickable(_)},[$,_]),w.useEffect(()=>{$&&E!==void 0&&$.setCursor(E)},[$,E]),w.useEffect(()=>{$&&S!==void 0&&$.setIcon(S)},[$,S]),w.useEffect(()=>{$&&I!==void 0&&$.setLabel(I)},[$,I]),w.useEffect(()=>{$&&O!==void 0&&$.setOpacity(O)},[$,O]),w.useEffect(()=>{$&&D!==void 0&&$.setShape(D)},[$,D]),w.useEffect(()=>{$&&H!==void 0&&$.setTitle(H)},[$,H]),w.useEffect(()=>{$&&B!==void 0&&$.setZIndex(B)},[$,B]),w.useEffect(()=>{$&&X&&(we!==null&&google.maps.event.removeListener(we),Re(google.maps.event.addListener($,"dblclick",X)))},[X]),w.useEffect(()=>{$&&oe&&(je!==null&&google.maps.event.removeListener(je),Ie(google.maps.event.addListener($,"dragend",oe)))},[oe]),w.useEffect(()=>{$&&ae&&(Me!==null&&google.maps.event.removeListener(Me),Xe(google.maps.event.addListener($,"dragstart",ae)))},[ae]),w.useEffect(()=>{$&&M&&(Je!==null&&google.maps.event.removeListener(Je),it(google.maps.event.addListener($,"mousedown",M)))},[M]),w.useEffect(()=>{$&&re&&(et!==null&&google.maps.event.removeListener(et),En(google.maps.event.addListener($,"mouseout",re)))},[re]),w.useEffect(()=>{$&&V&&(Ni!==null&&google.maps.event.removeListener(Ni),zi(google.maps.event.addListener($,"mouseover",V)))},[V]),w.useEffect(()=>{$&&z&&(di!==null&&google.maps.event.removeListener(di),fe(google.maps.event.addListener($,"mouseup",z)))},[z]),w.useEffect(()=>{$&&q&&(ze!==null&&google.maps.event.removeListener(ze),$e(google.maps.event.addListener($,"rightclick",q)))},[q]),w.useEffect(()=>{$&&te&&(an!==null&&google.maps.event.removeListener(an),kt(google.maps.event.addListener($,"click",te)))},[te]),w.useEffect(()=>{$&&le&&($t!==null&&google.maps.event.removeListener($t),ot(google.maps.event.addListener($,"drag",le)))},[le]),w.useEffect(()=>{$&&G&&(mt!==null&&google.maps.event.removeListener(mt),Ln(google.maps.event.addListener($,"clickable_changed",G)))},[G]),w.useEffect(()=>{$&&Z&&(bs!==null&&google.maps.event.removeListener(bs),rs(google.maps.event.addListener($,"cursor_changed",Z)))},[Z]),w.useEffect(()=>{$&&U&&(xi!==null&&google.maps.event.removeListener(xi),Ci(google.maps.event.addListener($,"animation_changed",U)))},[U]),w.useEffect(()=>{$&&Pe&&(fi!==null&&google.maps.event.removeListener(fi),cn(google.maps.event.addListener($,"draggable_changed",Pe)))},[Pe]),w.useEffect(()=>{$&&ke&&(In!==null&&google.maps.event.removeListener(In),Rn(google.maps.event.addListener($,"flat_changed",ke)))},[ke]),w.useEffect(()=>{$&&ie&&(Vi!==null&&google.maps.event.removeListener(Vi),ur(google.maps.event.addListener($,"icon_changed",ie)))},[ie]),w.useEffect(()=>{$&&J&&(Vs!==null&&google.maps.event.removeListener(Vs),os(google.maps.event.addListener($,"position_changed",J)))},[J]),w.useEffect(()=>{$&&ee&&(pi!==null&&google.maps.event.removeListener(pi),ji(google.maps.event.addListener($,"shape_changed",ee)))},[ee]),w.useEffect(()=>{$&&de&&(Zn!==null&&google.maps.event.removeListener(Zn),ti(google.maps.event.addListener($,"title_changed",de)))},[de]),w.useEffect(()=>{$&&Q&&(Ai!==null&&google.maps.event.removeListener(Ai),js(google.maps.event.addListener($,"visible_changed",Q)))},[Q]),w.useEffect(()=>{$&&N&&(ws!==null&&google.maps.event.removeListener(ws),Ui(google.maps.event.addListener($,"zindex_changed",N)))},[N]),w.useEffect(()=>{var tn=Ou(Ou(Ou({},t||Mf),s?Mf:{map:se}),{},{position:e}),tt=new google.maps.Marker(tn);return s?s.addMarker(tt,!!a):tt.setMap(se),e&&tt.setPosition(e),typeof g<"u"&&tt.setVisible(g),typeof d<"u"&&tt.setDraggable(d),typeof _<"u"&&tt.setClickable(_),typeof E=="string"&&tt.setCursor(E),S&&tt.setIcon(S),typeof I<"u"&&tt.setLabel(I),typeof O<"u"&&tt.setOpacity(O),D&&tt.setShape(D),typeof H=="string"&&tt.setTitle(H),typeof B=="number"&&tt.setZIndex(B),X&&Re(google.maps.event.addListener(tt,"dblclick",X)),oe&&Ie(google.maps.event.addListener(tt,"dragend",oe)),ae&&Xe(google.maps.event.addListener(tt,"dragstart",ae)),M&&it(google.maps.event.addListener(tt,"mousedown",M)),re&&En(google.maps.event.addListener(tt,"mouseout",re)),V&&zi(google.maps.event.addListener(tt,"mouseover",V)),z&&fe(google.maps.event.addListener(tt,"mouseup",z)),q&&$e(google.maps.event.addListener(tt,"rightclick",q)),te&&kt(google.maps.event.addListener(tt,"click",te)),le&&ot(google.maps.event.addListener(tt,"drag",le)),G&&Ln(google.maps.event.addListener(tt,"clickable_changed",G)),Z&&rs(google.maps.event.addListener(tt,"cursor_changed",Z)),U&&Ci(google.maps.event.addListener(tt,"animation_changed",U)),Pe&&cn(google.maps.event.addListener(tt,"draggable_changed",Pe)),ke&&Rn(google.maps.event.addListener(tt,"flat_changed",ke)),ie&&ur(google.maps.event.addListener(tt,"icon_changed",ie)),J&&os(google.maps.event.addListener(tt,"position_changed",J)),ee&&ji(google.maps.event.addListener(tt,"shape_changed",ee)),de&&ti(google.maps.event.addListener(tt,"title_changed",de)),Q&&js(google.maps.event.addListener(tt,"visible_changed",Q)),N&&Ui(google.maps.event.addListener(tt,"zindex_changed",N)),ce(tt),F&&F(tt),()=>{we!==null&&google.maps.event.removeListener(we),je!==null&&google.maps.event.removeListener(je),Me!==null&&google.maps.event.removeListener(Me),Je!==null&&google.maps.event.removeListener(Je),et!==null&&google.maps.event.removeListener(et),Ni!==null&&google.maps.event.removeListener(Ni),di!==null&&google.maps.event.removeListener(di),ze!==null&&google.maps.event.removeListener(ze),an!==null&&google.maps.event.removeListener(an),mt!==null&&google.maps.event.removeListener(mt),bs!==null&&google.maps.event.removeListener(bs),xi!==null&&google.maps.event.removeListener(xi),fi!==null&&google.maps.event.removeListener(fi),In!==null&&google.maps.event.removeListener(In),Vi!==null&&google.maps.event.removeListener(Vi),Vs!==null&&google.maps.event.removeListener(Vs),Zn!==null&&google.maps.event.removeListener(Zn),Ai!==null&&google.maps.event.removeListener(Ai),ws!==null&&google.maps.event.removeListener(ws),K&&K(tt),s?s.removeMarker(tt,!!a):tt&&tt.setMap(null)}},[]);var Bi=w.useMemo(()=>u?w.Children.map(u,tn=>{if(!w.isValidElement(tn))return tn;var tt=tn;return w.cloneElement(tt,{anchor:$})}):null,[u,$]);return x.jsx(x.Fragment,{children:Bi})||null}w.memo(UN);class _y extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[])}componentDidMount(){var e=this;return FC(function*(){var t=Ou(Ou(Ou({},e.props.options||Mf),e.props.clusterer?Mf:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=_t({updaterMap:RE,eventMap:IE,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:RE,eventMap:IE,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Tt(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?w.Children.map(this.props.children,t=>{if(!w.isValidElement(t))return t;var s=t;return w.cloneElement(s,{anchor:this.marker})}):null;return e||null}}Ee(_y,"contextType",gt);var BN=(function(){function n(e,t){e.getClusterer().extend(n,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=t,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return n.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},n.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},n.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var s=t.getMaxZoom(),a=this.cluster.getBounds(),u=t.getMap();u!==null&&"fitBounds"in u&&u.fitBounds(a),this.timeOut=window.setTimeout(function(){var d=t.getMap();if(d!==null){"fitBounds"in d&&d.fitBounds(a);var g=d.getZoom()||0;s!==null&&g>s&&d.setZoom(s+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},n.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},n.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},n.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();t!==null&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},n.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},n.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},n.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},n.prototype.show=function(){var e,t,s,a,u,d;if(this.div&&this.center){var g=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,v=this.backgroundPosition.split(" "),_=parseInt(((e=v[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),E=parseInt(((t=v[1])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),S=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(S!==null?"".concat(S.y,"px"):"0","; left: ").concat(S!==null?"".concat(S.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var I=document.createElement("img");I.alt=g,I.src=this.url,I.width=this.width,I.height=this.height,I.setAttribute("style","position: absolute; top: ".concat(E,"px; left: ").concat(_,"px")),this.cluster.getClusterer().enableRetinaIcons||(I.style.clip="rect(-".concat(E,"px, -").concat(_+this.width,"px, -").concat(E+this.height,", -").concat(_,")"));var O=document.createElement("div");O.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((s=this.sums)===null||s===void 0)&&s.text&&(O.innerText="".concat((a=this.sums)===null||a===void 0?void 0:a.text)),!((u=this.sums)===null||u===void 0)&&u.html&&(O.innerHTML="".concat((d=this.sums)===null||d===void 0?void 0:d.html)),this.div.innerHTML="",this.div.appendChild(I),this.div.appendChild(O),this.div.title=g,this.div.style.display=""}this.visible=!0},n.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),s=t[Math.min(t.length-1,Math.max(0,e.index-1))];s&&(this.url=s.url,this.height=s.height,this.width=s.width,s.className&&(this.className="".concat(this.clusterClassName," ").concat(s.className)),this.anchorText=s.anchorText||[0,0],this.anchorIcon=s.anchorIcon||[this.height/2,this.width/2],this.textColor=s.textColor||"black",this.textSize=s.textSize||11,this.textDecoration=s.textDecoration||"none",this.fontWeight=s.fontWeight||"bold",this.fontStyle=s.fontStyle||"normal",this.fontFamily=s.fontFamily||"Arial,sans-serif",this.backgroundPosition=s.backgroundPosition||"0 0")},n.prototype.setCenter=function(e){this.center=e},n.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t!==null&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},n})(),FN=(function(){function n(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new BN(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return n.prototype.getSize=function(){return this.markers.length},n.prototype.getMarkers=function(){return this.markers},n.prototype.getCenter=function(){return this.center},n.prototype.getMap=function(){return this.map},n.prototype.getClusterer=function(){return this.markerClusterer},n.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=this.getMarkers(),s=0,a=t;s<a.length;s++){var u=a[s],d=u.getPosition();d&&e.extend(d)}return e},n.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},n.prototype.addMarker=function(e){var t;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var s=e.getPosition();if(s){var a=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(a-1)+s.lat())/a,(this.center.lng()*(a-1)+s.lng())/a),this.calculateBounds()}}}else{var s=e.getPosition();s&&(this.center=s,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var u=this.markers.length,d=this.markerClusterer.getMaxZoom(),g=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(d!==null&&typeof g<"u"&&g>d)e.getMap()!==this.map&&e.setMap(this.map);else if(u<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(u===this.minClusterSize)for(var v=0,_=this.markers;v<_.length;v++){var E=_[v];E.setMap(null)}else e.setMap(null);return!0},n.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},n.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},n.prototype.updateIcon=function(){var e,t=this.markers.length,s=this.markerClusterer.getMaxZoom(),a=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(s!==null&&typeof a<"u"&&a>s){this.clusterIcon.hide();return}if(t<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},n.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},n})();function HN(n,e){var t=n.length,s=t.toString().length,a=Math.min(s,e);return{text:t.toString(),index:a,title:""}}var qN=2e3,GN=500,ZN="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",WN="png",KN=[53,56,66,78,90],$N="cluster",WC=(function(){function n(e,t,s){t===void 0&&(t=[]),s===void 0&&(s={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(n,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=s.gridSize||60,this.minClusterSize=s.minimumClusterSize||2,this.maxZoom=s.maxZoom||null,this.styles=s.styles||[],this.title=s.title||"",this.zoomOnClick=!0,s.zoomOnClick!==void 0&&(this.zoomOnClick=s.zoomOnClick),this.averageCenter=!1,s.averageCenter!==void 0&&(this.averageCenter=s.averageCenter),this.ignoreHidden=!1,s.ignoreHidden!==void 0&&(this.ignoreHidden=s.ignoreHidden),this.enableRetinaIcons=!1,s.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=s.enableRetinaIcons),this.imagePath=s.imagePath||ZN,this.imageExtension=s.imageExtension||WN,this.imageSizes=s.imageSizes||KN,this.calculator=s.calculator||HN,this.batchSize=s.batchSize||qN,this.batchSizeIE=s.batchSizeIE||GN,this.clusterClass=s.clusterClass||$N,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(t,!0),this.setMap(e)}return n.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},n.prototype.onIdle=function(){this.redraw()},n.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},n.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var s=t[e];s.getMap()!==this.activeMap&&s.setMap(this.activeMap)}for(var a=0,u=this.clusters;a<u.length;a++){var d=u[a];d.remove()}this.clusters=[];for(var g=0,v=this.listeners;g<v.length;g++){var _=v[g];google.maps.event.removeListener(_)}this.listeners=[],this.activeMap=null,this.ready=!1},n.prototype.draw=function(){},n.prototype.getMap=function(){return null},n.prototype.getPanes=function(){return null},n.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},n.prototype.setMap=function(){},n.prototype.addListener=function(){return{remove:function(){}}},n.prototype.bindTo=function(){},n.prototype.get=function(){},n.prototype.notify=function(){},n.prototype.set=function(){},n.prototype.setValues=function(){},n.prototype.unbind=function(){},n.prototype.unbindAll=function(){},n.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},n.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,s=0,a=e;s<a.length;s++){var u=a[s],d=u.getPosition();d&&t.extend(d)}var g=this.getMap();g!==null&&"fitBounds"in g&&g.fitBounds(t)},n.prototype.getGridSize=function(){return this.gridSize},n.prototype.setGridSize=function(e){this.gridSize=e},n.prototype.getMinimumClusterSize=function(){return this.minClusterSize},n.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.setMaxZoom=function(e){this.maxZoom=e},n.prototype.getStyles=function(){return this.styles},n.prototype.setStyles=function(e){this.styles=e},n.prototype.getTitle=function(){return this.title},n.prototype.setTitle=function(e){this.title=e},n.prototype.getZoomOnClick=function(){return this.zoomOnClick},n.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},n.prototype.getAverageCenter=function(){return this.averageCenter},n.prototype.setAverageCenter=function(e){this.averageCenter=e},n.prototype.getIgnoreHidden=function(){return this.ignoreHidden},n.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},n.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},n.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},n.prototype.getImageExtension=function(){return this.imageExtension},n.prototype.setImageExtension=function(e){this.imageExtension=e},n.prototype.getImagePath=function(){return this.imagePath},n.prototype.setImagePath=function(e){this.imagePath=e},n.prototype.getImageSizes=function(){return this.imageSizes},n.prototype.setImageSizes=function(e){this.imageSizes=e},n.prototype.getCalculator=function(){return this.calculator},n.prototype.setCalculator=function(e){this.calculator=e},n.prototype.getBatchSizeIE=function(){return this.batchSizeIE},n.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},n.prototype.getClusterClass=function(){return this.clusterClass},n.prototype.setClusterClass=function(e){this.clusterClass=e},n.prototype.getMarkers=function(){return this.markers},n.prototype.getTotalMarkers=function(){return this.markers.length},n.prototype.getClusters=function(){return this.clusters},n.prototype.getTotalClusters=function(){return this.clusters.length},n.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},n.prototype.addMarkers=function(e,t){for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=e[s];a&&this.pushMarkerTo(a)}t||this.redraw()},n.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){t.ready&&(e.isAdded=!1,t.repaint())}),e.isAdded=!1,this.markers.push(e)},n.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var s=0;s<this.markers.length;s++)if(e===this.markers[s]){t=s;break}return t===-1?!1:(e.setMap(null),this.markers.splice(t,1),!0)},n.prototype.removeMarker=function(e,t){var s=this.removeMarker_(e);return!t&&s&&this.repaint(),s},n.prototype.removeMarkers=function(e,t){for(var s=!1,a=0,u=e;a<u.length;a++){var d=u[a];s=s||this.removeMarker_(d)}return!t&&s&&this.repaint(),s},n.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},n.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var s=0,a=e;s<a.length;s++){var u=a[s];u.remove()}},0)},n.prototype.getExtendedBounds=function(e){var t=this.getProjection(),s=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));s!==null&&(s.x+=this.gridSize,s.y-=this.gridSize);var a=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(a!==null&&(a.x-=this.gridSize,a.y+=this.gridSize),s!==null){var u=t.fromDivPixelToLatLng(s);u!==null&&e.extend(u)}if(a!==null){var d=t.fromDivPixelToLatLng(a);d!==null&&e.extend(d)}return e},n.prototype.redraw=function(){this.createClusters(0)},n.prototype.resetViewport=function(e){for(var t=0,s=this.clusters;t<s.length;t++){var a=s[t];a.remove()}this.clusters=[];for(var u=0,d=this.markers;u<d.length;u++){var g=d[u];g.isAdded=!1,e&&g.setMap(null)}},n.prototype.distanceBetweenPoints=function(e,t){var s=6371,a=(t.lat()-e.lat())*Math.PI/180,u=(t.lng()-e.lng())*Math.PI/180,d=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2);return s*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},n.prototype.isMarkerInBounds=function(e,t){var s=e.getPosition();return s?t.contains(s):!1},n.prototype.addToClosestCluster=function(e){for(var t,s=4e4,a=null,u=0,d=this.clusters;u<d.length;u++){var g=d[u];t=g;var v=t.getCenter(),_=e.getPosition();if(v&&_){var E=this.distanceBetweenPoints(v,_);E<s&&(s=E,a=t)}}a&&a.isMarkerInClusterBounds(e)?a.addMarker(e):(t=new FN(this),t.addMarker(e),this.clusters.push(t))},n.prototype.createClusters=function(e){var t=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var s=this.getMap(),a=s!==null&&("getBounds"in s)?s.getBounds():null,u=s?.getZoom()||0,d=u>3?new google.maps.LatLngBounds(a?.getSouthWest(),a?.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),g=this.getExtendedBounds(d),v=Math.min(e+this.batchSize,this.markers.length),_=e;_<v;_++){var E=this.markers[_];E&&!E.isAdded&&this.isMarkerInBounds(E,g)&&(!this.ignoreHidden||this.ignoreHidden&&E.getVisible())&&this.addToClosestCluster(E)}if(v<this.markers.length)this.timerRefStatic=window.setTimeout(function(){t.createClusters(v)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var S=0,I=this.clusters;S<I.length;S++){var O=I[S];O.updateIcon()}}}},n.prototype.extend=function(e,t){return(function(a){for(var u in a.prototype){var d=u;this.prototype[d]=a.prototype[d]}return this}).apply(e,[t])},n})();function ME(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function YN(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ME(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ME(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var Ps={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},jt={averageCenter(n,e){n.setAverageCenter(e)},batchSizeIE(n,e){n.setBatchSizeIE(e)},calculator(n,e){n.setCalculator(e)},clusterClass(n,e){n.setClusterClass(e)},enableRetinaIcons(n,e){n.setEnableRetinaIcons(e)},gridSize(n,e){n.setGridSize(e)},ignoreHidden(n,e){n.setIgnoreHidden(e)},imageExtension(n,e){n.setImageExtension(e)},imagePath(n,e){n.setImagePath(e)},imageSizes(n,e){n.setImageSizes(e)},maxZoom(n,e){n.setMaxZoom(e)},minimumClusterSize(n,e){n.setMinimumClusterSize(e)},styles(n,e){n.setStyles(e)},title(n,e){n.setTitle(e)},zoomOnClick(n,e){n.setZoomOnClick(e)}},QN={};function XN(n){var{children:e,options:t,averageCenter:s,batchSizeIE:a,calculator:u,clusterClass:d,enableRetinaIcons:g,gridSize:v,ignoreHidden:_,imageExtension:E,imagePath:S,imageSizes:I,maxZoom:O,minimumClusterSize:D,styles:H,title:B,zoomOnClick:te,onClick:X,onClusteringBegin:le,onClusteringEnd:oe,onMouseOver:ae,onMouseOut:re,onLoad:V,onUnmount:z}=n,[M,q]=w.useState(null),G=w.useContext(gt),[Z,U]=w.useState(null),[Pe,ke]=w.useState(null),[ie,J]=w.useState(null),[ee,de]=w.useState(null),[Q,N]=w.useState(null);return w.useEffect(()=>{M&&re&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(M,Ps.onMouseOut,re)))},[re]),w.useEffect(()=>{M&&ae&&(Q!==null&&google.maps.event.removeListener(Q),N(google.maps.event.addListener(M,Ps.onMouseOver,ae)))},[ae]),w.useEffect(()=>{M&&X&&(Z!==null&&google.maps.event.removeListener(Z),U(google.maps.event.addListener(M,Ps.onClick,X)))},[X]),w.useEffect(()=>{M&&le&&(Pe!==null&&google.maps.event.removeListener(Pe),ke(google.maps.event.addListener(M,Ps.onClusteringBegin,le)))},[le]),w.useEffect(()=>{M&&oe&&(ie!==null&&google.maps.event.removeListener(ie),ke(google.maps.event.addListener(M,Ps.onClusteringEnd,oe)))},[oe]),w.useEffect(()=>{typeof s<"u"&&M!==null&&jt.averageCenter(M,s)},[M,s]),w.useEffect(()=>{typeof a<"u"&&M!==null&&jt.batchSizeIE(M,a)},[M,a]),w.useEffect(()=>{typeof u<"u"&&M!==null&&jt.calculator(M,u)},[M,u]),w.useEffect(()=>{typeof d<"u"&&M!==null&&jt.clusterClass(M,d)},[M,d]),w.useEffect(()=>{typeof g<"u"&&M!==null&&jt.enableRetinaIcons(M,g)},[M,g]),w.useEffect(()=>{typeof v<"u"&&M!==null&&jt.gridSize(M,v)},[M,v]),w.useEffect(()=>{typeof _<"u"&&M!==null&&jt.ignoreHidden(M,_)},[M,_]),w.useEffect(()=>{typeof E<"u"&&M!==null&&jt.imageExtension(M,E)},[M,E]),w.useEffect(()=>{typeof S<"u"&&M!==null&&jt.imagePath(M,S)},[M,S]),w.useEffect(()=>{typeof I<"u"&&M!==null&&jt.imageSizes(M,I)},[M,I]),w.useEffect(()=>{typeof O<"u"&&M!==null&&jt.maxZoom(M,O)},[M,O]),w.useEffect(()=>{typeof D<"u"&&M!==null&&jt.minimumClusterSize(M,D)},[M,D]),w.useEffect(()=>{typeof H<"u"&&M!==null&&jt.styles(M,H)},[M,H]),w.useEffect(()=>{typeof B<"u"&&M!==null&&jt.title(M,B)},[M,B]),w.useEffect(()=>{typeof te<"u"&&M!==null&&jt.zoomOnClick(M,te)},[M,te]),w.useEffect(()=>{if(G){var F=YN({},t||QN),K=new WC(G,[],F);return s&&jt.averageCenter(K,s),a&&jt.batchSizeIE(K,a),u&&jt.calculator(K,u),d&&jt.clusterClass(K,d),g&&jt.enableRetinaIcons(K,g),v&&jt.gridSize(K,v),_&&jt.ignoreHidden(K,_),E&&jt.imageExtension(K,E),S&&jt.imagePath(K,S),I&&jt.imageSizes(K,I),O&&jt.maxZoom(K,O),D&&jt.minimumClusterSize(K,D),H&&jt.styles(K,H),B&&jt.title(K,B),te&&jt.zoomOnClick(K,te),re&&de(google.maps.event.addListener(K,Ps.onMouseOut,re)),ae&&N(google.maps.event.addListener(K,Ps.onMouseOver,ae)),X&&U(google.maps.event.addListener(K,Ps.onClick,X)),le&&ke(google.maps.event.addListener(K,Ps.onClusteringBegin,le)),oe&&J(google.maps.event.addListener(K,Ps.onClusteringEnd,oe)),q(K),V&&V(K),()=>{ee!==null&&google.maps.event.removeListener(ee),Q!==null&&google.maps.event.removeListener(Q),Z!==null&&google.maps.event.removeListener(Z),Pe!==null&&google.maps.event.removeListener(Pe),ie!==null&&google.maps.event.removeListener(ie),z&&z(K)}}},[]),M!==null&&e(M)||null}w.memo(XN);class JN extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{markerClusterer:null}),Ee(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new WC(this.context,[],this.props.options);this.registeredEvents=_t({updaterMap:jt,eventMap:Ps,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:jt,eventMap:Ps,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Tt(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}Ee(JN,"contextType",gt);function OE(n){n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()}var KC=(function(){function n(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(n,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return n.prototype.createInfoBoxDiv=function(){var e=this,t=function(E){E.returnValue=!1,E.preventDefault&&E.preventDefault(),e.enableEventPropagation||OE(E)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var s=this.getPanes();if(s!==null&&s[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var a=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-a.left-a.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var u=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],d=0,g=u;d<g.length;d++){var v=g[d];this.eventListeners.push(google.maps.event.addListener(this.div,v,OE))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",t),google.maps.event.trigger(this,"domready")}},n.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},n.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},n.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},n.prototype.getCloseClickHandler=function(){return this.closeClickHandler},n.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var s=0,a=0,u=t.getBounds();u&&!u.contains(this.position)&&t.setCenter(this.position);var d=t.getDiv(),g=d.offsetWidth,v=d.offsetHeight,_=this.pixelOffset.width,E=this.pixelOffset.height,S=this.div.offsetWidth,I=this.div.offsetHeight,O=this.infoBoxClearance.width,D=this.infoBoxClearance.height,H=this.getProjection(),B=H.fromLatLngToContainerPixel(this.position);B!==null&&(B.x<-_+O?s=B.x+_-O:B.x+S+_+O>g&&(s=B.x+S+_+O-g),this.alignBottom?B.y<-E+D+I?a=B.y+E-D-I:B.y+E+D>v&&(a=B.y+E+D-v):B.y<-E+D?a=B.y+E-D:B.y+I+E+D>v&&(a=B.y+I+E+D-v)),s===0&&a===0||t.panBy(s,a)}}},n.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var s=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+s*100+')"',this.div.style.filter="alpha(opacity="+s*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},n.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,s=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var a=this.div.currentStyle;a&&(e.top=parseInt(a.borderTopWidth||"",10)||0,e.bottom=parseInt(a.borderBottomWidth||"",10)||0,e.left=parseInt(a.borderLeftWidth||"",10)||0,e.right=parseInt(a.borderRightWidth||"",10)||0)}return e},n.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},n.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.position);t!==null&&(this.div.style.left=t.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(t.y+this.pixelOffset.height)+"px":this.div.style.top=t.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},n.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},n.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},n.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},n.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},n.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},n.prototype.getContent=function(){return this.content},n.prototype.getPosition=function(){return this.position},n.prototype.getZIndex=function(){return this.zIndex},n.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},n.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},n.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},n.prototype.open=function(e,t){var s=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",function(){var a=t.getPosition();s.setPosition(a)}),this.mapListener=google.maps.event.addListener(t,"map_changed",function(){s.setMap(t.map)})),this.setMap(e),this.div&&this.panBox()},n.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var s=t[e];google.maps.event.removeListener(s)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},n.prototype.extend=function(e,t){return(function(a){for(var u in a.prototype)Object.prototype.hasOwnProperty.call(this,u)||(this.prototype[u]=a.prototype[u]);return this}).apply(e,[t])},n})(),ez=["position"],tz=["position"];function PE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Of(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PE(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PE(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var DE={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},NE={options(n,e){n.setOptions(e)},position(n,e){e instanceof google.maps.LatLng?n.setPosition(e):n.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(n,e){n.setVisible(e)},zIndex(n,e){n.setZIndex(e)}},nz={};function iz(n){var{children:e,anchor:t,options:s,position:a,zIndex:u,onCloseClick:d,onDomReady:g,onContentChanged:v,onPositionChanged:_,onZindexChanged:E,onLoad:S,onUnmount:I}=n,O=w.useContext(gt),[D,H]=w.useState(null),[B,te]=w.useState(null),[X,le]=w.useState(null),[oe,ae]=w.useState(null),[re,V]=w.useState(null),[z,M]=w.useState(null),q=w.useRef(null);return w.useEffect(()=>{O&&D!==null&&(D.close(),t?D.open(O,t):D.getPosition()&&D.open(O))},[O,D,t]),w.useEffect(()=>{s&&D!==null&&D.setOptions(s)},[D,s]),w.useEffect(()=>{if(a&&D!==null){var G=a instanceof google.maps.LatLng?a:new google.maps.LatLng(a.lat,a.lng);D.setPosition(G)}},[a]),w.useEffect(()=>{typeof u=="number"&&D!==null&&D.setZIndex(u)},[u]),w.useEffect(()=>{D&&d&&(B!==null&&google.maps.event.removeListener(B),te(google.maps.event.addListener(D,"closeclick",d)))},[d]),w.useEffect(()=>{D&&g&&(X!==null&&google.maps.event.removeListener(X),le(google.maps.event.addListener(D,"domready",g)))},[g]),w.useEffect(()=>{D&&v&&(oe!==null&&google.maps.event.removeListener(oe),ae(google.maps.event.addListener(D,"content_changed",v)))},[v]),w.useEffect(()=>{D&&_&&(re!==null&&google.maps.event.removeListener(re),V(google.maps.event.addListener(D,"position_changed",_)))},[_]),w.useEffect(()=>{D&&E&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(D,"zindex_changed",E)))},[E]),w.useEffect(()=>{if(O){var G=s||nz,{position:Z}=G,U=yy(G,ez),Pe;Z&&!(Z instanceof google.maps.LatLng)&&(Pe=new google.maps.LatLng(Z.lat,Z.lng));var ke=new KC(Of(Of({},U),Pe?{position:Pe}:{}));q.current=document.createElement("div"),H(ke),d&&te(google.maps.event.addListener(ke,"closeclick",d)),g&&le(google.maps.event.addListener(ke,"domready",g)),v&&ae(google.maps.event.addListener(ke,"content_changed",v)),_&&V(google.maps.event.addListener(ke,"position_changed",_)),E&&M(google.maps.event.addListener(ke,"zindex_changed",E)),ke.setContent(q.current),t?ke.open(O,t):ke.getPosition()?ke.open(O):Gn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),S&&S(ke)}return()=>{D!==null&&(B&&google.maps.event.removeListener(B),oe&&google.maps.event.removeListener(oe),X&&google.maps.event.removeListener(X),re&&google.maps.event.removeListener(re),z&&google.maps.event.removeListener(z),I&&I(D),D.close())}},[]),q.current?Ol.createPortal(w.Children.only(e),q.current):null}w.memo(iz);class sz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"containerElement",null),Ee(this,"state",{infoBox:null}),Ee(this,"open",(e,t)=>{t?this.context!==null&&e.open(this.context,t):e.getPosition()?this.context!==null&&e.open(this.context):Gn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Ee(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:t}=e,s=yy(e,tz),a;t&&!(t instanceof google.maps.LatLng)&&(a=new google.maps.LatLng(t.lat,t.lng));var u=new KC(Of(Of({},s),a?{position:a}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=_t({updaterMap:NE,eventMap:DE,prevProps:{},nextProps:this.props,instance:u}),this.setState({infoBox:u},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;t!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:NE,eventMap:DE,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;t!==null&&(e&&e(t),Tt(this.registeredEvents),t.close())}render(){return this.containerElement?Ol.createPortal(w.Children.only(this.props.children),this.containerElement):null}}Ee(sz,"contextType",gt);var Sm,zE;function rz(){return zE||(zE=1,Sm=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,a,u;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(a=s;a--!==0;)if(!n(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(u=Object.keys(e),s=u.length,s!==Object.keys(t).length)return!1;for(a=s;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[a]))return!1;for(a=s;a--!==0;){var d=u[a];if(!n(e[d],t[d]))return!1}return!0}return e!==e&&t!==t}),Sm}var oz=rz(),VE=UC(oz),jE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],xm=1,Uc=8;class by{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,s]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");var a=s>>4;if(a!==xm)throw new Error("Got v".concat(a," data when expected v").concat(xm,"."));var u=jE[s&15];if(!u)throw new Error("Unrecognized array type.");var[d]=new Uint16Array(e,2,1),[g]=new Uint32Array(e,4,1);return new by(g,d,u,e)}constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,a=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var u=jE.indexOf(this.ArrayType),d=e*2*this.ArrayType.BYTES_PER_ELEMENT,g=e*this.IndexArrayType.BYTES_PER_ELEMENT,v=(8-g%8)%8;if(u<0)throw new Error("Unexpected typed array class: ".concat(s,"."));a&&a instanceof ArrayBuffer?(this.data=a,this.ids=new this.IndexArrayType(this.data,Uc,e),this.coords=new this.ArrayType(this.data,Uc+g+v,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Uc+d+g+v),this.ids=new this.IndexArrayType(this.data,Uc,e),this.coords=new this.ArrayType(this.data,Uc+g+v,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(xm<<4)+u]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=t,s}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return uv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,s,a){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:u,coords:d,nodeSize:g}=this,v=[0,u.length-1,0],_=[];v.length;){var E=v.pop()||0,S=v.pop()||0,I=v.pop()||0;if(S-I<=g){for(var O=I;O<=S;O++){var D=d[2*O],H=d[2*O+1];D>=e&&D<=s&&H>=t&&H<=a&&_.push(u[O])}continue}var B=I+S>>1,te=d[2*B],X=d[2*B+1];te>=e&&te<=s&&X>=t&&X<=a&&_.push(u[B]),(E===0?e<=te:t<=X)&&(v.push(I),v.push(B-1),v.push(1-E)),(E===0?s>=te:a>=X)&&(v.push(B+1),v.push(S),v.push(1-E))}return _}within(e,t,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:u,nodeSize:d}=this,g=[0,a.length-1,0],v=[],_=s*s;g.length;){var E=g.pop()||0,S=g.pop()||0,I=g.pop()||0;if(S-I<=d){for(var O=I;O<=S;O++)UE(u[2*O],u[2*O+1],e,t)<=_&&v.push(a[O]);continue}var D=I+S>>1,H=u[2*D],B=u[2*D+1];UE(H,B,e,t)<=_&&v.push(a[D]),(E===0?e-s<=H:t-s<=B)&&(g.push(I),g.push(D-1),g.push(1-E)),(E===0?e+s>=H:t+s>=B)&&(g.push(D+1),g.push(S),g.push(1-E))}return v}}function uv(n,e,t,s,a,u){if(!(a-s<=t)){var d=s+a>>1;$C(n,e,d,s,a,u),uv(n,e,t,s,d-1,1-u),uv(n,e,t,d+1,a,1-u)}}function $C(n,e,t,s,a,u){for(;a>s;){if(a-s>600){var d=a-s+1,g=t-s+1,v=Math.log(d),_=.5*Math.exp(2*v/3),E=.5*Math.sqrt(v*_*(d-_)/d)*(g-d/2<0?-1:1),S=Math.max(s,Math.floor(t-g*_/d+E)),I=Math.min(a,Math.floor(t+(d-g)*_/d+E));$C(n,e,t,S,I,u)}var O=e[2*t+u],D=s,H=a;for(Bc(n,e,s,t),e[2*a+u]>O&&Bc(n,e,s,a);D<H;){for(Bc(n,e,D,H),D++,H--;e[2*D+u]<O;)D++;for(;e[2*H+u]>O;)H--}e[2*s+u]===O?Bc(n,e,s,H):(H++,Bc(n,e,H,a)),H<=t&&(s=H+1),t<=H&&(a=H-1)}}function Bc(n,e,t,s){Cm(n,t,s),Cm(e,2*t,2*s),Cm(e,2*t+1,2*s+1)}function Cm(n,e,t){var s=n[e];n[e]=n[t],n[t]=s}function UE(n,e,t,s){var a=n-t,u=e-s;return a*a+u*u}var az={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:n=>n},BE=Math.fround||(n=>e=>(n[0]=+e,n[0]))(new Float32Array(1)),vl=2,fa=3,Am=4,da=5,YC=6;class lz{constructor(e){this.options=Object.assign(Object.create(az),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:s,maxZoom:a}=this.options;t&&console.time("total time");var u="prepare ".concat(e.length," points");t&&console.time(u),this.points=e;for(var d=[],g=0;g<e.length;g++){var v=e[g];if(v.geometry){var[_,E]=v.geometry.coordinates,S=BE(qd(_)),I=BE(Gd(E));d.push(S,I,1/0,g,-1,1),this.options.reduce&&d.push(0)}}var O=this.trees[a+1]=this._createTree(d);t&&console.timeEnd(u);for(var D=a;D>=s;D--){var H=+Date.now();O=this.trees[D]=this._createTree(this._cluster(O,D)),t&&console.log("z%d: %d clusters in %dms",D,O.numItems,+Date.now()-H)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var s=((e[0]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[1])),u=e[2]===180?180:((e[2]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)s=-180,u=180;else if(s>u){var g=this.getClusters([s,a,180,d],t),v=this.getClusters([-180,a,u,d],t);return g.concat(v)}var _=this.trees[this._limitZoom(t)],E=_.range(qd(s),Gd(d),qd(u),Gd(a)),S=_.data,I=[];for(var O of E){var D=this.stride*O;I.push(S[D+da]>1?FE(S,D,this.clusterProps):this.points[S[D+fa]])}return I}getChildren(e){var t=this._getOriginId(e),s=this._getOriginZoom(e),a="No cluster with the specified id.",u=this.trees[s];if(!u)throw new Error(a);var d=u.data;if(t*this.stride>=d.length)throw new Error(a);var g=this.options.radius/(this.options.extent*Math.pow(2,s-1)),v=d[t*this.stride],_=d[t*this.stride+1],E=u.within(v,_,g),S=[];for(var I of E){var O=I*this.stride;d[O+Am]===e&&S.push(d[O+da]>1?FE(d,O,this.clusterProps):this.points[d[O+fa]])}if(S.length===0)throw new Error(a);return S}getLeaves(e,t,s){t=t||10,s=s||0;var a=[];return this._appendLeaves(a,e,t,s,0),a}getTile(e,t,s){var a=this.trees[this._limitZoom(e)],u=Math.pow(2,e),{extent:d,radius:g}=this.options,v=g/d,_=(s-v)/u,E=(s+1+v)/u,S={features:[]};return this._addTileFeatures(a.range((t-v)/u,_,(t+1+v)/u,E),a.data,t,s,u,S),t===0&&this._addTileFeatures(a.range(1-v/u,_,1,E),a.data,u,s,u,S),t===u-1&&this._addTileFeatures(a.range(0,_,v/u,E),a.data,-1,s,u,S),S.features.length?S:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var s=this.getChildren(e);if(t++,s.length!==1)break;e=s[0].properties.cluster_id}return t}_appendLeaves(e,t,s,a,u){var d=this.getChildren(t);for(var g of d){var v=g.properties;if(v&&v.cluster?u+v.point_count<=a?u+=v.point_count:u=this._appendLeaves(e,v.cluster_id,s,a,u):u<a?u++:e.push(g),e.length===s)break}return u}_createTree(e){for(var t=new by(e.length/this.stride|0,this.options.nodeSize,Float32Array),s=0;s<e.length;s+=this.stride)t.add(e[s],e[s+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,s,a,u,d){for(var g of e){var v=g*this.stride,_=t[v+da]>1,E=void 0,S=void 0,I=void 0;if(_)E=QC(t,v,this.clusterProps),S=t[v],I=t[v+1];else{var O=this.points[t[v+fa]];E=O.properties;var[D,H]=O.geometry.coordinates;S=qd(D),I=Gd(H)}var B={type:1,geometry:[[Math.round(this.options.extent*(S*u-s)),Math.round(this.options.extent*(I*u-a))]],tags:E},te=void 0;_||this.options.generateId?te=t[v+fa]:te=this.points[t[v+fa]].id,te!==void 0&&(B.id=te),d.features.push(B)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:s,extent:a,reduce:u,minPoints:d}=this.options,g=s/(a*Math.pow(2,t)),v=e.data,_=[],E=this.stride,S=0;S<v.length;S+=E)if(!(v[S+vl]<=t)){v[S+vl]=t;var I=v[S],O=v[S+1],D=e.within(v[S],v[S+1],g),H=v[S+da],B=H;for(var te of D){var X=te*E;v[X+vl]>t&&(B+=v[X+da])}if(B>H&&B>=d){var le=I*H,oe=O*H,ae=void 0,re=-1,V=((S/E|0)<<5)+(t+1)+this.points.length;for(var z of D){var M=z*E;if(!(v[M+vl]<=t)){v[M+vl]=t;var q=v[M+da];le+=v[M]*q,oe+=v[M+1]*q,v[M+Am]=V,u&&(ae||(ae=this._map(v,S,!0),re=this.clusterProps.length,this.clusterProps.push(ae)),u(ae,this._map(v,M)))}}v[S+Am]=V,_.push(le/B,oe/B,1/0,V,-1,B),u&&_.push(re)}else{for(var G=0;G<E;G++)_.push(v[S+G]);if(B>1)for(var Z of D){var U=Z*E;if(!(v[U+vl]<=t)){v[U+vl]=t;for(var Pe=0;Pe<E;Pe++)_.push(v[U+Pe])}}}}return _}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,s){if(e[t+da]>1){var a=this.clusterProps[e[t+YC]];return s?Object.assign({},a):a}var u=this.points[e[t+fa]].properties,d=this.options.map(u);return s&&d===u?Object.assign({},d):d}}function FE(n,e,t){return{type:"Feature",id:n[e+fa],properties:QC(n,e,t),geometry:{type:"Point",coordinates:[uz(n[e]),cz(n[e+1])]}}}function QC(n,e,t){var s=n[e+da],a=s>=1e4?"".concat(Math.round(s/1e3),"k"):s>=1e3?"".concat(Math.round(s/100)/10,"k"):s,u=n[e+YC],d=u===-1?{}:Object.assign({},t[u]);return Object.assign(d,{cluster:!0,cluster_id:n[e+fa],point_count:s,point_count_abbreviated:a})}function qd(n){return n/360+.5}function Gd(n){var e=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function uz(n){return(n-.5)*360}function cz(n){var e=(180-n*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function hz(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}class ys{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class cv{constructor(e){var{markers:t,position:s}=e;this.markers=t,s&&(s instanceof google.maps.LatLng?this._position=s:this._position=new google.maps.LatLng(s))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(ys.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>ys.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(ys.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class dz{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return fz(t)}}var fz=n=>{var e=n.map(t=>new cv({position:ys.getPosition(t),markers:[t]}));return e};class pz extends dz{constructor(e){var{maxZoom:t,radius:s=60}=e,a=hz(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new lz(Object.assign({maxZoom:this.maxZoom,radius:s},a))}calculate(e){var t=!1,s={zoom:e.map.getZoom()};if(!VE(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var a=this.markers.map(u=>{var d=ys.getPosition(u),g=[d.lng(),d.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:g},properties:{marker:u}}});this.superCluster.load(a)}return t||(this.state.zoom<=this.maxZoom||s.zoom<=this.maxZoom)&&(t=!VE(this.state,s)),this.state=s,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(s=>this.transformCluster(s))}transformCluster(e){var{geometry:{coordinates:[t,s]},properties:a}=e;if(a.cluster)return new cv({markers:this.superCluster.getLeaves(a.cluster_id,1/0).map(d=>d.properties.marker),position:{lat:s,lng:t}});var u=a.marker;return new cv({markers:[u],position:ys.getPosition(u)})}}class gz{constructor(e,t){this.markers={sum:e.length};var s=t.map(u=>u.count),a=s.reduce((u,d)=>u+d,0);this.clusters={count:t.length,markers:{mean:a/t.length,sum:a,min:Math.min(...s),max:Math.max(...s)}}}}class mz{render(e,t,s){var{count:a,position:u}=e,d=a>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",g='<svg fill="'.concat(d,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(a,`</text>
</svg>`),v="Cluster of ".concat(a," markers"),_=Number(google.maps.Marker.MAX_ZINDEX)+a;if(ys.isAdvancedMarkerAvailable(s)){var E=new DOMParser,S=E.parseFromString(g,"image/svg+xml").documentElement;S.setAttribute("transform","translate(0 25)");var I={map:s,position:u,zIndex:_,title:v,content:S};return new google.maps.marker.AdvancedMarkerElement(I)}var O={position:u,zIndex:_,title:v,icon:{url:"data:image/svg+xml;base64,".concat(btoa(g)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(O)}}function vz(n,e){for(var t in e.prototype)n.prototype[t]=e.prototype[t]}class wy{constructor(){vz(wy,google.maps.OverlayView)}}var ih;(function(n){n.CLUSTERING_BEGIN="clusteringbegin",n.CLUSTERING_END="clusteringend",n.CLUSTER_CLICK="click"})(ih||(ih={}));var yz=(n,e,t)=>{t.fitBounds(e.bounds)};class _z extends wy{constructor(e){var{map:t,markers:s=[],algorithmOptions:a={},algorithm:u=new pz(a),renderer:d=new mz,onClusterClick:g=yz}=e;super(),this.markers=[...s],this.clusters=[],this.algorithm=u,this.renderer=d,this.onClusterClick=g,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(s=>{this.addMarker(s,!0)}),t||this.render()}removeMarker(e,t){var s=this.markers.indexOf(e);return s===-1?!1:(ys.setMap(e,null),this.markers.splice(s,1),t||this.render(),!0)}removeMarkers(e,t){var s=!1;return e.forEach(a=>{s=this.removeMarker(a,!0)||s}),s&&!t&&this.render(),s}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,ih.CLUSTERING_BEGIN,this);var{clusters:t,changed:s}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(s||s==null){var a=new Set;for(var u of t)u.markers.length==1&&a.add(u.markers[0]);var d=[];for(var g of this.clusters)g.marker!=null&&(g.markers.length==1?a.has(g.marker)||ys.setMap(g.marker,null):d.push(g.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>d.forEach(v=>ys.setMap(v,null)))}google.maps.event.trigger(this,ih.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>ys.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new gz(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(s=>{s.markers.length===1?s.marker=s.markers[0]:(s.marker=this.renderer.render(s,e,t),s.markers.forEach(a=>ys.setMap(a,null)),this.onClusterClick&&s.marker.addListener("click",a=>{google.maps.event.trigger(this,ih.CLUSTER_CLICK,s),this.onClusterClick(a,s,t)})),ys.setMap(s.marker,t)})}}function HE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function qE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HE(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HE(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function bz(n){var e=pN(),[t,s]=w.useState(null);return w.useEffect(()=>{if(e&&t===null){var a=new _z(qE(qE({},n),{},{map:e}));s(a)}},[e]),t}function wz(n){var{children:e,options:t}=n,s=bz(t);return s!==null?e(s):null}w.memo(wz);var GE={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},ZE={options(n,e){n.setOptions(e)},position(n,e){n.setPosition(e)},zIndex(n,e){n.setZIndex(e)}};function Ez(n){var{children:e,anchor:t,options:s,position:a,zIndex:u,onCloseClick:d,onDomReady:g,onContentChanged:v,onPositionChanged:_,onZindexChanged:E,onLoad:S,onUnmount:I}=n,O=w.useContext(gt),[D,H]=w.useState(null),[B,te]=w.useState(null),[X,le]=w.useState(null),[oe,ae]=w.useState(null),[re,V]=w.useState(null),[z,M]=w.useState(null),q=w.useRef(null);return w.useEffect(()=>{D!==null&&(D.close(),t?D.open(O,t):D.getPosition()&&D.open(O))},[O,D,t]),w.useEffect(()=>{s&&D!==null&&D.setOptions(s)},[D,s]),w.useEffect(()=>{a&&D!==null&&D.setPosition(a)},[a]),w.useEffect(()=>{typeof u=="number"&&D!==null&&D.setZIndex(u)},[u]),w.useEffect(()=>{D&&d&&(B!==null&&google.maps.event.removeListener(B),te(google.maps.event.addListener(D,"closeclick",d)))},[d]),w.useEffect(()=>{D&&g&&(X!==null&&google.maps.event.removeListener(X),le(google.maps.event.addListener(D,"domready",g)))},[g]),w.useEffect(()=>{D&&v&&(oe!==null&&google.maps.event.removeListener(oe),ae(google.maps.event.addListener(D,"content_changed",v)))},[v]),w.useEffect(()=>{D&&_&&(re!==null&&google.maps.event.removeListener(re),V(google.maps.event.addListener(D,"position_changed",_)))},[_]),w.useEffect(()=>{D&&E&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(D,"zindex_changed",E)))},[E]),w.useEffect(()=>{var G=new google.maps.InfoWindow(s);return H(G),q.current=document.createElement("div"),d&&te(google.maps.event.addListener(G,"closeclick",d)),g&&le(google.maps.event.addListener(G,"domready",g)),v&&ae(google.maps.event.addListener(G,"content_changed",v)),_&&V(google.maps.event.addListener(G,"position_changed",_)),E&&M(google.maps.event.addListener(G,"zindex_changed",E)),G.setContent(q.current),a&&G.setPosition(a),u&&G.setZIndex(u),t?G.open(O,t):G.getPosition()?G.open(O):Gn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),S&&S(G),()=>{B&&google.maps.event.removeListener(B),oe&&google.maps.event.removeListener(oe),X&&google.maps.event.removeListener(X),re&&google.maps.event.removeListener(re),z&&google.maps.event.removeListener(z),I&&I(G),G.close()}},[]),q.current?Ol.createPortal(w.Children.only(e),q.current):null}w.memo(Ez);class Tz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"containerElement",null),Ee(this,"state",{infoWindow:null}),Ee(this,"open",(e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):Gn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Ee(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=_t({updaterMap:ZE,eventMap:GE,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:ZE,eventMap:GE,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Tt(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Ol.createPortal(w.Children.only(this.props.children),this.containerElement):null}}Ee(Tz,"contextType",gt);function WE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Pf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WE(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WE(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var KE={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},$E={draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},path(n,e){n.setPath(e)},visible(n,e){n.setVisible(e)}},Sz={};function xz(n){var{options:e,draggable:t,editable:s,visible:a,path:u,onDblClick:d,onDragEnd:g,onDragStart:v,onMouseDown:_,onMouseMove:E,onMouseOut:S,onMouseOver:I,onMouseUp:O,onRightClick:D,onClick:H,onDrag:B,onLoad:te,onUnmount:X}=n,le=w.useContext(gt),[oe,ae]=w.useState(null),[re,V]=w.useState(null),[z,M]=w.useState(null),[q,G]=w.useState(null),[Z,U]=w.useState(null),[Pe,ke]=w.useState(null),[ie,J]=w.useState(null),[ee,de]=w.useState(null),[Q,N]=w.useState(null),[F,K]=w.useState(null),[se,$]=w.useState(null),[ce,we]=w.useState(null);return w.useEffect(()=>{oe!==null&&oe.setMap(le)},[le]),w.useEffect(()=>{typeof e<"u"&&oe!==null&&oe.setOptions(e)},[oe,e]),w.useEffect(()=>{typeof t<"u"&&oe!==null&&oe.setDraggable(t)},[oe,t]),w.useEffect(()=>{typeof s<"u"&&oe!==null&&oe.setEditable(s)},[oe,s]),w.useEffect(()=>{typeof a<"u"&&oe!==null&&oe.setVisible(a)},[oe,a]),w.useEffect(()=>{typeof u<"u"&&oe!==null&&oe.setPath(u)},[oe,u]),w.useEffect(()=>{oe&&d&&(re!==null&&google.maps.event.removeListener(re),V(google.maps.event.addListener(oe,"dblclick",d)))},[d]),w.useEffect(()=>{oe&&g&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(oe,"dragend",g)))},[g]),w.useEffect(()=>{oe&&v&&(q!==null&&google.maps.event.removeListener(q),G(google.maps.event.addListener(oe,"dragstart",v)))},[v]),w.useEffect(()=>{oe&&_&&(Z!==null&&google.maps.event.removeListener(Z),U(google.maps.event.addListener(oe,"mousedown",_)))},[_]),w.useEffect(()=>{oe&&E&&(Pe!==null&&google.maps.event.removeListener(Pe),ke(google.maps.event.addListener(oe,"mousemove",E)))},[E]),w.useEffect(()=>{oe&&S&&(ie!==null&&google.maps.event.removeListener(ie),J(google.maps.event.addListener(oe,"mouseout",S)))},[S]),w.useEffect(()=>{oe&&I&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(oe,"mouseover",I)))},[I]),w.useEffect(()=>{oe&&O&&(Q!==null&&google.maps.event.removeListener(Q),N(google.maps.event.addListener(oe,"mouseup",O)))},[O]),w.useEffect(()=>{oe&&D&&(F!==null&&google.maps.event.removeListener(F),K(google.maps.event.addListener(oe,"rightclick",D)))},[D]),w.useEffect(()=>{oe&&H&&(se!==null&&google.maps.event.removeListener(se),$(google.maps.event.addListener(oe,"click",H)))},[H]),w.useEffect(()=>{oe&&B&&(ce!==null&&google.maps.event.removeListener(ce),we(google.maps.event.addListener(oe,"drag",B)))},[B]),w.useEffect(()=>{var Re=new google.maps.Polyline(Pf(Pf({},e||Sz),{},{map:le}));return u&&Re.setPath(u),typeof a<"u"&&Re.setVisible(a),typeof s<"u"&&Re.setEditable(s),typeof t<"u"&&Re.setDraggable(t),d&&V(google.maps.event.addListener(Re,"dblclick",d)),g&&M(google.maps.event.addListener(Re,"dragend",g)),v&&G(google.maps.event.addListener(Re,"dragstart",v)),_&&U(google.maps.event.addListener(Re,"mousedown",_)),E&&ke(google.maps.event.addListener(Re,"mousemove",E)),S&&J(google.maps.event.addListener(Re,"mouseout",S)),I&&de(google.maps.event.addListener(Re,"mouseover",I)),O&&N(google.maps.event.addListener(Re,"mouseup",O)),D&&K(google.maps.event.addListener(Re,"rightclick",D)),H&&$(google.maps.event.addListener(Re,"click",H)),B&&we(google.maps.event.addListener(Re,"drag",B)),ae(Re),te&&te(Re),()=>{re!==null&&google.maps.event.removeListener(re),z!==null&&google.maps.event.removeListener(z),q!==null&&google.maps.event.removeListener(q),Z!==null&&google.maps.event.removeListener(Z),Pe!==null&&google.maps.event.removeListener(Pe),ie!==null&&google.maps.event.removeListener(ie),ee!==null&&google.maps.event.removeListener(ee),Q!==null&&google.maps.event.removeListener(Q),F!==null&&google.maps.event.removeListener(F),se!==null&&google.maps.event.removeListener(se),X&&X(Re),Re.setMap(null)}},[]),null}w.memo(xz);class Cz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{polyline:null}),Ee(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(Pf(Pf({},this.props.options),{},{map:this.context}));this.registeredEvents=_t({updaterMap:$E,eventMap:KE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:$E,eventMap:KE,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Tt(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}Ee(Cz,"contextType",gt);function YE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function QE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YE(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YE(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var XE={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},JE={draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},path(n,e){n.setPath(e)},paths(n,e){n.setPaths(e)},visible(n,e){n.setVisible(e)}};function Az(n){var{options:e,draggable:t,editable:s,visible:a,path:u,paths:d,onDblClick:g,onDragEnd:v,onDragStart:_,onMouseDown:E,onMouseMove:S,onMouseOut:I,onMouseOver:O,onMouseUp:D,onRightClick:H,onClick:B,onDrag:te,onLoad:X,onUnmount:le,onEdit:oe}=n,ae=w.useContext(gt),[re,V]=w.useState(null),[z,M]=w.useState(null),[q,G]=w.useState(null),[Z,U]=w.useState(null),[Pe,ke]=w.useState(null),[ie,J]=w.useState(null),[ee,de]=w.useState(null),[Q,N]=w.useState(null),[F,K]=w.useState(null),[se,$]=w.useState(null),[ce,we]=w.useState(null),[Re,je]=w.useState(null);return w.useEffect(()=>{re!==null&&re.setMap(ae)},[ae]),w.useEffect(()=>{typeof e<"u"&&re!==null&&re.setOptions(e)},[re,e]),w.useEffect(()=>{typeof t<"u"&&re!==null&&re.setDraggable(t)},[re,t]),w.useEffect(()=>{typeof s<"u"&&re!==null&&re.setEditable(s)},[re,s]),w.useEffect(()=>{typeof a<"u"&&re!==null&&re.setVisible(a)},[re,a]),w.useEffect(()=>{typeof u<"u"&&re!==null&&re.setPath(u)},[re,u]),w.useEffect(()=>{typeof d<"u"&&re!==null&&re.setPaths(d)},[re,d]),w.useEffect(()=>{re&&typeof g=="function"&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(re,"dblclick",g)))},[g]),w.useEffect(()=>{re&&(google.maps.event.addListener(re.getPath(),"insert_at",()=>{oe?.(re)}),google.maps.event.addListener(re.getPath(),"set_at",()=>{oe?.(re)}),google.maps.event.addListener(re.getPath(),"remove_at",()=>{oe?.(re)}))},[re,oe]),w.useEffect(()=>{re&&typeof v=="function"&&(q!==null&&google.maps.event.removeListener(q),G(google.maps.event.addListener(re,"dragend",v)))},[v]),w.useEffect(()=>{re&&typeof _=="function"&&(Z!==null&&google.maps.event.removeListener(Z),U(google.maps.event.addListener(re,"dragstart",_)))},[_]),w.useEffect(()=>{re&&typeof E=="function"&&(Pe!==null&&google.maps.event.removeListener(Pe),ke(google.maps.event.addListener(re,"mousedown",E)))},[E]),w.useEffect(()=>{re&&typeof S=="function"&&(ie!==null&&google.maps.event.removeListener(ie),J(google.maps.event.addListener(re,"mousemove",S)))},[S]),w.useEffect(()=>{re&&typeof I=="function"&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(re,"mouseout",I)))},[I]),w.useEffect(()=>{re&&typeof O=="function"&&(Q!==null&&google.maps.event.removeListener(Q),N(google.maps.event.addListener(re,"mouseover",O)))},[O]),w.useEffect(()=>{re&&typeof D=="function"&&(F!==null&&google.maps.event.removeListener(F),K(google.maps.event.addListener(re,"mouseup",D)))},[D]),w.useEffect(()=>{re&&typeof H=="function"&&(se!==null&&google.maps.event.removeListener(se),$(google.maps.event.addListener(re,"rightclick",H)))},[H]),w.useEffect(()=>{re&&typeof B=="function"&&(ce!==null&&google.maps.event.removeListener(ce),we(google.maps.event.addListener(re,"click",B)))},[B]),w.useEffect(()=>{re&&typeof te=="function"&&(Re!==null&&google.maps.event.removeListener(Re),je(google.maps.event.addListener(re,"drag",te)))},[te]),w.useEffect(()=>{var Ie=new google.maps.Polygon(QE(QE({},e),{},{map:ae}));return u&&Ie.setPath(u),d&&Ie.setPaths(d),typeof a<"u"&&Ie.setVisible(a),typeof s<"u"&&Ie.setEditable(s),typeof t<"u"&&Ie.setDraggable(t),g&&M(google.maps.event.addListener(Ie,"dblclick",g)),v&&G(google.maps.event.addListener(Ie,"dragend",v)),_&&U(google.maps.event.addListener(Ie,"dragstart",_)),E&&ke(google.maps.event.addListener(Ie,"mousedown",E)),S&&J(google.maps.event.addListener(Ie,"mousemove",S)),I&&de(google.maps.event.addListener(Ie,"mouseout",I)),O&&N(google.maps.event.addListener(Ie,"mouseover",O)),D&&K(google.maps.event.addListener(Ie,"mouseup",D)),H&&$(google.maps.event.addListener(Ie,"rightclick",H)),B&&we(google.maps.event.addListener(Ie,"click",B)),te&&je(google.maps.event.addListener(Ie,"drag",te)),V(Ie),X&&X(Ie),()=>{z!==null&&google.maps.event.removeListener(z),q!==null&&google.maps.event.removeListener(q),Z!==null&&google.maps.event.removeListener(Z),Pe!==null&&google.maps.event.removeListener(Pe),ie!==null&&google.maps.event.removeListener(ie),ee!==null&&google.maps.event.removeListener(ee),Q!==null&&google.maps.event.removeListener(Q),F!==null&&google.maps.event.removeListener(F),se!==null&&google.maps.event.removeListener(se),ce!==null&&google.maps.event.removeListener(ce),le&&le(Ie),Ie.setMap(null)}},[]),null}w.memo(Az);class kz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=_t({updaterMap:JE,eventMap:XE,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:JE,eventMap:XE,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Tt(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}Ee(kz,"contextType",gt);function eT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Df(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eT(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var tT={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},nT={bounds(n,e){n.setBounds(e)},draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},visible(n,e){n.setVisible(e)}};function Lz(n){var{options:e,bounds:t,draggable:s,editable:a,visible:u,onDblClick:d,onDragEnd:g,onDragStart:v,onMouseDown:_,onMouseMove:E,onMouseOut:S,onMouseOver:I,onMouseUp:O,onRightClick:D,onClick:H,onDrag:B,onBoundsChanged:te,onLoad:X,onUnmount:le}=n,oe=w.useContext(gt),[ae,re]=w.useState(null),[V,z]=w.useState(null),[M,q]=w.useState(null),[G,Z]=w.useState(null),[U,Pe]=w.useState(null),[ke,ie]=w.useState(null),[J,ee]=w.useState(null),[de,Q]=w.useState(null),[N,F]=w.useState(null),[K,se]=w.useState(null),[$,ce]=w.useState(null),[we,Re]=w.useState(null),[je,Ie]=w.useState(null);return w.useEffect(()=>{ae!==null&&ae.setMap(oe)},[oe]),w.useEffect(()=>{typeof e<"u"&&ae!==null&&ae.setOptions(e)},[ae,e]),w.useEffect(()=>{typeof s<"u"&&ae!==null&&ae.setDraggable(s)},[ae,s]),w.useEffect(()=>{typeof a<"u"&&ae!==null&&ae.setEditable(a)},[ae,a]),w.useEffect(()=>{typeof u<"u"&&ae!==null&&ae.setVisible(u)},[ae,u]),w.useEffect(()=>{typeof t<"u"&&ae!==null&&ae.setBounds(t)},[ae,t]),w.useEffect(()=>{ae&&d&&(V!==null&&google.maps.event.removeListener(V),z(google.maps.event.addListener(ae,"dblclick",d)))},[d]),w.useEffect(()=>{ae&&g&&(M!==null&&google.maps.event.removeListener(M),q(google.maps.event.addListener(ae,"dragend",g)))},[g]),w.useEffect(()=>{ae&&v&&(G!==null&&google.maps.event.removeListener(G),Z(google.maps.event.addListener(ae,"dragstart",v)))},[v]),w.useEffect(()=>{ae&&_&&(U!==null&&google.maps.event.removeListener(U),Pe(google.maps.event.addListener(ae,"mousedown",_)))},[_]),w.useEffect(()=>{ae&&E&&(ke!==null&&google.maps.event.removeListener(ke),ie(google.maps.event.addListener(ae,"mousemove",E)))},[E]),w.useEffect(()=>{ae&&S&&(J!==null&&google.maps.event.removeListener(J),ee(google.maps.event.addListener(ae,"mouseout",S)))},[S]),w.useEffect(()=>{ae&&I&&(de!==null&&google.maps.event.removeListener(de),Q(google.maps.event.addListener(ae,"mouseover",I)))},[I]),w.useEffect(()=>{ae&&O&&(N!==null&&google.maps.event.removeListener(N),F(google.maps.event.addListener(ae,"mouseup",O)))},[O]),w.useEffect(()=>{ae&&D&&(K!==null&&google.maps.event.removeListener(K),se(google.maps.event.addListener(ae,"rightclick",D)))},[D]),w.useEffect(()=>{ae&&H&&($!==null&&google.maps.event.removeListener($),ce(google.maps.event.addListener(ae,"click",H)))},[H]),w.useEffect(()=>{ae&&B&&(we!==null&&google.maps.event.removeListener(we),Re(google.maps.event.addListener(ae,"drag",B)))},[B]),w.useEffect(()=>{ae&&te&&(je!==null&&google.maps.event.removeListener(je),Ie(google.maps.event.addListener(ae,"bounds_changed",te)))},[te]),w.useEffect(()=>{var Me=new google.maps.Rectangle(Df(Df({},e),{},{map:oe}));return typeof u<"u"&&Me.setVisible(u),typeof a<"u"&&Me.setEditable(a),typeof s<"u"&&Me.setDraggable(s),typeof t<"u"&&Me.setBounds(t),d&&z(google.maps.event.addListener(Me,"dblclick",d)),g&&q(google.maps.event.addListener(Me,"dragend",g)),v&&Z(google.maps.event.addListener(Me,"dragstart",v)),_&&Pe(google.maps.event.addListener(Me,"mousedown",_)),E&&ie(google.maps.event.addListener(Me,"mousemove",E)),S&&ee(google.maps.event.addListener(Me,"mouseout",S)),I&&Q(google.maps.event.addListener(Me,"mouseover",I)),O&&F(google.maps.event.addListener(Me,"mouseup",O)),D&&se(google.maps.event.addListener(Me,"rightclick",D)),H&&ce(google.maps.event.addListener(Me,"click",H)),B&&Re(google.maps.event.addListener(Me,"drag",B)),te&&Ie(google.maps.event.addListener(Me,"bounds_changed",te)),re(Me),X&&X(Me),()=>{V!==null&&google.maps.event.removeListener(V),M!==null&&google.maps.event.removeListener(M),G!==null&&google.maps.event.removeListener(G),U!==null&&google.maps.event.removeListener(U),ke!==null&&google.maps.event.removeListener(ke),J!==null&&google.maps.event.removeListener(J),de!==null&&google.maps.event.removeListener(de),N!==null&&google.maps.event.removeListener(N),K!==null&&google.maps.event.removeListener(K),$!==null&&google.maps.event.removeListener($),we!==null&&google.maps.event.removeListener(we),je!==null&&google.maps.event.removeListener(je),le&&le(Me),Me.setMap(null)}},[]),null}w.memo(Lz);class Iz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{rectangle:null}),Ee(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(Df(Df({},this.props.options),{},{map:this.context}));this.registeredEvents=_t({updaterMap:nT,eventMap:tT,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:nT,eventMap:tT,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Tt(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}Ee(Iz,"contextType",gt);function iT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Nf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iT(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var sT={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},rT={center(n,e){n.setCenter(e)},draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},radius(n,e){n.setRadius(e)},visible(n,e){n.setVisible(e)}},Rz={};function Mz(n){var{options:e,center:t,radius:s,draggable:a,editable:u,visible:d,onDblClick:g,onDragEnd:v,onDragStart:_,onMouseDown:E,onMouseMove:S,onMouseOut:I,onMouseOver:O,onMouseUp:D,onRightClick:H,onClick:B,onDrag:te,onCenterChanged:X,onRadiusChanged:le,onLoad:oe,onUnmount:ae}=n,re=w.useContext(gt),[V,z]=w.useState(null),[M,q]=w.useState(null),[G,Z]=w.useState(null),[U,Pe]=w.useState(null),[ke,ie]=w.useState(null),[J,ee]=w.useState(null),[de,Q]=w.useState(null),[N,F]=w.useState(null),[K,se]=w.useState(null),[$,ce]=w.useState(null),[we,Re]=w.useState(null),[je,Ie]=w.useState(null),[Me,Xe]=w.useState(null),[Je,it]=w.useState(null);return w.useEffect(()=>{V!==null&&V.setMap(re)},[re]),w.useEffect(()=>{typeof e<"u"&&V!==null&&V.setOptions(e)},[V,e]),w.useEffect(()=>{typeof a<"u"&&V!==null&&V.setDraggable(a)},[V,a]),w.useEffect(()=>{typeof u<"u"&&V!==null&&V.setEditable(u)},[V,u]),w.useEffect(()=>{typeof d<"u"&&V!==null&&V.setVisible(d)},[V,d]),w.useEffect(()=>{typeof s=="number"&&V!==null&&V.setRadius(s)},[V,s]),w.useEffect(()=>{typeof t<"u"&&V!==null&&V.setCenter(t)},[V,t]),w.useEffect(()=>{V&&g&&(M!==null&&google.maps.event.removeListener(M),q(google.maps.event.addListener(V,"dblclick",g)))},[g]),w.useEffect(()=>{V&&v&&(G!==null&&google.maps.event.removeListener(G),Z(google.maps.event.addListener(V,"dragend",v)))},[v]),w.useEffect(()=>{V&&_&&(U!==null&&google.maps.event.removeListener(U),Pe(google.maps.event.addListener(V,"dragstart",_)))},[_]),w.useEffect(()=>{V&&E&&(ke!==null&&google.maps.event.removeListener(ke),ie(google.maps.event.addListener(V,"mousedown",E)))},[E]),w.useEffect(()=>{V&&S&&(J!==null&&google.maps.event.removeListener(J),ee(google.maps.event.addListener(V,"mousemove",S)))},[S]),w.useEffect(()=>{V&&I&&(de!==null&&google.maps.event.removeListener(de),Q(google.maps.event.addListener(V,"mouseout",I)))},[I]),w.useEffect(()=>{V&&O&&(N!==null&&google.maps.event.removeListener(N),F(google.maps.event.addListener(V,"mouseover",O)))},[O]),w.useEffect(()=>{V&&D&&(K!==null&&google.maps.event.removeListener(K),se(google.maps.event.addListener(V,"mouseup",D)))},[D]),w.useEffect(()=>{V&&H&&($!==null&&google.maps.event.removeListener($),ce(google.maps.event.addListener(V,"rightclick",H)))},[H]),w.useEffect(()=>{V&&B&&(we!==null&&google.maps.event.removeListener(we),Re(google.maps.event.addListener(V,"click",B)))},[B]),w.useEffect(()=>{V&&te&&(je!==null&&google.maps.event.removeListener(je),Ie(google.maps.event.addListener(V,"drag",te)))},[te]),w.useEffect(()=>{V&&X&&(Me!==null&&google.maps.event.removeListener(Me),Xe(google.maps.event.addListener(V,"center_changed",X)))},[B]),w.useEffect(()=>{V&&le&&(Je!==null&&google.maps.event.removeListener(Je),it(google.maps.event.addListener(V,"radius_changed",le)))},[le]),w.useEffect(()=>{var et=new google.maps.Circle(Nf(Nf({},e||Rz),{},{map:re}));return typeof s=="number"&&et.setRadius(s),typeof t<"u"&&et.setCenter(t),typeof s=="number"&&et.setRadius(s),typeof d<"u"&&et.setVisible(d),typeof u<"u"&&et.setEditable(u),typeof a<"u"&&et.setDraggable(a),g&&q(google.maps.event.addListener(et,"dblclick",g)),v&&Z(google.maps.event.addListener(et,"dragend",v)),_&&Pe(google.maps.event.addListener(et,"dragstart",_)),E&&ie(google.maps.event.addListener(et,"mousedown",E)),S&&ee(google.maps.event.addListener(et,"mousemove",S)),I&&Q(google.maps.event.addListener(et,"mouseout",I)),O&&F(google.maps.event.addListener(et,"mouseover",O)),D&&se(google.maps.event.addListener(et,"mouseup",D)),H&&ce(google.maps.event.addListener(et,"rightclick",H)),B&&Re(google.maps.event.addListener(et,"click",B)),te&&Ie(google.maps.event.addListener(et,"drag",te)),X&&Xe(google.maps.event.addListener(et,"center_changed",X)),le&&it(google.maps.event.addListener(et,"radius_changed",le)),z(et),oe&&oe(et),()=>{M!==null&&google.maps.event.removeListener(M),G!==null&&google.maps.event.removeListener(G),U!==null&&google.maps.event.removeListener(U),ke!==null&&google.maps.event.removeListener(ke),J!==null&&google.maps.event.removeListener(J),de!==null&&google.maps.event.removeListener(de),N!==null&&google.maps.event.removeListener(N),K!==null&&google.maps.event.removeListener(K),$!==null&&google.maps.event.removeListener($),we!==null&&google.maps.event.removeListener(we),Me!==null&&google.maps.event.removeListener(Me),Je!==null&&google.maps.event.removeListener(Je),ae&&ae(et),et.setMap(null)}},[]),null}w.memo(Mz);class Oz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{circle:null}),Ee(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(Nf(Nf({},this.props.options),{},{map:this.context}));this.registeredEvents=_t({updaterMap:rT,eventMap:sT,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:rT,eventMap:sT,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Tt(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}Ee(Oz,"contextType",gt);function oT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function zf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oT(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var aT={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},lT={add(n,e){n.add(e)},addgeojson(n,e,t){n.addGeoJson(e,t)},contains(n,e){n.contains(e)},foreach(n,e){n.forEach(e)},loadgeojson(n,e,t,s){n.loadGeoJson(e,t,s)},overridestyle(n,e,t){n.overrideStyle(e,t)},remove(n,e){n.remove(e)},revertstyle(n,e){n.revertStyle(e)},controlposition(n,e){n.setControlPosition(e)},controls(n,e){n.setControls(e)},drawingmode(n,e){n.setDrawingMode(e)},map(n,e){n.setMap(e)},style(n,e){n.setStyle(e)},togeojson(n,e){n.toGeoJson(e)}};function Pz(n){var{options:e,onClick:t,onDblClick:s,onMouseDown:a,onMouseMove:u,onMouseOut:d,onMouseOver:g,onMouseUp:v,onRightClick:_,onAddFeature:E,onRemoveFeature:S,onRemoveProperty:I,onSetGeometry:O,onSetProperty:D,onLoad:H,onUnmount:B}=n,te=w.useContext(gt),[X,le]=w.useState(null),[oe,ae]=w.useState(null),[re,V]=w.useState(null),[z,M]=w.useState(null),[q,G]=w.useState(null),[Z,U]=w.useState(null),[Pe,ke]=w.useState(null),[ie,J]=w.useState(null),[ee,de]=w.useState(null),[Q,N]=w.useState(null),[F,K]=w.useState(null),[se,$]=w.useState(null),[ce,we]=w.useState(null),[Re,je]=w.useState(null);return w.useEffect(()=>{X!==null&&X.setMap(te)},[te]),w.useEffect(()=>{X&&s&&(oe!==null&&google.maps.event.removeListener(oe),ae(google.maps.event.addListener(X,"dblclick",s)))},[s]),w.useEffect(()=>{X&&a&&(re!==null&&google.maps.event.removeListener(re),V(google.maps.event.addListener(X,"mousedown",a)))},[a]),w.useEffect(()=>{X&&u&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(X,"mousemove",u)))},[u]),w.useEffect(()=>{X&&d&&(q!==null&&google.maps.event.removeListener(q),G(google.maps.event.addListener(X,"mouseout",d)))},[d]),w.useEffect(()=>{X&&g&&(Z!==null&&google.maps.event.removeListener(Z),U(google.maps.event.addListener(X,"mouseover",g)))},[g]),w.useEffect(()=>{X&&v&&(Pe!==null&&google.maps.event.removeListener(Pe),ke(google.maps.event.addListener(X,"mouseup",v)))},[v]),w.useEffect(()=>{X&&_&&(ie!==null&&google.maps.event.removeListener(ie),J(google.maps.event.addListener(X,"rightclick",_)))},[_]),w.useEffect(()=>{X&&t&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(X,"click",t)))},[t]),w.useEffect(()=>{X&&E&&(Q!==null&&google.maps.event.removeListener(Q),N(google.maps.event.addListener(X,"addfeature",E)))},[E]),w.useEffect(()=>{X&&S&&(F!==null&&google.maps.event.removeListener(F),K(google.maps.event.addListener(X,"removefeature",S)))},[S]),w.useEffect(()=>{X&&I&&(se!==null&&google.maps.event.removeListener(se),$(google.maps.event.addListener(X,"removeproperty",I)))},[I]),w.useEffect(()=>{X&&O&&(ce!==null&&google.maps.event.removeListener(ce),we(google.maps.event.addListener(X,"setgeometry",O)))},[O]),w.useEffect(()=>{X&&D&&(Re!==null&&google.maps.event.removeListener(Re),je(google.maps.event.addListener(X,"setproperty",D)))},[D]),w.useEffect(()=>{if(te!==null){var Ie=new google.maps.Data(zf(zf({},e),{},{map:te}));s&&ae(google.maps.event.addListener(Ie,"dblclick",s)),a&&V(google.maps.event.addListener(Ie,"mousedown",a)),u&&M(google.maps.event.addListener(Ie,"mousemove",u)),d&&G(google.maps.event.addListener(Ie,"mouseout",d)),g&&U(google.maps.event.addListener(Ie,"mouseover",g)),v&&ke(google.maps.event.addListener(Ie,"mouseup",v)),_&&J(google.maps.event.addListener(Ie,"rightclick",_)),t&&de(google.maps.event.addListener(Ie,"click",t)),E&&N(google.maps.event.addListener(Ie,"addfeature",E)),S&&K(google.maps.event.addListener(Ie,"removefeature",S)),I&&$(google.maps.event.addListener(Ie,"removeproperty",I)),O&&we(google.maps.event.addListener(Ie,"setgeometry",O)),D&&je(google.maps.event.addListener(Ie,"setproperty",D)),le(Ie),H&&H(Ie)}return()=>{X&&(oe!==null&&google.maps.event.removeListener(oe),re!==null&&google.maps.event.removeListener(re),z!==null&&google.maps.event.removeListener(z),q!==null&&google.maps.event.removeListener(q),Z!==null&&google.maps.event.removeListener(Z),Pe!==null&&google.maps.event.removeListener(Pe),ie!==null&&google.maps.event.removeListener(ie),ee!==null&&google.maps.event.removeListener(ee),Q!==null&&google.maps.event.removeListener(Q),F!==null&&google.maps.event.removeListener(F),se!==null&&google.maps.event.removeListener(se),ce!==null&&google.maps.event.removeListener(ce),Re!==null&&google.maps.event.removeListener(Re),B&&B(X),X.setMap(null))}},[]),null}w.memo(Pz);class Dz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{data:null}),Ee(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(zf(zf({},this.props.options),{},{map:this.context}));this.registeredEvents=_t({updaterMap:lT,eventMap:aT,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:lT,eventMap:aT,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Tt(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}Ee(Dz,"contextType",gt);function uT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function cT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uT(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var hT={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},dT={options(n,e){n.setOptions(e)},url(n,e){n.setUrl(e)},zIndex(n,e){n.setZIndex(e)}};class Nz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{kmlLayer:null}),Ee(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(cT(cT({},this.props.options),{},{map:this.context}));this.registeredEvents=_t({updaterMap:dT,eventMap:hT,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:dT,eventMap:hT,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Tt(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}Ee(Nz,"contextType",gt);function XC(n,e){return typeof e=="function"?e(n.offsetWidth,n.offsetHeight):{x:0,y:0}}function zz(n,e){return new e(n.lat,n.lng)}function Vz(n,e){return new e(new google.maps.LatLng(n.ne.lat,n.ne.lng),new google.maps.LatLng(n.sw.lat,n.sw.lng))}function jz(n,e,t){return n instanceof e?n:t(n,e)}function Uz(n,e,t){return n instanceof e?n:t(n,e)}function Bz(n,e,t){var s=n&&n.fromLatLngToDivPixel(t.getNorthEast()),a=n&&n.fromLatLngToDivPixel(t.getSouthWest());return s&&a?{left:"".concat(a.x+e.x,"px"),top:"".concat(s.y+e.y,"px"),width:"".concat(s.x-a.x-e.x,"px"),height:"".concat(a.y-s.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function Fz(n,e,t){var s=n&&n.fromLatLngToDivPixel(t);if(s){var{x:a,y:u}=s;return{left:"".concat(a+e.x,"px"),top:"".concat(u+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function JC(n,e,t,s){return t!==void 0?Bz(n,e,Uz(t,google.maps.LatLngBounds,Vz)):Fz(n,e,jz(s,google.maps.LatLng,zz))}function Hz(n,e){return n.left===e.left&&n.top===e.top&&n.width===e.height&&n.height===e.height}function fT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function qz(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fT(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Gz(n,e,t,s,a){class u extends google.maps.OverlayView{constructor(g,v,_,E){super(),this.container=g,this.pane=v,this.position=_,this.bounds=E}onAdd(){var g,v=(g=this.getPanes())===null||g===void 0?void 0:g[this.pane];v?.appendChild(this.container)}draw(){var g=this.getProjection(),v=qz({},this.container?XC(this.container,a):{x:0,y:0}),_=JC(g,v,this.bounds,this.position);for(var[E,S]of Object.entries(_))this.container.style[E]=S}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new u(n,e,t,s)}function pT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Zz(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pT(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function gT(n){if(!n)return"";var e=n instanceof google.maps.LatLng?n:new google.maps.LatLng(n.lat,n.lng);return e+""}function mT(n){if(!n)return"";var e=n instanceof google.maps.LatLngBounds?n:new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.east),new google.maps.LatLng(n.north,n.west));return e+""}function Wz(n){var{position:e,bounds:t,mapPaneName:s,zIndex:a,onLoad:u,onUnmount:d,getPixelPositionOffset:g,children:v}=n,_=w.useContext(gt),E=w.useMemo(()=>{var I=document.createElement("div");return I.style.position="absolute",I},[]),S=w.useMemo(()=>Gz(E,s,e,t,g),[E,s,e,t]);return w.useEffect(()=>(u?.(S),S?.setMap(_),()=>{d?.(S),S?.setMap(null)}),[_,S]),w.useEffect(()=>{E.style.zIndex="".concat(a)},[a,E]),Ol.createPortal(v,E)}w.memo(Wz);class Qu extends w.PureComponent{constructor(e){super(e),Ee(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Ee(this,"updatePane",()=>{var s=this.props.mapPaneName,a=this.overlayView.getPanes();Gn(!!s,"OverlayView requires props.mapPaneName but got %s",s),a?this.setState({paneEl:a[s]}):this.setState({paneEl:null})}),Ee(this,"onAdd",()=>{var s,a;this.updatePane(),(s=(a=this.props).onLoad)===null||s===void 0||s.call(a,this.overlayView)}),Ee(this,"onPositionElement",()=>{var s=this.overlayView.getProjection(),a=Zz({x:0,y:0},this.containerRef.current?XC(this.containerRef.current,this.props.getPixelPositionOffset):{}),u=JC(s,a,this.props.bounds,this.props.position);if(!Hz(u,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var d,g,v,_;this.setState({containerStyle:{top:(d=u.top)!==null&&d!==void 0?d:0,left:(g=u.left)!==null&&g!==void 0?g:0,width:(v=u.width)!==null&&v!==void 0?v:0,height:(_=u.height)!==null&&_!==void 0?_:0,position:"absolute"}})}}),Ee(this,"draw",()=>{this.onPositionElement()}),Ee(this,"onRemove",()=>{var s,a;this.setState(()=>({paneEl:null})),(s=(a=this.props).onUnmount)===null||s===void 0||s.call(a,this.overlayView)}),this.containerRef=w.createRef();var t=new google.maps.OverlayView;t.onAdd=this.onAdd,t.draw=this.draw,t.onRemove=this.onRemove,this.overlayView=t}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=gT(e.position),s=gT(this.props.position),a=mT(e.bounds),u=mT(this.props.bounds);(t!==s||a!==u)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?Ol.createPortal(x.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:w.Children.only(this.props.children)}),e):null}}Ee(Qu,"FLOAT_PANE","floatPane");Ee(Qu,"MAP_PANE","mapPane");Ee(Qu,"MARKER_LAYER","markerLayer");Ee(Qu,"OVERLAY_LAYER","overlayLayer");Ee(Qu,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");Ee(Qu,"contextType",gt);function Kz(){}function vT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function yT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vT(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var _T={onDblClick:"dblclick",onClick:"click"},bT={opacity(n,e){n.setOpacity(e)}};function $z(n){var{url:e,bounds:t,options:s,visible:a}=n,u=w.useContext(gt),d=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east)),g=w.useMemo(()=>new google.maps.GroundOverlay(e,d,s),[]);return w.useEffect(()=>{g!==null&&g.setMap(u)},[u]),w.useEffect(()=>{typeof e<"u"&&g!==null&&(g.set("url",e),g.setMap(u))},[g,e]),w.useEffect(()=>{typeof a<"u"&&g!==null&&g.setOpacity(a?1:0)},[g,a]),w.useEffect(()=>{var v=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east));typeof t<"u"&&g!==null&&(g.set("bounds",v),g.setMap(u))},[g,t]),null}w.memo($z);class eA extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{groundOverlay:null}),Ee(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Gn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,yT(yT({},this.props.options),{},{map:this.context}));this.registeredEvents=_t({updaterMap:bT,eventMap:_T,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:bT,eventMap:_T,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Ee(eA,"defaultProps",{onLoad:Kz});Ee(eA,"contextType",gt);function wT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Vf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wT(Object(t),!0).forEach(function(s){Ee(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var ET={},TT={data(n,e){n.setData(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)}};function Yz(n){var{data:e,onLoad:t,onUnmount:s,options:a}=n,u=w.useContext(gt),[d,g]=w.useState(null);return w.useEffect(()=>{google.maps.visualization||Gn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),w.useEffect(()=>{Gn(!!e,"data property is required in HeatmapLayer %s",e)},[e]),w.useEffect(()=>{d!==null&&d.setMap(u)},[u]),w.useEffect(()=>{a&&d!==null&&d.setOptions(a)},[d,a]),w.useEffect(()=>{var v=new google.maps.visualization.HeatmapLayer(Vf(Vf({},a),{},{data:e,map:u}));return g(v),t&&t(v),()=>{d!==null&&(s&&s(d),d.setMap(null))}},[]),null}w.memo(Yz);class Qz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{heatmapLayer:null}),Ee(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Gn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Gn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Vf(Vf({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=_t({updaterMap:TT,eventMap:ET,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:TT,eventMap:ET,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Tt(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Ee(Qz,"contextType",gt);var ST={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},xT={register(n,e,t){n.registerPanoProvider(e,t)},links(n,e){n.setLinks(e)},motionTracking(n,e){n.setMotionTracking(e)},options(n,e){n.setOptions(e)},pano(n,e){n.setPano(e)},position(n,e){n.setPosition(e)},pov(n,e){n.setPov(e)},visible(n,e){n.setVisible(e)},zoom(n,e){n.setZoom(e)}};class Xz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{streetViewPanorama:null}),Ee(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,t,s=(e=(t=this.context)===null||t===void 0?void 0:t.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=_t({updaterMap:xT,eventMap:ST,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({streetViewPanorama:s}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:xT,eventMap:ST,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Tt(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Ee(Xz,"contextType",gt);class Jz extends w.PureComponent{constructor(){super(...arguments),Ee(this,"state",{streetViewService:null}),Ee(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Ee(Jz,"contextType",gt);var CT={onDirectionsChanged:"directions_changed"},AT={directions(n,e){n.setDirections(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},panel(n,e){n.setPanel(e)},routeIndex(n,e){n.setRouteIndex(e)}};class eV extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{directionsRenderer:null}),Ee(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=_t({updaterMap:AT,eventMap:CT,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:AT,eventMap:CT,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Tt(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Ee(eV,"contextType",gt);var kT={onPlacesChanged:"places_changed"},LT={bounds(n,e){n.setBounds(e)}};class tV extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"containerElement",w.createRef()),Ee(this,"state",{searchBox:null}),Ee(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Gn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=_t({updaterMap:LT,eventMap:kT,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{searchBox:t}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:LT,eventMap:kT,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Tt(this.registeredEvents))}render(){return x.jsx("div",{ref:this.containerElement,children:w.Children.only(this.props.children)})}}Ee(tV,"contextType",gt);var IT={onPlaceChanged:"place_changed"},RT={bounds(n,e){n.setBounds(e)},restrictions(n,e){n.setComponentRestrictions(e)},fields(n,e){n.setFields(e)},options(n,e){n.setOptions(e)},types(n,e){n.setTypes(e)}};class tA extends w.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"containerElement",w.createRef()),Ee(this,"state",{autocomplete:null}),Ee(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Gn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(t){var s=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=_t({updaterMap:RT,eventMap:IT,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({autocomplete:s}),this.setAutocompleteCallback)}}componentDidUpdate(e){Tt(this.registeredEvents),this.registeredEvents=_t({updaterMap:RT,eventMap:IT,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Tt(this.registeredEvents)}render(){return x.jsx("div",{ref:this.containerElement,className:this.props.className,children:w.Children.only(this.props.children)})}}Ee(tA,"defaultProps",{className:""});Ee(tA,"contextType",gt);const nV={width:"100%",height:"400px"},iV={lat:6.5244,lng:3.3792};function MT({idToken:n}){const{isLoaded:e}=ZC({googleMapsApiKey:"AIzaSyCPCAkpYgOMTapv5Y6v5bWVJ6pbSMTtL74"}),[t,s]=w.useState(iV),[a,u]=w.useState(""),d=async g=>{const v={lat:g.latLng.lat(),lng:g.latLng.lng()};s(v);try{const _=await fetch("http://localhost:5000/api/courier/update-location",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(v)}),E=await _.json();_.ok?u(" Location updated successfully"):u(` Error: ${E.error}`)}catch(_){console.error("Error updating location:",_),u(" Server error updating location")}};return e?x.jsxs("div",{children:[x.jsx("h2",{children:"Courier Dashboard"}),x.jsx("p",{children:"Click on the map to update package location."}),x.jsx(BC,{mapContainerStyle:nV,center:t,zoom:14,onClick:d,children:x.jsx(_y,{position:t})}),a&&x.jsx("p",{style:{marginTop:10},children:a})]}):x.jsx("p",{children:"Loading map..."})}const sV={width:"100%",height:"400px"};function rV({idToken:n,packageId:e}){const{isLoaded:t}=ZC({googleMapsApiKey:"AIzaSyCPCAkpYgOMTapv5Y6v5bWVJ6pbSMTtL74"}),[s,a]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const g=await(await fetch(`http://localhost:5000/api/client/package-location/${e}`,{headers:{Authorization:`Bearer ${n}`}})).json();a(g.location)}catch(d){console.error("Error fetching package location:",d)}})()},[n,e]),t&&s?x.jsx(BC,{mapContainerStyle:sV,center:s,zoom:14,children:x.jsx(_y,{position:s})}):x.jsx("p",{children:"Loading package location..."})}const oV="http://localhost:5000",aV=({idToken:n})=>{const e=w.useRef(null),t=w.useRef(null),[s,a]=w.useState(null),[u,d]=w.useState(""),[g,v]=w.useState(""),[_,E]=w.useState(null),[S,I]=w.useState(null),[O,D]=w.useState(null),[H,B]=w.useState(!1),[te,X]=w.useState(null),[le,oe]=w.useState(null),ae=w.useRef(null);w.useEffect(()=>{const ke=document.body;_&&t.current?(t.current.classList.remove("container-initial"),t.current.classList.remove("container-animate-pop"),t.current.offsetHeight,t.current.classList.add("container-animate-pop"),ke.classList.add("tracking-page-blurred"),console.log(" Pop-out animation triggered!")):(t.current?.classList.remove("container-animate-pop"),t.current?.classList.add("container-initial"),ke.classList.remove("tracking-page-blurred"))},[_]);const re=()=>!!localStorage.getItem("token");w.useEffect(()=>{try{if(!e.current||!re())return;const ke=Di.map(e.current).setView([6.5244,3.3792],11),ie=Di.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,name:"Street Map"}),J=Di.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:18,name:"Satellite"});return J.addTo(ke),Di.control.layers({"Street Map":ie,Satellite:J}).addTo(ke),a(ke),()=>{ke.remove()}}catch{X("Failed to initialize map")}},[]);const V=ke=>{const J={"Pending Pickup":"#f59e0b","Pickup Assigned":"#3b82f6","Pickup Accepted":"#10b981","Enroute to Facility":"#8b5cf6","Arrived at Hub or Facility":"#6366f1","In Transit":"#06b6d4","Out for Delivery":"#f97316",Delivered:"#22c55e","Awaiting Receipt":"#14b8a6","Delivery Failed":"#ef4444","Returned to Sender":"#64748b"}[ke]||"#9ca3af";return Di.divIcon({html:`<div style="
        background-color: ${J};
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      "></div>`,iconSize:[36,36],className:"custom-icon"})},z=ke=>({"Pending Pickup":"#f59e0b","Pickup Assigned":"#3b82f6","Pickup Accepted":"#10b981","Enroute to Facility":"#8b5cf6","Arrived at Hub or Facility":"#6366f1","In Transit":"#06b6d4","Out for Delivery":"#f97316",Delivered:"#22c55e","Awaiting Receipt":"#14b8a6","Delivery Failed":"#ef4444","Returned to Sender":"#64748b"})[ke]||"#9ca3af",M=()=>Di.divIcon({html:`<div style="
        background-color: #ff6b6b;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: 2px solid white;
        box-shadow: 0 0 0 3px #ff6b6b, 0 2px 6px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        animation: pulse 1.5s infinite;
      "></div>`,iconSize:[32,32],className:"animated-courier-icon"}),q=ke=>{ae.current&&clearInterval(ae.current),O&&s&&s.hasLayer(O)&&s.removeLayer(O);const ie=ke.lat,J=ke.lng,ee=.005;let de=0;const Q=Di.marker([ie,J],{icon:M(),zIndexOffset:1e3}).addTo(s);Q.bindPopup(`
      <div style="font-size: 12px; text-align: center;">
        <strong> Courier En Route</strong><br/>
        <span style="color: #ff6b6b;">Moving to delivery location</span>
      </div>
    `),D(Q),ae.current=setInterval(()=>{de=(de+2)%360;const F=de*Math.PI/180,K=ie+ee*Math.cos(F),se=J+ee*Math.sin(F);Q.setLatLng([K,se])},100)},G=ke=>({"Pending Pickup":"","Pickup Assigned":"","Pickup Accepted":"","Enroute to Facility":"","Arrived at Hub or Facility":"","In Transit":"","Out for Delivery":"",Delivered:"","Awaiting Receipt":"","Delivery Failed":"","Returned to Sender":""})[ke]||"",Z=async ke=>{if(ke.preventDefault(),!g.trim()){X("Please enter a tracking ID");return}B(!0),X(null),oe(null);try{const ie=await fetch(`${oV}/api/tracking/${g.trim()}`,{headers:{Authorization:n?`Bearer ${n}`:void 0}});if(!ie.ok)throw new Error("Tracking ID not found");const J=await ie.json();E(J),d(g.trim()),v(""),oe("Tracking information loaded!"),J.location&&setTimeout(()=>{if(!s||!s._container){console.error("Map not ready");return}const ee=[J.location.lat,J.location.lng];S&&s.hasLayer(S)&&s.removeLayer(S);const de=V(J.status),Q=Di.marker(ee,{icon:de}).addTo(s),N=`
            <div style="font-size: 13px;">
              <strong style="color: #4f46e5;"> ${J.user.fullName}</strong><br/>
              <div style="margin-top: 8px; border-top: 1px solid #e5e7eb; padding-top: 8px;">
                <strong> Email:</strong> ${J.user.email}<br/>
                <strong> Tracking:</strong> <span style="font-family: monospace; color: #4f46e5;">${J.trackingId}</span><br/>
                <strong> Status:</strong> <span style="color: ${z(J.status)}; font-weight: 600;">${J.status}</span><br/>
                <strong> Coordinates:</strong> ${J.location.lat.toFixed(4)}, ${J.location.lng.toFixed(4)}<br/>
                <strong> Updated:</strong> ${new Date(J.updatedAt).toLocaleString()}
              </div>
            </div>
          `;Q.bindPopup(N).openPopup(),I(Q),s.setView(ee,14),["Out for Delivery","In Transit","Enroute to Facility"].includes(J.status)&&setTimeout(()=>{q({lat:J.location.lat,lng:J.location.lng})},500)},100)}catch(ie){console.error("Error fetching tracking:",ie),X(ie.message||"Failed to retrieve tracking information"),E(null)}finally{B(!1)}},U=()=>{d(""),E(null),v(""),X(null),oe(null),ae.current&&clearInterval(ae.current),S&&s&&s.hasLayer(S)&&(s.removeLayer(S),I(null)),O&&s&&s.hasLayer(O)&&(s.removeLayer(O),D(null))},Pe={...Ge.container,opacity:_?1:0,transform:_?"scale(1) translateY(0)":"scale(0.5) translateY(80px)",filter:_?"blur(0px)":"blur(20px)",transition:"none",animation:_?"containerPopOut 1.2s cubic-bezier(0.12, 0.65, 0.25, 1.08) forwards":"none"};return x.jsxs("div",{ref:t,style:Pe,children:[x.jsxs("div",{style:Ge.headerSection,children:[x.jsx("h2",{style:Ge.title,children:" Track Your Package"}),x.jsx("p",{style:Ge.subtitle,children:"Enter your tracking ID to see your package location and delivery status"})]}),te&&x.jsxs("div",{style:Ge.errorMessage,children:[" ",te]}),le&&x.jsxs("div",{style:Ge.successMessage,children:[" ",le]}),x.jsx("div",{style:Ge.searchSection,children:x.jsx("form",{onSubmit:Z,style:Ge.searchForm,children:x.jsxs("div",{style:Ge.inputWrapper,children:[x.jsx("input",{type:"text",placeholder:"Enter tracking ID (e.g., SWIFT-1234567890-ABCDE)",value:g,onChange:ke=>v(ke.target.value),style:Ge.input,disabled:H}),x.jsx("button",{type:"submit",style:Ge.searchButton,disabled:H||!g.trim(),children:H?" Searching...":" Search"})]})})}),x.jsxs("div",{style:Ge.contentWrapper,children:[x.jsx("div",{style:Ge.mapSection,children:x.jsxs("div",{ref:e,style:{...Ge.map,backgroundColor:re()?"#e0e7ff":"#000000"},children:[!s&&re()&&x.jsxs("div",{style:Ge.mapLoading,children:[x.jsx("div",{style:Ge.spinner}),x.jsx("p",{style:{color:"#fff"},children:"Loading map..."})]}),!re()&&x.jsx("div",{style:Ge.mapPlaceholder,children:x.jsx("p",{children:" Please log in to track your packages"})})]})}),_&&x.jsx("div",{style:Ge.infoSection,children:x.jsxs("div",{style:Ge.infoCard,children:[x.jsxs("div",{style:Ge.cardHeader,children:[x.jsx("h3",{style:Ge.cardTitle,children:" Package Details"}),x.jsx("button",{onClick:U,style:Ge.clearButton,children:""})]}),x.jsxs("div",{style:Ge.detailsGrid,children:[x.jsxs("div",{style:Ge.detailItem,children:[x.jsx("span",{style:Ge.detailLabel,children:"Recipient:"}),x.jsx("span",{style:Ge.detailValue,children:_.user.fullName})]}),x.jsxs("div",{style:Ge.detailItem,children:[x.jsx("span",{style:Ge.detailLabel,children:"Email:"}),x.jsx("span",{style:Ge.detailValue,children:_.user.email})]}),x.jsxs("div",{style:Ge.detailItem,children:[x.jsx("span",{style:Ge.detailLabel,children:"Tracking ID:"}),x.jsx("span",{style:{...Ge.detailValue,fontFamily:"monospace",color:"#4f46e5"},children:_.trackingId})]}),x.jsxs("div",{style:{...Ge.detailItem,gridColumn:"1 / -1"},children:[x.jsx("span",{style:Ge.detailLabel,children:"Current Status:"}),x.jsxs("div",{style:{...Ge.statusBadge,backgroundColor:z(_.status),color:"#fff"},children:[G(_.status)," ",_.status]})]}),x.jsxs("div",{style:Ge.detailItem,children:[x.jsx("span",{style:Ge.detailLabel,children:"Latitude:"}),x.jsx("span",{style:Ge.detailValue,children:_.location.lat.toFixed(6)})]}),x.jsxs("div",{style:Ge.detailItem,children:[x.jsx("span",{style:Ge.detailLabel,children:"Longitude:"}),x.jsx("span",{style:Ge.detailValue,children:_.location.lng.toFixed(6)})]}),x.jsxs("div",{style:Ge.detailItem,children:[x.jsx("span",{style:Ge.detailLabel,children:"Last Updated:"}),x.jsx("span",{style:Ge.detailValue,children:new Date(_.updatedAt).toLocaleString()})]}),x.jsxs("div",{style:Ge.detailItem,children:[x.jsx("span",{style:Ge.detailLabel,children:"Created:"}),x.jsx("span",{style:Ge.detailValue,children:new Date(_.createdAt).toLocaleString()})]})]}),x.jsxs("div",{style:Ge.statusTimeline,children:[x.jsx("h4",{style:Ge.timelineTitle,children:" Status Timeline"}),x.jsxs("div",{style:Ge.timelineItem,children:[x.jsx("div",{style:{...Ge.timelineIndicator,backgroundColor:z(_.status)}}),x.jsxs("div",{children:[x.jsx("strong",{children:_.status}),x.jsx("p",{style:Ge.timelineTime,children:new Date(_.updatedAt).toLocaleString()})]})]})]})]})}),!_&&x.jsx("div",{style:Ge.placeholderSection,children:x.jsxs("div",{style:Ge.placeholderContent,children:[x.jsx("div",{style:Ge.placeholderIcon,children:""}),x.jsx("h3",{style:Ge.placeholderTitle,children:"No Package Information"}),x.jsx("p",{style:Ge.placeholderText,children:"Enter your tracking ID above to see your package location and delivery status in real-time"})]})})]})]})},Ge={container:{maxWidth:"1200px",margin:"0 auto",padding:"24px",fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",willChange:"transform, opacity, filter"},headerSection:{marginBottom:"32px",textAlign:"center"},title:{fontSize:"32px",fontWeight:"700",color:"#1a202c",margin:"0 0 12px 0"},subtitle:{fontSize:"16px",color:"#718096",margin:"0"},errorMessage:{backgroundColor:"#fed7d7",color:"#c53030",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",borderLeft:"4px solid #c53030",fontSize:"14px"},successMessage:{backgroundColor:"#c6f6d5",color:"#22543d",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",borderLeft:"4px solid #22c55e",fontSize:"14px"},searchSection:{marginBottom:"24px"},searchForm:{display:"flex",gap:"12px"},inputWrapper:{display:"flex",gap:"8px",width:"100%"},input:{flex:"1",padding:"12px 16px",border:"1px solid #cbd5e0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",transition:"all 0.2s ease",boxSizing:"border-box"},searchButton:{padding:"12px 24px",backgroundColor:"#4f46e5",color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},contentWrapper:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"24px"},mapSection:{backgroundColor:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08)"},map:{width:"100%",height:"500px",backgroundColor:"#e0e7ff",position:"relative"},mapLoading:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#718096"},spinner:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTop:"4px solid #4f46e5",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 12px"},mapPlaceholder:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#999",fontSize:"16px",fontWeight:"500"},infoSection:{display:"flex",flexDirection:"column"},infoCard:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08)"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #e2e8f0"},cardTitle:{margin:"0",fontSize:"16px",fontWeight:"600",color:"#1a202c"},clearButton:{background:"#f56565",color:"#fff",border:"none",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},detailsGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},detailItem:{display:"flex",flexDirection:"column",gap:"4px"},detailLabel:{fontSize:"12px",fontWeight:"600",color:"#718096",textTransform:"uppercase",letterSpacing:"0.5px"},detailValue:{fontSize:"14px",color:"#2d3748",fontWeight:"500"},statusBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",fontSize:"13px",fontWeight:"600",width:"fit-content"},statusTimeline:{borderTop:"1px solid #e2e8f0",paddingTop:"16px",marginTop:"16px"},timelineTitle:{margin:"0 0 12px 0",fontSize:"13px",fontWeight:"600",color:"#718096",textTransform:"uppercase"},timelineItem:{display:"flex",gap:"12px",alignItems:"flex-start"},timelineIndicator:{width:"12px",height:"12px",borderRadius:"50%",marginTop:"4px",flexShrink:"0"},timelineTime:{margin:"4px 0 0 0",fontSize:"12px",color:"#a0aec0"},placeholderSection:{gridColumn:"1 / -1",backgroundColor:"#f7fafc",borderRadius:"12px",padding:"60px 24px",textAlign:"center",border:"2px dashed #cbd5e0"},placeholderContent:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},placeholderIcon:{fontSize:"48px",opacity:"0.5"},placeholderTitle:{margin:"0",fontSize:"18px",fontWeight:"600",color:"#4a5568"},placeholderText:{margin:"0",fontSize:"14px",color:"#718096"}};function lV({onLogin:n}){const[e,t]=w.useState({email:"",password:""}),[s,a]=w.useState(""),[u,d]=w.useState(!1),g=_=>{t({...e,[_.target.name]:_.target.value})},v=async _=>{_.preventDefault(),d(!0),a("");try{const E=await fetch("http://localhost:5000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}),S=await E.json();if(E.ok){localStorage.setItem("token",S.token),a(" Logged in successfully!"),n&&n(S.token);try{window.location.hash=""}catch{}}else a(` Error: ${S.error||"Login failed"}`)}catch(E){a(" Unable to connect. Please try again."),console.error(E)}finally{d(!1)}};return x.jsxs("form",{onSubmit:v,style:{maxWidth:"400px",margin:"20px auto",padding:"30px",border:"1px solid #e1e5e9",borderRadius:"12px",backgroundColor:"#f8f9fa",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[x.jsx("h2",{style:{textAlign:"center",marginBottom:"25px",color:"#2c3e50",fontWeight:"600"},children:"Login"}),x.jsx("input",{id:"loginEmail",name:"email",type:"email",placeholder:"Email",value:e.email,onChange:g,required:!0,style:{width:"100%",padding:"12px 15px",marginBottom:"15px",boxSizing:"border-box",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",transition:"border-color 0.3s"}}),x.jsx("input",{id:"loginPassword",name:"password",type:"password",placeholder:"Password",value:e.password,onChange:g,required:!0,style:{width:"100%",padding:"12px 15px",marginBottom:"20px",boxSizing:"border-box",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",transition:"border-color 0.3s"}}),x.jsx("button",{id:"loginButton",type:"submit",disabled:u,style:{width:"100%",padding:"12px",backgroundColor:"#0078d7",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"500",transition:"background-color 0.3s"},children:u?"Logging in...":"Login"}),s&&x.jsx("p",{style:{marginTop:"15px",textAlign:"center",fontSize:"14px"},children:s})]})}function uV({onRegisterSuccess:n}){Bf();const[e,t]=w.useState({name:"",email:"",password:"",confirmPassword:""}),[s,a]=w.useState(""),[u,d]=w.useState(!1),g=_=>{t({...e,[_.target.name]:_.target.value})},v=async _=>{if(_.preventDefault(),d(!0),a(""),e.password!==e.confirmPassword){a(" Passwords do not match"),d(!1);return}try{const E=await fetch("http://localhost:5000/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email,password:e.password})}),S=await E.json();E.ok?(a(" Registration successful! Please log in."),t({name:"",email:"",password:"",confirmPassword:""}),n&&n()):a(` Error: ${S.error||"Registration failed"}`)}catch(E){a(" Unable to connect. Please try again."),console.error(E)}finally{d(!1)}};return x.jsxs("form",{onSubmit:v,style:{maxWidth:"400px",margin:"20px auto",padding:"30px",border:"1px solid #e1e5e9",borderRadius:"12px",backgroundColor:"#f8f9fa",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[x.jsx("h2",{style:{textAlign:"center",marginBottom:"25px",color:"#2c3e50",fontWeight:"600"},children:"Register"}),x.jsx("input",{id:"registerName",name:"name",placeholder:"Name",value:e.name,onChange:g,required:!0,style:{width:"100%",padding:"12px 15px",marginBottom:"15px",boxSizing:"border-box",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",transition:"border-color 0.3s"}}),x.jsx("input",{id:"registerEmail",name:"email",type:"email",placeholder:"Email",value:e.email,onChange:g,required:!0,style:{width:"100%",padding:"12px 15px",marginBottom:"15px",boxSizing:"border-box",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",transition:"border-color 0.3s"}}),x.jsx("input",{id:"registerPassword",name:"password",type:"password",placeholder:"Password",value:e.password,onChange:g,required:!0,style:{width:"100%",padding:"12px 15px",marginBottom:"15px",boxSizing:"border-box",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",transition:"border-color 0.3s"}}),x.jsx("input",{id:"registerConfirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm Password",value:e.confirmPassword,onChange:g,required:!0,style:{width:"100%",padding:"12px 15px",marginBottom:"20px",boxSizing:"border-box",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",transition:"border-color 0.3s"}}),x.jsx("button",{id:"registerButton",type:"submit",disabled:u,style:{width:"100%",padding:"12px",backgroundColor:"#0078d7",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"500",transition:"background-color 0.3s"},children:u?"Registering...":"Register"}),s&&x.jsx("p",{style:{marginTop:"15px",textAlign:"center",fontSize:"14px"},children:s})]})}function cV({user:n,isVisible:e=!0}){const[t,s]=w.useState(!1),[a,u]=w.useState([]),[d,g]=w.useState([]),[v,_]=w.useState(""),[E,S]=w.useState(!0),[I,O]=w.useState(null),[D,H]=w.useState(null),[B,te]=w.useState(!1),[X,le]=w.useState(0),[oe,ae]=w.useState({x:0,y:80}),[re,V]=w.useState(!1),[z,M]=w.useState({x:0,y:0}),q=w.useRef(null),G=w.useRef(t),Z=w.useRef(null),U=ir.currentUser,Pe=U?.uid||n?._id||"anonymous",ke=n?._id?`customer-${n._id}`:null;w.useEffect(()=>{G.current=t},[t]),w.useEffect(()=>{const F=localStorage.getItem("chatWidgetPosition");if(F)try{ae(JSON.parse(F))}catch{ae({x:0,y:80})}},[]),w.useEffect(()=>{const F=K=>{const se=K.detail?.message;console.log(" FloatingChatWidget EVENT RECEIVED!"),console.log(" Message:",se),se?(console.log(" Setting input and opening chat"),_(se),s(!0)):console.log(" No message in event detail")};return console.log(" FloatingChatWidget: Setting up event listener for openFloatingChatWithMessage"),window.addEventListener("openFloatingChatWithMessage",F),()=>{window.removeEventListener("openFloatingChatWithMessage",F)}},[]);const ie=F=>{F.button!==0||t||(V(!0),M({x:F.clientX-oe.x,y:F.clientY-oe.y}))};w.useEffect(()=>{if(!re)return;const F=se=>{const $=se.clientX-z.x,ce=se.clientY-z.y,we=window.innerWidth-100,Re=window.innerHeight-100;ae({x:Math.max(0,Math.min($,we)),y:Math.max(0,Math.min(ce,Re))})},K=()=>{V(!1),localStorage.setItem("chatWidgetPosition",JSON.stringify(oe))};return window.addEventListener("mousemove",F),window.addEventListener("mouseup",K),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",K)}},[re,z,oe]),w.useEffect(()=>{if(!n?._id)return;(async()=>{try{const K=localStorage.getItem("token");if(!K)return;const se=await fetch("http://localhost:5000/api/admin/user",{headers:{Authorization:`Bearer ${K}`}});if(se.ok){const $=await se.json();O($)}}catch(K){console.error("Admin user error:",K)}})()},[n?._id]),w.useEffect(()=>{if(!n?._id)return;const F=nh("http://localhost:5000",{reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:10});return F.on("connect",()=>{te(!0),F.emit("user-login",{userId:n._id});const K=localStorage.getItem("token");fetch(`http://localhost:5000/api/messaging/conversation/${ke}`,{headers:{Authorization:`Bearer ${K}`}}).then(se=>se.json()).then(se=>g(se.messages||[]))}),F.on("disconnect",()=>te(!1)),F.on(`message-${ke}`,K=>{g(se=>[...se,K]),K.isFromAdmin&&!G.current&&le(se=>se+1)}),F.on(`message-status-${ke}`,K=>{g(se=>se.map($=>$._id===K.messageId?{...$,status:K.status}:$))}),H(F),()=>F.disconnect()},[n?._id]);const J=Tl(sr,"threads",Pe),ee=xu(sr,"threads",Pe,"messages");w.useEffect(()=>{if(!U&&!n){S(!1);return}let F=()=>{};return(async()=>{(await cy(J)).exists()||await Zc(J,{userId:Pe,agentRequested:!1,updatedAt:ns()});const se=kf(ee,uy("ts","asc"));F=Lf(se,async $=>{const ce=$.docs.map(we=>({id:we.id,...we.data()}));u(ce),ce.forEach(async we=>{we.from!=="customer"&&we.status!=="read"&&await Wc(Tl(ee,we.id),{status:"read"})})}),S(!1)})(),F},[U,n,Pe]);const de=dv.useMemo(()=>{const F=[...a,...d],K=new Set;return F.filter(se=>{const $=se.id||se._id||`${se.text||se.message}-${se.ts||se.createdAt}`;return K.has($)?!1:(K.add($),!0)})},[a,d]);w.useEffect(()=>{q.current?.scrollIntoView({behavior:"smooth"})},[de]);const Q=async()=>{const F=v.trim();if(!F||(_(""),!ke||!I||!n?._id))return;const K={_id:`temp-${Date.now()}`,message:F,conversationId:ke,senderId:n._id,recipientId:I._id,isFromAdmin:!1,status:"sent",createdAt:new Date,text:F};g(se=>[...se,K]);try{const se=localStorage.getItem("token"),$=await fetch("http://localhost:5000/api/messaging/send",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${se}`},body:JSON.stringify({conversationId:ke,senderId:n._id,recipientId:I._id,message:F,isFromAdmin:!1})});if(!$.ok)console.error(" Message send failed:",$.status),g(ce=>ce.filter(we=>we._id!==K._id));else{const ce=await $.json();console.log(" Message sent successfully:",ce),g(we=>we.map(Re=>Re._id===K._id?{...ce.message,status:"delivered"}:Re))}}catch(se){console.error(" Send error:",se),g($=>$.filter(ce=>ce._id!==K._id))}};if(!e)return null;const N=F=>{const K=F.from==="customer"||!F.isFromAdmin;return x.jsxs("div",{style:{display:"flex",justifyContent:K?"flex-end":"flex-start",marginBottom:"8px",gap:"4px",alignItems:"flex-end"},children:[x.jsxs("div",{style:{maxWidth:"75%",padding:"10px 14px",borderRadius:"12px",fontSize:"13px",fontStyle:"italic",background:K?"#4f46e5":"#f3f4f6",color:K?"#fff":"#111827"},children:[!K&&x.jsx("strong",{style:{display:"block",marginBottom:"4px"},children:"Support"}),F.text||F.message]}),K&&x.jsxs("span",{style:{fontSize:"11px",color:"#9ca3af"},children:[F.status==="read"&&"",F.status==="delivered"&&"",F.status==="sent"&&""]})]},F.id||F._id)};return x.jsx("div",{ref:Z,onMouseDown:ie,style:{position:"fixed",top:`${oe.y}px`,left:`${oe.x}px`,right:"auto",zIndex:3e3,cursor:re&&!t?"grabbing":t?"default":"grab",userSelect:re?"none":"auto"},children:t?x.jsxs("div",{style:{width:"320px",height:"500px",background:"#fff",borderRadius:"12px",display:"flex",flexDirection:"column",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[x.jsxs("div",{style:{padding:"16px",background:"#4f46e5",color:"#fff",display:"flex",justifyContent:"space-between",cursor:re?"grabbing":"grab",userSelect:"none"},children:[x.jsx("div",{children:" Support"}),x.jsx("button",{onClick:()=>s(!1),style:{color:"#fff",background:"transparent",border:"none",cursor:"pointer",fontSize:"20px"},children:""})]}),x.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#f9fafb"},children:[de.map(N),x.jsx("div",{ref:q})]}),x.jsxs("div",{style:{padding:"12px",display:"flex",gap:"8px"},children:[x.jsx("input",{className:"chatbox-floating-input",value:v,onChange:F=>_(F.target.value),onKeyDown:F=>F.key==="Enter"&&Q(),placeholder:"Type your message",style:{flex:1,padding:"10px",borderRadius:"8px",border:"1px solid #ddd"}}),x.jsx("button",{onClick:Q,style:{background:"#4f46e5",color:"#fff",borderRadius:"8px",padding:"10px 20px"},children:"Send"})]})]}):x.jsx("button",{onClick:()=>s(!0),style:{padding:"10px 20px"},children:" Chat"})})}function hV({onLogout:n,user:e}){const[t,s]=w.useState(!1),[a,u]=w.useState(!1);Bf();const d=w.useRef(null);console.log("SmallProfileDropdown Props:",{user:e,hasUser:!!e,userName:e?.name,userProfilePic:e?.profilePicture}),w.useEffect(()=>{const E=S=>{d.current&&!d.current.contains(S.target)&&s(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const g=async E=>{console.log("Profile picture upload clicked");const S=E.target.files?.[0];if(S){u(!0);try{const I=new FileReader;I.onload=async O=>{const D=O.target?.result,H=localStorage.getItem("token");console.log("Uploading profile picture...");const B=await fetch("http://localhost:5000/api/user/profile-picture",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`},body:JSON.stringify({profilePicture:D})});if(B.ok){const te=await B.json();te.user&&typeof window.updateUserProfile=="function"&&window.updateUserProfile(te.user),alert(" Profile picture updated successfully!")}else alert(" Failed to update profile picture")},I.readAsDataURL(S)}catch(I){console.error("Error uploading profile picture:",I),alert("Error uploading profile picture")}finally{u(!1)}}},v=()=>{if(console.log("Logout button clicked"),typeof n=="function")n();else{try{localStorage.removeItem("token")}catch{}try{window.location.hash=""}catch{}try{window.location.reload()}catch{}}s(!1)};if(!e)return null;const _=e.name?e.name.split(" ").map(E=>E[0]).join("").toUpperCase().slice(0,2):"SD";return x.jsxs("div",{ref:d,style:{position:"relative",display:"inline-block",zIndex:99999},children:[x.jsxs("button",{onClick:()=>{console.log("Profile dropdown button clicked"),s(!t)},style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"bold",color:"#fff",backgroundSize:"cover",backgroundPosition:"center",border:"2px solid rgba(255, 255, 255, 0.8)",backgroundImage:e.profilePicture?`url(${e.profilePicture})`:"none",backgroundColor:e.profilePicture?"transparent":"linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)",cursor:"pointer",transition:"all 0.3s ease",marginLeft:"10px"},onMouseEnter:E=>{E.target.style.transform="scale(1.1)",E.target.style.boxShadow="0 2px 8px rgba(79, 70, 229, 0.4)"},onMouseLeave:E=>{E.target.style.transform="scale(1)",E.target.style.boxShadow="none"},title:"Profile",children:[!e.profilePicture&&_,e.isVerified&&x.jsx("div",{style:{position:"absolute",bottom:"-2px",right:"-2px",width:"12px",height:"12px",background:"#10b981",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"#fff",border:"2px solid #fff"},children:""})]}),t&&x.jsxs("div",{style:{position:"absolute",top:"100%",right:"0",marginTop:"8px",width:"280px",background:"#fff",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15)",border:"2px solid #4f46e5",zIndex:99999,overflow:"hidden",pointerEvents:"auto"},onClick:E=>{E.stopPropagation(),console.log("Dropdown container clicked")},children:[x.jsx("div",{style:{background:"linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)",color:"#fff",padding:"16px"},children:x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold",color:"#fff",backgroundSize:"cover",backgroundPosition:"center",border:"2px solid rgba(255, 255, 255, 0.8)",backgroundImage:e.profilePicture?`url(${e.profilePicture})`:"none",backgroundColor:e.profilePicture?"transparent":"rgba(255, 255, 255, 0.3)",position:"relative"},children:[!e.profilePicture&&_,e.isVerified&&x.jsx("div",{style:{position:"absolute",bottom:"-2px",right:"-2px",width:"14px",height:"14px",background:"#10b981",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",color:"#fff",border:"2px solid #fff"},children:""})]}),x.jsxs("div",{children:[x.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:e.name||"User"}),x.jsx("div",{style:{fontSize:"11px",opacity:.9},children:e.email}),x.jsx("div",{style:{fontSize:"10px",opacity:.8,marginTop:"2px"},children:e.isVerified?" Verified":" Pending Verification"})]})]})}),x.jsxs("div",{style:{padding:"12px"},children:[x.jsxs("div",{style:{marginBottom:"12px",padding:"8px",background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"6px",fontSize:"11px",color:"#0369a1",lineHeight:"1.4"},children:[" ",x.jsx("strong",{children:"Upload your photo"})," to help couriers recognize you during delivery"]}),x.jsxs("div",{style:{marginBottom:"12px"},children:[x.jsx("label",{htmlFor:"profile-upload-small",style:{display:"block",padding:"10px 12px",background:"linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)",border:"none",borderRadius:"6px",textAlign:"center",cursor:"pointer",fontSize:"12px",color:"#fff",fontWeight:"600",transition:"all 0.2s ease"},onClick:()=>{console.log("Upload label clicked")},onMouseEnter:E=>{E.target.style.transform="translateY(-1px)",E.target.style.boxShadow="0 4px 12px rgba(79, 70, 229, 0.4)"},onMouseLeave:E=>{E.target.style.transform="translateY(0)",E.target.style.boxShadow="none"},children:a?" Uploading...":" Upload Profile Picture"}),x.jsx("input",{id:"profile-upload-small",type:"file",accept:"image/*",onChange:g,style:{display:"none"},disabled:a})]}),x.jsx("button",{onClick:E=>{E.stopPropagation(),console.log("Logout button clicked"),v()},style:{width:"100%",padding:"8px 12px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",textAlign:"center",fontSize:"12px",color:"#dc2626",cursor:"pointer",transition:"all 0.2s ease",fontWeight:"600"},onMouseEnter:E=>{E.target.style.background="#fee2e2",E.target.style.borderColor="#fca5a5"},onMouseLeave:E=>{E.target.style.background="#fef2f2",E.target.style.borderColor="#fecaca"},children:" Logout"})]})]})]})}function dV(){const[n,e]=w.useState(()=>localStorage.getItem("token")||null),[t,s]=w.useState(null),[a,u]=w.useState(()=>(console.log("Initializing showLoginModal state to false"),!1)),[d,g]=w.useState(()=>(console.log("Initializing showRegisterModal state to false"),!1));Bf(),w.useEffect(()=>{const O=()=>{document.querySelectorAll('a[href="#"]').forEach(H=>{H.textContent.trim().toLowerCase().includes("login")?H.addEventListener("click",B=>{B.preventDefault(),console.log("Login link clicked via React listener"),u(!0)}):H.textContent.trim().toLowerCase().includes("register")&&H.addEventListener("click",B=>{B.preventDefault(),console.log("Register link clicked via React listener"),g(!0)})})};O(),setTimeout(O,100)},[]),w.useEffect(()=>{console.log("showLoginModal changed to:",a)},[a]),w.useEffect(()=>{console.log("showRegisterModal changed to:",d)},[d]);const v=O=>{if(!O)return null;try{const D=O.split(".")[1],H=JSON.parse(atob(D));return H.isAdmin?"admin":H.role?H.role:null}catch{return null}},_=()=>{console.log("Logging out, clearing token and user profile"),localStorage.removeItem("token"),e(null),s(null);try{window.location.href=window.location.origin+"/"}catch(O){console.error("Logout navigation error:",O),window.location.hash="#/"}},E=O=>{s(O)};w.useEffect(()=>(window.updateUserProfile=E,()=>{delete window.updateUserProfile}),[E]);const S=v(n);w.useEffect(()=>{console.log("Profile Fetch Effect:",{token:!!n,role:S,shouldFetch:n&&S!=="admin"&&S!=="courier"}),n&&S!=="admin"&&S!=="courier"?(async()=>{try{console.log("Fetching profile from API...");const D=new AbortController,H=setTimeout(()=>D.abort(),1e4),B=await fetch("http://localhost:5000/api/user/profile",{headers:{Authorization:`Bearer ${n}`},signal:D.signal});if(clearTimeout(H),console.log("Profile API Response:",B.status,B.ok),B.ok){const te=await B.json();console.log("Profile data received:",te);const X=te.user||te;console.log("Setting user profile:",X),s(X)}else console.error("Profile API failed:",B.status,B.statusText),B.status===401&&(console.log("Token expired, clearing..."),localStorage.removeItem("token"),s(null))}catch(D){console.error("Failed to fetch profile:",D),n&&S!=="admin"&&S!=="courier"&&(console.log("Setting fallback profile due to API error"),s({name:"User",email:"user@example.com"}))}})():(console.log("Setting current user profile to null"),s(null))},[n,S]),w.useEffect(()=>{const O=document.body;O&&(S==="admin"?O.classList.add("admin-bot-left"):O.classList.remove("admin-bot-left"))},[S]);const I=n&&S!=="admin"&&S!=="courier"&&(t||!0);return console.log("Profile Dropdown Debug:",{token:!!n,role:S,currentUserProfile:!!t,showProfileDropdown:I,fallbackUsed:!t&&!!n}),x.jsxs(x.Fragment,{children:[I&&x.jsx("div",{style:{position:"fixed",top:"14px",right:"70px",zIndex:99998},children:x.jsx(hV,{onLogout:_,user:t})}),n&&S!=="admin"&&S!=="courier"&&t&&x.jsx(cV,{user:t,isVisible:!0}),x.jsx("main",{children:x.jsxs(yk,{children:[x.jsx(tr,{path:"/track-package",element:x.jsx(aV,{idToken:n})}),n?n&&S==="admin"?x.jsxs(x.Fragment,{children:[x.jsx(tr,{path:"/admin",element:x.jsx(gE,{idToken:n,onLogout:_})}),x.jsx(tr,{path:"*",element:x.jsx(gE,{idToken:n,onLogout:_})})]}):n&&S==="courier"?x.jsxs(x.Fragment,{children:[x.jsx(tr,{path:"/courier",element:x.jsx(MT,{idToken:n})}),x.jsx(tr,{path:"*",element:x.jsx(MT,{idToken:n})})]}):x.jsxs(x.Fragment,{children:[x.jsx(tr,{path:"/tracking",element:x.jsx(rV,{idToken:n,packageId:1})}),x.jsx(tr,{path:"/chat",element:x.jsx(aD,{idToken:n})}),x.jsx(tr,{path:"*",element:x.jsx(im,{})})]}):x.jsxs(x.Fragment,{children:[x.jsx(tr,{path:"/",element:x.jsx(im,{})}),x.jsx(tr,{path:"*",element:x.jsx(im,{})})]})]})}),a&&(console.log("Rendering login modal, showLoginModal:",a)||x.jsx("section",{className:"login-section",onClick:O=>{O.target===O.currentTarget&&u(!1)},children:x.jsxs("div",{style:{position:"relative",padding:"20px"},children:[x.jsx("button",{onClick:()=>u(!1),style:{position:"absolute",top:"15px",right:"15px",background:"transparent",color:"#666",border:"none",borderRadius:"50%",width:"35px",height:"35px",fontSize:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",zIndex:"10001"},onMouseOver:O=>{O.target.style.background="#f0f0f0",O.target.style.color="#333"},onMouseOut:O=>{O.target.style.background="transparent",O.target.style.color="#666"},children:""}),x.jsx(lV,{onLogin:O=>{e(O),u(!1)}})]})})),d&&(console.log("Register modal should be visible")||x.jsx("section",{className:"register-section",onClick:O=>{O.target===O.currentTarget&&g(!1)},children:x.jsxs("div",{style:{position:"relative",padding:"20px"},children:[x.jsx("button",{onClick:()=>g(!1),style:{position:"absolute",top:"15px",right:"15px",background:"transparent",color:"#666",border:"none",borderRadius:"50%",width:"35px",height:"35px",fontSize:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",zIndex:"10001"},onMouseOver:O=>{O.target.style.background="#f0f0f0",O.target.style.color="#333"},onMouseOut:O=>{O.target.style.background="transparent",O.target.style.color="#666"},children:""}),x.jsx(uV,{onRegisterSuccess:()=>{g(!1),u(!0)}})]})}))]})}function fV(){return x.jsx(Bk,{children:x.jsx(dV,{})})}A1.createRoot(document.getElementById("root")).render(x.jsx(dv.StrictMode,{children:x.jsx(fV,{})}));
